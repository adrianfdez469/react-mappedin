/*! For license information please see main.e2aa0b5e.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},143:function(e,t,n){"use strict";n.d(t,{a:function(){return h},b:function(){return d},c:function(){return p},d:function(){return f},e:function(){return v},f:function(){return g},g:function(){return y},h:function(){return x}});var i=n(762),r=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,c=function(e,t,n){return t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h=function(e,t){return function(){return e&&(t=e(e=0)),t}},d=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},p=function(e){return function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t){var r,l=(0,i.Z)(s(t));try{var c=function(){var i=r.value;!u.call(e,i)&&"default"!==i&&o(e,i,{get:function(){return t[i]},enumerable:!(n=a(t,i))||n.enumerable})};for(l.s();!(r=l.n()).done;)c()}catch(h){l.e(h)}finally{l.f()}}return e}(function(e){return o(e,"__esModule",{value:!0})}(o(null!=e?r(l(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},f=function(e,t,n){return c(e,"symbol"!=typeof t?t+"":t,n),n},m=function(e,t,n){if(!t.has(e))throw TypeError("Cannot "+n)},v=function(e,t,n){return m(e,t,"read from private field"),n?n.call(e):t.get(e)},g=function(e,t,n){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},y=function(e,t,n,i){return m(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n},x=function(e,t,n){return m(e,t,"access private method"),n}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,o){for(var a,s,l=r(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var h=0;h<s.length;h++)i.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},463:function(e,t,n){"use strict";var i=n(791),r=n(725),o=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(a(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function v(e,t,n,i,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!p.call(m,e)||!p.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,M=60106,E=60107,q=60108,T=60114,S=60109,P=60110,A=60112,C=60113,L=60120,O=60115,I=60116,k=60121,N=60128,R=60129,D=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),M=z("react.portal"),E=z("react.fragment"),q=z("react.strict_mode"),T=z("react.profiler"),S=z("react.provider"),P=z("react.context"),A=z("react.forward_ref"),C=z("react.suspense"),L=z("react.suspense_list"),O=z("react.memo"),I=z("react.lazy"),k=z("react.block"),z("react.scope"),N=z("react.opaque.id"),R=z("react.debug_trace_mode"),D=z("react.offscreen"),B=z("react.legacy_hidden")}var F,U="function"===typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function H(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var V=!1;function G(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s])return"\n"+r[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function W(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case M:return"Portal";case T:return"Profiler";case q:return"StrictMode";case C:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return X(e.type);case k:return X(e._render);case I:t=e._payload,e=e._init;try{return X(e(t))}catch(n){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Z(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,n):t.hasOwnProperty("defaultValue")&&re(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function re(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ue(e,t){var n=Y(t.value),i=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ve,ge=(ve=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||xe.hasOwnProperty(e)&&xe[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=_e(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(xe).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xe[t]=xe[e]}))}));var Me=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function qe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Pe=null,Ae=null;function Ce(e){if(e=ir(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=or(t),Se(e.stateNode,e.type,t))}}function Le(e){Pe?Ae?Ae.push(e):Ae=[e]:Pe=e}function Oe(){if(Pe){var e=Pe,t=Ae;if(Ae=Pe=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function ke(e,t,n,i,r){return e(t,n,i,r)}function Ne(){}var Re=Ie,De=!1,Be=!1;function ze(){null===Pe&&null===Ae||(Ne(),Oe())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var i=or(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ue=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ve){Ue=!1}function He(e,t,n,i,r,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ve=!1,Ge=null,We=!1,Xe=null,Ye={onError:function(e){Ve=!0,Ge=e}};function Ze(e,t,n,i,r,o,a,s,l){Ve=!1,Ge=null,He.apply(Ye,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Je(e)!==e)throw Error(a(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ke(r),e;if(o===i)return Ke(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,it,rt,ot=!1,at=[],st=null,lt=null,ut=null,ct=new Map,ht=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,i,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function vt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e=ft(t,n,i,r,o),null!==t&&(null!==(t=ir(t))&&nt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function gt(e){var t=nr(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){it(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ir(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function xt(e,t,n){yt(e)&&n.delete(t)}function bt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ir(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&yt(st)&&(st=null),null!==lt&&yt(lt)&&(lt=null),null!==ut&&yt(ut)&&(ut=null),ct.forEach(xt),ht.forEach(xt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function wt(e){function t(t){return _t(t,e)}if(0<at.length){_t(at[0],e);for(var n=1;n<at.length;n++){var i=at[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==st&&_t(st,e),null!==lt&&_t(lt,e),null!==ut&&_t(ut,e),ct.forEach(t),ht.forEach(t),n=0;n<dt.length;n++)(i=dt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)gt(n),null===n.blockedOn&&dt.shift()}function Mt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:Mt("Animation","AnimationEnd"),animationiteration:Mt("Animation","AnimationIteration"),animationstart:Mt("Animation","AnimationStart"),transitionend:Mt("Transition","TransitionEnd")},qt={},Tt={};function St(e){if(qt[e])return qt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return qt[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Pt=St("animationend"),At=St("animationiteration"),Ct=St("animationstart"),Lt=St("transitionend"),Ot=new Map,It=new Map,kt=["abort","abort",Pt,"animationEnd",At,"animationIteration",Ct,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lt,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),It.set(i,t),Ot.set(i,r),u(r,[i])}}(0,o.unstable_now)();var Rt=8;function Dt(e){if(0!==(1&e))return Rt=15,1;if(0!==(2&e))return Rt=14,2;if(0!==(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!==(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!==(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!==(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!==(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!==(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Rt=0;var i=0,r=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)i=o,r=Rt=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(i=Dt(l),r=Rt):0!==(s&=o)&&(i=Dt(s),r=Rt)}else 0!==(o=n&~a)?(i=Dt(o),r=Rt):0!==s&&(i=Dt(s),r=Rt);if(0===i)return 0;if(i=n&((0>(i=31-Vt(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0===(t&a)){if(Dt(t),r<=Rt)return t;Rt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-Vt(t)),i|=e[n],t&=~r;return i}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Ft(10,t):e;case 10:return 0===(e=Ut(192&~t))?Ft(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ut(e){return e&-e}function jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Vt(t)]=n}var Vt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var Xt=o.unstable_UserBlockingPriority,Yt=o.unstable_runWithPriority,Zt=!0;function Jt(e,t,n,i){De||Ne();var r=Kt,o=De;De=!0;try{ke(r,e,t,n,i)}finally{(De=o)||ze()}}function Qt(e,t,n,i){Yt(Xt,Kt.bind(null,e,t,n,i))}function Kt(e,t,n,i){var r;if(Zt)if((r=0===(4&t))&&0<at.length&&-1<pt.indexOf(e))e=ft(null,e,t,n,i),at.push(e);else{var o=$t(e,t,n,i);if(null===o)r&&mt(e,i);else{if(r){if(-1<pt.indexOf(e))return e=ft(o,e,t,n,i),void at.push(e);if(function(e,t,n,i,r){switch(t){case"focusin":return st=vt(st,e,t,n,i,r),!0;case"dragenter":return lt=vt(lt,e,t,n,i,r),!0;case"mouseover":return ut=vt(ut,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return ct.set(o,vt(ct.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ht.set(o,vt(ht.get(o)||null,e,t,n,i,r)),!0}return!1}(o,e,t,n,i))return;mt(e,i)}Ni(e,t,i,null,n)}}}function $t(e,t,n,i){var r=Te(i);if(null!==(r=nr(r))){var o=Je(r);if(null===o)r=null;else{var a=o.tag;if(13===a){if(null!==(r=Qe(o)))return r;r=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Ni(e,t,i,r,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,i=n.length,r="value"in en?en.value:en.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return nn=r.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function ln(e){function t(t,n,i,r,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?an:sn,this.isPropagationStopped=sn,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,cn,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=ln(dn),fn=r({},dn,{view:0,detail:0}),mn=ln(fn),vn=r({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(un=e.screenX-hn.screenX,cn=e.screenY-hn.screenY):cn=un=0,hn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=ln(vn),yn=ln(r({},vn,{dataTransfer:0})),xn=ln(r({},fn,{relatedTarget:0})),bn=ln(r({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=r({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=ln(_n),Mn=ln(r({},dn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Pn(){return Sn}var An=r({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?qn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=ln(An),Ln=ln(r({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=ln(r({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),In=ln(r({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=r({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=ln(kn),Rn=[9,13,27,32],Dn=h&&"CompositionEvent"in window,Bn=null;h&&"documentMode"in document&&(Bn=document.documentMode);var zn=h&&"TextEvent"in window&&!Bn,Fn=h&&(!Dn||Bn&&8<Bn&&11>=Bn),Un=String.fromCharCode(32),jn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Yn(e,t,n,i){Le(i),0<(t=Di(t,"onChange")).length&&(n=new pn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Zn=null,Jn=null;function Qn(e){Ai(e,0)}function Kn(e){if(Q(rr(e)))return e}function $n(e,t){if("change"===e)return t}var ei=!1;if(h){var ti;if(h){var ni="oninput"in document;if(!ni){var ii=document.createElement("div");ii.setAttribute("oninput","return;"),ni="function"===typeof ii.oninput}ti=ni}else ti=!1;ei=ti&&(!document.documentMode||9<document.documentMode)}function ri(){Zn&&(Zn.detachEvent("onpropertychange",oi),Jn=Zn=null)}function oi(e){if("value"===e.propertyName&&Kn(Jn)){var t=[];if(Yn(t,Jn,e,Te(e)),e=Qn,De)e(t);else{De=!0;try{Ie(e,t)}finally{De=!1,ze()}}}}function ai(e,t,n){"focusin"===e?(ri(),Jn=n,(Zn=t).attachEvent("onpropertychange",oi)):"focusout"===e&&ri()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Jn)}function li(e,t){if("click"===e)return Kn(t)}function ui(e,t){if("input"===e||"change"===e)return Kn(t)}var ci="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hi=Object.prototype.hasOwnProperty;function di(e,t){if(ci(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!hi.call(t,n[i])||!ci(e[n[i]],t[n[i]]))return!1;return!0}function pi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fi(e,t){var n,i=pi(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pi(i)}}function mi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function gi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yi=h&&"documentMode"in document&&11>=document.documentMode,xi=null,bi=null,_i=null,wi=!1;function Mi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wi||null==xi||xi!==K(i)||("selectionStart"in(i=xi)&&gi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&di(_i,i)||(_i=i,0<(i=Di(bi,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=xi)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(kt,2);for(var Ei="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),qi=0;qi<Ei.length;qi++)It.set(Ei[qi],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Si=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Pi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,l,u){if(Ze.apply(this,arguments),Ve){if(!Ve)throw Error(a(198));var c=Ge;Ve=!1,Ge=null,We||(We=!0,Xe=c)}}(i,t,void 0,e),e.currentTarget=null}function Ai(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Pi(r,s,u),o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Pi(r,s,u),o=l}}}if(We)throw e=Xe,We=!1,Xe=null,e}function Ci(e,t){var n=ar(t),i=e+"__bubble";n.has(i)||(ki(t,e,2,!1),n.add(i))}var Li="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){e[Li]||(e[Li]=!0,s.forEach((function(t){Si.has(t)||Ii(t,!1,e,null),Ii(t,!0,e,null)})))}function Ii(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==i&&!t&&Si.has(e)){if("scroll"!==e)return;r|=2,o=i}var a=ar(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(r|=4),ki(o,e,r,t),a.add(s))}function ki(e,t,n,i){var r=It.get(t);switch(void 0===r?2:r){case 0:r=Jt;break;case 1:r=Qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ni(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=nr(s)))return;if(5===(l=a.tag)||6===l){i=o=a;continue e}s=s.parentNode}}i=i.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{Re(e,t,n)}finally{Be=!1,ze()}}((function(){var i=o,r=Te(n),a=[];e:{var s=Ot.get(e);if(void 0!==s){var l=pn,u=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=xn;break;case"focusout":u="blur",l=xn;break;case"beforeblur":case"afterblur":l=xn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Pt:case At:case Ct:l=bn;break;case Lt:l=In;break;case"scroll":l=mn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ln}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Fe(f,d))&&c.push(Ri(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,r),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!nr(u)&&!u[er])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?nr(u):null)&&(u!==(h=Je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=gn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ln,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:rr(l),p=null==u?s:rr(u),(s=new c(m,f+"leave",l,n,r)).target=h,s.relatedTarget=p,m=null,nr(r)===i&&((c=new c(d,f+"enter",u,n,r)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=Bi(p))f++;for(p=0,m=d;m;m=Bi(m))p++;for(;0<f-p;)c=Bi(c),f--;for(;0<p-f;)d=Bi(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Bi(c),d=Bi(d)}c=null}else c=null;null!==l&&zi(a,s,l,c,!1),null!==u&&null!==h&&zi(a,h,u,c,!0)}if("select"===(l=(s=i?rr(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=$n;else if(Xn(s))if(ei)v=ui;else{v=si;var g=ai}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=li);switch(v&&(v=v(e,i))?Yn(a,v,n,r):(g&&g(e,s,i),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&re(s,"number",s.value)),g=i?rr(i):window,e){case"focusin":(Xn(g)||"true"===g.contentEditable)&&(xi=g,bi=i,_i=null);break;case"focusout":_i=bi=xi=null;break;case"mousedown":wi=!0;break;case"contextmenu":case"mouseup":case"dragend":wi=!1,Mi(a,n,r);break;case"selectionchange":if(yi)break;case"keydown":case"keyup":Mi(a,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Gn?Hn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Gn&&(y=rn()):(tn="value"in(en=r)?en.value:en.textContent,Gn=!0)),0<(g=Di(i,x)).length&&(x=new Mn(x,e,null,n,r),a.push({event:x,listeners:g}),y?x.data=y:null!==(y=Vn(n))&&(x.data=y))),(y=zn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Dn&&Hn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Di(i,"onBeforeInput")).length&&(r=new Mn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Ai(a,t)}))}function Ri(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Di(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Fe(e,n))&&i.unshift(Ri(e,o,r)),null!=(o=Fe(e,t))&&i.push(Ri(e,o,r))),e=e.return}return i}function Bi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zi(e,t,n,i,r){for(var o=t._reactName,a=[];null!==n&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==u&&(s=u,r?null!=(l=Fe(n,o))&&a.unshift(Ri(n,l,s)):r||null!=(l=Fe(n,o))&&a.push(Ri(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Fi(){}var Ui=null,ji=null;function Hi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gi="function"===typeof setTimeout?setTimeout:void 0,Wi="function"===typeof clearTimeout?clearTimeout:void 0;function Xi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Yi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Zi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ji=0;var Qi=Math.random().toString(36).slice(2),Ki="__reactFiber$"+Qi,$i="__reactProps$"+Qi,er="__reactContainer$"+Qi,tr="__reactEvents$"+Qi;function nr(e){var t=e[Ki];if(t)return t;for(var n=e.parentNode;n;){if(t=n[er]||n[Ki]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Zi(e);null!==e;){if(n=e[Ki])return n;e=Zi(e)}return t}n=(e=n).parentNode}return null}function ir(e){return!(e=e[Ki]||e[er])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function rr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function or(e){return e[$i]||null}function ar(e){var t=e[tr];return void 0===t&&(t=e[tr]=new Set),t}var sr=[],lr=-1;function ur(e){return{current:e}}function cr(e){0>lr||(e.current=sr[lr],sr[lr]=null,lr--)}function hr(e,t){lr++,sr[lr]=e.current,e.current=t}var dr={},pr=ur(dr),fr=ur(!1),mr=dr;function vr(e,t){var n=e.type.contextTypes;if(!n)return dr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yr(){cr(fr),cr(pr)}function xr(e,t,n){if(pr.current!==dr)throw Error(a(168));hr(pr,t),hr(fr,n)}function br(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in e))throw Error(a(108,X(t)||"Unknown",o));return r({},n,i)}function _r(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,mr=pr.current,hr(pr,e),hr(fr,fr.current),!0}function wr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=br(e,t,mr),i.__reactInternalMemoizedMergedChildContext=e,cr(fr),cr(pr),hr(pr,e)):cr(fr),hr(fr,n)}var Mr=null,Er=null,qr=o.unstable_runWithPriority,Tr=o.unstable_scheduleCallback,Sr=o.unstable_cancelCallback,Pr=o.unstable_shouldYield,Ar=o.unstable_requestPaint,Cr=o.unstable_now,Lr=o.unstable_getCurrentPriorityLevel,Or=o.unstable_ImmediatePriority,Ir=o.unstable_UserBlockingPriority,kr=o.unstable_NormalPriority,Nr=o.unstable_LowPriority,Rr=o.unstable_IdlePriority,Dr={},Br=void 0!==Ar?Ar:function(){},zr=null,Fr=null,Ur=!1,jr=Cr(),Hr=1e4>jr?Cr:function(){return Cr()-jr};function Vr(){switch(Lr()){case Or:return 99;case Ir:return 98;case kr:return 97;case Nr:return 96;case Rr:return 95;default:throw Error(a(332))}}function Gr(e){switch(e){case 99:return Or;case 98:return Ir;case 97:return kr;case 96:return Nr;case 95:return Rr;default:throw Error(a(332))}}function Wr(e,t){return e=Gr(e),qr(e,t)}function Xr(e,t,n){return e=Gr(e),Tr(e,t,n)}function Yr(){if(null!==Fr){var e=Fr;Fr=null,Sr(e)}Zr()}function Zr(){if(!Ur&&null!==zr){Ur=!0;var e=0;try{var t=zr;Wr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zr=null}catch(n){throw null!==zr&&(zr=zr.slice(e+1)),Tr(Or,Yr),n}finally{Ur=!1}}}var Jr=_.ReactCurrentBatchConfig;function Qr(e,t){if(e&&e.defaultProps){for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Kr=ur(null),$r=null,eo=null,to=null;function no(){to=eo=$r=null}function io(e){var t=Kr.current;cr(Kr),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function oo(e,t){$r=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Da=!0),e.firstContext=null)}function ao(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===$r)throw Error(a(308));eo=t,$r.dependencies={lanes:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var so=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ho(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fo(e,t,n,i){var o=e.updateQueue;so=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==a){for(d=o.baseState,s=0,h=c=u=null;;){l=a.lane;var p=a.eventTime;if((i&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(l=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,l);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=m.payload)?f.call(p,d,l):f)||void 0===l)break e;d=r({},d,l);break e;case 2:so=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,u=d):h=h.next=p,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(u=d),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Us|=s,e.lanes=s,e.memoizedState=d}}function mo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var vo=(new i.Component).refs;function go(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:r({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=dl(),r=pl(e),o=co(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),fl(e,r,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=dl(),r=pl(e),o=co(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),ho(e,o),fl(e,r,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),i=pl(e),r=co(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ho(e,r),fl(e,i,n)}};function xo(e,t,n,i,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!di(n,i)||!di(r,o))}function bo(e,t,n){var i=!1,r=dr,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(r=gr(t)?mr:pr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?vr(e,r):dr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=vo,lo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=ao(o):(o=gr(t)?mr:pr.current,r.context=vr(e,o)),fo(e,n,r,i),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&yo.enqueueReplaceState(r,r.state,null),fo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4)}var Mo=Array.isArray;function Eo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=i.refs;t===vo&&(t=i.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function To(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Wl(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags=2,n):i:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Jl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=Eo(e,t,n),i.return=e,i):((i=Xl(n.type,n.key,n.props,null,e.mode,i)).ref=Eo(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ql(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Yl(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Xl(t.type,t.key,t.props,null,e.mode,n)).ref=Eo(e,null,t),n.return=e,n;case M:return(t=Ql(t,e.mode,n)).return=e,t}if(Mo(t)||j(t))return(t=Yl(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?n.type===E?h(e,t,n.props.children,i,r):u(e,t,n,i):null;case M:return n.key===r?c(e,t,n,i):null}if(Mo(n)||j(n))return null!==r?null:h(e,t,n,i,null);qo(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return e=e.get(null===i.key?n:i.key)||null,i.type===E?h(t,e,i.props.children,r,i.key):u(t,e,i,r);case M:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(Mo(i)||j(i))return h(t,e=e.get(n)||null,i,r,null);qo(t,i)}return null}function m(r,a,s,l){for(var u=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=p(r,h,s[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(r,h),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(r,h),u;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=i(r,h);m<s.length;m++)null!==(v=f(h,r,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(r,e)})),u}function v(r,s,l,u){var c=j(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var x=p(r,m,y.value,u);if(null===x){null===m&&(m=g);break}e&&m&&null===x.alternate&&t(r,m),s=o(x,s,v),null===h?c=x:h.sibling=x,h=x,m=g}if(y.done)return n(r,m),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(r,y.value,u))&&(s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=i(r,m);!y.done;v++,y=l.next())null!==(y=f(m,r,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(r,e)})),c}return function(e,i,o,l){var u="object"===typeof o&&null!==o&&o.type===E&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,u=i;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===E){n(e,u.sibling),(i=r(u,o.props.children)).return=e,e=i;break e}}else if(u.elementType===o.type){n(e,u.sibling),(i=r(u,o.props)).ref=Eo(e,u,o),i.return=e,e=i;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===E?((i=Yl(o.props.children,e.mode,l,o.key)).return=e,e=i):((l=Xl(o.type,o.key,o.props,null,e.mode,l)).ref=Eo(e,i,o),l.return=e,e=l)}return s(e);case M:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(e,i.sibling),(i=r(i,o.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Ql(o,e.mode,l)).return=e,e=i}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,o)).return=e,e=i):(n(e,i),(i=Jl(o,e.mode,l)).return=e,e=i),s(e);if(Mo(o))return m(e,i,o,l);if(j(o))return v(e,i,o,l);if(c&&qo(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,X(e.type)||"Component"))}return n(e,i)}}var So=To(!0),Po=To(!1),Ao={},Co=ur(Ao),Lo=ur(Ao),Oo=ur(Ao);function Io(e){if(e===Ao)throw Error(a(174));return e}function ko(e,t){switch(hr(Oo,t),hr(Lo,e),hr(Co,Ao),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}cr(Co),hr(Co,t)}function No(){cr(Co),cr(Lo),cr(Oo)}function Ro(e){Io(Oo.current);var t=Io(Co.current),n=fe(t,e.type);t!==n&&(hr(Lo,e),hr(Co,n))}function Do(e){Lo.current===e&&(cr(Co),cr(Lo))}var Bo=ur(0);function zo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=null,Uo=null,jo=!1;function Ho(e,t){var n=Vl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Vo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Go(e){if(jo){var t=Uo;if(t){var n=t;if(!Vo(e,t)){if(!(t=Yi(n.nextSibling))||!Vo(e,t))return e.flags=-1025&e.flags|2,jo=!1,void(Fo=e);Ho(Fo,n)}Fo=e,Uo=Yi(t.firstChild)}else e.flags=-1025&e.flags|2,jo=!1,Fo=e}}function Wo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fo=e}function Xo(e){if(e!==Fo)return!1;if(!jo)return Wo(e),jo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vi(t,e.memoizedProps))for(t=Uo;t;)Ho(e,t),t=Yi(t.nextSibling);if(Wo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Uo=Yi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Uo=null}}else Uo=Fo?Yi(e.stateNode.nextSibling):null;return!0}function Yo(){Uo=Fo=null,jo=!1}var Zo=[];function Jo(){for(var e=0;e<Zo.length;e++)Zo[e]._workInProgressVersionPrimary=null;Zo.length=0}var Qo=_.ReactCurrentDispatcher,Ko=_.ReactCurrentBatchConfig,$o=0,ea=null,ta=null,na=null,ia=!1,ra=!1;function oa(){throw Error(a(321))}function aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ci(e[n],t[n]))return!1;return!0}function sa(e,t,n,i,r,o){if($o=o,ea=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qo.current=null===e||null===e.memoizedState?Ia:ka,e=n(i,r),ra){o=0;do{if(ra=!1,!(25>o))throw Error(a(301));o+=1,na=ta=null,t.updateQueue=null,Qo.current=Na,e=n(i,r)}while(ra)}if(Qo.current=Oa,t=null!==ta&&null!==ta.next,$o=0,na=ta=ea=null,ia=!1,t)throw Error(a(300));return e}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===na?ea.memoizedState=na=e:na=na.next=e,na}function ua(){if(null===ta){var e=ea.alternate;e=null!==e?e.memoizedState:null}else e=ta.next;var t=null===na?ea.memoizedState:na.next;if(null!==t)na=t,ta=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ta=e).memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},null===na?ea.memoizedState=na=e:na=na.next=e}return na}function ca(e,t){return"function"===typeof t?t(e):t}function ha(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=ta,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=s=o=null,u=r;do{var c=u.lane;if(($o&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),i=u.eagerReducer===e?u.eagerState:e(i,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=h,o=i):l=l.next=h,ea.lanes|=c,Us|=c}u=u.next}while(null!==u&&u!==r);null===l?o=i:l.next=s,ci(i,t.memoizedState)||(Da=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function da(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);ci(o,t.memoizedState)||(Da=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function pa(e,t,n){var i=t._getVersion;i=i(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===i:(e=e.mutableReadLanes,(e=($o&e)===e)&&(t._workInProgressVersionPrimary=i,Zo.push(t))),e)return n(t._source);throw Zo.push(t),Error(a(350))}function fa(e,t,n,i){var r=Is;if(null===r)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Qo.current,u=l.useState((function(){return pa(r,t,n)})),c=u[1],h=u[0];u=na;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var v=ea;return e.memoizedState={refs:p,source:t,subscribe:i},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!ci(s,e)){e=n(t._source),ci(h,e)||(c(e),e=pl(v),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var i=r.entanglements,a=e;0<a;){var l=31-Vt(a),u=1<<l;i[l]|=e,a&=~u}}}),[n,t,i]),l.useEffect((function(){return i(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var i=pl(v);r.mutableReadLanes|=i&r.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,i]),ci(f,n)&&ci(m,t)&&ci(d,i)||((e={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:h}).dispatch=c=La.bind(null,ea,e),u.queue=e,u.baseQueue=null,h=pa(r,t,n),u.memoizedState=u.baseState=h),h}function ma(e,t,n){return fa(ua(),e,t,n)}function va(e){var t=la();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=La.bind(null,ea,e),[t.memoizedState,e]}function ga(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ea.updateQueue)?(t={lastEffect:null},ea.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function ya(e){return e={current:e},la().memoizedState=e}function xa(){return ua().memoizedState}function ba(e,t,n,i){var r=la();ea.flags|=e,r.memoizedState=ga(1|t,n,void 0,void 0===i?null:i)}function _a(e,t,n,i){var r=ua();i=void 0===i?null:i;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==i&&aa(i,a.deps))return void ga(t,n,o,i)}ea.flags|=e,r.memoizedState=ga(1|t,n,o,i)}function wa(e,t){return ba(516,4,e,t)}function Ma(e,t){return _a(516,4,e,t)}function Ea(e,t){return _a(4,2,e,t)}function qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ta(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_a(4,2,qa.bind(null,t,e),n)}function Sa(){}function Pa(e,t){var n=ua();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&aa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Aa(e,t){var n=ua();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&aa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ca(e,t){var n=Vr();Wr(98>n?98:n,(function(){e(!0)})),Wr(97<n?97:n,(function(){var n=Ko.transition;Ko.transition=1;try{e(!1),t()}finally{Ko.transition=n}}))}function La(e,t,n){var i=dl(),r=pl(e),o={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ea||null!==a&&a===ea)ra=ia=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,ci(l,s))return}catch(u){}fl(e,r,i)}}var Oa={readContext:ao,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useMutableSource:oa,useOpaqueIdentifier:oa,unstable_isNewReconciler:!1},Ia={readContext:ao,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:ao,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=la();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=la();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=La.bind(null,ea,e),[i.memoizedState,e]},useRef:ya,useState:va,useDebugValue:Sa,useDeferredValue:function(e){var t=va(e),n=t[0],i=t[1];return wa((function(){var t=Ko.transition;Ko.transition=1;try{i(e)}finally{Ko.transition=t}}),[e]),n},useTransition:function(){var e=va(!1),t=e[0];return ya(e=Ca.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var i=la();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fa(i,e,t,n)},useOpaqueIdentifier:function(){if(jo){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Ji++).toString(36))),Error(a(355))})),n=va(t)[1];return 0===(2&ea.mode)&&(ea.flags|=516,ga(5,(function(){n("r:"+(Ji++).toString(36))}),void 0,null)),t}return va(t="r:"+(Ji++).toString(36)),t},unstable_isNewReconciler:!1},ka={readContext:ao,useCallback:Pa,useContext:ao,useEffect:Ma,useImperativeHandle:Ta,useLayoutEffect:Ea,useMemo:Aa,useReducer:ha,useRef:xa,useState:function(){return ha(ca)},useDebugValue:Sa,useDeferredValue:function(e){var t=ha(ca),n=t[0],i=t[1];return Ma((function(){var t=Ko.transition;Ko.transition=1;try{i(e)}finally{Ko.transition=t}}),[e]),n},useTransition:function(){var e=ha(ca)[0];return[xa().current,e]},useMutableSource:ma,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},Na={readContext:ao,useCallback:Pa,useContext:ao,useEffect:Ma,useImperativeHandle:Ta,useLayoutEffect:Ea,useMemo:Aa,useReducer:da,useRef:xa,useState:function(){return da(ca)},useDebugValue:Sa,useDeferredValue:function(e){var t=da(ca),n=t[0],i=t[1];return Ma((function(){var t=Ko.transition;Ko.transition=1;try{i(e)}finally{Ko.transition=t}}),[e]),n},useTransition:function(){var e=da(ca)[0];return[xa().current,e]},useMutableSource:ma,useOpaqueIdentifier:function(){return da(ca)[0]},unstable_isNewReconciler:!1},Ra=_.ReactCurrentOwner,Da=!1;function Ba(e,t,n,i){t.child=null===e?Po(t,null,n,i):So(t,e.child,n,i)}function za(e,t,n,i,r){n=n.render;var o=t.ref;return oo(t,r),i=sa(e,t,n,i,o,r),null===e||Da?(t.flags|=1,Ba(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,os(e,t,r))}function Fa(e,t,n,i,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Gl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xl(n.type,null,i,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ua(e,t,a,i,r,o))}return a=e.child,0===(r&o)&&(r=a.memoizedProps,(n=null!==(n=n.compare)?n:di)(r,i)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Wl(a,i)).ref=t.ref,e.return=t,t.child=e)}function Ua(e,t,n,i,r,o){if(null!==e&&di(e.memoizedProps,i)&&e.ref===t.ref){if(Da=!1,0===(o&r))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Da=!0)}return Va(e,t,n,i,o)}function ja(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wl(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(t,e),null;t.memoizedState={baseLanes:0},wl(t,null!==o?o.baseLanes:n)}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,wl(t,i);return Ba(e,t,r,n),t.child}function Ha(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Va(e,t,n,i,r){var o=gr(n)?mr:pr.current;return o=vr(t,o),oo(t,r),n=sa(e,t,n,i,o,r),null===e||Da?(t.flags|=1,Ba(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,os(e,t,r))}function Ga(e,t,n,i,r){if(gr(n)){var o=!0;_r(t)}else o=!1;if(oo(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,i),wo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=ao(u):u=vr(t,u=gr(n)?mr:pr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==u)&&_o(t,a,i,u),so=!1;var d=t.memoizedState;a.state=d,fo(t,i,a,r),l=t.memoizedState,s!==i||d!==l||fr.current||so?("function"===typeof c&&(go(t,n,c,i),l=t.memoizedState),(s=so||xo(t,n,s,i,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=s):("function"===typeof a.componentDidMount&&(t.flags|=4),i=!1)}else{a=t.stateNode,uo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Qr(t.type,s),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ao(l):l=vr(t,l=gr(n)?mr:pr.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&_o(t,a,i,l),so=!1,d=t.memoizedState,a.state=d,fo(t,i,a,r);var f=t.memoizedState;s!==h||d!==f||fr.current||so?("function"===typeof p&&(go(t,n,p,i),f=t.memoizedState),(u=so||xo(t,n,u,i,d,f,l))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),i=!1)}return Wa(e,t,n,i,o,r)}function Wa(e,t,n,i,r,o){Ha(e,t);var a=0!==(64&t.flags);if(!i&&!a)return r&&wr(t,n,!1),os(e,t,o);i=t.stateNode,Ra.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,s,o)):Ba(e,t,s,o),t.memoizedState=i.state,r&&wr(t,n,!0),t.child}function Xa(e){var t=e.stateNode;t.pendingContext?xr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xr(0,t.context,!1),ko(e,t.containerInfo)}var Ya,Za,Ja,Qa={dehydrated:null,retryLane:0};function Ka(e,t,n){var i,r=t.pendingProps,o=Bo.current,a=!1;return(i=0!==(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),hr(Bo,1&o),null===e?(void 0!==r.fallback&&Go(t),e=r.children,o=r.fallback,a?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qa,e):"number"===typeof r.unstable_expectedLoadTime?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qa,t.lanes=33554432,e):((n=Zl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(r=ts(e,t,r.children,r.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Qa,r):(n=es(e,t,r.children,n),t.memoizedState=null,n))}function $a(e,t,n,i){var r=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Zl(t,r,0,null),n=Yl(n,r,i,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,i){var r=e.child;return e=r.sibling,n=Wl(r,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,i,r){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wl(a,s),null!==e?i=Wl(e,i):(i=Yl(i,o,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ro(e.return,t)}function is(e,t,n,i,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.lastEffect=o)}function rs(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(Ba(e,t,i.children,n),0!==(2&(i=Bo.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(hr(Bo,i),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===zo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),is(t,!1,r,n,o,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===zo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}is(t,!0,n,null,o,t.lastEffect);break;case"together":is(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Wl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!jo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ss(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gr(t.type)&&yr(),null;case 3:return No(),cr(fr),cr(pr),Jo(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Xo(t)?t.flags|=4:i.hydrate||(t.flags|=256)),null;case 5:Do(t);var o=Io(Oo.current);if(n=t.type,null!==e&&null!=t.stateNode)Za(e,t,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(a(166));return null}if(e=Io(Co.current),Xo(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[Ki]=t,i[$i]=s,n){case"dialog":Ci("cancel",i),Ci("close",i);break;case"iframe":case"object":case"embed":Ci("load",i);break;case"video":case"audio":for(e=0;e<Ti.length;e++)Ci(Ti[e],i);break;case"source":Ci("error",i);break;case"img":case"image":case"link":Ci("error",i),Ci("load",i);break;case"details":Ci("toggle",i);break;case"input":ee(i,s),Ci("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ci("invalid",i);break;case"textarea":le(i,s),Ci("invalid",i)}for(var u in Ee(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"===typeof o?i.textContent!==o&&(e=["children",o]):"number"===typeof o&&i.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Ci("scroll",i));switch(n){case"input":J(i),ie(i,s,!0);break;case"textarea":J(i),ce(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Fi)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=u.createElement(n,{is:i.is}):(e=u.createElement(n),"select"===n&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,n),e[Ki]=t,e[$i]=i,Ya(e,t),t.stateNode=e,u=qe(n,i),n){case"dialog":Ci("cancel",e),Ci("close",e),o=i;break;case"iframe":case"object":case"embed":Ci("load",e),o=i;break;case"video":case"audio":for(o=0;o<Ti.length;o++)Ci(Ti[o],e);o=i;break;case"source":Ci("error",e),o=i;break;case"img":case"image":case"link":Ci("error",e),Ci("load",e),o=i;break;case"details":Ci("toggle",e),o=i;break;case"input":ee(e,i),o=$(e,i),Ci("invalid",e);break;case"option":o=oe(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=r({},i,{value:void 0}),Ci("invalid",e);break;case"textarea":le(e,i),o=se(e,i),Ci("invalid",e);break;default:o=i}Ee(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ci("scroll",e):null!=h&&b(e,s,h,u))}switch(n){case"input":J(e),ie(e,i,!1);break;case"textarea":J(e),ce(e);break;case"option":null!=i.value&&e.setAttribute("value",""+Y(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ae(e,!!i.multiple,s,!1):null!=i.defaultValue&&ae(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Fi)}Hi(n,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ja(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));n=Io(Oo.current),Io(Co.current),Xo(t)?(i=t.stateNode,n=t.memoizedProps,i[Ki]=t,i.nodeValue!==n&&(t.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Ki]=t,t.stateNode=i)}return null;case 13:return cr(Bo),i=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Xo(t):n=null!==e.memoizedState,i&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Bo.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),null===Is||0===(134217727&Us)&&0===(134217727&js)||yl(Is,Ns))),(i||n)&&(t.flags|=4),null);case 4:return No(),null===e&&Oi(t.stateNode.containerInfo),null;case 10:return io(t),null;case 19:if(cr(Bo),null===(i=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=i.rendering))if(s)as(i,!1);else{if(0!==Bs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=zo(e))){for(t.flags|=64,as(i,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hr(Bo,1&Bo.current|2),t.child}e=e.sibling}null!==i.tail&&Hr()>Ws&&(t.flags|=64,s=!0,as(i,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=zo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!jo)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Hr()-i.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,as(i,!1),t.lanes=33554432);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=i.last)?n.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Hr(),n.sibling=null,t=Bo.current,hr(Bo,s?1&t|2:1&t),n):null;case 23:case 24:return Ml(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ls(e){switch(e.tag){case 1:gr(e.type)&&yr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(No(),cr(fr),cr(pr),Jo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Do(e),null;case 13:return cr(Bo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return cr(Bo),null;case 4:return No(),null;case 10:return io(e),null;case 23:case 24:return Ml(),null;default:return null}}function us(e,t){try{var n="",i=t;do{n+=W(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r}}function cs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ya=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Za=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Io(Co.current);var a,s=null;switch(n){case"input":o=$(e,o),i=$(e,i),s=[];break;case"option":o=oe(e,o),i=oe(e,i),s=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),s=[];break;case"textarea":o=se(e,o),i=se(e,i),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof i.onClick&&(e.onclick=Fi)}for(h in Ee(n,i),n=null,o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var u=o[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var c=i[h];if(u=null!=o?o[h]:void 0,i.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ci("scroll",e),s||u===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===N?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Ja=function(e,t,n,i){n!==i&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Js||(Js=!0,Qs=i),cs(0,t)},n}function ps(e,t,n){(n=co(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return cs(0,t),i(r)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Ks?Ks=new Set([this]):Ks.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fs="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Fl(e,n)}else t.current=null}function vs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Xi(t.stateNode.containerInfo))}throw Error(a(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Dl(n,e),Rl(n,e)),e=i}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(i=n.elementType===n.type?t.memoizedProps:Qr(n.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&mo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}mo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Hi(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var i=n.stateNode;if(t)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=_e("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function xs(e,t){if(Er&&"function"===typeof Er.onCommitFiberUnmount)try{Er.onCommitFiberUnmount(Mr,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Dl(t,n);else{i=t;try{r()}catch(o){Fl(i,o)}}n=n.next}while(n!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Fl(t,o)}break;case 5:ms(t);break;case 4:qs(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(_s(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(a(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_s(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}i?Ms(e,n,t):Es(e,n,t)}function Ms(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Fi));else if(4!==i&&null!==(e=e.child))for(Ms(e,t,n),e=e.sibling;null!==e;)Ms(e,t,n),e=e.sibling}function Es(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function qs(e,t){for(var n,i,r=t,o=!1;;){if(!o){o=r.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===r.tag||6===r.tag){e:for(var s=e,l=r,u=l;;)if(xs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(s=n,l=r.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(xs(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){i=t.memoizedProps;var r=null!==e?e.memoizedProps:i;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[$i]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(n,i),qe(e,r),t=qe(e,i),r=0;r<o.length;r+=2){var s=o[r],l=o[r+1];"style"===s?we(n,l):"dangerouslySetInnerHTML"===s?ge(n,l):"children"===s?ye(n,l):b(n,s,l,t)}switch(e){case"input":ne(n,i);break;case"textarea":ue(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(o=i.value)?ae(n,!!i.multiple,o,!1):e!==!!i.multiple&&(null!=i.defaultValue?ae(n,!!i.multiple,i.defaultValue,!0):ae(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gs=Hr(),ys(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(a(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fs),t.forEach((function(t){var i=jl.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function Ps(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var As=Math.ceil,Cs=_.ReactCurrentDispatcher,Ls=_.ReactCurrentOwner,Os=0,Is=null,ks=null,Ns=0,Rs=0,Ds=ur(0),Bs=0,zs=null,Fs=0,Us=0,js=0,Hs=0,Vs=null,Gs=0,Ws=1/0;function Xs(){Ws=Hr()+500}var Ys,Zs=null,Js=!1,Qs=null,Ks=null,$s=!1,el=null,tl=90,nl=[],il=[],rl=null,ol=0,al=null,sl=-1,ll=0,ul=0,cl=null,hl=!1;function dl(){return 0!==(48&Os)?Hr():-1!==sl?sl:sl=Hr()}function pl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Vr()?1:2;if(0===ll&&(ll=Fs),0!==Jr.transition){0!==ul&&(ul=null!==Vs?Vs.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Vr(),0!==(4&Os)&&98===e?e=Ft(12,ll):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function fl(e,t,n){if(50<ol)throw ol=0,al=null,Error(a(185));if(null===(e=ml(e,t)))return null;Ht(e,t,n),e===Is&&(js|=t,4===Bs&&yl(e,Ns));var i=Vr();1===t?0!==(8&Os)&&0===(48&Os)?xl(e):(vl(e,n),0===Os&&(Xs(),Yr())):(0===(4&Os)||98!==i&&99!==i||(null===rl?rl=new Set([e]):rl.add(e)),vl(e,n)),Vs=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function vl(e,t){for(var n=e.callbackNode,i=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Vt(s),u=1<<l,c=o[l];if(-1===c){if(0===(u&i)||0!==(u&r)){c=t,Dt(u);var h=Rt;o[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(i=Bt(e,e===Is?Ns:0),t=Rt,0===i)null!==n&&(n!==Dr&&Sr(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Dr&&Sr(n)}15===t?(n=xl.bind(null,e),null===zr?(zr=[n],Fr=Tr(Or,Zr)):zr.push(n),n=Dr):14===t?n=Xr(99,xl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Xr(n,gl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gl(e){if(sl=-1,ul=ll=0,0!==(48&Os))throw Error(a(327));var t=e.callbackNode;if(Nl()&&e.callbackNode!==t)return null;var n=Bt(e,e===Is?Ns:0);if(0===n)return null;var i=n,r=Os;Os|=16;var o=Tl();for(Is===e&&Ns===i||(Xs(),El(e,i));;)try{Al();break}catch(l){ql(e,l)}if(no(),Cs.current=o,Os=r,null!==ks?i=0:(Is=null,Ns=0,i=Bs),0!==(Fs&js))El(e,0);else if(0!==i){if(2===i&&(Os|=64,e.hydrate&&(e.hydrate=!1,Xi(e.containerInfo)),0!==(n=zt(e))&&(i=Sl(e,n))),1===i)throw t=zs,El(e,0),yl(e,n),vl(e,Hr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,i){case 0:case 1:throw Error(a(345));case 2:case 5:Ol(e);break;case 3:if(yl(e,n),(62914560&n)===n&&10<(i=Gs+500-Hr())){if(0!==Bt(e,0))break;if(((r=e.suspendedLanes)&n)!==n){dl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Gi(Ol.bind(null,e),i);break}Ol(e);break;case 4:if(yl(e,n),(4186112&n)===n)break;for(i=e.eventTimes,r=-1;0<n;){var s=31-Vt(n);o=1<<s,(s=i[s])>r&&(r=s),n&=~o}if(n=r,10<(n=(120>(n=Hr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*As(n/1960))-n)){e.timeoutHandle=Gi(Ol.bind(null,e),n);break}Ol(e);break;default:throw Error(a(329))}}return vl(e,Hr()),e.callbackNode===t?gl.bind(null,e):null}function yl(e,t){for(t&=~Hs,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),i=1<<n;e[n]=-1,t&=~i}}function xl(e){if(0!==(48&Os))throw Error(a(327));if(Nl(),e===Is&&0!==(e.expiredLanes&Ns)){var t=Ns,n=Sl(e,t);0!==(Fs&js)&&(n=Sl(e,t=Bt(e,t)))}else n=Sl(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,Xi(e.containerInfo)),0!==(t=zt(e))&&(n=Sl(e,t))),1===n)throw n=zs,El(e,0),yl(e,t),vl(e,Hr()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e),vl(e,Hr()),null}function bl(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(Xs(),Yr())}}function _l(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(Xs(),Yr())}}function wl(e,t){hr(Ds,Rs),Rs|=t,Fs|=t}function Ml(){Rs=Ds.current,cr(Ds)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wi(n)),null!==ks)for(n=ks.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&yr();break;case 3:No(),cr(fr),cr(pr),Jo();break;case 5:Do(i);break;case 4:No();break;case 13:case 19:cr(Bo);break;case 10:io(i);break;case 23:case 24:Ml()}n=n.return}Is=e,ks=Wl(e.current,null),Ns=Rs=Fs=t,Bs=0,zs=null,Hs=js=Us=0}function ql(e,t){for(;;){var n=ks;try{if(no(),Qo.current=Oa,ia){for(var i=ea.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ia=!1}if($o=0,na=ta=ea=null,ra=!1,Ls.current=null,null===n||null===n.return){Bs=1,zs=t,ks=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Ns,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Bo.current),d=a;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var v=d.updateQueue;if(null===v){var g=new Set;g.add(u),d.updateQueue=g}else v.add(u);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=co(-1,1);y.tag=2,ho(s,y)}s.lanes|=1;break e}l=void 0,s=t;var x=o.pingCache;if(null===x?(x=o.pingCache=new hs,l=new Set,x.set(u,l)):void 0===(l=x.get(u))&&(l=new Set,x.set(u,l)),!l.has(s)){l.add(s);var b=Ul.bind(null,o,u,s);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Bs&&(Bs=2),l=us(l,s),d=a;do{switch(d.tag){case 3:o=l,d.flags|=4096,t&=-t,d.lanes|=t,po(d,ds(0,o,t));break e;case 1:o=l;var _=d.type,w=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ks||!Ks.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,po(d,ps(d,o,t));break e}}d=d.return}while(null!==d)}Ll(n)}catch(M){t=M,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function Tl(){var e=Cs.current;return Cs.current=Oa,null===e?Oa:e}function Sl(e,t){var n=Os;Os|=16;var i=Tl();for(Is===e&&Ns===t||El(e,t);;)try{Pl();break}catch(r){ql(e,r)}if(no(),Os=n,Cs.current=i,null!==ks)throw Error(a(261));return Is=null,Ns=0,Bs}function Pl(){for(;null!==ks;)Cl(ks)}function Al(){for(;null!==ks&&!Pr();)Cl(ks)}function Cl(e){var t=Ys(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?Ll(e):ks=t,Ls.current=null}function Ll(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Rs)))return void(ks=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Rs)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ls(t)))return n.flags&=2047,void(ks=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===Bs&&(Bs=5)}function Ol(e){var t=Vr();return Wr(99,Il.bind(null,e,t)),null}function Il(e,t){do{Nl()}while(null!==el);if(0!==(48&Os))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var i=n.lanes|n.childLanes,r=i,o=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-Vt(o),c=1<<u;r[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==rl&&0===(24&i)&&rl.has(e)&&rl.delete(e),e===Is&&(ks=Is=null,Ns=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Os,Os|=32,Ls.current=null,Ui=Zt,gi(s=vi())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(T){l=null;break e}var h=0,d=-1,p=-1,f=0,m=0,v=s,g=null;t:for(;;){for(var y;v!==l||0!==o&&3!==v.nodeType||(d=h+o),v!==u||0!==c&&3!==v.nodeType||(p=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===s)break t;if(g===l&&++f===o&&(d=h),g===u&&++m===c&&(p=h),null!==(y=v.nextSibling))break;g=(v=g).parentNode}v=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;ji={focusedElem:s,selectionRange:l},Zt=!1,cl=null,hl=!1,Zs=i;do{try{kl()}catch(T){if(null===Zs)throw Error(a(330));Fl(Zs,T),Zs=Zs.nextEffect}}while(null!==Zs);cl=null,Zs=i;do{try{for(s=e;null!==Zs;){var x=Zs.flags;if(16&x&&ye(Zs.stateNode,""),128&x){var b=Zs.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&x){case 2:ws(Zs),Zs.flags&=-3;break;case 6:ws(Zs),Zs.flags&=-3,Ts(Zs.alternate,Zs);break;case 1024:Zs.flags&=-1025;break;case 1028:Zs.flags&=-1025,Ts(Zs.alternate,Zs);break;case 4:Ts(Zs.alternate,Zs);break;case 8:qs(s,l=Zs);var w=l.alternate;bs(l),null!==w&&bs(w)}Zs=Zs.nextEffect}}catch(T){if(null===Zs)throw Error(a(330));Fl(Zs,T),Zs=Zs.nextEffect}}while(null!==Zs);if(_=ji,b=vi(),x=_.focusedElem,s=_.selectionRange,b!==x&&x&&x.ownerDocument&&mi(x.ownerDocument.documentElement,x)){null!==s&&gi(x)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in x?(x.selectionStart=b,x.selectionEnd=Math.min(_,x.value.length)):(_=(b=x.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),l=x.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!_.extend&&w>s&&(l=s,s=w,w=l),l=fi(x,w),o=fi(x,s),l&&o&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),w>s?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=x;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof x.focus&&x.focus(),x=0;x<b.length;x++)(_=b[x]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Zt=!!Ui,ji=Ui=null,e.current=n,Zs=i;do{try{for(x=e;null!==Zs;){var M=Zs.flags;if(36&M&&gs(x,Zs.alternate,Zs),128&M){b=void 0;var E=Zs.ref;if(null!==E){var q=Zs.stateNode;Zs.tag,b=q,"function"===typeof E?E(b):E.current=b}}Zs=Zs.nextEffect}}catch(T){if(null===Zs)throw Error(a(330));Fl(Zs,T),Zs=Zs.nextEffect}}while(null!==Zs);Zs=null,Br(),Os=r}else e.current=n;if($s)$s=!1,el=e,tl=t;else for(Zs=i;null!==Zs;)t=Zs.nextEffect,Zs.nextEffect=null,8&Zs.flags&&((M=Zs).sibling=null,M.stateNode=null),Zs=t;if(0===(i=e.pendingLanes)&&(Ks=null),1===i?e===al?ol++:(ol=0,al=e):ol=0,n=n.stateNode,Er&&"function"===typeof Er.onCommitFiberRoot)try{Er.onCommitFiberRoot(Mr,n,void 0,64===(64&n.current.flags))}catch(T){}if(vl(e,Hr()),Js)throw Js=!1,e=Qs,Qs=null,e;return 0!==(8&Os)||Yr(),null}function kl(){for(;null!==Zs;){var e=Zs.alternate;hl||null===cl||(0!==(8&Zs.flags)?et(Zs,cl)&&(hl=!0):13===Zs.tag&&Ps(e,Zs)&&et(Zs,cl)&&(hl=!0));var t=Zs.flags;0!==(256&t)&&vs(e,Zs),0===(512&t)||$s||($s=!0,Xr(97,(function(){return Nl(),null}))),Zs=Zs.nextEffect}}function Nl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Wr(e,Bl)}return!1}function Rl(e,t){nl.push(t,e),$s||($s=!0,Xr(97,(function(){return Nl(),null})))}function Dl(e,t){il.push(t,e),$s||($s=!0,Xr(97,(function(){return Nl(),null})))}function Bl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Os))throw Error(a(331));var t=Os;Os|=32;var n=il;il=[];for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1],s=r.destroy;if(r.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===o)throw Error(a(330));Fl(o,u)}}for(n=nl,nl=[],i=0;i<n.length;i+=2){r=n[i],o=n[i+1];try{var l=r.create;r.destroy=l()}catch(u){if(null===o)throw Error(a(330));Fl(o,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Os=t,Yr(),!0}function zl(e,t,n){ho(e,t=ds(0,t=us(n,t),1)),t=dl(),null!==(e=ml(e,1))&&(Ht(e,1,t),vl(e,t))}function Fl(e,t){if(3===e.tag)zl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){zl(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Ks||!Ks.has(i))){var r=ps(n,e=us(t,e),1);if(ho(n,r),r=dl(),null!==(n=ml(n,1)))Ht(n,1,r),vl(n,r);else if("function"===typeof i.componentDidCatch&&(null===Ks||!Ks.has(i)))try{i.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Ul(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,Is===e&&(Ns&n)===n&&(4===Bs||3===Bs&&(62914560&Ns)===Ns&&500>Hr()-Gs?El(e,0):Hs|=n),vl(e,t)}function jl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Vr()?1:2:(0===ll&&(ll=Fs),0===(t=Ut(62914560&~ll))&&(t=4194304))),n=dl(),null!==(e=ml(e,t))&&(Ht(e,t,n),vl(e,n))}function Hl(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Vl(e,t,n,i){return new Hl(e,t,n,i)}function Gl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wl(e,t){var n=e.alternate;return null===n?((n=Vl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xl(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)Gl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Yl(n.children,r,o,t);case R:s=8,r|=16;break;case q:s=8,r|=1;break;case T:return(e=Vl(12,n,t,8|r)).elementType=T,e.type=T,e.lanes=o,e;case C:return(e=Vl(13,n,t,r)).type=C,e.elementType=C,e.lanes=o,e;case L:return(e=Vl(19,n,t,r)).elementType=L,e.lanes=o,e;case D:return Zl(n,r,o,t);case B:return(e=Vl(24,n,t,r)).elementType=B,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case P:s=9;break e;case A:s=11;break e;case O:s=14;break e;case I:s=16,i=null;break e;case k:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Vl(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Yl(e,t,n,i){return(e=Vl(7,e,i,t)).lanes=n,e}function Zl(e,t,n,i){return(e=Vl(23,e,i,t)).elementType=D,e.lanes=n,e}function Jl(e,t,n){return(e=Vl(6,e,null,t)).lanes=n,e}function Ql(e,t,n){return(t=Vl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function $l(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:M,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function eu(e,t,n,i){var r=t.current,o=dl(),s=pl(r);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(gr(u)){n=br(n,u,l);break e}}n=l}else n=dr;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ho(r,t),fl(r,s,o),s}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function iu(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function ru(e,t,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Kl(e,t,null!=n&&!0===n.hydrate),t=Vl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,lo(t),e[er]=n.current,Oi(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var r=(t=i[e])._getVersion;r=r(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,r]:n.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=n}function ou(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function au(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=tu(a);s.call(e)}}eu(t,a,e,r)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,i),a=o._internalRoot,"function"===typeof r){var l=r;r=function(){var e=tu(a);l.call(e)}}_l((function(){eu(t,a,e,r)}))}return tu(a)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(t))throw Error(a(200));return $l(e,t,null,n)}Ys=function(e,t,n){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fr.current)Da=!0;else{if(0===(n&i)){switch(Da=!1,t.tag){case 3:Xa(t),Yo();break;case 5:Ro(t);break;case 1:gr(t.type)&&_r(t);break;case 4:ko(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var r=t.type._context;hr(Kr,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ka(e,t,n):(hr(Bo,1&Bo.current),null!==(t=os(e,t,n))?t.sibling:null);hr(Bo,1&Bo.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(64&e.flags)){if(i)return rs(e,t,n);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),hr(Bo,Bo.current),i)break;return null;case 23:case 24:return t.lanes=0,ja(e,t,n)}return os(e,t,n)}Da=0!==(16384&e.flags)}else Da=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=vr(t,pr.current),oo(t,n),r=sa(null,t,i,e,r,n),t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gr(i)){var o=!0;_r(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,lo(t);var s=i.getDerivedStateFromProps;"function"===typeof s&&go(t,i,s,e),r.updater=yo,t.stateNode=r,r._reactInternals=t,wo(t,i,e,n),t=Wa(null,t,i,!0,o,n)}else t.tag=0,Ba(null,t,r,n),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Gl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(r),e=Qr(r,e),o){case 0:t=Va(null,t,r,e,n);break e;case 1:t=Ga(null,t,r,e,n);break e;case 11:t=za(null,t,r,e,n);break e;case 14:t=Fa(null,t,r,Qr(r.type,e),i,n);break e}throw Error(a(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Va(e,t,i,r=t.elementType===i?r:Qr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ga(e,t,i,r=t.elementType===i?r:Qr(i,r),n);case 3:if(Xa(t),i=t.updateQueue,null===e||null===i)throw Error(a(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,uo(e,t),fo(t,i,null,n),(i=t.memoizedState.element)===r)Yo(),t=os(e,t,n);else{if((o=(r=t.stateNode).hydrate)&&(Uo=Yi(t.stateNode.containerInfo.firstChild),Fo=t,o=jo=!0),o){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(o=e[r])._workInProgressVersionPrimary=e[r+1],Zo.push(o);for(n=Po(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ba(e,t,i,n),Yo();t=t.child}return t;case 5:return Ro(t),null===e&&Go(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,Vi(i,r)?s=null:null!==o&&Vi(i,o)&&(t.flags|=16),Ha(e,t),Ba(e,t,s,n),t.child;case 6:return null===e&&Go(t),null;case 13:return Ka(e,t,n);case 4:return ko(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=So(t,null,i,n):Ba(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,za(e,t,i,r=t.elementType===i?r:Qr(i,r),n);case 7:return Ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value;var l=t.type._context;if(hr(Kr,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=ci(l,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,o):1073741823))){if(s.children===r.children&&!fr.current){t=os(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&o)){1===l.tag&&((c=co(-1,n&-n)).tag=2,ho(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),ro(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Ba(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(o=t.pendingProps).children,oo(t,n),i=i(r=ao(r,o.unstable_observedBits)),t.flags|=1,Ba(e,t,i,n),t.child;case 14:return o=Qr(r=t.type,t.pendingProps),Fa(e,t,r,o=Qr(r.type,o),i,n);case 15:return Ua(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Qr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gr(i)?(e=!0,_r(t)):e=!1,oo(t,n),bo(t,i,r),wo(t,i,r,n),Wa(null,t,i,!0,e,n);case 19:return rs(e,t,n);case 23:case 24:return ja(e,t,n)}throw Error(a(156,t.tag))},ru.prototype.render=function(e){eu(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eu(null,e,null,(function(){t[er]=null}))},tt=function(e){13===e.tag&&(fl(e,4,dl()),iu(e,4))},nt=function(e){13===e.tag&&(fl(e,67108864,dl()),iu(e,67108864))},it=function(e){if(13===e.tag){var t=dl(),n=pl(e);fl(e,n,t),iu(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=or(i);if(!r)throw Error(a(90));Q(i),ne(i,r)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ie=bl,ke=function(e,t,n,i,r){var o=Os;Os|=4;try{return Wr(98,e.bind(null,t,n,i,r))}finally{0===(Os=o)&&(Xs(),Yr())}},Ne=function(){0===(49&Os)&&(function(){if(null!==rl){var e=rl;rl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,vl(e,Hr())}))}Yr()}(),Nl())},Re=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(Xs(),Yr())}};var lu={Events:[ir,rr,or,Le,Oe,Nl,{current:!1}]},uu={findFiberByHostInstance:nr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Mr=hu.inject(cu),Er=hu}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Os;if(0!==(48&n))return e(t);Os|=1;try{if(e)return Wr(99,e.bind(null,t))}finally{Os=n,Yr()}},t.hydrate=function(e,t,n){if(!ou(t))throw Error(a(200));return au(null,e,t,!0,n)},t.render=function(e,t,n){if(!ou(t))throw Error(a(200));return au(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ou(e))throw Error(a(40));return!!e._reactRootContainer&&(_l((function(){au(null,null,e,!1,(function(){e._reactRootContainer=null,e[er]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!ou(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return au(e,t,n,!1,i)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var i=n(791),r=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;r=o("react.element"),t.Fragment=o("react.fragment")}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,o={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},117:function(e,t,n){"use strict";var i=n(725),r=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var x=y.prototype=new g;x.constructor=y,i(x,v.prototype),x.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!w.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var q=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case o:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,Array.isArray(a)?(n="",null!=e&&(n=e.replace(q,"$&/")+"/"),S(a,t,n,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(q,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=i+T(s=e[u],u);l+=S(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=S(s=s.value,t,n,c=i+T(s,u++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return S(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function L(){var e=C.current;if(null===e)throw Error(p(321));return e}var O={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(p(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=i({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:r,type:e.type,key:a,ref:s,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(L){l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),a=new P(i||[]);return o._invoke=function(e,t,n){var i=h;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return C()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=q(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=c(e,t,n);if("normal"===l.type){if(i=n.done?f:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=f,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function v(){}function g(){}function y(){}var x={};l(x,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(A([])));_&&_!==n&&i.call(_,o)&&(x=_);var w=y.prototype=v.prototype=Object.create(x);function M(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,o,a,s){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function q(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,q(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=c(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return g.prototype=y,l(w,"constructor",y),l(y,"constructor",g),g.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},M(E.prototype),l(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new E(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=A,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:A(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,i,r,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,h=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(i){throw setTimeout(e,0),i}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},i=function(e,t){c=setTimeout(e,t)},r=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var f=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,g=-1,y=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();x=e+y;try{v(!0,e)?_.postMessage(null):(m=!1,v=null)}catch(n){throw _.postMessage(null),n}}else m=!1},n=function(e){v=e,m||(m=!0,_.postMessage(null))},i=function(e,n){g=d((function(){e(t.unstable_now())}),n)},r=function(){p(g),g=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<q(r,t)))break e;e[i]=t,e[n]=r,n=i}}function M(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var o=2*(i+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>q(a,n))void 0!==l&&0>q(l,a)?(e[i]=l,e[s]=n,i=s):(e[i]=a,e[o]=n,i=o);else{if(!(void 0!==l&&0>q(l,n)))break e;e[i]=l,e[s]=n,i=s}}}return t}return null}function q(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],P=1,A=null,C=3,L=!1,O=!1,I=!1;function k(e){for(var t=M(S);null!==t;){if(null===t.callback)E(S);else{if(!(t.startTime<=e))break;E(S),t.sortIndex=t.expirationTime,w(T,t)}t=M(S)}}function N(e){if(I=!1,k(e),!O)if(null!==M(T))O=!0,n(R);else{var t=M(S);null!==t&&i(N,t.startTime-e)}}function R(e,n){O=!1,I&&(I=!1,r()),L=!0;var o=C;try{for(k(n),A=M(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,C=A.priorityLevel;var s=a(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===M(T)&&E(T),k(n)}else E(T);A=M(T)}if(null!==A)var l=!0;else{var u=M(S);null!==u&&i(N,u.startTime-n),l=!1}return l}finally{A=null,C=o,L=!1}}var D=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||L||(O=!0,n(R))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return M(T)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=D,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:P++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,w(S,e),null===M(T)&&e===M(S)&&(I?r():I=!0,i(N,a-s))):(e.sortIndex=l,w(T,e),O||L||(O=!0,n(R))),e},t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},907:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:function(){return i}})},762:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(181);function r(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,i.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}},942:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(907);function r(e,t){if(e){if("string"===typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{299:"5f7f988a",356:"d69f2870",518:"8b53b943",644:"003ccb6e",662:"9add2429",719:"bcd0458e",787:"c00c9694",860:"9e4b62c5",969:"8bd28cbc"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-mappedin:";n.l=function(i,r,o,a){if(e[i])e[i].push(r);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[r];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-mappedin/",function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise((function(n,i){r=e[t]=[n,i]}));i.push(r[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,i){var r,o,a=i[0],s=i[1],l=i[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(t&&t(i);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkreact_mappedin=self.webpackChunkreact_mappedin||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e=n(791),t=n(164);var i=n(181);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||(0,i.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,l,"next",e)}function l(e){o(a,i,r,s,l,"throw",e)}s(void 0)}))}}var s=n(757),l=n.n(s);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function f(){return f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=p(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},f.apply(this,arguments)}var m=n(942);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function x(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}var E=n(907);function q(e){return function(e){if(Array.isArray(e))return(0,E.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T,S,P,A,C=n(762),L=n(143),O=(0,L.a)((function(){A={env:{NODE_ENV:"production"}}})),I=(0,L.b)((function(e,t){O(),t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}})),k=(0,L.b)((function(e,t){O();var n="%[a-f0-9]{2}",i=new RegExp(n,"gi"),r=new RegExp("("+n+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],o(n),o(i))}function a(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(i),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(i);return e}}t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=a(n[0]);i!==n[0]&&(t[n[0]]=i)}n=r.exec(e)}t["%C2"]="\ufffd";for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}})),N=(0,L.b)((function(e,t){O(),t.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}})),R=(0,L.b)((function(e,t){O(),t.exports=function(e,t){for(var n={},i=Object.keys(e),r=Array.isArray(t),o=0;o<i.length;o++){var a=i[o],s=e[a];(r?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n}})),D=(0,L.b)((function(e){O();var t=I(),n=k(),i=N(),o=R(),a=Symbol("encodeFragmentIdentifier");function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function u(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function h(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){var t=(e=h(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function f(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,i){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return function(e,n,i){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return function(t,n,i){var r="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!r&&u(n,e).includes(e.arrayFormatSeparator);n=o?u(n,e):n;var a=r||o?n.split(e.arrayFormatSeparator).map((function(t){return u(t,e)})):null===n?n:u(n,e);i[t]=a};case"bracket-separator":return function(t,n,i){var r=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),r){var o=null===n?[]:n.split(e.arrayFormatSeparator).map((function(t){return u(t,e)}));void 0!==i[t]?i[t]=[].concat(i[t],o):i[t]=o}else i[t]=n&&u(n,e)};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return o;var a,l=(0,C.Z)(e.split("&"));try{for(l.s();!(a=l.n()).done;){var h=a.value;if(""!==h){var d=r(i(t.decode?h.replace(/\+/g," "):h,"="),2),f=d[0],m=d[1];m=void 0===m?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?m:u(m,t),n(u(f,t),m,o)}}}catch(M){l.e(M)}finally{l.f()}for(var v=0,g=Object.keys(o);v<g.length;v++){var y=g[v],x=o[y];if("object"==typeof x&&null!==x)for(var b=0,_=Object.keys(x);b<_.length;b++){var w=_[b];x[w]=p(x[w],t)}else o[y]=p(x,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((function(e,t){var n=o[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}e.extract=d,e.parse=f,e.stringify=function(e,t){if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n,i=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,i){var r=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:[].concat(q(n),null===i?[[l(t,e),"[",r,"]"].join("")]:[[l(t,e),"[",l(r,e),"]=",l(i,e)].join("")])}};case"bracket":return function(t){return function(n,i){return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:[].concat(q(n),null===i?[[l(t,e),"[]"].join("")]:[[l(t,e),"[]=",l(i,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(i,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:(r=null===r?"":r,0===i.length?[[l(n,e),t,l(r,e)].join("")]:[[i,l(r,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,i){return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:[].concat(q(n),null===i?[l(t,e)]:[[l(t,e),"=",l(i,e)].join("")])}}}}(t),r={},o=0,a=Object.keys(e);o<a.length;o++){var u=a[o];n=u,t.skipNull&&function(e){return null==e}(e[n])||t.skipEmptyString&&""===e[n]||(r[u]=e[u])}var c=Object.keys(r);return!1!==t.sort&&c.sort(t.sort),c.map((function(n){var r=e[n];return void 0===r?"":null===r?l(n,t):Array.isArray(r)?0===r.length&&"bracket-separator"===t.arrayFormat?l(n,t)+"[]":r.reduce(i(n),[]).join("&"):l(n,t)+"="+l(r,t)})).filter((function(e){return e.length>0})).join("&")},e.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=r(i(e,"#"),2),o=n[0],a=n[1];return Object.assign({url:o.split("?")[0]||"",query:f(d(e),t)},t&&t.parseFragmentIdentifier&&a?{fragmentIdentifier:u(a,t)}:{})},e.stringifyUrl=function(t,n){n=Object.assign((0,m.Z)({encode:!0,strict:!0},a,!0),n);var i=h(t.url).split("?")[0]||"",r=e.extract(t.url),o=e.parse(r,{sort:!1}),s=Object.assign(o,t.query),u=e.stringify(s,n);u&&(u="?".concat(u));var c=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(c="#".concat(n[a]?l(t.fragmentIdentifier,n):t.fragmentIdentifier)),"".concat(i).concat(u).concat(c)},e.pick=function(t,n,i){i=Object.assign((0,m.Z)({parseFragmentIdentifier:!0},a,!1),i);var r=e.parseUrl(t,i),s=r.url,l=r.query,u=r.fragmentIdentifier;return e.stringifyUrl({url:s,query:o(l,n),fragmentIdentifier:u},i)},e.exclude=function(t,n,i){var r=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return e.pick(t,r,i)}})),B=(0,L.b)((function(e,t){O();var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:o.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(e)&&(r._isPlaying=!1,t||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r,o=new i;o.Group=i,o._nextId=0,o.nextId=function(){return o._nextId++},"undefined"==typeof self&&void 0!==A&&A.hrtime?o.now=function(){var e=A.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?o.now=self.performance.now.bind(self.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?o.now()+parseFloat(e):e:o.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array||(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onRepeat:function(e){return this._onRepeatCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,i;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,i):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=o.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[n],e[n-1],n-i):a(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=r(1-t,i-s)*r(t,s)*e[s]*a(i,s);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=o.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),a(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):a(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(r=[1],function(e){var t=1;if(r[e])return r[e];for(var n=e;n>1;n--)t*=n;return r[e]=t,t}),CatmullRom:function(e,t,n,i,r){var o=.5*(n-e),a=.5*(i-t),s=r*r;return(2*t-2*n+o+a)*(r*s)+(-3*t+3*n-2*o-a)*s+o*r+t}}},function(i){"function"==typeof define&&n.amdO?define([],(function(){return o})):void 0!==t&&"object"==typeof e?t.exports=o:void 0!==i&&(i.TWEEN=o)}(e)})),z=(0,L.b)((function(e,t){O(),function(e){var i=/^\s+/,r=/\s+$/,o=0,a=e.round,s=e.min,l=e.max,u=e.random;function c(t,n){if(n=n||{},(t=t||"")instanceof c)return t;if(!(this instanceof c))return new c(t,n);var u=function(t){var n={r:0,g:0,b:0},o=1,a=null,u=null,c=null,h=!1,d=!1;return"string"==typeof t&&(t=function(e){e=e.replace(i,"").replace(r,"").toLowerCase();var t,n=!1;if(P[e])e=P[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=U.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=U.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=U.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=U.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=U.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=U.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=U.hex8.exec(e))?{r:I(t[1]),g:I(t[2]),b:I(t[3]),a:D(t[4]),format:n?"name":"hex8"}:(t=U.hex6.exec(e))?{r:I(t[1]),g:I(t[2]),b:I(t[3]),format:n?"name":"hex"}:(t=U.hex4.exec(e))?{r:I(t[1]+""+t[1]),g:I(t[2]+""+t[2]),b:I(t[3]+""+t[3]),a:D(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=U.hex3.exec(e))&&{r:I(t[1]+""+t[1]),g:I(t[2]+""+t[2]),b:I(t[3]+""+t[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(j(t.r)&&j(t.g)&&j(t.b)?(n=function(e,t,n){return{r:255*L(e,255),g:255*L(t,255),b:255*L(n,255)}}(t.r,t.g,t.b),h=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):j(t.h)&&j(t.s)&&j(t.v)?(a=N(t.s),u=N(t.v),n=function(t,n,i){t=6*L(t,360),n=L(n,100),i=L(i,100);var r=e.floor(t),o=t-r,a=i*(1-n),s=i*(1-o*n),l=i*(1-(1-o)*n),u=r%6;return{r:255*[i,s,a,a,l,i][u],g:255*[l,i,i,s,a,a][u],b:255*[a,a,l,i,i,s][u]}}(t.h,a,u),h=!0,d="hsv"):j(t.h)&&j(t.s)&&j(t.l)&&(a=N(t.s),c=N(t.l),n=function(e,t,n){var i,r,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=L(e,360),t=L(t,100),n=L(n,100),0===t)i=r=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=a(l,s,e+1/3),r=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*i,g:255*r,b:255*o}}(t.h,a,c),h=!0,d="hsl"),t.hasOwnProperty("a")&&(o=t.a)),o=C(o),{ok:h,format:t.format||d,r:s(255,l(n.r,0)),g:s(255,l(n.g,0)),b:s(255,l(n.b,0)),a:o}}(t);this._originalInput=t,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=a(100*this._a)/100,this._format=n.format||u.format,this._gradientType=n.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=u.ok,this._tc_id=o++}function h(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var i,r,o=l(e,t,n),a=s(e,t,n),u=(o+a)/2;if(o==a)i=r=0;else{var c=o-a;switch(r=u>.5?c/(2-o-a):c/(o+a),o){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:r,l:u}}function d(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var i,r,o=l(e,t,n),a=s(e,t,n),u=o,c=o-a;if(r=0===o?0:c/o,o==a)i=0;else{switch(o){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4}i/=6}return{h:i,s:r,v:u}}function p(e,t,n,i){var r=[k(a(e).toString(16)),k(a(t).toString(16)),k(a(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function f(e,t,n,i){return[k(R(i)),k(a(e).toString(16)),k(a(t).toString(16)),k(a(n).toString(16))].join("")}function m(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s-=t/100,n.s=O(n.s),c(n)}function v(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.s+=t/100,n.s=O(n.s),c(n)}function g(e){return c(e).desaturate(100)}function y(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l+=t/100,n.l=O(n.l),c(n)}function x(e,t){t=0===t?0:t||10;var n=c(e).toRgb();return n.r=l(0,s(255,n.r-a(-t/100*255))),n.g=l(0,s(255,n.g-a(-t/100*255))),n.b=l(0,s(255,n.b-a(-t/100*255))),c(n)}function b(e,t){t=0===t?0:t||10;var n=c(e).toHsl();return n.l-=t/100,n.l=O(n.l),c(n)}function _(e,t){var n=c(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,c(n)}function w(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function M(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function E(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function q(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function T(e,t,n){t=t||6,n=n||30;var i=c(e).toHsl(),r=360/n,o=[c(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push(c(i));return o}function S(e,t){t=t||6;for(var n=c(e).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/t;t--;)a.push(c({h:i,s:r,v:o})),o=(o+s)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,i,r=this.toRgb();return t=r.r/255,n=r.g/255,i=r.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:e.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=C(e),this._roundA=a(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),i=a(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b),t=a(360*e.h),n=a(100*e.s),i=a(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,i,r){var o=[k(a(e).toString(16)),k(a(t).toString(16)),k(a(n).toString(16)),k(R(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*L(this._r,255))+"%",g:a(100*L(this._g,255))+"%",b:a(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*L(this._r,255))+"%, "+a(100*L(this._g,255))+"%, "+a(100*L(this._b,255))+"%)":"rgba("+a(100*L(this._r,255))+"%, "+a(100*L(this._g,255))+"%, "+a(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+f(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=c(e);n="#"+f(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(q,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:N(e[i]));e=n}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:u(),g:u(),b:u()})},c.mix=function(e,t,n){n=0===n?0:n||50;var i=c(e).toRgb(),r=c(t).toRgb(),o=n/100;return c({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},c.readability=function(t,n){var i=c(t),r=c(n);return(e.max(i.getLuminance(),r.getLuminance())+.05)/(e.min(i.getLuminance(),r.getLuminance())+.05)},c.isReadable=function(e,t,n){var i,r,o=c.readability(e,t);switch(r=!1,(i=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},c.mostReadable=function(e,t,n){var i,r,o,a,s=null,l=0;r=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)(i=c.readability(e,t[u]))>l&&(l=i,s=c(t[u]));return c.isReadable(e,s,{level:o,size:a})||!r?s:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))};var P=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=c.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(P);function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function L(t,n){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=s(n,l(0,parseFloat(t))),i&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function O(e){return s(1,l(0,e))}function I(e){return parseInt(e,16)}function k(e){return 1==e.length?"0"+e:""+e}function N(e){return e<=1&&(e=100*e+"%"),e}function R(t){return e.round(255*parseFloat(t)).toString(16)}function D(e){return I(e)/255}var B,z,F,U=(z="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",F="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(e){return!!U.CSS_UNIT.exec(e)}void 0!==t&&t.exports?t.exports=c:"function"==typeof define&&n.amdO?define((function(){return c})):window.tinycolor=c}(Math)})),F=(0,L.b)((function(e,t){O();var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",a="[object Function]",s="[object Object]",l=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[o]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c[a]=c["[object Map]"]=c["[object Number]"]=c[s]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,p=h||d||Function("return this")(),f="object"==typeof e&&e&&!e.nodeType&&e,m=f&&"object"==typeof t&&t&&!t.nodeType&&t,v=m&&m.exports===f,g=v&&h.process,y=function(){try{return m&&m.require&&m.require("util").types||g&&g.binding&&g.binding("util")}catch(e){}}(),x=y&&y.isTypedArray;function b(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var _,w=Array.prototype,M=Function.prototype,E=Object.prototype,q=p["__core-js_shared__"],T=M.toString,S=E.hasOwnProperty,P=(_=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",A=E.toString,C=T.call(Object),L=RegExp("^"+T.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=v?p.Buffer:void 0,k=p.Symbol,N=p.Uint8Array,R=(I&&I.allocUnsafe,function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object)),D=Object.create,B=E.propertyIsEnumerable,z=w.splice,F=k?k.toStringTag:void 0,U=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),j=I?I.isBuffer:void 0,H=Math.max,V=Date.now,G=ue(p,"Map"),W=ue(Object,"create"),X=function(){function e(){}return function(t){if(!_e(t))return{};if(D)return D(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Q(e){var t=this.__data__=new Z(e);this.size=t.size}function K(e,t,n){(void 0!==n&&!fe(e[t],n)||void 0===n&&!(t in e))&&te(e,t,n)}function $(e,t,n){var i=e[t];(!S.call(e,t)||!fe(i,n)||void 0===n&&!(t in e))&&te(e,t,n)}function ee(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1}function te(e,t,n){"__proto__"==t&&U?U(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Y.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},Y.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Y.prototype.get=function(e){var t=this.__data__;if(W){var n=t[e];return n===i?void 0:n}return S.call(t,e)?t[e]:void 0},Y.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:S.call(t,e)},Y.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=W&&void 0===t?i:t,this},Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(e){var t=this.__data__,n=ee(t,e);return!(n<0)&&(n==t.length-1?t.pop():z.call(t,n,1),--this.size,!0)},Z.prototype.get=function(e){var t=this.__data__,n=ee(t,e);return n<0?void 0:t[n][1]},Z.prototype.has=function(e){return ee(this.__data__,e)>-1},Z.prototype.set=function(e,t){var n=this.__data__,i=ee(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},J.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(G||Z),string:new Y}},J.prototype.delete=function(e){var t=le(this,e).delete(e);return this.size-=t?1:0,t},J.prototype.get=function(e){return le(this,e).get(e)},J.prototype.has=function(e){return le(this,e).has(e)},J.prototype.set=function(e,t){var n=le(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Q.prototype.clear=function(){this.__data__=new Z,this.size=0},Q.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Q.prototype.get=function(e){return this.__data__.get(e)},Q.prototype.has=function(e){return this.__data__.has(e)},Q.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Z){var i=n.__data__;if(!G||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new J(i)}return n.set(e,t),this.size=n.size,this};var ne=function(e,t,n){for(var i=-1,r=Object(e),o=n(e),a=o.length;a--;){var s=o[++i];if(!1===t(r[s],s,r))break}return e};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":F&&F in Object(e)?function(e){var t=S.call(e,F),n=e[F];try{e[F]=void 0;var i=!0}catch(e){}var r=A.call(e);return i&&(t?e[F]=n:delete e[F]),r}(e):function(e){return A.call(e)}(e)}function re(e){return we(e)&&ie(e)==o}function oe(e,t,n,i,r){e!==t&&ne(t,(function(o,a){if(r||(r=new Q),_e(o))!function(e,t,n,i,r,o,a){var l=de(e,n),u=de(t,n),c=a.get(u);if(c)K(e,n,c);else{var h=o?o(l,u,n+"",e,t,a):void 0,d=void 0===h;if(d){var p=ve(u),f=!p&&ye(u),m=!p&&!f&&Me(u);h=u,p||f||m?ve(l)?h=l:function(e){return we(e)&&ge(e)}(l)?h=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(l):f?(d=!1,h=function(e,t){return e.slice()}(u)):m?(d=!1,h=function(e,t){var n=function(e){var t=new e.constructor(e.byteLength);return new N(t).set(new N(e)),t}(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}(u)):h=[]:function(e){if(!we(e)||ie(e)!=s)return!1;var t=R(e);if(null===t)return!0;var n=S.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&T.call(n)==C}(u)||me(u)?(h=l,me(l)?h=function(e){return function(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=void 0;void 0===l&&(l=e[s]),r?te(n,s,l):$(n,s,l)}return n}(e,qe(e))}(l):(!_e(l)||xe(l))&&(h=function(e){return"function"!=typeof e.constructor||he(e)?{}:X(R(e))}(u))):d=!1}d&&(a.set(u,h),r(h,u,i,o,a),a.delete(u)),K(e,n,h)}}(e,t,a,n,oe,i,r);else{var l=i?i(de(e,a),o,a+"",e,t,r):void 0;void 0===l&&(l=o),K(e,a,l)}}),qe)}function ae(e,t){return pe(function(e,t,n){return t=H(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=H(i.length-t,0),a=Array(o);++r<o;)a[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(a),b(e,this,s)}}(e,t,Pe),e+"")}function se(e,t,n,i,r,o){return _e(e)&&_e(t)&&(o.set(t,e),oe(e,t,void 0,se,o),o.delete(t)),e}function le(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ue(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!_e(e)||function(e){return!!P&&P in e}(e))&&(xe(e)?L:l).test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function ce(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&u.test(e))&&e>-1&&e%1==0&&e<t}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function de(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pe=function(e){var t=0,n=0;return function(){var i=V(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:Se(t),writable:!0})}:Pe);function fe(e,t){return e===t||e!=e&&t!=t}var me=re(function(){return arguments}())?re:function(e){return we(e)&&S.call(e,"callee")&&!B.call(e,"callee")},ve=Array.isArray;function ge(e){return null!=e&&be(e.length)&&!xe(e)}var ye=j||function(){return!1};function xe(e){if(!_e(e))return!1;var t=ie(e);return t==a||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function _e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Me=x?function(e){return function(t){return e(t)}}(x):function(e){return we(e)&&be(e.length)&&!!c[ie(e)]},Ee=ae((function(e){return e.push(void 0,se),b(Te,void 0,e)}));function qe(e){return ge(e)?function(e,t){var n=ve(e),i=!n&&me(e),r=!n&&!i&&ye(e),o=!n&&!i&&!r&&Me(e),a=n||i||r||o,s=a?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=s.length;for(var u in e)(t||S.call(e,u))&&(!a||!("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ce(u,l)))&&s.push(u);return s}(e,!0):function(e){if(!_e(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=he(e),n=[];for(var i in e)"constructor"==i&&(t||!S.call(e,i))||n.push(i);return n}(e)}var Te=function(e){return ae((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,n){if(!_e(n))return!1;var i=typeof t;return!!("number"==i?ge(n)&&ce(t,n.length):"string"==i&&t in n)&&fe(n[t],e)}(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),t=Object(t);++i<r;){var s=n[i];s&&e(t,s,i,o)}return t}))}((function(e,t,n,i){oe(e,t,n,i)}));function Se(e){return function(){return e}}function Pe(e){return e}t.exports=Ee})),U=(0,L.b)((function(e,t){O(),function(i){var r="object"==typeof e&&e,o="object"==typeof t&&t&&t.exports==r&&t,a="object"==typeof n.g&&n.g;(a.global===a||a.window===a)&&(i=a);var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,h={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,o=e.length%3,a="",s=-1,c=e.length-o;++s<c;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,i=e.charCodeAt(++s),a+=u.charAt((r=t+n+i)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==o?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),a+=u.charAt((r=t+n)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==o&&(r=e.charCodeAt(s),a+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,o="",a=-1;++a<t;)i=u.indexOf(e.charAt(a)),n=r%4?64*n+i:i,r++%4&&(o+=String.fromCharCode(255&n>>(-2*r&6)));return o},version:"1.0.0"};if("function"==typeof define&&n.amdO)define((function(){return h}));else if(r&&!r.nodeType)if(o)o.exports=h;else for(var d in h)h.hasOwnProperty(d)&&(r[d]=h[d]);else i.base64=h}(e)})),j=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.areaConversion=e.timeConversion=e.distanceConversion=e.altitudeKeys=e.latitudeKeys=e.longitudeKeys=e.MAXLON=e.MINLON=e.MAXLAT=e.MINLAT=e.earthRadius=e.sexagesimalPattern=void 0,e.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,e.earthRadius=6378137,e.MINLAT=-90,e.MAXLAT=90,e.MINLON=-180,e.MAXLON=180,e.longitudeKeys=["lng","lon","longitude",0],e.latitudeKeys=["lat","latitude",1],e.altitudeKeys=["alt","altitude","elevation","elev",2],e.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},e.timeConversion={m:60,h:3600,d:86400};var t={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};e.areaConversion=t,t.sqm=t.m2,t.sqkm=t.km2,t.sqft=t.ft2,t.sqyd=t.yd2,t.sqin=t.in2})),H=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e,t){return t.reduce((function(t,n){if(null==e)throw new Error("'".concat(e,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==n&&void 0===t?(t=n,n):t}),void 0)}})),V=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){var t=e.toString().trim();return!isNaN(parseFloat(t))&&parseFloat(t)===Number(t)}})),G=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j();e.default=function(e){return t.sexagesimalPattern.test(e.toString().trim())}})),W=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j();e.default=function(e){var n=new RegExp(t.sexagesimalPattern).exec(e);if(null==n)throw new Error("Given value is not in sexagesimal format");var i=Number(n[2])/60||0,r=Number(n[4])/3600||0,o=parseFloat(n[1])+i+r;return["S","W"].includes(n[7])?-o:o}})),X=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=j(),i=(t=H())&&t.__esModule?t:{default:t};function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:n.longitudeKeys,latitude:n.latitudeKeys,altitude:n.altitudeKeys},r=(0,i.default)(e,t.longitude),a=(0,i.default)(e,t.latitude),s=(0,i.default)(e,t.altitude);return o({latitude:a,longitude:r},s?{altitude:s}:{})}})),Y=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(V()),n=o(G()),i=o(W()),r=j();function o(e){return e&&e.__esModule?e:{default:e}}e.default=function e(o){return(0,t.default)(o)?!(parseFloat(o)>r.MAXLAT||o<r.MINLAT):!!(0,n.default)(o)&&e((0,i.default)(o))}})),Z=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(V()),n=o(G()),i=o(W()),r=j();function o(e){return e&&e.__esModule?e:{default:e}}e.default=function e(o){return(0,t.default)(o)?!(parseFloat(o)>r.MAXLON||o<r.MINLON):!!(0,n.default)(o)&&e((0,i.default)(o))}})),J=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(X()),n=r(Y()),i=r(Z());function r(e){return e&&e.__esModule?e:{default:e}}e.default=function(e){var r=(0,t.default)(e),o=r.latitude,a=r.longitude;if(Array.isArray(e)&&e.length>=2)return(0,i.default)(e[0])&&(0,n.default)(e[1]);if(void 0===o||void 0===a)return!1;var s=e[a],l=e[o];return!(void 0===l||void 0===s||!1===(0,n.default)(l)||!1===(0,i.default)(s))}})),Q=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(V()),n=a(G()),i=a(W()),r=a(J()),o=a(X());function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.default=function e(a){if((0,t.default)(a))return Number(a);if((0,n.default)(a))return(0,i.default)(a);if((0,r.default)(a)){var s=(0,o.default)(a);return Array.isArray(a)?a.map((function(t,n){return[0,1].includes(n)?e(t):t})):l(l(l({},a),s.latitude&&u({},s.latitude,e(a[s.latitude]))),s.longitude&&u({},s.longitude,e(a[s.longitude])))}return Array.isArray(a)?a.map((function(t){return(0,r.default)(t)?e(t):t})):a}})),K=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j(),n=r(H()),i=r(Q());function r(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,r){var o=(0,n.default)(e,t.latitudeKeys);if(null!=o){var a=e[o];return!0===r?a:(0,i.default)(a)}}})),$=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j(),n=r(H()),i=r(Q());function r(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,r){var o=(0,n.default)(e,t.longitudeKeys);if(null!=o){var a=e[o];return!0===r?a:(0,i.default)(a)}}})),ee=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){return e*Math.PI/180}})),te=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){return 180*e/Math.PI}})),ne=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(K()),n=a($()),i=a(ee()),r=a(te()),o=j();function a(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,a,s){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,u=(0,t.default)(e),c=(0,n.default)(e),h=a/l,d=(0,i.default)(s),p=(0,i.default)(u),f=(0,i.default)(c),m=Math.asin(Math.sin(p)*Math.cos(h)+Math.cos(p)*Math.sin(h)*Math.cos(d)),v=f+Math.atan2(Math.sin(d)*Math.sin(h)*Math.cos(p),Math.cos(h)-Math.sin(p)*Math.sin(m)),g=(0,r.default)(v);return(g<o.MINLON||g>o.MAXLON)&&(v=(v+3*Math.PI)%(2*Math.PI)-Math.PI,g=(0,r.default)(v)),{latitude:(0,r.default)(m),longitude:g}}})),ie=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j();e.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",i=t.areaConversion[n];if(i)return e*i;throw new Error("Invalid unit used for area conversion.")}})),re=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j();e.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",i=t.distanceConversion[n];if(i)return e*i;throw new Error("Invalid unit used for distance conversion.")}})),oe=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=j();e.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(n){case"kmh":return e*t.timeConversion.h*t.distanceConversion.km;case"mph":return e*t.timeConversion.h*t.distanceConversion.mi;default:return e}}})),ae=(0,L.b)((function(e){function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&null!=s.return&&s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(e){var t=Math.pow(10,12);return Math.round(e*t)/t};e.default=function(e){var n=t(e.toString().split("."),2),r=n[0],o=n[1],a=Math.abs(Number(r)),s=i(60*Number("0."+(o||0))),l=Math.floor(s),u=i(60*(s%l||0));return a+"\xb0 "+Number(l.toFixed(6)).toString().split(".").map((function(e,t){return 0===t?e.padStart(2,"0"):e})).join(".")+"' "+Number(u.toFixed(4)).toString().split(".").map((function(e,t){return 0===t?e.padStart(2,"0"):e})).join(".")+'"'}})),se=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){return e>1?1:e<-1?-1:e}})),le=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(K()),n=a($()),i=a(ee()),r=a(se()),o=j();function a(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;s=void 0===s||isNaN(s)?1:s;var l=(0,t.default)(e),u=(0,n.default)(e),c=(0,t.default)(a),h=(0,n.default)(a),d=Math.acos((0,r.default)(Math.sin((0,i.default)(c))*Math.sin((0,i.default)(l))+Math.cos((0,i.default)(c))*Math.cos((0,i.default)(l))*Math.cos((0,i.default)(u)-(0,i.default)(h))))*o.earthRadius;return Math.round(d/s)*s}})),ue=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=le())&&t.__esModule?t:{default:t};e.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.default;return i="function"==typeof i?i:n.default,t.slice().sort((function(t,n){return i(e,t)-i(e,n)}))}})),ce=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=ue())&&t.__esModule?t:{default:t};e.default=function(e,t){return(0,n.default)(e,t)[0]}})),he=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(ee()),n=o(K()),i=o($()),r=j();function o(e){return e&&e.__esModule?e:{default:e}}e.default=function(e){var o=0;if(e.length>2){for(var a,s,l,u=0;u<e.length;u++){u===e.length-2?(a=e.length-2,s=e.length-1,l=0):u===e.length-1?(a=e.length-1,s=0,l=1):(a=u,s=u+1,l=u+2);var c=(0,i.default)(e[a]),h=(0,n.default)(e[s]),d=(0,i.default)(e[l]);o+=((0,t.default)(d)-(0,t.default)(c))*Math.sin((0,t.default)(h))}o=o*r.earthRadius*r.earthRadius/2}return Math.abs(o)}})),de=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(K()),n=i($());function i(e){return e&&e.__esModule?e:{default:e}}e.default=function(e){if(!1===Array.isArray(e)||0===e.length)throw new Error("No points were given.");return e.reduce((function(e,i){var r=(0,t.default)(i),o=(0,n.default)(i);return{maxLat:Math.max(r,e.maxLat),minLat:Math.min(r,e.minLat),maxLng:Math.max(o,e.maxLng),minLng:Math.min(o,e.minLng)}}),{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}})),pe=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(K()),n=a($()),i=a(ee()),r=a(te()),o=j();function a(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,a){var s,l,u=(0,t.default)(e),c=(0,n.default)(e),h=(0,i.default)(u),d=(0,i.default)(c),p=a/o.earthRadius,f=h-p,m=h+p,v=(0,i.default)(o.MAXLAT),g=(0,i.default)(o.MINLAT),y=(0,i.default)(o.MAXLON),x=(0,i.default)(o.MINLON);if(f>g&&m<v){var b=Math.asin(Math.sin(p)/Math.cos(h));(s=d-b)<x&&(s+=2*Math.PI),(l=d+b)>y&&(l-=2*Math.PI)}else f=Math.max(f,g),m=Math.min(m,v),s=x,l=y;return[{latitude:(0,r.default)(f),longitude:(0,r.default)(s)},{latitude:(0,r.default)(m),longitude:(0,r.default)(l)}]}})),fe=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(K()),n=o($()),i=o(ee()),r=o(te());function o(e){return e&&e.__esModule?e:{default:e}}e.default=function(e){if(!1===Array.isArray(e)||0===e.length)return!1;var o=e.length,a=e.reduce((function(e,r){var o=(0,i.default)((0,t.default)(r)),a=(0,i.default)((0,n.default)(r));return{X:e.X+Math.cos(o)*Math.cos(a),Y:e.Y+Math.cos(o)*Math.sin(a),Z:e.Z+Math.sin(o)}}),{X:0,Y:0,Z:0}),s=a.X/o,l=a.Y/o,u=a.Z/o;return{longitude:(0,r.default)(Math.atan2(l,s)),latitude:(0,r.default)(Math.atan2(u,Math.sqrt(s*s+l*l)))}}})),me=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=de())&&t.__esModule?t:{default:t};e.default=function(e){var t=(0,n.default)(e),i=t.minLat+(t.maxLat-t.minLat)/2,r=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(i.toFixed(6)),longitude:parseFloat(r.toFixed(6))}}})),ve=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(K()),n=o($()),i=o(ee()),r=o(te());function o(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,o){var a=(0,i.default)((0,n.default)(o))-(0,i.default)((0,n.default)(e)),s=Math.log(Math.tan((0,i.default)((0,t.default)(o))/2+Math.PI/4)/Math.tan((0,i.default)((0,t.default)(e))/2+Math.PI/4));return Math.abs(a)>Math.PI&&(a=a>0?-1*(2*Math.PI-a):2*Math.PI+a),((0,r.default)(Math.atan2(a,s))+360)%360}})),ge=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=ve())&&t.__esModule?t:{default:t};e.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.default,r="function"==typeof i?i(e,t):(0,n.default)(e,t);if(isNaN(r))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(r/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}})),ye=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(le()),n=i(se());function i(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,i,r){var o=(0,t.default)(i,e),a=(0,t.default)(e,r),s=(0,t.default)(i,r),l=Math.acos((0,n.default)((o*o+s*s-a*a)/(2*o*s))),u=Math.acos((0,n.default)((a*a+s*s-o*o)/(2*a*s)));return l>Math.PI/2?o:u>Math.PI/2?a:Math.sin(l)*o}})),xe=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(K()),n=o($()),i=o(ee()),r=o(te());function o(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,o){var a=(0,t.default)(o),s=(0,n.default)(o),l=(0,t.default)(e),u=(0,n.default)(e);return((0,r.default)(Math.atan2(Math.sin((0,i.default)(s)-(0,i.default)(u))*Math.cos((0,i.default)(a)),Math.cos((0,i.default)(l))*Math.sin((0,i.default)(a))-Math.sin((0,i.default)(l))*Math.cos((0,i.default)(a))*Math.cos((0,i.default)(s)-(0,i.default)(u))))+360)%360}})),be=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=le())&&t.__esModule?t:{default:t};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.default;return e.reduce((function(e,n){return"object"===i(e)&&null!==e.last&&(e.distance+=t(n,e.last)),e.last=n,e}),{last:null,distance:0}).distance}})),_e=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(K()),n=o($()),i=o(ee()),r=j();function o(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;a=void 0===a||isNaN(a)?1:a;var s,l,u,c,h,d,p,f=(0,t.default)(e),m=(0,n.default)(e),v=(0,t.default)(o),g=(0,n.default)(o),y=6356752.314245,x=1/298.257223563,b=(0,i.default)(g-m),_=Math.atan((1-x)*Math.tan((0,i.default)(parseFloat(f)))),w=Math.atan((1-x)*Math.tan((0,i.default)(parseFloat(v)))),M=Math.sin(_),E=Math.cos(_),q=Math.sin(w),T=Math.cos(w),S=b,P=100;do{var A=Math.sin(S),C=Math.cos(S);if(0===(d=Math.sqrt(T*A*(T*A)+(E*q-M*T*C)*(E*q-M*T*C))))return 0;s=M*q+E*T*C,l=Math.atan2(d,s),h=s-2*M*q/(c=1-(u=E*T*A/d)*u),isNaN(h)&&(h=0);var L=x/16*c*(4+x*(4-3*c));p=S,S=b+(1-L)*x*u*(l+L*d*(h+L*s*(2*h*h-1)))}while(Math.abs(S-p)>1e-12&&--P>0);if(0===P)return NaN;var O=c*(r.earthRadius*r.earthRadius-y*y)/(y*y),I=1+O/16384*(4096+O*(O*(320-175*O)-768)),k=O/1024*(256+O*(O*(74-47*O)-128)),N=k*d*(h+k/4*(s*(2*h*h-1)-k/6*h*(4*d*d-3)*(4*h*h-3))),R=y*I*(l-N);return Math.round(R/a)*a}})),we=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){return/^NNE|NE|NNW|N$/.test(e)?"N":/^ENE|E|ESE|SE$/.test(e)?"E":/^SSE|S|SSW|SW$/.test(e)?"S":/^WSW|W|WNW|NW$/.test(e)?"W":void 0}})),Me=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=le())&&t.__esModule?t:{default:t};e.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.default,r=i(e,t),o=Number(t.time)-Number(e.time),a=r/o*1e3;return a}})),Ee=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=le())&&t.__esModule?t:{default:t};e.default=function(e,t,i){return(0,n.default)(t,e)+(0,n.default)(e,i)===(0,n.default)(t,i)}})),qe=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(K()),n=i($());function i(e){return e&&e.__esModule?e:{default:e}}e.default=function(e,i){for(var r=!1,o=i.length,a=-1,s=o-1;++a<o;s=a)((0,n.default)(i[a])<=(0,n.default)(e)&&(0,n.default)(e)<(0,n.default)(i[s])||(0,n.default)(i[s])<=(0,n.default)(e)&&(0,n.default)(e)<(0,n.default)(i[a]))&&(0,t.default)(e)<((0,t.default)(i[s])-(0,t.default)(i[a]))*((0,n.default)(e)-(0,n.default)(i[a]))/((0,n.default)(i[s])-(0,n.default)(i[a]))+(0,t.default)(i[a])&&(r=!r);return r}})),Te=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=ye())&&t.__esModule?t:{default:t};e.default=function(e,t,i,r){return(0,n.default)(e,t,i)<r}})),Se=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=le())&&t.__esModule?t:{default:t};e.default=function(e,t,i){return(0,n.default)(e,t)<i}})),Pe=(0,L.b)((function(e){function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&null!=s.return&&s.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}O(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(e){if(!e.startsWith("POLYGON"))throw new Error("Invalid wkt.");return e.slice(e.indexOf("(")+2,e.indexOf(")")).split(", ").map((function(e){var n=t(e.split(" "),2),i=n[0],r=n[1];return{longitude:parseFloat(i),latitude:parseFloat(r)}}))}})),Ae=(0,L.b)((function(e){O(),Object.defineProperty(e,"__esModule",{value:!0});var t={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(e,"computeDestinationPoint",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"convertArea",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"convertSpeed",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"decimalToSexagesimal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"findNearest",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getAreaOfPolygon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"getBounds",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"getBoundsOfDistance",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getCenter",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"getCenterOfBounds",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getCompassDirection",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"getCoordinateKey",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"getCoordinateKeys",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"getDistance",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"getDistanceFromLine",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"getGreatCircleBearing",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"getLatitude",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"getLongitude",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"getPathLength",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"getPreciseDistance",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"getRhumbLineBearing",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"getRoughCompassDirection",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"getSpeed",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"isPointInLine",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"isPointInPolygon",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"isPointNearLine",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"isPointWithinRadius",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"isSexagesimal",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(e,"isValidCoordinate",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(e,"isValidLatitude",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"isValidLongitude",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(e,"orderByDistance",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(e,"sexagesimalToDecimal",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(e,"toDecimal",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(e,"toRad",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(e,"toDeg",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(e,"wktToPolygon",{enumerable:!0,get:function(){return U.default}});var n=Ae(ne()),i=Ae(ie()),r=Ae(re()),o=Ae(oe()),a=Ae(ae()),s=Ae(ce()),l=Ae(he()),u=Ae(de()),c=Ae(pe()),h=Ae(fe()),d=Ae(me()),p=Ae(ge()),f=Ae(H()),m=Ae(X()),v=Ae(le()),g=Ae(ye()),y=Ae(xe()),x=Ae(K()),b=Ae($()),_=Ae(be()),w=Ae(_e()),M=Ae(ve()),E=Ae(we()),q=Ae(Me()),T=Ae(V()),S=Ae(Ee()),P=Ae(qe()),A=Ae(Te()),C=Ae(Se()),L=Ae(G()),I=Ae(J()),k=Ae(Y()),N=Ae(Z()),R=Ae(ue()),D=Ae(W()),B=Ae(Q()),z=Ae(ee()),F=Ae(te()),U=Ae(Pe()),se=j();function Ae(e){return e&&e.__esModule?e:{default:e}}Object.keys(se).forEach((function(n){"default"===n||"__esModule"===n||Object.prototype.hasOwnProperty.call(t,n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return se[n]}})}))})),Ce=(0,L.b)((function(e,t){var i,r;O(),i=e,r=function(e){var t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==t&&t,n="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&r&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(m)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=f(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=u(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[u(e)]},d.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},d.prototype.set=function(e,t){this.map[u(e)]=c(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&null!=e._bodyInit&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function _(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},g.call(x.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var M=[301,302,303,307,308];w.redirect=function(e,t){if(-1===M.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(n,i){return new Promise((function(o,s){var l=new x(n,i);if(l.signal&&l.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}u.onload=function(){var e={status:u.status,statusText:u.statusText,headers:_(u.getAllResponseHeaders()||"")};e.url="responseURL"in u?u.responseURL:e.headers.get("X-Request-URL");var t="response"in u?u.response:u.responseText;setTimeout((function(){o(new w(t,e))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){s(new e.DOMException("Aborted","AbortError"))}),0)},u.open(l.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(r?u.responseType="blob":a&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!i||"object"!=typeof i.headers||i.headers instanceof d?l.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(i.headers).forEach((function(e){u.setRequestHeader(e,c(i.headers[e]))})),l.signal&&(l.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&l.signal.removeEventListener("abort",h)}),u.send(void 0===l._bodyInit?null:l._bodyInit)}))}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=d,t.Request=x,t.Response=w),e.Headers=d,e.Request=x,e.Response=w,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&void 0!==t?r(e):"function"==typeof define&&n.amdO?define(["exports"],r):r(i.WHATWGFetch={})})),Le=(0,L.b)((function(e,t){O(),Ce(),t.exports=self.fetch.bind(self)})),Oe=(0,L.b)((function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}O();var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.R,r=void 0===i?1:i,o=t.Q,a=void 0===o?1:o,s=t.A,l=void 0===s?1:s,u=t.B,c=void 0===u?0:u,h=t.C,d=void 0===h?1:h;n(this,e),this.R=r,this.Q=a,this.A=l,this.C=d,this.B=c,this.cov=NaN,this.x=NaN}return function(e,t,n){t&&i(e.prototype,t)}(e,[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(this.x))this.x=1/this.C*e,this.cov=1/this.C*this.Q*(1/this.C);else{var n=this.predict(t),i=this.uncertainty(),r=i*this.C*(1/(this.C*i*this.C+this.Q));this.x=n+r*(e-this.C*n),this.cov=i-r*this.C*i}return this.x}},{key:"predict",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.A*this.x+this.B*e}},{key:"uncertainty",value:function(){return this.A*this.cov*this.A+this.R}},{key:"lastMeasurement",value:function(){return this.x}},{key:"setMeasurementNoise",value:function(e){this.Q=e}},{key:"setProcessNoise",value:function(e){this.R=e}}]),e}();t.exports=r})),Ie=(0,L.b)((function(e,t){O(),function(){function e(e,t){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function i(e,t,n){var i=t.x,r=t.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var s=((e.x-i)*o+(e.y-r)*a)/(o*o+a*a);s>1?(i=n.x,r=n.y):s>0&&(i+=o*s,r+=a*s)}return(o=e.x-i)*o+(a=e.y-r)*a}function r(e,t,n,o,a){for(var s,l=o,u=t+1;u<n;u++){var c=i(e[u],e[t],e[n]);c>l&&(s=u,l=c)}l>o&&(s-t>1&&r(e,t,s,o,a),a.push(e[s]),n-s>1&&r(e,s,n,o,a))}function o(e,t){var n=e.length-1,i=[e[0]];return r(e,0,n,t,i),i.push(e[n]),i}function a(t,n,i){if(t.length<=2)return t;var r=void 0!==n?n*n:1;return o(t=i?t:function(t,n){for(var i,r=t[0],o=[r],a=1,s=t.length;a<s;a++)e(i=t[a],r)>n&&(o.push(i),r=i);return r!==i&&o.push(i),o}(t,r),r)}"function"==typeof define&&n.amdO?define((function(){return a})):void 0!==t?(t.exports=a,t.exports.default=a):"undefined"!=typeof self?self.simplify=a:window.simplify=a}()})),ke=(0,L.b)((function(e,t){O(),t.exports=function(e){if(!Array.isArray(e))throw new TypeError("array-unique expects an array.");for(var t=e.length,n=-1;n++<t;)for(var i=n+1;i<e.length;++i)e[n]===e[i]&&e.splice(i--,1);return e},t.exports.immutable=function(e){if(!Array.isArray(e))throw new TypeError("array-unique expects an array.");for(var n=e.length,i=new Array(n),r=0;r<n;r++)i[r]=e[r];return t.exports(i)}})),Ne=(0,L.b)((function(e,t){var i,r;O(),i=e,r=function(){var e=function e(){function t(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),n(++i%r.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:r,setMode:n}};return e.Panel=function(e,t,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,h=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,l),v.fillStyle=t,v.fillText(e,u,c),v.fillRect(h,d,p,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,d,p,f),{dom:m,update:function(l,g){i=Math.min(i,l),r=Math.max(r,l),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,d),v.fillStyle=t,v.fillText(o(l)+" "+e+" ("+o(i)+"-"+o(r)+")",u,c),v.drawImage(m,h+a,d,p-a,f,h,d,p-a,f),v.fillRect(h+p-a,d,a,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-a,d,a,o((1-l/g)*f))}}},e},"object"==typeof e&&void 0!==t?t.exports=r():"function"==typeof define&&n.amdO?define(r):i.Stats=r()})),Re=(0,L.b)((function(e,t){O();var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=o.propertyIsEnumerable,u=Math.max;function c(e,t){var n=v(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&g(e)}(e)&&a.call(e,"callee")&&(!l.call(e,"callee")||"[object Arguments]"==s.call(e))}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,r=!!i;for(var o in e)(t||a.call(e,o))&&(!r||"length"!=o&&!f(o,i))&&n.push(o);return n}function h(e,t,n,i){return void 0===e||m(e,o[n])&&!a.call(i,n)?t:e}function d(e,t,n){var i=e[t];(!a.call(e,t)||!m(i,n)||void 0===n&&!(t in e))&&(e[t]=n)}function p(e,t){return t=u(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=u(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=a,r(e,this,s)}}function f(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function m(e,t){return e===t||e!=e&&t!=t}var v=Array.isArray;function g(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=y(e)?s.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var x,b=(x=function(e,t,n,i){!function(e,t,n,i){n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],s=i?i(n[a],e[a],a,n,e):void 0;d(n,a,void 0===s?e[a]:s)}}(t,function(e){return g(e)?c(e,!0):function(e){if(!y(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}(e),n=[];for(var i in e)"constructor"==i&&(t||!a.call(e,i))||n.push(i);return n}(e)}(t),e,i)},p((function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(r=x.length>3&&"function"==typeof r?(i--,r):void 0,o&&function(e,t,n){if(!y(n))return!1;var i=typeof t;return!!("number"==i?g(n)&&f(t,n.length):"string"==i&&t in n)&&m(n[t],e)}(t[0],t[1],o)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var a=t[n];a&&x(e,a,0,r)}return e}))),_=p((function(e){return e.push(void 0,h),r(b,void 0,e)}));t.exports=_})),De=(0,L.b)((function(e,t){O();var n,i={},r=!1;void 0!==t&&t.exports?(t.exports=i,r=!0):"undefined"!=typeof document?window.ClipperLib=i:self.ClipperLib=i,r?(o="chrome",n="Netscape"):(o=navigator.userAgent.toString().toLowerCase(),n=navigator.appName);var o,a,s={};function l(e,t,n){i.biginteger_used=1,null!=e&&("number"==typeof e&&void 0===t?this.fromInt(e):"number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function u(){return new l(null)}-1!=o.indexOf("chrome")&&-1==o.indexOf("chromium")?s.chrome=1:s.chrome=0,-1!=o.indexOf("chromium")?s.chromium=1:s.chromium=0,-1!=o.indexOf("safari")&&-1==o.indexOf("chrome")&&-1==o.indexOf("chromium")?s.safari=1:s.safari=0,-1!=o.indexOf("firefox")?s.firefox=1:s.firefox=0,-1!=o.indexOf("firefox/17")?s.firefox17=1:s.firefox17=0,-1!=o.indexOf("firefox/15")?s.firefox15=1:s.firefox15=0,-1!=o.indexOf("firefox/3")?s.firefox3=1:s.firefox3=0,-1!=o.indexOf("opera")?s.opera=1:s.opera=0,-1!=o.indexOf("msie 10")?s.msie10=1:s.msie10=0,-1!=o.indexOf("msie 9")?s.msie9=1:s.msie9=0,-1!=o.indexOf("msie 8")?s.msie8=1:s.msie8=0,-1!=o.indexOf("msie 7")?s.msie7=1:s.msie7=0,-1!=o.indexOf("msie ")?s.msie=1:s.msie=0,i.biginteger_used=null,"Microsoft Internet Explorer"==n?(l.prototype.am=function(e,t,n,i,r,o){for(var a=32767&t,s=t>>15;--o>=0;){var l=32767&this[e],u=this[e++]>>15,c=s*l+u*a;r=((l=a*l+((32767&c)<<15)+n[i]+(1073741823&r))>>>30)+(c>>>15)+s*u+(r>>>30),n[i++]=1073741823&l}return r},a=30):"Netscape"!=n?(l.prototype.am=function(e,t,n,i,r,o){for(;--o>=0;){var a=t*this[e++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r},a=26):(l.prototype.am=function(e,t,n,i,r,o){for(var a=16383&t,s=t>>14;--o>=0;){var l=16383&this[e],u=this[e++]>>14,c=s*l+u*a;r=((l=a*l+((16383&c)<<14)+n[i]+r)>>28)+(c>>14)+s*u,n[i++]=268435455&l}return r},a=28),l.prototype.DB=a,l.prototype.DM=(1<<a)-1,l.prototype.DV=1<<a,l.prototype.FV=Math.pow(2,52),l.prototype.F1=52-a,l.prototype.F2=2*a-52;var c,h,d=new Array;for(c="0".charCodeAt(0),h=0;h<=9;++h)d[c++]=h;for(c="a".charCodeAt(0),h=10;h<36;++h)d[c++]=h;for(c="A".charCodeAt(0),h=10;h<36;++h)d[c++]=h;function p(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function f(e,t){var n=d[e.charCodeAt(t)];return null==n?-1:n}function m(e){var t=u();return t.fromInt(e),t}function v(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function g(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function x(e,t){return e&t}function b(e,t){return e|t}function _(e,t){return e^t}function w(e,t){return e&~t}function M(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function E(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function q(){}function T(e){return e}function S(e){this.r2=u(),this.q3=u(),l.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}g.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},g.prototype.revert=function(e){return e},g.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},g.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=u();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(l.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=u();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},l.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},l.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},l.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,r=!1,o=0;--i>=0;){var a=8==n?255&e[i]:f(e,i);a<0?"-"==e.charAt(i)&&(r=!0):(r=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&l.ZERO.subTo(this,this)},l.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},l.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},l.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},l.prototype.lShiftTo=function(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},l.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}},l.prototype.subTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},l.prototype.multiplyTo=function(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;r<i.t;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&l.ZERO.subTo(t,t)},l.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},l.prototype.divRemTo=function(e,t,n){var i=e.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=u());var o=u(),a=this.s,s=e.s,c=this.DB-v(i[i.t-1]);c>0?(i.lShiftTo(c,o),r.lShiftTo(c,n)):(i.copyTo(o),r.copyTo(n));var h=o.t,d=o[h-1];if(0!=d){var p=d*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),f=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,y=n.t,x=y-h,b=null==t?u():t;for(o.dlShiftTo(x,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),l.ONE.dlShiftTo(h,b),b.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--x>=0;){var _=n[--y]==d?this.DM:Math.floor(n[y]*f+(n[y-1]+g)*m);if((n[y]+=o.am(0,_,n,x,0,h))<_)for(o.dlShiftTo(x,b),n.subTo(b,n);n[y]<--_;)n.subTo(b,n)}null!=t&&(n.drShiftTo(h,t),a!=s&&l.ZERO.subTo(t,t)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),a<0&&l.ZERO.subTo(n,n)}}},l.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},l.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},l.prototype.exp=function(e,t){if(e>4294967295||e<1)return l.ONE;var n=u(),i=u(),r=t.convert(this),o=v(e)-1;for(r.copyTo(n);--o>=0;)if(t.sqrTo(n,i),(e&1<<o)>0)t.mulTo(i,r,n);else{var a=n;n=i,i=a}return t.revert(n)},l.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(r=!0,o=p(n));a>=0;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&i,s<=0&&(s+=this.DB,--a)),n>0&&(r=!0),r&&(o+=p(n));return r?o:"0"},l.prototype.negate=function(){var e=u();return l.ZERO.subTo(this,e),e},l.prototype.abs=function(){return this.s<0?this.negate():this},l.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},l.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+v(this[this.t-1]^this.s&this.DM)},l.prototype.mod=function(e){var t=u();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(l.ZERO)>0&&e.subTo(t,t),t},l.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new g(t):new y(t),this.exp(e,n)},l.ZERO=m(0),l.ONE=m(1),q.prototype.convert=T,q.prototype.revert=T,q.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},q.prototype.sqrTo=function(e,t){e.squareTo(t)},S.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=u();return e.copyTo(t),this.reduce(t),t},S.prototype.revert=function(e){return e},S.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var P=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/P[P.length-1];l.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},l.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=m(n),r=u(),o=u(),a="";for(this.divRemTo(i,r,o);r.signum()>0;)a=(n+o.intValue()).toString(e).substr(1)+a,r.divRemTo(i,r,o);return o.intValue().toString(e)+a},l.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),r=!1,o=0,a=0,s=0;s<e.length;++s){var u=f(e,s);u<0?"-"==e.charAt(s)&&0==this.signum()&&(r=!0):(a=t*a+u,++o>=n&&(this.dMultiply(i),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),r&&l.ZERO.subTo(this,this)},l.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(l.ONE.shiftLeft(e-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(l.ONE.shiftLeft(e-1),this);else{var i=new Array,r=7&e;i.length=1+(e>>3),t.nextBytes(i),r>0?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}},l.prototype.bitwiseTo=function(e,t,n){var i,r,o=Math.min(e.t,this.t);for(i=0;i<o;++i)n[i]=t(this[i],e[i]);if(e.t<this.t){for(r=e.s&this.DM,i=o;i<this.t;++i)n[i]=t(this[i],r);n.t=this.t}else{for(r=this.s&this.DM,i=o;i<e.t;++i)n[i]=t(r,e[i]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},l.prototype.changeBit=function(e,t){var n=l.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},l.prototype.addTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},l.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},l.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},l.prototype.multiplyLowerTo=function(e,t,n){var i,r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()},l.prototype.multiplyUpperTo=function(e,t,n){--t;var i=n.t=this.t+e.t-t;for(n.s=0;--i>=0;)n[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)n[this.t+i-t]=this.am(t-i,e[i],n,0,0,this.t+i-t);n.clamp(),n.drShiftTo(1,n)},l.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var i=this.t-1;i>=0;--i)n=(t*n+this[i])%e;return n},l.prototype.millerRabin=function(e){var t=this.subtract(l.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var i=t.shiftRight(n);(e=e+1>>1)>P.length&&(e=P.length);for(var r=u(),o=0;o<e;++o){r.fromInt(P[Math.floor(Math.random()*P.length)]);var a=r.modPow(i,this);if(0!=a.compareTo(l.ONE)&&0!=a.compareTo(t)){for(var s=1;s++<n&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(l.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},l.prototype.clone=function(){var e=u();return this.copyTo(e),e},l.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},l.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},l.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},l.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},l.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,i=this.DB-e*this.DB%8,r=0;if(e-- >0)for(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i&&(t[r++]=n|this.s<<this.DB-i);e>=0;)i<8?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==r&&(128&this.s)!=(128&n)&&++r,(r>0||n!=this.s)&&(t[r++]=n);return t},l.prototype.equals=function(e){return 0==this.compareTo(e)},l.prototype.min=function(e){return this.compareTo(e)<0?this:e},l.prototype.max=function(e){return this.compareTo(e)>0?this:e},l.prototype.and=function(e){var t=u();return this.bitwiseTo(e,x,t),t},l.prototype.or=function(e){var t=u();return this.bitwiseTo(e,b,t),t},l.prototype.xor=function(e){var t=u();return this.bitwiseTo(e,_,t),t},l.prototype.andNot=function(e){var t=u();return this.bitwiseTo(e,w,t),t},l.prototype.not=function(){for(var e=u(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},l.prototype.shiftLeft=function(e){var t=u();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},l.prototype.shiftRight=function(e){var t=u();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},l.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+M(this[e]);return this.s<0?this.t*this.DB:-1},l.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=E(this[n]^t);return e},l.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},l.prototype.setBit=function(e){return this.changeBit(e,b)},l.prototype.clearBit=function(e){return this.changeBit(e,w)},l.prototype.flipBit=function(e){return this.changeBit(e,_)},l.prototype.add=function(e){var t=u();return this.addTo(e,t),t},l.prototype.subtract=function(e){var t=u();return this.subTo(e,t),t},l.prototype.multiply=function(e){var t=u();return this.multiplyTo(e,t),t},l.prototype.divide=function(e){var t=u();return this.divRemTo(e,t,null),t},l.prototype.remainder=function(e){var t=u();return this.divRemTo(e,null,t),t},l.prototype.divideAndRemainder=function(e){var t=u(),n=u();return this.divRemTo(e,t,n),new Array(t,n)},l.prototype.modPow=function(e,t){var n,i,r=e.bitLength(),o=m(1);if(r<=0)return o;n=r<18?1:r<48?3:r<144?4:r<768?5:6,i=r<8?new g(t):t.isEven()?new S(t):new y(t);var a=new Array,s=3,l=n-1,c=(1<<n)-1;if(a[1]=i.convert(this),n>1){var h=u();for(i.sqrTo(a[1],h);s<=c;)a[s]=u(),i.mulTo(h,a[s-2],a[s]),s+=2}var d,p,f=e.t-1,x=!0,b=u();for(r=v(e[f])-1;f>=0;){for(r>=l?d=e[f]>>r-l&c:(d=(e[f]&(1<<r+1)-1)<<l-r,f>0&&(d|=e[f-1]>>this.DB+r-l)),s=n;0==(1&d);)d>>=1,--s;if((r-=s)<0&&(r+=this.DB,--f),x)a[d].copyTo(o),x=!1;else{for(;s>1;)i.sqrTo(o,b),i.sqrTo(b,o),s-=2;s>0?i.sqrTo(o,b):(p=o,o=b,b=p),i.mulTo(b,a[d],o)}for(;f>=0&&0==(e[f]&1<<r);)i.sqrTo(o,b),p=o,o=b,b=p,--r<0&&(r=this.DB-1,--f)}return i.revert(o)},l.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return l.ZERO;for(var n=e.clone(),i=this.clone(),r=m(1),o=m(0),a=m(0),s=m(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?((!r.isEven()||!o.isEven())&&(r.addTo(this,r),o.subTo(e,o)),r.rShiftTo(1,r)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),t?((!a.isEven()||!s.isEven())&&(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(i)>=0?(n.subTo(i,n),t&&r.subTo(a,r),o.subTo(s,o)):(i.subTo(n,i),t&&a.subTo(r,a),s.subTo(o,s))}return 0!=i.compareTo(l.ONE)?l.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},l.prototype.pow=function(e){return this.exp(e,new q)},l.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var i=t;t=n,n=i}var r=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(r<o&&(o=r),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=n.getLowestSetBit())>0&&n.rShiftTo(r,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},l.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=P[P.length-1]){for(t=0;t<P.length;++t)if(n[0]==P[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<P.length;){for(var i=P[t],r=t+1;r<P.length&&i<A;)i*=P[r++];for(i=n.modInt(i);t<r;)if(i%P[t++]==0)return!1}return n.millerRabin(e)},l.prototype.square=function(){var e=u();return this.squareTo(e),e};var C,L=l;L.prototype.IsNegative=function(){return-1==this.compareTo(L.ZERO)},L.op_Equality=function(e,t){return 0==e.compareTo(t)},L.op_Inequality=function(e,t){return 0!=e.compareTo(t)},L.op_GreaterThan=function(e,t){return e.compareTo(t)>0},L.op_LessThan=function(e,t){return e.compareTo(t)<0},L.op_Addition=function(e,t){return new L(e).add(new L(t))},L.op_Subtraction=function(e,t){return new L(e).subtract(new L(t))},L.Int128Mul=function(e,t){return new L(e).multiply(new L(t))},L.op_Division=function(e,t){return e.divide(t)},L.prototype.ToDouble=function(){return parseFloat(this.toString())},void 0===C&&(C=function(e,t){var n;if(void 0===Object.getOwnPropertyNames){for(n in t.prototype)(void 0===e.prototype[n]||e.prototype[n]==Object.prototype[n])&&(e.prototype[n]=t.prototype[n]);for(n in t)void 0===e[n]&&(e[n]=t[n]);e.$baseCtor=t}else{for(var i=Object.getOwnPropertyNames(t.prototype),r=0;r<i.length;r++)void 0===Object.getOwnPropertyDescriptor(e.prototype,i[r])&&Object.defineProperty(e.prototype,i[r],Object.getOwnPropertyDescriptor(t.prototype,i[r]));for(n in t)void 0===e[n]&&(e[n]=t[n]);e.$baseCtor=t}}),i.Path=function(){return[]},i.Paths=function(){return[]},i.DoublePoint=function(){var e=arguments;this.X=0,this.Y=0,1==e.length?(this.X=e[0].X,this.Y=e[0].Y):2==e.length&&(this.X=e[0],this.Y=e[1])},i.DoublePoint0=function(){this.X=0,this.Y=0},i.DoublePoint1=function(e){this.X=e.X,this.Y=e.Y},i.DoublePoint2=function(e,t){this.X=e,this.Y=t},i.PolyNode=function(){this.m_Parent=null,this.m_polygon=new i.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},i.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,t=this.m_Parent;null!==t;)e=!e,t=t.m_Parent;return e},i.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},i.PolyNode.prototype.Contour=function(){return this.m_polygon},i.PolyNode.prototype.AddChild=function(e){var t=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=t},i.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},i.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},i.PolyNode.prototype.Childs=function(){return this.m_Childs},i.PolyNode.prototype.Parent=function(){return this.m_Parent},i.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},i.PolyTree=function(){this.m_AllPolys=[],i.PolyNode.call(this)},i.PolyTree.prototype.Clear=function(){for(var e=0,t=this.m_AllPolys.length;e<t;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},i.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},i.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},C(i.PolyTree,i.PolyNode),i.Math_Abs_Int64=i.Math_Abs_Int32=i.Math_Abs_Double=function(e){return Math.abs(e)},i.Math_Max_Int32_Int32=function(e,t){return Math.max(e,t)},s.msie||s.opera||s.safari?i.Cast_Int32=function(e){return 0|e}:i.Cast_Int32=function(e){return~~e},s.chrome?i.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):~~e}:s.firefox&&"function"==typeof Number.toInteger?i.Cast_Int64=function(e){return Number.toInteger(e)}:s.msie7||s.msie8?i.Cast_Int64=function(e){return parseInt(e,10)}:s.msie?i.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):0|e}:i.Cast_Int64=function(e){return e<0?Math.ceil(e):Math.floor(e)},i.Clear=function(e){e.length=0},i.PI=3.141592653589793,i.PI2=6.283185307179586,i.IntPoint=function(){var e=arguments,t=e.length;if(this.X=0,this.Y=0,2==t)this.X=e[0],this.Y=e[1];else if(1==t)if(e[0]instanceof i.DoublePoint){var n=e[0];this.X=i.Clipper.Round(n.X),this.Y=i.Clipper.Round(n.Y)}else{var r=e[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},i.IntPoint.op_Equality=function(e,t){return e.X==t.X&&e.Y==t.Y},i.IntPoint.op_Inequality=function(e,t){return e.X!=t.X||e.Y!=t.Y},i.IntPoint0=function(){this.X=0,this.Y=0},i.IntPoint1=function(e){this.X=e.X,this.Y=e.Y},i.IntPoint1dp=function(e){this.X=i.Clipper.Round(e.X),this.Y=i.Clipper.Round(e.Y)},i.IntPoint2=function(e,t){this.X=e,this.Y=t},i.IntRect=function(){var e=arguments,t=e.length;4==t?(this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3]):1==t?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},i.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},i.IntRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},i.IntRect4=function(e,t,n,i){this.left=e,this.top=t,this.right=n,this.bottom=i},i.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},i.PolyType={ptSubject:0,ptClip:1},i.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},i.JoinType={jtSquare:0,jtRound:1,jtMiter:2},i.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},i.EdgeSide={esLeft:0,esRight:1},i.Direction={dRightToLeft:0,dLeftToRight:1},i.TEdge=function(){this.Bot=new i.IntPoint,this.Curr=new i.IntPoint,this.Top=new i.IntPoint,this.Delta=new i.IntPoint,this.Dx=0,this.PolyTyp=i.PolyType.ptSubject,this.Side=i.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},i.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new i.IntPoint},i.MyIntersectNodeSort=function(){},i.MyIntersectNodeSort.Compare=function(e,t){return t.Pt.Y-e.Pt.Y},i.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},i.Scanbeam=function(){this.Y=0,this.Next=null},i.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},i.OutPt=function(){this.Idx=0,this.Pt=new i.IntPoint,this.Next=null,this.Prev=null},i.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new i.IntPoint},i.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},i.ClipperBase.horizontal=-9007199254740992,i.ClipperBase.Skip=-2,i.ClipperBase.Unassigned=-1,i.ClipperBase.tolerance=1e-20,i.ClipperBase.loRange=47453132,i.ClipperBase.hiRange=0xfffffffffffff,i.ClipperBase.near_zero=function(e){return e>-i.ClipperBase.tolerance&&e<i.ClipperBase.tolerance},i.ClipperBase.IsHorizontal=function(e){return 0===e.Delta.Y},i.ClipperBase.prototype.PointIsVertex=function(e,t){var n=t;do{if(i.IntPoint.op_Equality(n.Pt,e))return!0;n=n.Next}while(n!=t);return!1},i.ClipperBase.prototype.PointOnLineSegment=function(e,t,n,i){return i?e.X==t.X&&e.Y==t.Y||e.X==n.X&&e.Y==n.Y||e.X>t.X==e.X<n.X&&e.Y>t.Y==e.Y<n.Y&&L.op_Equality(L.Int128Mul(e.X-t.X,n.Y-t.Y),L.Int128Mul(n.X-t.X,e.Y-t.Y)):e.X==t.X&&e.Y==t.Y||e.X==n.X&&e.Y==n.Y||e.X>t.X==e.X<n.X&&e.Y>t.Y==e.Y<n.Y&&(e.X-t.X)*(n.Y-t.Y)==(n.X-t.X)*(e.Y-t.Y)},i.ClipperBase.prototype.PointOnPolygon=function(e,t,n){for(var i=t;;){if(this.PointOnLineSegment(e,i.Pt,i.Next.Pt,n))return!0;if((i=i.Next)==t)break}return!1},i.ClipperBase.prototype.SlopesEqual=i.ClipperBase.SlopesEqual=function(){var e,t,n,r,o,a,s=arguments,l=s.length;return 3==l?(e=s[0],t=s[1],s[2]?L.op_Equality(L.Int128Mul(e.Delta.Y,t.Delta.X),L.Int128Mul(e.Delta.X,t.Delta.Y)):i.Cast_Int64(e.Delta.Y*t.Delta.X)==i.Cast_Int64(e.Delta.X*t.Delta.Y)):4==l?(n=s[0],r=s[1],o=s[2],s[3]?L.op_Equality(L.Int128Mul(n.Y-r.Y,r.X-o.X),L.Int128Mul(n.X-r.X,r.Y-o.Y)):i.Cast_Int64((n.Y-r.Y)*(r.X-o.X))-i.Cast_Int64((n.X-r.X)*(r.Y-o.Y))==0):(n=s[0],r=s[1],o=s[2],a=s[3],s[4]?L.op_Equality(L.Int128Mul(n.Y-r.Y,o.X-a.X),L.Int128Mul(n.X-r.X,o.Y-a.Y)):i.Cast_Int64((n.Y-r.Y)*(o.X-a.X))-i.Cast_Int64((n.X-r.X)*(o.Y-a.Y))==0)},i.ClipperBase.SlopesEqual3=function(e,t,n){return n?L.op_Equality(L.Int128Mul(e.Delta.Y,t.Delta.X),L.Int128Mul(e.Delta.X,t.Delta.Y)):i.Cast_Int64(e.Delta.Y*t.Delta.X)==i.Cast_Int64(e.Delta.X*t.Delta.Y)},i.ClipperBase.SlopesEqual4=function(e,t,n,r){return r?L.op_Equality(L.Int128Mul(e.Y-t.Y,t.X-n.X),L.Int128Mul(e.X-t.X,t.Y-n.Y)):i.Cast_Int64((e.Y-t.Y)*(t.X-n.X))-i.Cast_Int64((e.X-t.X)*(t.Y-n.Y))==0},i.ClipperBase.SlopesEqual5=function(e,t,n,r,o){return o?L.op_Equality(L.Int128Mul(e.Y-t.Y,n.X-r.X),L.Int128Mul(e.X-t.X,n.Y-r.Y)):i.Cast_Int64((e.Y-t.Y)*(n.X-r.X))-i.Cast_Int64((e.X-t.X)*(n.Y-r.Y))==0},i.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,t=this.m_edges.length;e<t;++e){for(var n=0,r=this.m_edges[e].length;n<r;++n)this.m_edges[e][n]=null;i.Clear(this.m_edges[e])}i.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},i.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},i.ClipperBase.prototype.RangeTest=function(e,t){t.Value?(e.X>i.ClipperBase.hiRange||e.Y>i.ClipperBase.hiRange||-e.X>i.ClipperBase.hiRange||-e.Y>i.ClipperBase.hiRange)&&i.Error("Coordinate outside allowed range in RangeTest()."):(e.X>i.ClipperBase.loRange||e.Y>i.ClipperBase.loRange||-e.X>i.ClipperBase.loRange||-e.Y>i.ClipperBase.loRange)&&(t.Value=!0,this.RangeTest(e,t))},i.ClipperBase.prototype.InitEdge=function(e,t,n,i){e.Next=t,e.Prev=n,e.Curr.X=i.X,e.Curr.Y=i.Y,e.OutIdx=-1},i.ClipperBase.prototype.InitEdge2=function(e,t){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y),this.SetDx(e),e.PolyTyp=t},i.ClipperBase.prototype.FindNextLocMin=function(e){for(var t;;){for(;i.IntPoint.op_Inequality(e.Bot,e.Prev.Bot)||i.IntPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!=i.ClipperBase.horizontal&&e.Prev.Dx!=i.ClipperBase.horizontal)break;for(;e.Prev.Dx==i.ClipperBase.horizontal;)e=e.Prev;for(t=e;e.Dx==i.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!=e.Prev.Bot.Y){t.Prev.Bot.X<e.Bot.X&&(e=t);break}}return e},i.ClipperBase.prototype.ProcessBound=function(e,t){var n,r,o=e,a=e;if(e.Dx==i.ClipperBase.horizontal&&(r=t?e.Prev.Bot.X:e.Next.Bot.X,e.Bot.X!=r&&this.ReverseHorizontal(e)),a.OutIdx!=i.ClipperBase.Skip)if(t){for(;a.Top.Y==a.Next.Bot.Y&&a.Next.OutIdx!=i.ClipperBase.Skip;)a=a.Next;if(a.Dx==i.ClipperBase.horizontal&&a.Next.OutIdx!=i.ClipperBase.Skip){for(n=a;n.Prev.Dx==i.ClipperBase.horizontal;)n=n.Prev;n.Prev.Top.X==a.Next.Top.X?t||(a=n.Prev):n.Prev.Top.X>a.Next.Top.X&&(a=n.Prev)}for(;e!=a;)e.NextInLML=e.Next,e.Dx==i.ClipperBase.horizontal&&e!=o&&e.Bot.X!=e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx==i.ClipperBase.horizontal&&e!=o&&e.Bot.X!=e.Prev.Top.X&&this.ReverseHorizontal(e),a=a.Next}else{for(;a.Top.Y==a.Prev.Bot.Y&&a.Prev.OutIdx!=i.ClipperBase.Skip;)a=a.Prev;if(a.Dx==i.ClipperBase.horizontal&&a.Prev.OutIdx!=i.ClipperBase.Skip){for(n=a;n.Next.Dx==i.ClipperBase.horizontal;)n=n.Next;n.Next.Top.X==a.Prev.Top.X?t||(a=n.Next):n.Next.Top.X>a.Prev.Top.X&&(a=n.Next)}for(;e!=a;)e.NextInLML=e.Prev,e.Dx==i.ClipperBase.horizontal&&e!=o&&e.Bot.X!=e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx==i.ClipperBase.horizontal&&e!=o&&e.Bot.X!=e.Next.Top.X&&this.ReverseHorizontal(e),a=a.Prev}if(a.OutIdx==i.ClipperBase.Skip){if(e=a,t){for(;e.Top.Y==e.Next.Bot.Y;)e=e.Next;for(;e!=a&&e.Dx==i.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y==e.Prev.Bot.Y;)e=e.Prev;for(;e!=a&&e.Dx==i.ClipperBase.horizontal;)e=e.Next}if(e==a)a=t?e.Next:e.Prev;else{e=t?a.Next:a.Prev;var s=new i.LocalMinima;s.Next=null,s.Y=e.Bot.Y,s.LeftBound=null,s.RightBound=e,s.RightBound.WindDelta=0,a=this.ProcessBound(s.RightBound,t),this.InsertLocalMinima(s)}}return a},i.ClipperBase.prototype.AddPath=function(e,t,n){!n&&t==i.PolyType.ptClip&&i.Error("AddPath: Open paths must be subject.");var r=e.length-1;if(n)for(;r>0&&i.IntPoint.op_Equality(e[r],e[0]);)--r;for(;r>0&&i.IntPoint.op_Equality(e[r],e[r-1]);)--r;if(n&&r<2||!n&&r<1)return!1;for(var o=new Array,a=0;a<=r;a++)o.push(new i.TEdge);var s=!0;o[1].Curr.X=e[1].X,o[1].Curr.Y=e[1].Y;var l={Value:this.m_UseFullRange};for(this.RangeTest(e[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(e[r],l),this.m_UseFullRange=l.Value,this.InitEdge(o[0],o[1],o[r],e[0]),this.InitEdge(o[r],o[0],o[r-1],e[r]),a=r-1;a>=1;--a)l.Value=this.m_UseFullRange,this.RangeTest(e[a],l),this.m_UseFullRange=l.Value,this.InitEdge(o[a],o[a+1],o[a-1],e[a]);for(var u=o[0],c=u,h=u;;)if(i.IntPoint.op_Equality(c.Curr,c.Next.Curr)){if(c==c.Next)break;c==u&&(u=c.Next),h=c=this.RemoveEdge(c)}else{if(c.Prev==c.Next)break;if(!n||!i.ClipperBase.SlopesEqual(c.Prev.Curr,c.Curr,c.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(c.Prev.Curr,c.Curr,c.Next.Curr)){if((c=c.Next)==h)break}else c==u&&(u=c.Next),h=c=(c=this.RemoveEdge(c)).Prev}if(!n&&c==c.Next||n&&c.Prev==c.Next)return!1;n||(this.m_HasOpenPaths=!0,u.Prev.OutIdx=i.ClipperBase.Skip),c=u;do{this.InitEdge2(c,t),c=c.Next,s&&c.Curr.Y!=u.Curr.Y&&(s=!1)}while(c!=u);if(s){if(n)return!1;for(c.Prev.OutIdx=i.ClipperBase.Skip,c.Prev.Bot.X<c.Prev.Top.X&&this.ReverseHorizontal(c.Prev),(f=new i.LocalMinima).Next=null,f.Y=c.Bot.Y,f.LeftBound=null,f.RightBound=c,f.RightBound.Side=i.EdgeSide.esRight,f.RightBound.WindDelta=0;c.Next.OutIdx!=i.ClipperBase.Skip;)c.NextInLML=c.Next,c.Bot.X!=c.Prev.Top.X&&this.ReverseHorizontal(c),c=c.Next;return this.InsertLocalMinima(f),this.m_edges.push(o),!0}this.m_edges.push(o);for(var d,p=null;(c=this.FindNextLocMin(c))!=p;){var f;null==p&&(p=c),(f=new i.LocalMinima).Next=null,f.Y=c.Bot.Y,c.Dx<c.Prev.Dx?(f.LeftBound=c.Prev,f.RightBound=c,d=!1):(f.LeftBound=c,f.RightBound=c.Prev,d=!0),f.LeftBound.Side=i.EdgeSide.esLeft,f.RightBound.Side=i.EdgeSide.esRight,n?f.LeftBound.Next==f.RightBound?f.LeftBound.WindDelta=-1:f.LeftBound.WindDelta=1:f.LeftBound.WindDelta=0,f.RightBound.WindDelta=-f.LeftBound.WindDelta,c=this.ProcessBound(f.LeftBound,d);var m=this.ProcessBound(f.RightBound,!d);f.LeftBound.OutIdx==i.ClipperBase.Skip?f.LeftBound=null:f.RightBound.OutIdx==i.ClipperBase.Skip&&(f.RightBound=null),this.InsertLocalMinima(f),d||(c=m)}return!0},i.ClipperBase.prototype.AddPaths=function(e,t,n){for(var i=!1,r=0,o=e.length;r<o;++r)this.AddPath(e[r],t,n)&&(i=!0);return i},i.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,t,n){return!(i.IntPoint.op_Equality(e,n)||i.IntPoint.op_Equality(e,t)||i.IntPoint.op_Equality(n,t))&&(e.X!=n.X?t.X>e.X==t.X<n.X:t.Y>e.Y==t.Y<n.Y)},i.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var t=e.Next;return e.Prev=null,t},i.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,0===e.Delta.Y?e.Dx=i.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},i.ClipperBase.prototype.InsertLocalMinima=function(e){if(null===this.m_MinimaList)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var t=this.m_MinimaList;null!==t.Next&&e.Y<t.Next.Y;)t=t.Next;e.Next=t.Next,t.Next=e}},i.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},i.ClipperBase.prototype.ReverseHorizontal=function(e){var t=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=t},i.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var e=this.m_MinimaList;null!=e;){var t=e.LeftBound;null!=t&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.Side=i.EdgeSide.esLeft,t.OutIdx=i.ClipperBase.Unassigned),null!=(t=e.RightBound)&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.Side=i.EdgeSide.esRight,t.OutIdx=i.ClipperBase.Unassigned),e=e.Next}},i.Clipper=function(e){void 0===e&&(e=0),this.m_PolyOuts=null,this.m_ClipType=i.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=i.PolyFillType.pftEvenOdd,this.m_SubjFillType=i.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,i.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=i.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&e),this.StrictlySimple=0!=(2&e),this.PreserveCollinear=0!=(4&e)},i.Clipper.ioReverseSolution=1,i.Clipper.ioStrictlySimple=2,i.Clipper.ioPreserveCollinear=4,i.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),i.ClipperBase.prototype.Clear.call(this))},i.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var e=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=e}},i.Clipper.prototype.Reset=function(){i.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var e=this.m_MinimaList;null!==e;)this.InsertScanbeam(e.Y),e=e.Next},i.Clipper.prototype.InsertScanbeam=function(e){if(null===this.m_Scanbeam)this.m_Scanbeam=new i.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y)(n=new i.Scanbeam).Y=e,n.Next=this.m_Scanbeam,this.m_Scanbeam=n;else{for(var t=this.m_Scanbeam;null!==t.Next&&e<=t.Next.Y;)t=t.Next;if(e==t.Y)return;var n;(n=new i.Scanbeam).Y=e,n.Next=t.Next,t.Next=n}},i.Clipper.prototype.Execute=function(){var e=arguments,t=e.length,n=e[1]instanceof i.PolyTree;if(4==t&&!n){var r=e[0],o=e[1],a=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&i.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,i.Clear(o),this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{(u=this.ExecuteInternal())&&this.BuildResult(o)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}if(4==t&&n){r=e[0];var l=e[1];if(a=e[2],s=e[3],this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=a,this.m_ClipFillType=s,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var u;(u=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}return 2!=t||n?2==t&&n?(r=e[0],l=e[1],this.Execute(r,l,i.PolyFillType.pftEvenOdd,i.PolyFillType.pftEvenOdd)):void 0:(r=e[0],o=e[1],this.Execute(r,o,i.PolyFillType.pftEvenOdd,i.PolyFillType.pftEvenOdd))},i.Clipper.prototype.FixHoleLinkage=function(e){if(null!==e.FirstLeft&&(e.IsHole==e.FirstLeft.IsHole||null===e.FirstLeft.Pts)){for(var t=e.FirstLeft;null!==t&&(t.IsHole==e.IsHole||null===t.Pts);)t=t.FirstLeft;e.FirstLeft=t}},i.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var e=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(e),i.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var t=this.PopScanbeam();if(!this.ProcessIntersections(e,t))return!1;this.ProcessEdgesAtTopOfScanbeam(t),e=t}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var n=0,r=this.m_PolyOuts.length;n<r;n++)null===(o=this.m_PolyOuts[n]).Pts||o.IsOpen||(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts);for(this.JoinCommonEdges(),n=0,r=this.m_PolyOuts.length;n<r;n++){var o;null!==(o=this.m_PolyOuts[n]).Pts&&!o.IsOpen&&this.FixupOutPolygon(o)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{i.Clear(this.m_Joins),i.Clear(this.m_GhostJoins)}},i.Clipper.prototype.PopScanbeam=function(){var e=this.m_Scanbeam.Y;return this.m_Scanbeam,this.m_Scanbeam=this.m_Scanbeam.Next,e},i.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,t=this.m_PolyOuts.length;e<t;++e)this.DisposeOutRec(e);i.Clear(this.m_PolyOuts)},i.Clipper.prototype.DisposeOutRec=function(e){var t=this.m_PolyOuts[e];null!==t.Pts&&this.DisposeOutPts(t.Pts),t=null,this.m_PolyOuts[e]=null},i.Clipper.prototype.DisposeOutPts=function(e){if(null!==e)for(e.Prev.Next=null;null!==e;)e=e.Next},i.Clipper.prototype.AddJoin=function(e,t,n){var r=new i.Join;r.OutPt1=e,r.OutPt2=t,r.OffPt.X=n.X,r.OffPt.Y=n.Y,this.m_Joins.push(r)},i.Clipper.prototype.AddGhostJoin=function(e,t){var n=new i.Join;n.OutPt1=e,n.OffPt.X=t.X,n.OffPt.Y=t.Y,this.m_GhostJoins.push(n)},i.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==e;){var t=this.m_CurrentLM.LeftBound,n=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===t?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):null==n?(this.InsertEdgeIntoAEL(t,null),this.SetWindingCount(t),this.IsContributing(t)&&(r=this.AddOutPt(t,t.Bot)),this.InsertScanbeam(t.Top.Y)):(this.InsertEdgeIntoAEL(t,null),this.InsertEdgeIntoAEL(n,t),this.SetWindingCount(t),n.WindCnt=t.WindCnt,n.WindCnt2=t.WindCnt2,this.IsContributing(t)&&(r=this.AddLocalMinPoly(t,n,t.Bot)),this.InsertScanbeam(t.Top.Y)),null!=n&&(i.ClipperBase.IsHorizontal(n)?this.AddEdgeToSEL(n):this.InsertScanbeam(n.Top.Y)),null!=t&&null!=n){if(null!==r&&i.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var o=0,a=this.m_GhostJoins.length;o<a;o++){var s=this.m_GhostJoins[o];this.HorzSegmentsOverlap(s.OutPt1.Pt,s.OffPt,n.Bot,n.Top)&&this.AddJoin(s.OutPt1,r,s.OffPt)}if(t.OutIdx>=0&&null!==t.PrevInAEL&&t.PrevInAEL.Curr.X==t.Bot.X&&t.PrevInAEL.OutIdx>=0&&i.ClipperBase.SlopesEqual(t.PrevInAEL,t,this.m_UseFullRange)&&0!==t.WindDelta&&0!==t.PrevInAEL.WindDelta){var l=this.AddOutPt(t.PrevInAEL,t.Bot);this.AddJoin(r,l,t.Top)}if(t.NextInAEL!=n){n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&i.ClipperBase.SlopesEqual(n.PrevInAEL,n,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta&&(l=this.AddOutPt(n.PrevInAEL,n.Bot),this.AddJoin(r,l,n.Top));var u=t.NextInAEL;if(null!==u)for(;u!=n;)this.IntersectEdges(n,u,t.Curr,!1),u=u.NextInAEL}}}},i.Clipper.prototype.InsertEdgeIntoAEL=function(e,t){if(null===this.m_ActiveEdges)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(null===t&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(null===t&&(t=this.m_ActiveEdges);null!==t.NextInAEL&&!this.E2InsertsBeforeE1(t.NextInAEL,e);)t=t.NextInAEL;e.NextInAEL=t.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=e),e.PrevInAEL=t,t.NextInAEL=e}},i.Clipper.prototype.E2InsertsBeforeE1=function(e,t){return t.Curr.X==e.Curr.X?t.Top.Y>e.Top.Y?t.Top.X<i.Clipper.TopX(e,t.Top.Y):e.Top.X>i.Clipper.TopX(t,e.Top.Y):t.Curr.X<e.Curr.X},i.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp==i.PolyType.ptSubject?this.m_SubjFillType==i.PolyFillType.pftEvenOdd:this.m_ClipFillType==i.PolyFillType.pftEvenOdd},i.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp==i.PolyType.ptSubject?this.m_ClipFillType==i.PolyFillType.pftEvenOdd:this.m_SubjFillType==i.PolyFillType.pftEvenOdd},i.Clipper.prototype.IsContributing=function(e){var t,n;switch(e.PolyTyp==i.PolyType.ptSubject?(t=this.m_SubjFillType,n=this.m_ClipFillType):(t=this.m_ClipFillType,n=this.m_SubjFillType),t){case i.PolyFillType.pftEvenOdd:if(0===e.WindDelta&&1!=e.WindCnt)return!1;break;case i.PolyFillType.pftNonZero:if(1!=Math.abs(e.WindCnt))return!1;break;case i.PolyFillType.pftPositive:if(1!=e.WindCnt)return!1;break;default:if(-1!=e.WindCnt)return!1}switch(this.m_ClipType){case i.ClipType.ctIntersection:switch(n){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return 0!==e.WindCnt2;case i.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case i.ClipType.ctUnion:switch(n){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return 0===e.WindCnt2;case i.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case i.ClipType.ctDifference:if(e.PolyTyp==i.PolyType.ptSubject)switch(n){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return 0===e.WindCnt2;case i.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(n){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return 0!==e.WindCnt2;case i.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case i.ClipType.ctXor:if(0!==e.WindDelta)return!0;switch(n){case i.PolyFillType.pftEvenOdd:case i.PolyFillType.pftNonZero:return 0===e.WindCnt2;case i.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}}return!0},i.Clipper.prototype.SetWindingCount=function(e){for(var t=e.PrevInAEL;null!==t&&(t.PolyTyp!=e.PolyTyp||0===t.WindDelta);)t=t.PrevInAEL;if(null===t)e.WindCnt=0===e.WindDelta?1:e.WindDelta,e.WindCnt2=0,t=this.m_ActiveEdges;else if(0===e.WindDelta&&this.m_ClipType!=i.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(e)){if(0===e.WindDelta){for(var n=!0,r=t.PrevInAEL;null!==r;)r.PolyTyp==t.PolyTyp&&0!==r.WindDelta&&(n=!n),r=r.PrevInAEL;e.WindCnt=n?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta:e.WindCnt=0===e.WindDelta?1:e.WindDelta:0===e.WindDelta?e.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;t!=e;)0!==t.WindDelta&&(e.WindCnt2=0===e.WindCnt2?1:0),t=t.NextInAEL;else for(;t!=e;)e.WindCnt2+=t.WindDelta,t=t.NextInAEL},i.Clipper.prototype.AddEdgeToSEL=function(e){null===this.m_SortedEdges?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},i.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},i.Clipper.prototype.SwapPositionsInAEL=function(e,t){if(e.NextInAEL!=e.PrevInAEL&&t.NextInAEL!=t.PrevInAEL){if(e.NextInAEL==t)null!==(n=t.NextInAEL)&&(n.PrevInAEL=e),null!==(i=e.PrevInAEL)&&(i.NextInAEL=t),t.PrevInAEL=i,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=n;else if(t.NextInAEL==e)null!==(n=e.NextInAEL)&&(n.PrevInAEL=t),null!==(i=t.PrevInAEL)&&(i.NextInAEL=e),e.PrevInAEL=i,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n;else{var n=e.NextInAEL,i=e.PrevInAEL;e.NextInAEL=t.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=t.PrevInAEL,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e),t.NextInAEL=n,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=i,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t)}null===e.PrevInAEL?this.m_ActiveEdges=e:null===t.PrevInAEL&&(this.m_ActiveEdges=t)}},i.Clipper.prototype.SwapPositionsInSEL=function(e,t){if(!(null===e.NextInSEL&&null===e.PrevInSEL||null===t.NextInSEL&&null===t.PrevInSEL)){if(e.NextInSEL==t)null!==(n=t.NextInSEL)&&(n.PrevInSEL=e),null!==(i=e.PrevInSEL)&&(i.NextInSEL=t),t.PrevInSEL=i,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=n;else if(t.NextInSEL==e)null!==(n=e.NextInSEL)&&(n.PrevInSEL=t),null!==(i=t.PrevInSEL)&&(i.NextInSEL=e),e.PrevInSEL=i,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=n;else{var n=e.NextInSEL,i=e.PrevInSEL;e.NextInSEL=t.NextInSEL,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=t.PrevInSEL,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e),t.NextInSEL=n,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=i,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t)}null===e.PrevInSEL?this.m_SortedEdges=e:null===t.PrevInSEL&&(this.m_SortedEdges=t)}},i.Clipper.prototype.AddLocalMaxPoly=function(e,t,n){this.AddOutPt(e,n),0==t.WindDelta&&this.AddOutPt(t,n),e.OutIdx==t.OutIdx?(e.OutIdx=-1,t.OutIdx=-1):e.OutIdx<t.OutIdx?this.AppendPolygon(e,t):this.AppendPolygon(t,e)},i.Clipper.prototype.AddLocalMinPoly=function(e,t,n){var r,o,a;if(i.ClipperBase.IsHorizontal(t)||e.Dx>t.Dx?(r=this.AddOutPt(e,n),t.OutIdx=e.OutIdx,e.Side=i.EdgeSide.esLeft,t.Side=i.EdgeSide.esRight,a=(o=e).PrevInAEL==t?t.PrevInAEL:o.PrevInAEL):(r=this.AddOutPt(t,n),e.OutIdx=t.OutIdx,e.Side=i.EdgeSide.esRight,t.Side=i.EdgeSide.esLeft,a=(o=t).PrevInAEL==e?e.PrevInAEL:o.PrevInAEL),null!==a&&a.OutIdx>=0&&i.Clipper.TopX(a,n.Y)==i.Clipper.TopX(o,n.Y)&&i.ClipperBase.SlopesEqual(o,a,this.m_UseFullRange)&&0!==o.WindDelta&&0!==a.WindDelta){var s=this.AddOutPt(a,n);this.AddJoin(r,s,o.Top)}return r},i.Clipper.prototype.CreateOutRec=function(){var e=new i.OutRec;return e.Idx=-1,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},i.Clipper.prototype.AddOutPt=function(e,t){var n=e.Side==i.EdgeSide.esLeft;if(e.OutIdx<0){(o=this.CreateOutRec()).IsOpen=0===e.WindDelta;var r=new i.OutPt;return o.Pts=r,r.Idx=o.Idx,r.Pt.X=t.X,r.Pt.Y=t.Y,r.Next=r,r.Prev=r,o.IsOpen||this.SetHoleState(e,o),e.OutIdx=o.Idx,r}var o,a=(o=this.m_PolyOuts[e.OutIdx]).Pts;return n&&i.IntPoint.op_Equality(t,a.Pt)?a:!n&&i.IntPoint.op_Equality(t,a.Prev.Pt)?a.Prev:((r=new i.OutPt).Idx=o.Idx,r.Pt.X=t.X,r.Pt.Y=t.Y,r.Next=a,r.Prev=a.Prev,r.Prev.Next=r,a.Prev=r,n&&(o.Pts=r),r)},i.Clipper.prototype.SwapPoints=function(e,t){var n=new i.IntPoint(e.Value);e.Value.X=t.Value.X,e.Value.Y=t.Value.Y,t.Value.X=n.X,t.Value.Y=n.Y},i.Clipper.prototype.HorzSegmentsOverlap=function(e,t,n,i){return e.X>n.X==e.X<i.X||t.X>n.X==t.X<i.X||n.X>e.X==n.X<t.X||i.X>e.X==i.X<t.X||e.X==n.X&&t.X==i.X||e.X==i.X&&t.X==n.X},i.Clipper.prototype.InsertPolyPtBetween=function(e,t,n){var r=new i.OutPt;return r.Pt.X=n.X,r.Pt.Y=n.Y,t==e.Next?(e.Next=r,t.Prev=r,r.Next=t,r.Prev=e):(t.Next=r,e.Prev=r,r.Next=e,r.Prev=t),r},i.Clipper.prototype.SetHoleState=function(e,t){for(var n=!1,i=e.PrevInAEL;null!==i;)i.OutIdx>=0&&0!=i.WindDelta&&(n=!n,null===t.FirstLeft&&(t.FirstLeft=this.m_PolyOuts[i.OutIdx])),i=i.PrevInAEL;n&&(t.IsHole=!0)},i.Clipper.prototype.GetDx=function(e,t){return e.Y==t.Y?i.ClipperBase.horizontal:(t.X-e.X)/(t.Y-e.Y)},i.Clipper.prototype.FirstIsBottomPt=function(e,t){for(var n=e.Prev;i.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Prev;var r=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=e.Next;i.IntPoint.op_Equality(n.Pt,e.Pt)&&n!=e;)n=n.Next;var o=Math.abs(this.GetDx(e.Pt,n.Pt));for(n=t.Prev;i.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Prev;var a=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;i.IntPoint.op_Equality(n.Pt,t.Pt)&&n!=t;)n=n.Next;var s=Math.abs(this.GetDx(t.Pt,n.Pt));return r>=a&&r>=s||o>=a&&o>=s},i.Clipper.prototype.GetBottomPt=function(e){for(var t=null,n=e.Next;n!=e;)n.Pt.Y>e.Pt.Y?(e=n,t=null):n.Pt.Y==e.Pt.Y&&n.Pt.X<=e.Pt.X&&(n.Pt.X<e.Pt.X?(t=null,e=n):n.Next!=e&&n.Prev!=e&&(t=n)),n=n.Next;if(null!==t)for(;t!=n;)for(this.FirstIsBottomPt(n,t)||(e=t),t=t.Next;i.IntPoint.op_Inequality(t.Pt,e.Pt);)t=t.Next;return e},i.Clipper.prototype.GetLowermostRec=function(e,t){null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts)),null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts));var n=e.BottomPt,i=t.BottomPt;return n.Pt.Y>i.Pt.Y?e:n.Pt.Y<i.Pt.Y?t:n.Pt.X<i.Pt.X?e:n.Pt.X>i.Pt.X||n.Next==n?t:i.Next==i||this.FirstIsBottomPt(n,i)?e:t},i.Clipper.prototype.Param1RightOfParam2=function(e,t){do{if((e=e.FirstLeft)==t)return!0}while(null!==e);return!1},i.Clipper.prototype.GetOutRec=function(e){for(var t=this.m_PolyOuts[e];t!=this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},i.Clipper.prototype.AppendPolygon=function(e,t){var n,r=this.m_PolyOuts[e.OutIdx],o=this.m_PolyOuts[t.OutIdx];n=this.Param1RightOfParam2(r,o)?o:this.Param1RightOfParam2(o,r)?r:this.GetLowermostRec(r,o);var a,s=r.Pts,l=s.Prev,u=o.Pts,c=u.Prev;e.Side==i.EdgeSide.esLeft?(t.Side==i.EdgeSide.esLeft?(this.ReversePolyPtLinks(u),u.Next=s,s.Prev=u,l.Next=c,c.Prev=l,r.Pts=c):(c.Next=s,s.Prev=c,u.Prev=l,l.Next=u,r.Pts=u),a=i.EdgeSide.esLeft):(t.Side==i.EdgeSide.esRight?(this.ReversePolyPtLinks(u),l.Next=c,c.Prev=l,u.Next=s,s.Prev=u):(l.Next=u,u.Prev=l,s.Prev=c,c.Next=s),a=i.EdgeSide.esRight),r.BottomPt=null,n==o&&(o.FirstLeft!=r&&(r.FirstLeft=o.FirstLeft),r.IsHole=o.IsHole),o.Pts=null,o.BottomPt=null,o.FirstLeft=r;var h=e.OutIdx,d=t.OutIdx;e.OutIdx=-1,t.OutIdx=-1;for(var p=this.m_ActiveEdges;null!==p;){if(p.OutIdx==d){p.OutIdx=h,p.Side=a;break}p=p.NextInAEL}o.Idx=r.Idx},i.Clipper.prototype.ReversePolyPtLinks=function(e){if(null!==e){var t,n;t=e;do{n=t.Next,t.Next=t.Prev,t.Prev=n,t=n}while(t!=e)}},i.Clipper.SwapSides=function(e,t){var n=e.Side;e.Side=t.Side,t.Side=n},i.Clipper.SwapPolyIndexes=function(e,t){var n=e.OutIdx;e.OutIdx=t.OutIdx,t.OutIdx=n},i.Clipper.prototype.IntersectEdges=function(e,t,n,r){var o,a,s,l,u,c,h=!r&&null===e.NextInLML&&e.Top.X==n.X&&e.Top.Y==n.Y,d=!r&&null===t.NextInLML&&t.Top.X==n.X&&t.Top.Y==n.Y,p=e.OutIdx>=0,f=t.OutIdx>=0;if(0===e.WindDelta||0===t.WindDelta)return 0===e.WindDelta&&0===t.WindDelta?(h||d)&&p&&f&&this.AddLocalMaxPoly(e,t,n):e.PolyTyp==t.PolyTyp&&e.WindDelta!=t.WindDelta&&this.m_ClipType==i.ClipType.ctUnion?0===e.WindDelta?f&&(this.AddOutPt(e,n),p&&(e.OutIdx=-1)):p&&(this.AddOutPt(t,n),f&&(t.OutIdx=-1)):e.PolyTyp!=t.PolyTyp&&(0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==i.ClipType.ctUnion&&0!==t.WindCnt2?0===t.WindDelta&&1==Math.abs(e.WindCnt)&&(this.m_ClipType!=i.ClipType.ctUnion||0===e.WindCnt2)&&(this.AddOutPt(t,n),f&&(t.OutIdx=-1)):(this.AddOutPt(e,n),p&&(e.OutIdx=-1))),h&&(e.OutIdx<0?this.DeleteFromAEL(e):i.Error("Error intersecting polylines")),void(d&&(t.OutIdx<0?this.DeleteFromAEL(t):i.Error("Error intersecting polylines")));if(e.PolyTyp==t.PolyTyp)if(this.IsEvenOddFillType(e)){var m=e.WindCnt;e.WindCnt=t.WindCnt,t.WindCnt=m}else e.WindCnt+t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=t.WindDelta,t.WindCnt-e.WindDelta==0?t.WindCnt=-t.WindCnt:t.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2-=e.WindDelta;switch(e.PolyTyp==i.PolyType.ptSubject?(o=this.m_SubjFillType,s=this.m_ClipFillType):(o=this.m_ClipFillType,s=this.m_SubjFillType),t.PolyTyp==i.PolyType.ptSubject?(a=this.m_SubjFillType,l=this.m_ClipFillType):(a=this.m_ClipFillType,l=this.m_SubjFillType),o){case i.PolyFillType.pftPositive:u=e.WindCnt;break;case i.PolyFillType.pftNegative:u=-e.WindCnt;break;default:u=Math.abs(e.WindCnt)}switch(a){case i.PolyFillType.pftPositive:c=t.WindCnt;break;case i.PolyFillType.pftNegative:c=-t.WindCnt;break;default:c=Math.abs(t.WindCnt)}if(p&&f)h||d||0!==u&&1!=u||0!==c&&1!=c||e.PolyTyp!=t.PolyTyp&&this.m_ClipType!=i.ClipType.ctXor?this.AddLocalMaxPoly(e,t,n):(this.AddOutPt(e,n),this.AddOutPt(t,n),i.Clipper.SwapSides(e,t),i.Clipper.SwapPolyIndexes(e,t));else if(p)(0===c||1==c)&&(this.AddOutPt(e,n),i.Clipper.SwapSides(e,t),i.Clipper.SwapPolyIndexes(e,t));else if(f)(0===u||1==u)&&(this.AddOutPt(t,n),i.Clipper.SwapSides(e,t),i.Clipper.SwapPolyIndexes(e,t));else if(!(0!==u&&1!=u||0!==c&&1!=c||h||d)){var v,g;switch(s){case i.PolyFillType.pftPositive:v=e.WindCnt2;break;case i.PolyFillType.pftNegative:v=-e.WindCnt2;break;default:v=Math.abs(e.WindCnt2)}switch(l){case i.PolyFillType.pftPositive:g=t.WindCnt2;break;case i.PolyFillType.pftNegative:g=-t.WindCnt2;break;default:g=Math.abs(t.WindCnt2)}if(e.PolyTyp!=t.PolyTyp)this.AddLocalMinPoly(e,t,n);else if(1==u&&1==c)switch(this.m_ClipType){case i.ClipType.ctIntersection:v>0&&g>0&&this.AddLocalMinPoly(e,t,n);break;case i.ClipType.ctUnion:v<=0&&g<=0&&this.AddLocalMinPoly(e,t,n);break;case i.ClipType.ctDifference:(e.PolyTyp==i.PolyType.ptClip&&v>0&&g>0||e.PolyTyp==i.PolyType.ptSubject&&v<=0&&g<=0)&&this.AddLocalMinPoly(e,t,n);break;case i.ClipType.ctXor:this.AddLocalMinPoly(e,t,n)}else i.Clipper.SwapSides(e,t)}h!=d&&(h&&e.OutIdx>=0||d&&t.OutIdx>=0)&&(i.Clipper.SwapSides(e,t),i.Clipper.SwapPolyIndexes(e,t)),h&&this.DeleteFromAEL(e),d&&this.DeleteFromAEL(t)},i.Clipper.prototype.DeleteFromAEL=function(e){var t=e.PrevInAEL,n=e.NextInAEL;null===t&&null===n&&e!=this.m_ActiveEdges||(null!==t?t.NextInAEL=n:this.m_ActiveEdges=n,null!==n&&(n.PrevInAEL=t),e.NextInAEL=null,e.PrevInAEL=null)},i.Clipper.prototype.DeleteFromSEL=function(e){var t=e.PrevInSEL,n=e.NextInSEL;null===t&&null===n&&e!=this.m_SortedEdges||(null!==t?t.NextInSEL=n:this.m_SortedEdges=n,null!==n&&(n.PrevInSEL=t),e.NextInSEL=null,e.PrevInSEL=null)},i.Clipper.prototype.UpdateEdgeIntoAEL=function(e){null===e.NextInLML&&i.Error("UpdateEdgeIntoAEL: invalid call");var t=e.PrevInAEL,n=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,null!==t?t.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,null!==n&&(n.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,(e=e.NextInLML).Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=t,e.NextInAEL=n,i.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},i.Clipper.prototype.ProcessHorizontals=function(e){for(var t=this.m_SortedEdges;null!==t;)this.DeleteFromSEL(t),this.ProcessHorizontal(t,e),t=this.m_SortedEdges},i.Clipper.prototype.GetHorzDirection=function(e,t){e.Bot.X<e.Top.X?(t.Left=e.Bot.X,t.Right=e.Top.X,t.Dir=i.Direction.dLeftToRight):(t.Left=e.Top.X,t.Right=e.Bot.X,t.Dir=i.Direction.dRightToLeft)},i.Clipper.prototype.PrepareHorzJoins=function(e,t){var n=this.m_PolyOuts[e.OutIdx].Pts;e.Side!=i.EdgeSide.esLeft&&(n=n.Prev),t&&(i.IntPoint.op_Equality(n.Pt,e.Top)?this.AddGhostJoin(n,e.Bot):this.AddGhostJoin(n,e.Top))},i.Clipper.prototype.ProcessHorizontal=function(e,t){var n={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,n);for(var r=n.Dir,o=n.Left,a=n.Right,s=e,l=null;null!==s.NextInLML&&i.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(l=this.GetMaximaPair(s));;){for(var u=e==s,c=this.GetNextInAEL(e,r);null!==c&&!(c.Curr.X==e.Top.X&&null!==e.NextInLML&&c.Dx<e.NextInLML.Dx);){var h=this.GetNextInAEL(c,r);if(r==i.Direction.dLeftToRight&&c.Curr.X<=a||r==i.Direction.dRightToLeft&&c.Curr.X>=o){if(e.OutIdx>=0&&0!=e.WindDelta&&this.PrepareHorzJoins(e,t),c==l&&u)return r==i.Direction.dLeftToRight?this.IntersectEdges(e,c,c.Top,!1):this.IntersectEdges(c,e,c.Top,!1),void(l.OutIdx>=0&&i.Error("ProcessHorizontal error"));if(r==i.Direction.dLeftToRight){var d=new i.IntPoint(c.Curr.X,e.Curr.Y);this.IntersectEdges(e,c,d,!0)}else d=new i.IntPoint(c.Curr.X,e.Curr.Y),this.IntersectEdges(c,e,d,!0);this.SwapPositionsInAEL(e,c)}else if(r==i.Direction.dLeftToRight&&c.Curr.X>=a||r==i.Direction.dRightToLeft&&c.Curr.X<=o)break;c=h}if(e.OutIdx>=0&&0!==e.WindDelta&&this.PrepareHorzJoins(e,t),null===e.NextInLML||!i.ClipperBase.IsHorizontal(e.NextInLML))break;(e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),n={Dir:r,Left:o,Right:a},this.GetHorzDirection(e,n),r=n.Dir,o=n.Left,a=n.Right}if(null!==e.NextInLML)if(e.OutIdx>=0){var p=this.AddOutPt(e,e.Top);if(0===(e=this.UpdateEdgeIntoAEL(e)).WindDelta)return;var f=e.PrevInAEL;if(h=e.NextInAEL,null!==f&&f.Curr.X==e.Bot.X&&f.Curr.Y==e.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&i.ClipperBase.SlopesEqual(e,f,this.m_UseFullRange)){var m=this.AddOutPt(f,e.Bot);this.AddJoin(p,m,e.Top)}else null!==h&&h.Curr.X==e.Bot.X&&h.Curr.Y==e.Bot.Y&&0!==h.WindDelta&&h.OutIdx>=0&&h.Curr.Y>h.Top.Y&&i.ClipperBase.SlopesEqual(e,h,this.m_UseFullRange)&&(m=this.AddOutPt(h,e.Bot),this.AddJoin(p,m,e.Top))}else e=this.UpdateEdgeIntoAEL(e);else null!==l?l.OutIdx>=0?(r==i.Direction.dLeftToRight?this.IntersectEdges(e,l,e.Top,!1):this.IntersectEdges(l,e,e.Top,!1),l.OutIdx>=0&&i.Error("ProcessHorizontal error")):(this.DeleteFromAEL(e),this.DeleteFromAEL(l)):(e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e))},i.Clipper.prototype.GetNextInAEL=function(e,t){return t==i.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},i.Clipper.prototype.IsMinima=function(e){return null!==e&&e.Prev.NextInLML!=e&&e.Next.NextInLML!=e},i.Clipper.prototype.IsMaxima=function(e,t){return null!==e&&e.Top.Y==t&&null===e.NextInLML},i.Clipper.prototype.IsIntermediate=function(e,t){return e.Top.Y==t&&null!==e.NextInLML},i.Clipper.prototype.GetMaximaPair=function(e){var t=null;return i.IntPoint.op_Equality(e.Next.Top,e.Top)&&null===e.Next.NextInLML?t=e.Next:i.IntPoint.op_Equality(e.Prev.Top,e.Top)&&null===e.Prev.NextInLML&&(t=e.Prev),null===t||-2!=t.OutIdx&&(t.NextInAEL!=t.PrevInAEL||i.ClipperBase.IsHorizontal(t))?t:null},i.Clipper.prototype.ProcessIntersections=function(e,t){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(e,t),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(e){this.m_SortedEdges=null,this.m_IntersectList.length=0,i.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},i.Clipper.prototype.BuildIntersectList=function(e,t){if(null!==this.m_ActiveEdges){var n=this.m_ActiveEdges;for(this.m_SortedEdges=n;null!==n;)n.PrevInSEL=n.PrevInAEL,n.NextInSEL=n.NextInAEL,n.Curr.X=i.Clipper.TopX(n,t),n=n.NextInAEL;for(var r=!0;r&&null!==this.m_SortedEdges;){for(r=!1,n=this.m_SortedEdges;null!==n.NextInSEL;){var o=n.NextInSEL,a=new i.IntPoint;if(n.Curr.X>o.Curr.X){!this.IntersectPoint(n,o,a)&&n.Curr.X>o.Curr.X+1&&i.Error("Intersection error"),a.Y>e&&(a.Y=e,Math.abs(n.Dx)>Math.abs(o.Dx)?a.X=i.Clipper.TopX(o,e):a.X=i.Clipper.TopX(n,e));var s=new i.IntersectNode;s.Edge1=n,s.Edge2=o,s.Pt.X=a.X,s.Pt.Y=a.Y,this.m_IntersectList.push(s),this.SwapPositionsInSEL(n,o),r=!0}else n=o}if(null===n.PrevInSEL)break;n.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},i.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL==e.Edge2||e.Edge1.PrevInSEL==e.Edge2},i.Clipper.IntersectNodeSort=function(e,t){return t.Pt.Y-e.Pt.Y},i.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,t=0;t<e;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var n=t+1;n<e&&!this.EdgesAdjacent(this.m_IntersectList[n]);)n++;if(n==e)return!1;var i=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[n],this.m_IntersectList[n]=i}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0},i.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,t=this.m_IntersectList.length;e<t;e++){var n=this.m_IntersectList[e];this.IntersectEdges(n.Edge1,n.Edge2,n.Pt,!0),this.SwapPositionsInAEL(n.Edge1,n.Edge2)}this.m_IntersectList.length=0},s.msie?i.Clipper.Round=function(e){return e<0?Math.ceil(e-.5):Math.round(e)}:s.chromium?i.Clipper.Round=function(e){return e<0?-Math.round(Math.abs(e)):Math.round(e)}:s.safari?i.Clipper.Round=function(e){return e<0?(e-=.5)<-2147483648?Math.ceil(e):0|e:(e+=.5)>2147483647?Math.floor(e):0|e}:i.Clipper.Round=function(e){return e<0?Math.ceil(e-.5):Math.floor(e+.5)},i.Clipper.TopX=function(e,t){return t==e.Top.Y?e.Top.X:e.Bot.X+i.Clipper.Round(e.Dx*(t-e.Bot.Y))},i.Clipper.prototype.IntersectPoint=function(e,t,n){var r,o;if(n.X=0,n.Y=0,i.ClipperBase.SlopesEqual(e,t,this.m_UseFullRange)||e.Dx==t.Dx)return t.Bot.Y>e.Bot.Y?(n.X=t.Bot.X,n.Y=t.Bot.Y):(n.X=e.Bot.X,n.Y=e.Bot.Y),!1;if(0===e.Delta.X)n.X=e.Bot.X,i.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(o=t.Bot.Y-t.Bot.X/t.Dx,n.Y=i.Clipper.Round(n.X/t.Dx+o));else if(0===t.Delta.X)n.X=t.Bot.X,i.ClipperBase.IsHorizontal(e)?n.Y=e.Bot.Y:(r=e.Bot.Y-e.Bot.X/e.Dx,n.Y=i.Clipper.Round(n.X/e.Dx+r));else{r=e.Bot.X-e.Bot.Y*e.Dx;var a=((o=t.Bot.X-t.Bot.Y*t.Dx)-r)/(e.Dx-t.Dx);n.Y=i.Clipper.Round(a),Math.abs(e.Dx)<Math.abs(t.Dx)?n.X=i.Clipper.Round(e.Dx*a+r):n.X=i.Clipper.Round(t.Dx*a+o)}if(n.Y<e.Top.Y||n.Y<t.Top.Y){if(e.Top.Y>t.Top.Y)return n.Y=e.Top.Y,n.X=i.Clipper.TopX(t,e.Top.Y),n.X<e.Top.X;n.Y=t.Top.Y,Math.abs(e.Dx)<Math.abs(t.Dx)?n.X=i.Clipper.TopX(e,n.Y):n.X=i.Clipper.TopX(t,n.Y)}return!0},i.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var t=this.m_ActiveEdges;null!==t;){var n=this.IsMaxima(t,e);if(n){var r=this.GetMaximaPair(t);n=null===r||!i.ClipperBase.IsHorizontal(r)}if(n){var o=t.PrevInAEL;this.DoMaxima(t),t=null===o?this.m_ActiveEdges:o.NextInAEL}else{if(this.IsIntermediate(t,e)&&i.ClipperBase.IsHorizontal(t.NextInLML)?((t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=i.Clipper.TopX(t,e),t.Curr.Y=e),this.StrictlySimple&&(o=t.PrevInAEL,t.OutIdx>=0&&0!==t.WindDelta&&null!==o&&o.OutIdx>=0&&o.Curr.X==t.Curr.X&&0!==o.WindDelta)){var a=this.AddOutPt(o,t.Curr),s=this.AddOutPt(t,t.Curr);this.AddJoin(a,s,t.Curr)}t=t.NextInAEL}}for(this.ProcessHorizontals(!0),t=this.m_ActiveEdges;null!==t;){if(this.IsIntermediate(t,e)){a=null,t.OutIdx>=0&&(a=this.AddOutPt(t,t.Top)),o=(t=this.UpdateEdgeIntoAEL(t)).PrevInAEL;var l=t.NextInAEL;null!==o&&o.Curr.X==t.Bot.X&&o.Curr.Y==t.Bot.Y&&null!==a&&o.OutIdx>=0&&o.Curr.Y>o.Top.Y&&i.ClipperBase.SlopesEqual(t,o,this.m_UseFullRange)&&0!==t.WindDelta&&0!==o.WindDelta?(s=this.AddOutPt(o,t.Bot),this.AddJoin(a,s,t.Top)):null!==l&&l.Curr.X==t.Bot.X&&l.Curr.Y==t.Bot.Y&&null!==a&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&i.ClipperBase.SlopesEqual(t,l,this.m_UseFullRange)&&0!==t.WindDelta&&0!==l.WindDelta&&(s=this.AddOutPt(l,t.Bot),this.AddJoin(a,s,t.Top))}t=t.NextInAEL}},i.Clipper.prototype.DoMaxima=function(e){var t=this.GetMaximaPair(e);if(null===t)return e.OutIdx>=0&&this.AddOutPt(e,e.Top),void this.DeleteFromAEL(e);for(var n=e.NextInAEL;null!==n&&n!=t;)this.IntersectEdges(e,n,e.Top,!0),this.SwapPositionsInAEL(e,n),n=e.NextInAEL;-1==e.OutIdx&&-1==t.OutIdx?(this.DeleteFromAEL(e),this.DeleteFromAEL(t)):e.OutIdx>=0&&t.OutIdx>=0?this.IntersectEdges(e,t,e.Top,!1):0===e.WindDelta?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=-1),this.DeleteFromAEL(e),t.OutIdx>=0&&(this.AddOutPt(t,e.Top),t.OutIdx=-1),this.DeleteFromAEL(t)):i.Error("DoMaxima error")},i.Clipper.ReversePaths=function(e){for(var t=0,n=e.length;t<n;t++)e[t].reverse()},i.Clipper.Orientation=function(e){return i.Clipper.Area(e)>=0},i.Clipper.prototype.PointCount=function(e){if(null===e)return 0;var t=0,n=e;do{t++,n=n.Next}while(n!=e);return t},i.Clipper.prototype.BuildResult=function(e){i.Clear(e);for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var r=this.m_PolyOuts[t];if(null!==r.Pts){var o=r.Pts.Prev,a=this.PointCount(o);if(!(a<2)){for(var s=new Array(a),l=0;l<a;l++)s[l]=o.Pt,o=o.Prev;e.push(s)}}}},i.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var t=0,n=this.m_PolyOuts.length;t<n;t++){var r=this.m_PolyOuts[t],o=this.PointCount(r.Pts);if(!(r.IsOpen&&o<2||!r.IsOpen&&o<3)){this.FixHoleLinkage(r);var a=new i.PolyNode;e.m_AllPolys.push(a),r.PolyNode=a,a.m_polygon.length=o;for(var s=r.Pts.Prev,l=0;l<o;l++)a.m_polygon[l]=s.Pt,s=s.Prev}}for(t=0,n=this.m_PolyOuts.length;t<n;t++)null!==(r=this.m_PolyOuts[t]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,e.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):e.AddChild(r.PolyNode))},i.Clipper.prototype.FixupOutPolygon=function(e){var t=null;e.BottomPt=null;for(var n=e.Pts;;){if(n.Prev==n||n.Prev==n.Next)return this.DisposeOutPts(n),void(e.Pts=null);if(i.IntPoint.op_Equality(n.Pt,n.Next.Pt)||i.IntPoint.op_Equality(n.Pt,n.Prev.Pt)||i.ClipperBase.SlopesEqual(n.Prev.Pt,n.Pt,n.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))t=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n==t)break;null===t&&(t=n),n=n.Next}}e.Pts=n},i.Clipper.prototype.DupOutPt=function(e,t){var n=new i.OutPt;return n.Pt.X=e.Pt.X,n.Pt.Y=e.Pt.Y,n.Idx=e.Idx,t?(n.Next=e.Next,n.Prev=e,e.Next.Prev=n,e.Next=n):(n.Prev=e.Prev,n.Next=e,e.Prev.Next=n,e.Prev=n),n},i.Clipper.prototype.GetOverlap=function(e,t,n,i,r){return e<t?n<i?(r.Left=Math.max(e,n),r.Right=Math.min(t,i)):(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):n<i?(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):(r.Left=Math.max(t,i),r.Right=Math.min(e,n)),r.Left<r.Right},i.Clipper.prototype.JoinHorz=function(e,t,n,r,o,a){var s=e.Pt.X>t.Pt.X?i.Direction.dRightToLeft:i.Direction.dLeftToRight,l=n.Pt.X>r.Pt.X?i.Direction.dRightToLeft:i.Direction.dLeftToRight;if(s==l)return!1;if(s==i.Direction.dLeftToRight){for(;e.Next.Pt.X<=o.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y==o.Y;)e=e.Next;a&&e.Pt.X!=o.X&&(e=e.Next),t=this.DupOutPt(e,!a),i.IntPoint.op_Inequality(t.Pt,o)&&((e=t).Pt.X=o.X,e.Pt.Y=o.Y,t=this.DupOutPt(e,!a))}else{for(;e.Next.Pt.X>=o.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y==o.Y;)e=e.Next;!a&&e.Pt.X!=o.X&&(e=e.Next),t=this.DupOutPt(e,a),i.IntPoint.op_Inequality(t.Pt,o)&&((e=t).Pt.X=o.X,e.Pt.Y=o.Y,t=this.DupOutPt(e,a))}if(l==i.Direction.dLeftToRight){for(;n.Next.Pt.X<=o.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y==o.Y;)n=n.Next;a&&n.Pt.X!=o.X&&(n=n.Next),r=this.DupOutPt(n,!a),i.IntPoint.op_Inequality(r.Pt,o)&&((n=r).Pt.X=o.X,n.Pt.Y=o.Y,r=this.DupOutPt(n,!a))}else{for(;n.Next.Pt.X>=o.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y==o.Y;)n=n.Next;!a&&n.Pt.X!=o.X&&(n=n.Next),r=this.DupOutPt(n,a),i.IntPoint.op_Inequality(r.Pt,o)&&((n=r).Pt.X=o.X,n.Pt.Y=o.Y,r=this.DupOutPt(n,a))}return s==i.Direction.dLeftToRight==a?(e.Prev=n,n.Next=e,t.Next=r,r.Prev=t):(e.Next=n,n.Prev=e,t.Prev=r,r.Next=t),!0},i.Clipper.prototype.JoinPoints=function(e,t,n){var r=e.OutPt1,o=new i.OutPt,a=e.OutPt2,s=new i.OutPt,l=e.OutPt1.Pt.Y==e.OffPt.Y;if(l&&i.IntPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&i.IntPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){for(o=e.OutPt1.Next;o!=r&&i.IntPoint.op_Equality(o.Pt,e.OffPt);)o=o.Next;var u=o.Pt.Y>e.OffPt.Y;for(s=e.OutPt2.Next;s!=a&&i.IntPoint.op_Equality(s.Pt,e.OffPt);)s=s.Next;return u!=s.Pt.Y>e.OffPt.Y&&(u?(o=this.DupOutPt(r,!1),s=this.DupOutPt(a,!0),r.Prev=a,a.Next=r,o.Next=s,s.Prev=o,e.OutPt1=r,e.OutPt2=o,!0):(o=this.DupOutPt(r,!0),s=this.DupOutPt(a,!1),r.Next=a,a.Prev=r,o.Prev=s,s.Next=o,e.OutPt1=r,e.OutPt2=o,!0))}if(l){for(o=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=o&&r.Prev!=a;)r=r.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=r&&o.Next!=a;)o=o.Next;if(o.Next==r||o.Next==a)return!1;for(s=a;a.Prev.Pt.Y==a.Pt.Y&&a.Prev!=s&&a.Prev!=o;)a=a.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=a&&s.Next!=r;)s=s.Next;if(s.Next==a||s.Next==r)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,o.Pt.X,a.Pt.X,s.Pt.X,c))return!1;var h,d=c.Left,p=c.Right,f=new i.IntPoint;return r.Pt.X>=d&&r.Pt.X<=p?(f.X=r.Pt.X,f.Y=r.Pt.Y,h=r.Pt.X>o.Pt.X):a.Pt.X>=d&&a.Pt.X<=p?(f.X=a.Pt.X,f.Y=a.Pt.Y,h=a.Pt.X>s.Pt.X):o.Pt.X>=d&&o.Pt.X<=p?(f.X=o.Pt.X,f.Y=o.Pt.Y,h=o.Pt.X>r.Pt.X):(f.X=s.Pt.X,f.Y=s.Pt.Y,h=s.Pt.X>a.Pt.X),e.OutPt1=r,e.OutPt2=a,this.JoinHorz(r,o,a,s,f,h)}for(o=r.Next;i.IntPoint.op_Equality(o.Pt,r.Pt)&&o!=r;)o=o.Next;var m=o.Pt.Y>r.Pt.Y||!i.ClipperBase.SlopesEqual(r.Pt,o.Pt,e.OffPt,this.m_UseFullRange);if(m){for(o=r.Prev;i.IntPoint.op_Equality(o.Pt,r.Pt)&&o!=r;)o=o.Prev;if(o.Pt.Y>r.Pt.Y||!i.ClipperBase.SlopesEqual(r.Pt,o.Pt,e.OffPt,this.m_UseFullRange))return!1}for(s=a.Next;i.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Next;var v=s.Pt.Y>a.Pt.Y||!i.ClipperBase.SlopesEqual(a.Pt,s.Pt,e.OffPt,this.m_UseFullRange);if(v){for(s=a.Prev;i.IntPoint.op_Equality(s.Pt,a.Pt)&&s!=a;)s=s.Prev;if(s.Pt.Y>a.Pt.Y||!i.ClipperBase.SlopesEqual(a.Pt,s.Pt,e.OffPt,this.m_UseFullRange))return!1}return o!=r&&s!=a&&o!=s&&(t!=n||m!=v)&&(m?(o=this.DupOutPt(r,!1),s=this.DupOutPt(a,!0),r.Prev=a,a.Next=r,o.Next=s,s.Prev=o,e.OutPt1=r,e.OutPt2=o,!0):(o=this.DupOutPt(r,!0),s=this.DupOutPt(a,!1),r.Next=a,a.Prev=r,o.Prev=s,s.Next=o,e.OutPt1=r,e.OutPt2=o,!0))},i.Clipper.GetBounds=function(e){for(var t=0,n=e.length;t<n&&0==e[t].length;)t++;if(t==n)return new i.IntRect(0,0,0,0);var r=new i.IntRect;for(r.left=e[t][0].X,r.right=r.left,r.top=e[t][0].Y,r.bottom=r.top;t<n;t++)for(var o=0,a=e[t].length;o<a;o++)e[t][o].X<r.left?r.left=e[t][o].X:e[t][o].X>r.right&&(r.right=e[t][o].X),e[t][o].Y<r.top?r.top=e[t][o].Y:e[t][o].Y>r.bottom&&(r.bottom=e[t][o].Y);return r},i.Clipper.prototype.GetBounds2=function(e){var t=e,n=new i.IntRect;for(n.left=e.Pt.X,n.right=e.Pt.X,n.top=e.Pt.Y,n.bottom=e.Pt.Y,e=e.Next;e!=t;)e.Pt.X<n.left&&(n.left=e.Pt.X),e.Pt.X>n.right&&(n.right=e.Pt.X),e.Pt.Y<n.top&&(n.top=e.Pt.Y),e.Pt.Y>n.bottom&&(n.bottom=e.Pt.Y),e=e.Next;return n},i.Clipper.PointInPolygon=function(e,t){var n=0,i=t.length;if(i<3)return 0;for(var r=t[0],o=1;o<=i;++o){var a=o==i?t[0]:t[o];if(a.Y==e.Y&&(a.X==e.X||r.Y==e.Y&&a.X>e.X==r.X<e.X))return-1;if(r.Y<e.Y!=a.Y<e.Y)if(r.X>=e.X)if(a.X>e.X)n=1-n;else{if(0==(s=(r.X-e.X)*(a.Y-e.Y)-(a.X-e.X)*(r.Y-e.Y)))return-1;s>0==a.Y>r.Y&&(n=1-n)}else if(a.X>e.X){var s;if(0==(s=(r.X-e.X)*(a.Y-e.Y)-(a.X-e.X)*(r.Y-e.Y)))return-1;s>0==a.Y>r.Y&&(n=1-n)}r=a}return n},i.Clipper.prototype.PointInPolygon=function(e,t){for(var n=0,i=t;;){var r=t.Pt.X,o=t.Pt.Y,a=t.Next.Pt.X,s=t.Next.Pt.Y;if(s==e.Y&&(a==e.X||o==e.Y&&a>e.X==r<e.X))return-1;if(o<e.Y!=s<e.Y)if(r>=e.X)if(a>e.X)n=1-n;else{if(0==(l=(r-e.X)*(s-e.Y)-(a-e.X)*(o-e.Y)))return-1;l>0==s>o&&(n=1-n)}else if(a>e.X){var l;if(0==(l=(r-e.X)*(s-e.Y)-(a-e.X)*(o-e.Y)))return-1;l>0==s>o&&(n=1-n)}if(i==(t=t.Next))break}return n},i.Clipper.prototype.Poly2ContainsPoly1=function(e,t){var n=e;do{var i=this.PointInPolygon(n.Pt,t);if(i>=0)return 0!=i;n=n.Next}while(n!=e);return!0},i.Clipper.prototype.FixupFirstLefts1=function(e,t){for(var n=0,i=this.m_PolyOuts.length;n<i;n++){var r=this.m_PolyOuts[n];null!==r.Pts&&r.FirstLeft==e&&this.Poly2ContainsPoly1(r.Pts,t.Pts)&&(r.FirstLeft=t)}},i.Clipper.prototype.FixupFirstLefts2=function(e,t){for(var n=0,i=this.m_PolyOuts,r=i.length,o=i[n];n<r;o=i[++n])o.FirstLeft==e&&(o.FirstLeft=t)},i.Clipper.ParseFirstLeft=function(e){for(;null!=e&&null==e.Pts;)e=e.FirstLeft;return e},i.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,t=this.m_Joins.length;e<t;e++){var n,r=this.m_Joins[e],o=this.GetOutRec(r.OutPt1.Idx),a=this.GetOutRec(r.OutPt2.Idx);if(null!=o.Pts&&null!=a.Pts&&(n=o==a?o:this.Param1RightOfParam2(o,a)?a:this.Param1RightOfParam2(a,o)?o:this.GetLowermostRec(o,a),this.JoinPoints(r,o,a)))if(o==a){if(o.Pts=r.OutPt1,o.BottomPt=null,(a=this.CreateOutRec()).Pts=r.OutPt2,this.UpdateOutPtIdxs(a),this.m_UsingPolyTree)for(var s=0,l=this.m_PolyOuts.length;s<l-1;s++){var u=this.m_PolyOuts[s];null==u.Pts||i.Clipper.ParseFirstLeft(u.FirstLeft)!=o||u.IsHole==o.IsHole||this.Poly2ContainsPoly1(u.Pts,r.OutPt2)&&(u.FirstLeft=a)}this.Poly2ContainsPoly1(a.Pts,o.Pts)?(a.IsHole=!o.IsHole,a.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,o),(a.IsHole^this.ReverseSolution)==this.Area(a)>0&&this.ReversePolyPtLinks(a.Pts)):this.Poly2ContainsPoly1(o.Pts,a.Pts)?(a.IsHole=o.IsHole,o.IsHole=!a.IsHole,a.FirstLeft=o.FirstLeft,o.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,a),(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)):(a.IsHole=o.IsHole,a.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,a))}else a.Pts=null,a.BottomPt=null,a.Idx=o.Idx,o.IsHole=n.IsHole,n==a&&(o.FirstLeft=a.FirstLeft),a.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,o)}},i.Clipper.prototype.UpdateOutPtIdxs=function(e){var t=e.Pts;do{t.Idx=e.Idx,t=t.Prev}while(t!=e.Pts)},i.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var t=this.m_PolyOuts[e++],n=t.Pts;if(null!==n)do{for(var r=n.Next;r!=t.Pts;){if(i.IntPoint.op_Equality(n.Pt,r.Pt)&&r.Next!=n&&r.Prev!=n){var o=n.Prev,a=r.Prev;n.Prev=a,a.Next=n,r.Prev=o,o.Next=r,t.Pts=n;var s=this.CreateOutRec();s.Pts=r,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,t.Pts)?(s.IsHole=!t.IsHole,s.FirstLeft=t):this.Poly2ContainsPoly1(t.Pts,s.Pts)?(s.IsHole=t.IsHole,t.IsHole=!s.IsHole,s.FirstLeft=t.FirstLeft,t.FirstLeft=s):(s.IsHole=t.IsHole,s.FirstLeft=t.FirstLeft),r=n}r=r.Next}n=n.Next}while(n!=t.Pts)}},i.Clipper.Area=function(e){var t=e.length;if(t<3)return 0;for(var n=0,i=0,r=t-1;i<t;++i)n+=(e[r].X+e[i].X)*(e[r].Y-e[i].Y),r=i;return.5*-n},i.Clipper.prototype.Area=function(e){var t=e.Pts;if(null==t)return 0;var n=0;do{n+=(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next}while(t!=e.Pts);return.5*n},i.Clipper.SimplifyPolygon=function(e,t){var n=new Array,r=new i.Clipper(0);return r.StrictlySimple=!0,r.AddPath(e,i.PolyType.ptSubject,!0),r.Execute(i.ClipType.ctUnion,n,t,t),n},i.Clipper.SimplifyPolygons=function(e,t){void 0===t&&(t=i.PolyFillType.pftEvenOdd);var n=new Array,r=new i.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(e,i.PolyType.ptSubject,!0),r.Execute(i.ClipType.ctUnion,n,t,t),n},i.Clipper.DistanceSqrd=function(e,t){var n=e.X-t.X,i=e.Y-t.Y;return n*n+i*i},i.Clipper.DistanceFromLineSqrd=function(e,t,n){var i=t.Y-n.Y,r=n.X-t.X,o=i*t.X+r*t.Y;return(o=i*e.X+r*e.Y-o)*o/(i*i+r*r)},i.Clipper.SlopesNearCollinear=function(e,t,n,r){return i.Clipper.DistanceFromLineSqrd(t,e,n)<r},i.Clipper.PointsAreClose=function(e,t,n){var i=e.X-t.X,r=e.Y-t.Y;return i*i+r*r<=n},i.Clipper.ExcludeOp=function(e){var t=e.Prev;return t.Next=e.Next,e.Next.Prev=t,t.Idx=0,t},i.Clipper.CleanPolygon=function(e,t){void 0===t&&(t=1.415);var n=e.length;if(0==n)return new Array;for(var r=new Array(n),o=0;o<n;++o)r[o]=new i.OutPt;for(o=0;o<n;++o)r[o].Pt=e[o],r[o].Next=r[(o+1)%n],r[o].Next.Prev=r[o],r[o].Idx=0;for(var a=t*t,s=r[0];0==s.Idx&&s.Next!=s.Prev;)i.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,a)?(s=i.Clipper.ExcludeOp(s),n--):i.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,a)?(i.Clipper.ExcludeOp(s.Next),s=i.Clipper.ExcludeOp(s),n-=2):i.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,a)?(s=i.Clipper.ExcludeOp(s),n--):(s.Idx=1,s=s.Next);n<3&&(n=0);var l=new Array(n);for(o=0;o<n;++o)l[o]=new i.IntPoint(s.Pt),s=s.Next;return r=null,l},i.Clipper.CleanPolygons=function(e,t){for(var n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=i.Clipper.CleanPolygon(e[r],t);return n},i.Clipper.Minkowski=function(e,t,n,r){var o=r?1:0,a=e.length,s=t.length,l=new Array;if(n)for(var u=0;u<s;u++){for(var c=new Array(a),h=0,d=e.length,p=e[h];h<d;p=e[++h])c[h]=new i.IntPoint(t[u].X+p.X,t[u].Y+p.Y);l.push(c)}else for(u=0;u<s;u++){for(c=new Array(a),h=0,d=e.length,p=e[h];h<d;p=e[++h])c[h]=new i.IntPoint(t[u].X-p.X,t[u].Y-p.Y);l.push(c)}var f=new Array;for(u=0;u<s-1+o;u++)for(h=0;h<a;h++){var m=new Array;m.push(l[u%s][h%a]),m.push(l[(u+1)%s][h%a]),m.push(l[(u+1)%s][(h+1)%a]),m.push(l[u%s][(h+1)%a]),i.Clipper.Orientation(m)||m.reverse(),f.push(m)}var v=new i.Clipper(0);return v.AddPaths(f,i.PolyType.ptSubject,!0),v.Execute(i.ClipType.ctUnion,l,i.PolyFillType.pftNonZero,i.PolyFillType.pftNonZero),l},i.Clipper.MinkowskiSum=function(){var e=arguments,t=e.length;if(3==t){var n=e[0],r=e[1],o=e[2];return i.Clipper.Minkowski(n,r,!0,o)}if(4==t){n=e[0];for(var a=e[1],s=e[2],l=(o=e[3],new i.Clipper),u=0,c=a.length;u<c;++u){var h=i.Clipper.Minkowski(n,a[u],!0,o);l.AddPaths(h,i.PolyType.ptSubject,!0)}o&&l.AddPaths(a,i.PolyType.ptClip,!0);var d=new i.Paths;return l.Execute(i.ClipType.ctUnion,d,s,s),d}},i.Clipper.MinkowskiDiff=function(e,t,n){return i.Clipper.Minkowski(e,t,!1,n)},i.Clipper.PolyTreeToPaths=function(e){var t=new Array;return i.Clipper.AddPolyNodeToPaths(e,i.Clipper.NodeType.ntAny,t),t},i.Clipper.AddPolyNodeToPaths=function(e,t,n){var r=!0;switch(t){case i.Clipper.NodeType.ntOpen:return;case i.Clipper.NodeType.ntClosed:r=!e.IsOpen}e.m_polygon.length>0&&r&&n.push(e.m_polygon);for(var o=0,a=e.Childs(),s=a.length,l=a[o];o<s;l=a[++o])i.Clipper.AddPolyNodeToPaths(l,t,n)},i.Clipper.OpenPathsFromPolyTree=function(e){for(var t=new i.Paths,n=0,r=e.ChildCount();n<r;n++)e.Childs()[n].IsOpen&&t.push(e.Childs()[n].m_polygon);return t},i.Clipper.ClosedPathsFromPolyTree=function(e){var t=new i.Paths;return i.Clipper.AddPolyNodeToPaths(e,i.Clipper.NodeType.ntClosed,t),t},C(i.Clipper,i.ClipperBase),i.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},i.ClipperOffset=function(e,t){void 0===e&&(e=2),void 0===t&&(t=i.ClipperOffset.def_arc_tolerance),this.m_destPolys=new i.Paths,this.m_srcPoly=new i.Path,this.m_destPoly=new i.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new i.IntPoint,this.m_polyNodes=new i.PolyNode,this.MiterLimit=e,this.ArcTolerance=t,this.m_lowest.X=-1},i.ClipperOffset.two_pi=6.28318530717959,i.ClipperOffset.def_arc_tolerance=.25,i.ClipperOffset.prototype.Clear=function(){i.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},i.ClipperOffset.Round=i.Clipper.Round,i.ClipperOffset.prototype.AddPath=function(e,t,n){var r=e.length-1;if(!(r<0)){var o=new i.PolyNode;if(o.m_jointype=t,o.m_endtype=n,n==i.EndType.etClosedLine||n==i.EndType.etClosedPolygon)for(;r>0&&i.IntPoint.op_Equality(e[0],e[r]);)r--;o.m_polygon.push(e[0]);for(var a=0,s=0,l=1;l<=r;l++)i.IntPoint.op_Inequality(o.m_polygon[a],e[l])&&(a++,o.m_polygon.push(e[l]),(e[l].Y>o.m_polygon[s].Y||e[l].Y==o.m_polygon[s].Y&&e[l].X<o.m_polygon[s].X)&&(s=a));if(!(n==i.EndType.etClosedPolygon&&a<2||n!=i.EndType.etClosedPolygon&&a<0)&&(this.m_polyNodes.AddChild(o),n==i.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new i.IntPoint(0,s);else{var u=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(o.m_polygon[s].Y>u.Y||o.m_polygon[s].Y==u.Y&&o.m_polygon[s].X<u.X)&&(this.m_lowest=new i.IntPoint(this.m_polyNodes.ChildCount()-1,s))}}},i.ClipperOffset.prototype.AddPaths=function(e,t,n){for(var i=0,r=e.length;i<r;i++)this.AddPath(e[i],t,n)},i.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!i.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++)((t=this.m_polyNodes.Childs()[e]).m_endtype==i.EndType.etClosedPolygon||t.m_endtype==i.EndType.etClosedLine&&i.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse();else for(e=0;e<this.m_polyNodes.ChildCount();e++){var t;(t=this.m_polyNodes.Childs()[e]).m_endtype==i.EndType.etClosedLine&&!i.Clipper.Orientation(t.m_polygon)&&t.m_polygon.reverse()}},i.ClipperOffset.GetUnitNormal=function(e,t){var n=t.X-e.X,r=t.Y-e.Y;if(0==n&&0==r)return new i.DoublePoint(0,0);var o=1/Math.sqrt(n*n+r*r);return n*=o,r*=o,new i.DoublePoint(r,-n)},i.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,i.ClipperBase.near_zero(e))for(var t=0;t<this.m_polyNodes.ChildCount();t++)(o=this.m_polyNodes.Childs()[t]).m_endtype==i.EndType.etClosedPolygon&&this.m_destPolys.push(o.m_polygon);else{var n;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,n=this.ArcTolerance<=0?i.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*i.ClipperOffset.def_arc_tolerance?Math.abs(e)*i.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(e));for(this.m_sin=Math.sin(i.ClipperOffset.two_pi/r),this.m_cos=Math.cos(i.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/i.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin),t=0;t<this.m_polyNodes.ChildCount();t++){var o=this.m_polyNodes.Childs()[t];this.m_srcPoly=o.m_polygon;var a=this.m_srcPoly.length;if(!(0==a||e<=0&&(a<3||o.m_endtype!=i.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,1==a){if(o.m_jointype==i.JoinType.jtRound)for(var s=1,l=0,u=1;u<=r;u++){this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[0].X+s*e),i.ClipperOffset.Round(this.m_srcPoly[0].Y+l*e)));var c=s;s=s*this.m_cos-this.m_sin*l,l=c*this.m_sin+l*this.m_cos}else for(s=-1,l=-1,u=0;u<4;++u)this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[0].X+s*e),i.ClipperOffset.Round(this.m_srcPoly[0].Y+l*e))),s<0?s=1:l<0?l=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}for(this.m_normals.length=0,u=0;u<a-1;u++)this.m_normals.push(i.ClipperOffset.GetUnitNormal(this.m_srcPoly[u],this.m_srcPoly[u+1]));if(o.m_endtype==i.EndType.etClosedLine||o.m_endtype==i.EndType.etClosedPolygon?this.m_normals.push(i.ClipperOffset.GetUnitNormal(this.m_srcPoly[a-1],this.m_srcPoly[0])):this.m_normals.push(new i.DoublePoint(this.m_normals[a-2])),o.m_endtype==i.EndType.etClosedPolygon){var h=a-1;for(u=0;u<a;u++)h=this.OffsetPoint(u,h,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(o.m_endtype==i.EndType.etClosedLine){for(h=a-1,u=0;u<a;u++)h=this.OffsetPoint(u,h,o.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var d=this.m_normals[a-1];for(u=a-1;u>0;u--)this.m_normals[u]=new i.DoublePoint(-this.m_normals[u-1].X,-this.m_normals[u-1].Y);for(this.m_normals[0]=new i.DoublePoint(-d.X,-d.Y),h=0,u=a-1;u>=0;u--)h=this.OffsetPoint(u,h,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(h=0,u=1;u<a-1;++u)h=this.OffsetPoint(u,h,o.m_jointype);var p;for(o.m_endtype==i.EndType.etOpenButt?(u=a-1,p=new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_normals[u].X*e),i.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_normals[u].Y*e)),this.m_destPoly.push(p),p=new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[u].X-this.m_normals[u].X*e),i.ClipperOffset.Round(this.m_srcPoly[u].Y-this.m_normals[u].Y*e)),this.m_destPoly.push(p)):(u=a-1,h=a-2,this.m_sinA=0,this.m_normals[u]=new i.DoublePoint(-this.m_normals[u].X,-this.m_normals[u].Y),o.m_endtype==i.EndType.etOpenSquare?this.DoSquare(u,h):this.DoRound(u,h)),u=a-1;u>0;u--)this.m_normals[u]=new i.DoublePoint(-this.m_normals[u-1].X,-this.m_normals[u-1].Y);for(this.m_normals[0]=new i.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),u=(h=a-1)-1;u>0;--u)h=this.OffsetPoint(u,h,o.m_jointype);o.m_endtype==i.EndType.etOpenButt?(p=new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*e),i.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*e)),this.m_destPoly.push(p),p=new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*e),i.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*e)),this.m_destPoly.push(p)):(h=1,this.m_sinA=0,o.m_endtype==i.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}}},i.ClipperOffset.prototype.Execute=function(){var e=arguments,t=e[0]instanceof i.PolyTree;if(t){var n=e[0],r=e[1];if(n.Clear(),this.FixOrientations(),this.DoOffset(r),(l=new i.Clipper(0)).AddPaths(this.m_destPolys,i.PolyType.ptSubject,!0),r>0)l.Execute(i.ClipType.ctUnion,n,i.PolyFillType.pftPositive,i.PolyFillType.pftPositive);else{var o=i.Clipper.GetBounds(this.m_destPolys);if((u=new i.Path).push(new i.IntPoint(o.left-10,o.bottom+10)),u.push(new i.IntPoint(o.right+10,o.bottom+10)),u.push(new i.IntPoint(o.right+10,o.top-10)),u.push(new i.IntPoint(o.left-10,o.top-10)),l.AddPath(u,i.PolyType.ptSubject,!0),l.ReverseSolution=!0,l.Execute(i.ClipType.ctUnion,n,i.PolyFillType.pftNegative,i.PolyFillType.pftNegative),1==n.ChildCount()&&n.Childs()[0].ChildCount()>0){var a=n.Childs()[0];n.Childs()[0]=a.Childs()[0];for(var s=1;s<a.ChildCount();s++)n.AddChild(a.Childs()[s])}else n.Clear()}}else{var l,u;if(n=e[0],r=e[1],i.Clear(n),this.FixOrientations(),this.DoOffset(r),(l=new i.Clipper(0)).AddPaths(this.m_destPolys,i.PolyType.ptSubject,!0),r>0)l.Execute(i.ClipType.ctUnion,n,i.PolyFillType.pftPositive,i.PolyFillType.pftPositive);else o=i.Clipper.GetBounds(this.m_destPolys),(u=new i.Path).push(new i.IntPoint(o.left-10,o.bottom+10)),u.push(new i.IntPoint(o.right+10,o.bottom+10)),u.push(new i.IntPoint(o.right+10,o.top-10)),u.push(new i.IntPoint(o.left-10,o.top-10)),l.AddPath(u,i.PolyType.ptSubject,!0),l.ReverseSolution=!0,l.Execute(i.ClipType.ctUnion,n,i.PolyFillType.pftNegative,i.PolyFillType.pftNegative),n.length>0&&n.splice(0,1)}},i.ClipperOffset.prototype.OffsetPoint=function(e,t,n){if(this.m_sinA=this.m_normals[t].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[t].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return t;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta))),this.m_destPoly.push(new i.IntPoint(this.m_srcPoly[e])),this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)));else switch(n){case i.JoinType.jtMiter:var r=this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y+1;r>=this.m_miterLim?this.DoMiter(e,t,r):this.DoSquare(e,t);break;case i.JoinType.jtSquare:this.DoSquare(e,t);break;case i.JoinType.jtRound:this.DoRound(e,t)}return e},i.ClipperOffset.prototype.DoSquare=function(e,t){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*n)),i.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*n)))),this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*n)),i.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*n))))},i.ClipperOffset.prototype.DoMiter=function(e,t,n){var r=this.m_delta/n;this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+(this.m_normals[t].X+this.m_normals[e].X)*r),i.ClipperOffset.Round(this.m_srcPoly[e].Y+(this.m_normals[t].Y+this.m_normals[e].Y)*r)))},i.ClipperOffset.prototype.DoRound=function(e,t){for(var n,r=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),o=i.Cast_Int32(i.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),a=this.m_normals[t].X,s=this.m_normals[t].Y,l=0;l<o;++l)this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+a*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[e].Y+s*this.m_delta))),n=a,a=a*this.m_cos-this.m_sin*s,s=n*this.m_sin+s*this.m_cos;this.m_destPoly.push(new i.IntPoint(i.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),i.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)))},i.Error=function(e){try{throw new Error(e)}catch(e){alert(e.message)}},i.JS={},i.JS.AreaOfPolygon=function(e,t){return t||(t=1),i.Clipper.Area(e)/(t*t)},i.JS.AreaOfPolygons=function(e,t){t||(t=1);for(var n=0,r=0;r<e.length;r++)n+=i.Clipper.Area(e[r]);return n/(t*t)},i.JS.BoundsOfPath=function(e,t){return i.JS.BoundsOfPaths([e],t)},i.JS.BoundsOfPaths=function(e,t){t||(t=1);var n=i.Clipper.GetBounds(e);return n.left/=t,n.bottom/=t,n.right/=t,n.top/=t,n},i.JS.Clean=function(e,t){if(!(e instanceof Array))return[];var n=e[0]instanceof Array;if(e=i.JS.Clone(e),"number"!=typeof t||null===t)return i.Error("Delta is not a number in Clean()."),e;if(0===e.length||1==e.length&&0===e[0].length||t<0)return e;n||(e=[e]);for(var r,o,a,s,l,u,c,h=e.length,d=[],p=0;p<h;p++)if(0!==(r=(o=e[p]).length)){if(r<3){a=o,d.push(a);continue}for(a=o,s=t*t,l=o[0],u=1,c=1;c<r;c++)(o[c].X-l.X)*(o[c].X-l.X)+(o[c].Y-l.Y)*(o[c].Y-l.Y)<=s||(a[u]=o[c],l=o[c],u++);l=o[u-1],(o[0].X-l.X)*(o[0].X-l.X)+(o[0].Y-l.Y)*(o[0].Y-l.Y)<=s&&u--,u<r&&a.splice(u,r-u),a.length&&d.push(a)}return!n&&d.length?d=d[0]:n||0!==d.length?n&&0===d.length&&(d=[[]]):d=[],d},i.JS.Clone=function(e){if(!(e instanceof Array))return[];if(0===e.length)return[];if(1==e.length&&0===e[0].length)return[[]];var t=e[0]instanceof Array;t||(e=[e]);var n,i,r,o,a=e.length,s=new Array(a);for(i=0;i<a;i++){for(n=e[i].length,o=new Array(n),r=0;r<n;r++)o[r]={X:e[i][r].X,Y:e[i][r].Y};s[i]=o}return t||(s=s[0]),s},i.JS.Lighten=function(e,t){if(!(e instanceof Array))return[];if("number"!=typeof t||null===t)return i.Error("Tolerance is not a number in Lighten()."),i.JS.Clone(e);if(0===e.length||1==e.length&&0===e[0].length||t<0)return i.JS.Clone(e);e[0]instanceof Array||(e=[e]);var n,r,o,a,s,l,u,c,h,d,p,f,m,v,g,y,x=e.length,b=t*t,_=[];for(n=0;n<x;n++)if(0!=(l=(o=e[n]).length)){for(a=0;a<1e6;a++){for(s=[],o[(l=o.length)-1].X!=o[0].X||o[l-1].Y!=o[0].Y?(p=1,o.push({X:o[0].X,Y:o[0].Y}),l=o.length):p=0,d=[],r=0;r<l-2;r++)u=o[r],h=o[r+1],c=o[r+2],g=u.X,y=u.Y,f=c.X-g,m=c.Y-y,(0!==f||0!==m)&&((v=((h.X-g)*f+(h.Y-y)*m)/(f*f+m*m))>1?(g=c.X,y=c.Y):v>0&&(g+=f*v,y+=m*v)),(f=h.X-g)*f+(m=h.Y-y)*m<=b&&(d[r+1]=1,r++);for(s.push({X:o[0].X,Y:o[0].Y}),r=1;r<l-1;r++)d[r]||s.push({X:o[r].X,Y:o[r].Y});if(s.push({X:o[l-1].X,Y:o[l-1].Y}),p&&o.pop(),!d.length)break;o=s}s[(l=s.length)-1].X==s[0].X&&s[l-1].Y==s[0].Y&&s.pop(),s.length>2&&_.push(s)}return!e[0]instanceof Array&&(_=_[0]),void 0===_&&(_=[[]]),_},i.JS.PerimeterOfPath=function(e,t,n){if(void 0===e)return 0;var i,r,o=Math.sqrt,a=0,s=0,l=0,u=0,c=0,h=e.length;if(h<2)return 0;for(t&&(e[h]=e[0],h++);--h;)s=(i=e[h]).X,l=i.Y,a+=o((s-(u=(r=e[h-1]).X))*(s-u)+(l-(c=r.Y))*(l-c));return t&&e.pop(),a/n},i.JS.PerimeterOfPaths=function(e,t,n){n||(n=1);for(var r=0,o=0;o<e.length;o++)r+=i.JS.PerimeterOfPath(e[o],t,n);return r},i.JS.ScaleDownPath=function(e,t){var n,i;for(t||(t=1),n=e.length;n--;)(i=e[n]).X=i.X/t,i.Y=i.Y/t},i.JS.ScaleDownPaths=function(e,t){var n,i,r;for(Math.round,t||(t=1),n=e.length;n--;)for(i=e[n].length;i--;)(r=e[n][i]).X=r.X/t,r.Y=r.Y/t},i.JS.ScaleUpPath=function(e,t){var n,i,r=Math.round;for(t||(t=1),n=e.length;n--;)(i=e[n]).X=r(i.X*t),i.Y=r(i.Y*t)},i.JS.ScaleUpPaths=function(e,t){var n,i,r,o=Math.round;for(t||(t=1),n=e.length;n--;)for(i=e[n].length;i--;)(r=e[n][i]).X=o(r.X*t),r.Y=o(r.Y*t)},i.ExPolygons=function(){return[]},i.ExPolygon=function(){this.outer=null,this.holes=null},i.JS.AddOuterPolyNodeToExPolygons=function(e,t){var n=new i.ExPolygon;n.outer=e.Contour();var r,o,a,s,l,u,c=e.Childs(),h=c.length;for(n.holes=new Array(h),a=0;a<h;a++)for(r=c[a],n.holes[a]=r.Contour(),s=0,u=(l=r.Childs()).length;s<u;s++)o=l[s],i.JS.AddOuterPolyNodeToExPolygons(o,t);t.push(n)},i.JS.ExPolygonsToPaths=function(e){var t,n,r,o,a=new i.Paths;for(t=0,r=e.length;t<r;t++)for(a.push(e[t].outer),n=0,o=e[t].holes.length;n<o;n++)a.push(e[t].holes[n]);return a},i.JS.PolyTreeToExPolygons=function(e){var t,n,r,o,a=new i.ExPolygons;for(n=0,o=(r=e.Childs()).length;n<o;n++)t=r[n],i.JS.AddOuterPolyNodeToExPolygons(t,a);return a},t.exports=i}));O(),O(),O(),O(),O();var Be,ze=new Uint8Array(16);function Fe(){if(!Be&&!(Be="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Be(ze)}O(),O(),O();var Ue=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var je,He=function(e){return"string"==typeof e&&Ue.test(e)},Ve=[];for(je=0;je<256;++je)Ve.push((je+256).toString(16).substr(1));var Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Ve[e[t+0]]+Ve[e[t+1]]+Ve[e[t+2]]+Ve[e[t+3]]+"-"+Ve[e[t+4]]+Ve[e[t+5]]+"-"+Ve[e[t+6]]+Ve[e[t+7]]+"-"+Ve[e[t+8]]+Ve[e[t+9]]+"-"+Ve[e[t+10]]+Ve[e[t+11]]+Ve[e[t+12]]+Ve[e[t+13]]+Ve[e[t+14]]+Ve[e[t+15]]).toLowerCase();if(!He(n))throw TypeError("Stringified UUID is invalid");return n};O();var We=function(e,t,n){var i=(e=e||{}).random||(e.rng||Fe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return Ge(i)};O(),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t});var Xe=0,Ye=1,Ze=2,Je=100,Qe=300,Ke=306,$e=1e3,et=1001,tt=1002,nt=1003,it=1004,rt=1005,ot=1006,at=1008,st=1009,lt=1012,ut=1014,ct=1015,ht=1016,dt=1020,pt=1022,ft=1023,mt=1026,vt=1027,gt=2300,yt=2301,xt=2302,bt=2400,_t=2401,wt=2402,Mt=2500,Et=3e3,qt=3001,Tt=3007,St=3002,Pt=7680,At=35044,Ct=35048;function Lt(){}Object.assign(Lt.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var Ot=[];for(It=0;It<256;It++)Ot[It]=(It<16?"0":"")+It.toString(16);var It,kt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ot[255&e]+Ot[e>>8&255]+Ot[e>>16&255]+Ot[e>>24&255]+"-"+Ot[255&t]+Ot[t>>8&255]+"-"+Ot[t>>16&15|64]+Ot[t>>24&255]+"-"+Ot[63&n|128]+Ot[n>>8&255]+"-"+Ot[n>>16&255]+Ot[n>>24&255]+Ot[255&i]+Ot[i>>8&255]+Ot[i>>16&255]+Ot[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*kt.DEG2RAD},radToDeg:function(e){return e*kt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){var o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),u=o((t+i)/2),c=a((t+i)/2),h=o((t-i)/2),d=a((t-i)/2),p=o((i-t)/2),f=a((i-t)/2);switch(r){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*f,l*p,s*u);break;case"YXY":e.set(l*p,s*c,l*f,s*u);break;case"ZYZ":e.set(l*f,l*p,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function Nt(e,t){this.x=e||0,this.y=t||0}function Rt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Nt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Nt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(Rt.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,a,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=r,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],x=i[7],b=i[2],_=i[5],w=i[8];return r[0]=o*f+a*g+s*b,r[3]=o*m+a*y+s*_,r[6]=o*v+a*x+s*w,r[1]=l*f+u*g+c*b,r[4]=l*m+u*y+c*_,r[7]=l*v+u*x+c*w,r[2]=h*f+d*g+p*b,r[5]=h*m+d*y+p*_,r[8]=h*v+d*x+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*r*u+n*a*s+i*r*l-i*o*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=e.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=d*l-u*h,f=u*c-d*s,m=h*s-l*c,v=r*p+o*f+a*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);var g=1/v;return i[0]=p*g,i[1]=(a*h-d*o)*g,i[2]=(u*o-a*l)*g,i[3]=f*g,i[4]=(d*r-a*c)*g,i[5]=(a*s-u*r)*g,i[6]=m*g,i[7]=(o*c-h*r)*g,i[8]=(l*r-o*s)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-i*l,i*s,-i*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],u=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*l,i[6]=t*a+n*u,i[1]=-n*r+t*s,i[4]=-n*o+t*l,i[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Dt,Bt={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Dt&&(Dt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Dt.width=e.width,Dt.height=e.height;var n=Dt.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Dt}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},zt=0;function Ft(e,t,n,i,r,o,a,s,l,u){Object.defineProperty(this,"id",{value:zt++}),this.uuid=kt.generateUUID(),this.name="",this.image=void 0!==e?e:Ft.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Ft.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:et,this.wrapT=void 0!==i?i:et,this.magFilter=void 0!==r?r:ot,this.minFilter=void 0!==o?o:at,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:ft,this.internalFormat=null,this.type=void 0!==s?s:st,this.offset=new Nt(0,0),this.repeat=new Nt(1,1),this.center=new Nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Et,this.version=0,this.onUpdate=null}function Ut(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function jt(e,t,n){this.width=e,this.height=t,this.scissor=new Ut(0,0,e,t),this.scissorTest=!1,this.viewport=new Ut(0,0,e,t),n=n||{},this.texture=new Ft(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ot,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ht(e,t,n){jt.call(this,e,t,n),this.samples=4}function Vt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}Ft.DEFAULT_IMAGE=void 0,Ft.DEFAULT_MAPPING=Qe,Ft.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Ft,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=kt.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,a=i.length;o<a;o++)r.push(Bt.getDataURL(i[o]))}else r=Bt.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==Qe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $e:e.x=e.x-Math.floor(e.x);break;case et:e.x=e.x<0?0:1;break;case tt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case $e:e.y=e.y-Math.floor(e.y);break;case et:e.y=e.y<0?0:1;break;case tt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Ft.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Ut.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Ut.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,o=.01,a=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<o&&Math.abs(c-f)<o&&Math.abs(p-m)<o){if(Math.abs(u+h)<a&&Math.abs(c+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,x=(v+1)/2,b=(u+h)/4,_=(c+f)/4,w=(p+m)/4;return g>y&&g>x?g<o?(n=0,i=.707106781,r=.707106781):(i=b/(n=Math.sqrt(g)),r=_/n):y>x?y<o?(n=.707106781,i=0,r=.707106781):(n=b/(i=Math.sqrt(y)),r=w/i):x<o?(n=.707106781,i=.707106781,r=0):(n=_/(r=Math.sqrt(x)),i=w/r),this.set(n,i,r,t),this}var M=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(M)<.001&&(M=1),this.x=(m-p)/M,this.y=(c-f)/M,this.z=(h-u)/M,this.w=Math.acos((l+d+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),jt.prototype=Object.assign(Object.create(Lt.prototype),{constructor:jt,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ht.prototype=Object.assign(Object.create(jt.prototype),{constructor:Ht,isWebGLMultisampleRenderTarget:!0,copy:function(e){return jt.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(Vt,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,a){var s=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(c!==f||s!==h||l!==d||u!==p){var m=1-a,v=s*h+l*d+u*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,v*g);m=Math.sin(m*b)/x,a=Math.sin(a*b)/x}var _=a*g;if(s=s*m+h*_,l=l*m+d*_,u=u*m+p*_,c=c*m+f*_,m===1-a){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c},multiplyQuaternionsFlat:function(e,t,n,i,r,o){var a=n[i],s=n[i+1],l=n[i+2],u=n[i+3],c=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=a*p+u*c+s*d-l*h,e[t+1]=s*p+u*h+l*c-a*d,e[t+2]=l*p+u*d+a*h-s*c,e[t+3]=u*p-a*c-s*h-l*d,e}}),Object.defineProperties(Vt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Vt.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(i/2),c=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(o){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=i+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,this._z=(a-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(o-u)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(a-r)/t,this._x=(o+u)/t,this._y=(l+c)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(kt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+i*l-r*s,this._y=i*u+o*s+r*a-n*l,this._z=r*u+o*l+n*s-i*a,this._w=o*u-n*a-i*s-r*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Gt=new Xt,Wt=new Vt;function Xt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(Xt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Wt.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Wt.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*i-a*n,u=s*n+a*t-r*i,c=s*i+r*n-o*t,h=-r*t-o*n-a*i;return this.x=l*s+h*-r+u*-a-c*-o,this.y=u*s+h*-o+c*-r-l*-a,this.z=c*s+h*-a+l*-o-u*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return Gt.copy(this).projectOnVector(e),this.sub(Gt)},reflect:function(e){return this.sub(Gt.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(kt.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Yt=new Xt,Zt=new tn,Jt=new Xt(0,0,0),Qt=new Xt(1,1,1),Kt=new Xt,$t=new Xt,en=new Xt;function tn(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(tn.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,a,s,l,u,c,h,d,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new tn).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,i=1/Yt.setFromMatrixColumn(e,0).length(),r=1/Yt.setFromMatrixColumn(e,1).length(),o=1/Yt.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var h=o*u,d=o*c,p=a*u,f=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+p*l,t[5]=h-f*l,t[9]=-a*s,t[2]=f-h*l,t[6]=p+d*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order)m=s*u,v=s*c,g=l*u,y=l*c,t[0]=m-y*a,t[4]=-o*c,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s;else if("ZYX"===e.order)h=o*u,d=o*c,p=a*u,f=a*c,t[0]=s*u,t[4]=p*l-d,t[8]=h*l+f,t[1]=s*c,t[5]=f*l+h,t[9]=d*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s;else if("YZX"===e.order){var x=o*s,b=o*l,_=a*s,w=a*l;t[0]=s*u,t[4]=w-x*c,t[8]=_*c+b,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=b*c+_,t[10]=x-w*c}else"XZY"===e.order&&(x=o*s,b=o*l,_=a*s,w=a*l,t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=x*c+w,t[5]=o*u,t[9]=b*c-_,t[2]=_*c-b,t[6]=a*u,t[10]=w*c+x);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Jt,e,Qt)},lookAt:function(e,t,n){var i=this.elements;return en.subVectors(e,t),0===en.lengthSq()&&(en.z=1),en.normalize(),Kt.crossVectors(n,en),0===Kt.lengthSq()&&(1===Math.abs(n.z)?en.x+=1e-4:en.z+=1e-4,en.normalize(),Kt.crossVectors(n,en)),Kt.normalize(),$t.crossVectors(en,Kt),i[0]=Kt.x,i[4]=$t.x,i[8]=en.x,i[1]=Kt.y,i[5]=$t.y,i[9]=en.y,i[2]=Kt.z,i[6]=$t.z,i[10]=en.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],x=n[11],b=n[15],_=i[0],w=i[4],M=i[8],E=i[12],q=i[1],T=i[5],S=i[9],P=i[13],A=i[2],C=i[6],L=i[10],O=i[14],I=i[3],k=i[7],N=i[11],R=i[15];return r[0]=o*_+a*q+s*A+l*I,r[4]=o*w+a*T+s*C+l*k,r[8]=o*M+a*S+s*L+l*N,r[12]=o*E+a*P+s*O+l*R,r[1]=u*_+c*q+h*A+d*I,r[5]=u*w+c*T+h*C+d*k,r[9]=u*M+c*S+h*L+d*N,r[13]=u*E+c*P+h*O+d*R,r[2]=p*_+f*q+m*A+v*I,r[6]=p*w+f*T+m*C+v*k,r[10]=p*M+f*S+m*L+v*N,r[14]=p*E+f*P+m*O+v*R,r[3]=g*_+y*q+x*A+b*I,r[7]=g*w+y*T+x*C+b*k,r[11]=g*M+y*S+x*L+b*N,r[15]=g*E+y*P+x*O+b*R,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+r*s*c-i*l*c-r*a*h+n*l*h+i*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-i*o*d+i*l*u-r*s*u)+e[11]*(+t*l*c-t*a*d-r*o*c+n*o*d+r*a*u-n*l*u)+e[15]*(-i*a*u-t*s*c+t*a*h+i*o*c-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],x=i[15],b=p*y*h-g*f*h+g*c*m-u*y*m-p*c*x+u*f*x,_=v*f*h-d*y*h-v*c*m+l*y*m+d*c*x-l*f*x,w=d*g*h-v*p*h+v*u*m-l*g*m-d*u*x+l*p*x,M=v*p*c-d*g*c-v*u*f+l*g*f+d*u*y-l*p*y,E=r*b+o*_+a*w+s*M;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var q=1/E;return n[0]=b*q,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*x-o*f*x)*q,n[2]=(u*y*s-g*c*s+g*a*h-o*y*h-u*a*x+o*c*x)*q,n[3]=(p*c*s-u*f*s-p*a*h+o*f*h+u*a*m-o*c*m)*q,n[4]=_*q,n[5]=(d*y*s-v*f*s+v*a*m-r*y*m-d*a*x+r*f*x)*q,n[6]=(v*c*s-l*y*s-v*a*h+r*y*h+l*a*x-r*c*x)*q,n[7]=(l*f*s-d*c*s+d*a*h-r*f*h-l*a*m+r*c*m)*q,n[8]=w*q,n[9]=(v*p*s-d*g*s-v*o*m+r*g*m+d*o*x-r*p*x)*q,n[10]=(l*g*s-v*u*s+v*o*h-r*g*h-l*o*x+r*u*x)*q,n[11]=(d*u*s-l*p*s-d*o*h+r*p*h+l*o*m-r*u*m)*q,n[12]=M*q,n[13]=(d*g*a-v*p*a+v*o*f-r*g*f-d*o*y+r*p*y)*q,n[14]=(v*u*a-l*g*a-v*o*c+r*g*c+l*o*y-r*u*y)*q,n[15]=(l*p*a-d*u*a+d*o*c-r*p*c-l*o*f+r*u*f)*q,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,l=r*o,u=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,u*a+n,u*s-i*o,0,l*s-i*a,u*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,l=r+r,u=o+o,c=a+a,h=r*l,d=r*u,p=r*c,f=o*u,m=o*c,v=a*c,g=s*l,y=s*u,x=s*c,b=n.x,_=n.y,w=n.z;return i[0]=(1-(f+v))*b,i[1]=(d+x)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-x)*_,i[5]=(1-(h+v))*_,i[6]=(m+g)*_,i[7]=0,i[8]=(p+y)*w,i[9]=(m-g)*w,i[10]=(1-(h+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(e,t,n){var i=this.elements,r=Yt.set(i[0],i[1],i[2]).length(),o=Yt.set(i[4],i[5],i[6]).length(),a=Yt.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Zt.copy(this);var s=1/r,l=1/o,u=1/a;return Zt.elements[0]*=s,Zt.elements[1]*=s,Zt.elements[2]*=s,Zt.elements[4]*=l,Zt.elements[5]*=l,Zt.elements[6]*=l,Zt.elements[8]*=u,Zt.elements[9]*=u,Zt.elements[10]*=u,t.setFromRotationMatrix(Zt),n.x=r,n.y=o,n.z=a,this},makePerspective:function(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){var a=this.elements,s=1/(t-e),l=1/(n-i),u=1/(o-r),c=(t+e)*s,h=(n+i)*l,d=(o+r)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var nn=new tn,rn=new Vt;function on(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||on.DefaultOrder}function an(){this.mask=1}on.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],on.DefaultOrder="XYZ",Object.defineProperties(on.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(on.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=kt.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],l=r[1],u=r[5],c=r[9],h=r[2],d=r[6],p=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return nn.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nn,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return rn.setFromEuler(this),this.setFromQuaternion(rn,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Xt(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(an.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var sn=0,ln=new Xt,un=new Vt,cn=new tn,hn=new Xt,dn=new Xt,pn=new Xt,fn=new Vt,mn=new Xt(1,0,0),vn=new Xt(0,1,0),gn=new Xt(0,0,1),yn={type:"added"},xn={type:"removed"};function bn(){Object.defineProperty(this,"id",{value:sn++}),this.uuid=kt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bn.DefaultUp.clone();var e=new Xt,t=new on,n=new Vt,i=new Xt(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new tn},normalMatrix:{value:new Rt}}),this.matrix=new tn,this.matrixWorld=new tn,this.matrixAutoUpdate=bn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new an,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function _n(){bn.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}bn.DefaultUp=new Xt(0,1,0),bn.DefaultMatrixAutoUpdate=!0,bn.prototype=Object.assign(Object.create(Lt.prototype),{constructor:bn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return un.setFromAxisAngle(e,t),this.quaternion.multiply(un),this},rotateOnWorldAxis:function(e,t){return un.setFromAxisAngle(e,t),this.quaternion.premultiply(un),this},rotateX:function(e){return this.rotateOnAxis(mn,e)},rotateY:function(e){return this.rotateOnAxis(vn,e)},rotateZ:function(e){return this.rotateOnAxis(gn,e)},translateOnAxis:function(e,t){return ln.copy(e).applyQuaternion(this.quaternion),this.position.add(ln.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(mn,e)},translateY:function(e){return this.translateOnAxis(vn,e)},translateZ:function(e){return this.translateOnAxis(gn,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(cn.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?hn.copy(e):hn.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),dn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cn.lookAt(dn,hn,this.up):cn.lookAt(hn,dn,this.up),this.quaternion.setFromRotationMatrix(cn),i&&(cn.extractRotation(i.matrixWorld),un.setFromRotationMatrix(cn),this.quaternion.premultiply(un.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(yn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(xn)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),cn.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),cn.multiply(e.parent.matrixWorld)),e.applyMatrix4(cn),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Xt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Vt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(dn,e,pn),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Xt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(dn,fn,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Xt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var u=a[s];r(e.shapes,u)}else r(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(r(e.materials,this.material[s]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0)for(i.children=[],s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object);if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes),h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),_n.prototype=Object.assign(Object.create(bn.prototype),{constructor:_n,isScene:!0,copy:function(e,t){return bn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=bn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var wn=[new Xt,new Xt,new Xt,new Xt,new Xt,new Xt,new Xt,new Xt],Mn=new Xt,En=new Nn,qn=new Xt,Tn=new Xt,Sn=new Xt,Pn=new Xt,An=new Xt,Cn=new Xt,Ln=new Xt,On=new Xt,In=new Xt,kn=new Xt;function Nn(e,t){this.min=void 0!==e?e:new Xt(1/0,1/0,1/0),this.max=void 0!==t?t:new Xt(-1/0,-1/0,-1/0)}function Rn(e,t,n,i,r){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){kn.fromArray(e,o);var s=r.x*Math.abs(kn.x)+r.y*Math.abs(kn.y)+r.z*Math.abs(kn.z),l=t.dot(kn),u=n.dot(kn),c=i.dot(kn);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(Nn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Mn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Xt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Xt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),En.copy(t.boundingBox),En.applyMatrix4(e.matrixWorld),this.union(En));for(var n=e.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Xt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Mn),Mn.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Ln),On.subVectors(this.max,Ln),qn.subVectors(e.a,Ln),Tn.subVectors(e.b,Ln),Sn.subVectors(e.c,Ln),Pn.subVectors(Tn,qn),An.subVectors(Sn,Tn),Cn.subVectors(qn,Sn);var t=[0,-Pn.z,Pn.y,0,-An.z,An.y,0,-Cn.z,Cn.y,Pn.z,0,-Pn.x,An.z,0,-An.x,Cn.z,0,-Cn.x,-Pn.y,Pn.x,0,-An.y,An.x,0,-Cn.y,Cn.x,0];return!(!Rn(t,qn,Tn,Sn,On)||(t=[1,0,0,0,1,0,0,0,1],!Rn(t,qn,Tn,Sn,On)))&&(In.crossVectors(Pn,An),Rn(t=[In.x,In.y,In.z],qn,Tn,Sn,On))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Xt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Mn.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Mn).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(wn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wn)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Dn=new Nn;function Bn(e,t){this.center=void 0!==e?e:new Xt,this.radius=void 0!==t?t:-1}Object.assign(Bn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):Dn.setFromPoints(e).getCenter(n);for(var i=0,r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Xt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Nn),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var zn=new Xt,Fn=new Xt,Un=new Xt,jn=new Xt,Hn=new Xt,Vn=new Xt,Gn=new Xt;function Wn(e,t){this.origin=void 0!==e?e:new Xt,this.direction=void 0!==t?t:new Xt(0,0,-1)}Object.assign(Wn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Xt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,zn)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Xt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=zn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(zn.copy(this.direction).multiplyScalar(t).add(this.origin),zn.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,i){Fn.copy(e).add(t).multiplyScalar(.5),Un.copy(t).sub(e).normalize(),jn.copy(this.origin).sub(Fn);var r,o,a,s,l=.5*e.distanceTo(t),u=-this.direction.dot(Un),c=jn.dot(this.direction),h=-jn.dot(Un),d=jn.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(o=u*c-h,s=l*p,(r=u*h-c)>=0)if(o>=-s)if(o<=s){var f=1/p;a=(r*=f)*(r+u*(o*=f)+2*c)+o*(u*r+o+2*h)+d}else o=l,a=-(r=Math.max(0,-(u*o+c)))*r+o*(o+2*h)+d;else o=-l,a=-(r=Math.max(0,-(u*o+c)))*r+o*(o+2*h)+d;else o<=-s?a=-(r=Math.max(0,-(-u*l+c)))*r+(o=r>0?-l:Math.min(Math.max(-l,-h),l))*(o+2*h)+d:o<=s?(r=0,a=(o=Math.min(Math.max(-l,-h),l))*(o+2*h)+d):a=-(r=Math.max(0,-(u*l+c)))*r+(o=r>0?l:Math.min(Math.max(-l,-h),l))*(o+2*h)+d;else o=u>0?-l:l,a=-(r=Math.max(0,-(u*o+c)))*r+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Un).multiplyScalar(o).add(Fn),a},intersectSphere:function(e,t){zn.subVectors(e.center,this.origin);var n=zn.dot(this.direction),i=zn.dot(zn)-n*n,r=e.radius*e.radius;if(i>r)return null;var o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,o,a,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||r>i||((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>i)||((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0)?null:this.at(n>=0?n:i,t)},intersectsBox:function(e){return null!==this.intersectBox(e,zn)},intersectTriangle:function(e,t,n,i,r){Hn.subVectors(t,e),Vn.subVectors(n,e),Gn.crossVectors(Hn,Vn);var o,a=this.direction.dot(Gn);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}jn.subVectors(this.origin,e);var s=o*this.direction.dot(Vn.crossVectors(jn,Vn));if(s<0)return null;var l=o*this.direction.dot(Hn.cross(jn));if(l<0||s+l>a)return null;var u=-o*jn.dot(Gn);return u<0?null:this.at(u/a,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Xn=new Xt,Yn=new Xt,Zn=new Rt;function Jn(e,t){this.normal=void 0!==e?e:new Xt(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Jn.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var i=Xn.subVectors(n,t).cross(Yn.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Xt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Xt);var n=e.delta(Xn),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Xt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Zn.getNormalMatrix(e),i=this.coplanarPoint(Xn).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Qn=new Xt,Kn=new Xt,$n=new Xt,ei=new Xt,ti=new Xt,ni=new Xt,ii=new Xt,ri=new Xt,oi=new Xt,ai=new Xt;function si(e,t,n){this.a=void 0!==e?e:new Xt,this.b=void 0!==t?t:new Xt,this.c=void 0!==n?n:new Xt}Object.assign(si,{getNormal:function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Xt),i.subVectors(n,t),Qn.subVectors(e,t),i.cross(Qn);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(e,t,n,i,r){Qn.subVectors(i,t),Kn.subVectors(n,t),$n.subVectors(e,t);var o=Qn.dot(Qn),a=Qn.dot(Kn),s=Qn.dot($n),l=Kn.dot(Kn),u=Kn.dot($n),c=o*l-a*a;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Xt),0===c)return r.set(-2,-1,-1);var h=1/c,d=(l*s-a*u)*h,p=(o*u-a*s)*h;return r.set(1-d-p,p,d)},containsPoint:function(e,t,n,i){return si.getBarycoord(e,t,n,i,ei),ei.x>=0&&ei.y>=0&&ei.x+ei.y<=1},getUV:function(e,t,n,i,r,o,a,s){return this.getBarycoord(e,t,n,i,ei),s.set(0,0),s.addScaledVector(r,ei.x),s.addScaledVector(o,ei.y),s.addScaledVector(a,ei.z),s},isFrontFacing:function(e,t,n,i){return Qn.subVectors(n,t),Kn.subVectors(e,t),Qn.cross(Kn).dot(i)<0}}),Object.assign(si.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Qn.subVectors(this.c,this.b),Kn.subVectors(this.a,this.b),.5*Qn.cross(Kn).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Xt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return si.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Jn),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return si.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return si.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return si.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return si.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Xt);var n,i,r=this.a,o=this.b,a=this.c;ti.subVectors(o,r),ni.subVectors(a,r),ri.subVectors(e,r);var s=ti.dot(ri),l=ni.dot(ri);if(s<=0&&l<=0)return t.copy(r);oi.subVectors(e,o);var u=ti.dot(oi),c=ni.dot(oi);if(u>=0&&c<=u)return t.copy(o);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(r).addScaledVector(ti,n);ai.subVectors(e,a);var d=ti.dot(ai),p=ni.dot(ai);if(p>=0&&d<=p)return t.copy(a);var f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),t.copy(r).addScaledVector(ni,i);var m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return ii.subVectors(a,o),i=(c-u)/(c-u+(d-p)),t.copy(o).addScaledVector(ii,i);var v=1/(m+f+h);return n=f*v,i=h*v,t.copy(r).addScaledVector(ti,n).addScaledVector(ni,i)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var li={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ui={h:0,s:0,l:0},ci={h:0,s:0,l:0};function hi(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function di(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function pi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function fi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function mi(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Xt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new hi,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}Object.assign(hi.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=kt.euclideanModulo(e,1),t=kt.clamp(t,0,1),n=kt.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=di(r,i,e+1/3),this.g=di(r,i,e),this.b=di(r,i,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=li[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=pi(e.r),this.g=pi(e.g),this.b=pi(e.b),this},copyLinearToSRGB:function(e){return this.r=fi(e.r),this.g=fi(e.g),this.b=fi(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=l<=.5?u/(a+s):u/(2-a-s),a){case i:t=(r-o)/u+(r<o?6:0);break;case r:t=(o-i)/u+2;break;case o:t=(i-r)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(ui),ui.h+=e,ui.s+=t,ui.l+=n,this.setHSL(ui.h,ui.s,ui.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(ui),e.getHSL(ci);var n=kt.lerp(ui.h,ci.h,t),i=kt.lerp(ui.s,ci.s,t),r=kt.lerp(ui.l,ci.l,t);return this.setHSL(n,i,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),hi.NAMES=li,Object.assign(mi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var vi=0;function gi(){Object.defineProperty(this,"id",{value:vi++}),this.uuid=kt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Je,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pt,this.stencilZFail=Pt,this.stencilZPass=Pt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function yi(e){gi.call(this),this.type="MeshBasicMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}gi.prototype=Object.assign(Object.create(Lt.prototype),{constructor:gi,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),o=i(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(gi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),yi.prototype=Object.create(gi.prototype),yi.prototype.constructor=yi,yi.prototype.isMeshBasicMaterial=!0,yi.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var xi=new Xt;function bi(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=At,this.updateRange={offset:0,count:-1},this.version=0}function _i(e,t,n){bi.call(this,new Int8Array(e),t,n)}function wi(e,t,n){bi.call(this,new Uint8Array(e),t,n)}function Mi(e,t,n){bi.call(this,new Uint8ClampedArray(e),t,n)}function Ei(e,t,n){bi.call(this,new Int16Array(e),t,n)}function qi(e,t,n){bi.call(this,new Uint16Array(e),t,n)}function Ti(e,t,n){bi.call(this,new Int32Array(e),t,n)}function Si(e,t,n){bi.call(this,new Uint32Array(e),t,n)}function Pi(e,t,n){bi.call(this,new Float32Array(e),t,n)}function Ai(e,t,n){bi.call(this,new Float64Array(e),t,n)}function Ci(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Li(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(bi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(bi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new hi),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Nt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Xt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Ut),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.applyMatrix3(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.applyMatrix4(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.applyNormalMatrix(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.transformDirection(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),_i.prototype=Object.create(bi.prototype),_i.prototype.constructor=_i,wi.prototype=Object.create(bi.prototype),wi.prototype.constructor=wi,Mi.prototype=Object.create(bi.prototype),Mi.prototype.constructor=Mi,Ei.prototype=Object.create(bi.prototype),Ei.prototype.constructor=Ei,qi.prototype=Object.create(bi.prototype),qi.prototype.constructor=qi,Ti.prototype=Object.create(bi.prototype),Ti.prototype.constructor=Ti,Si.prototype=Object.create(bi.prototype),Si.prototype.constructor=Si,Pi.prototype=Object.create(bi.prototype),Pi.prototype.constructor=Pi,Ai.prototype=Object.create(bi.prototype),Ai.prototype.constructor=Ai,Object.assign(Ci.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var c,h=e.morphNormals,d=h.length;if(d>0){for(c=[],u=0;u<d;u++)c[u]={name:h[u].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,v=f.length===i.length;for(i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),u=0;u<n.length;u++){var g=n[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b,_=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(b=r[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new Nt,new Nt,new Nt))),!0===a&&(void 0!==(b=r[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new Nt,new Nt,new Nt)));for(var M=0;M<l;M++){var E=s[M].vertices;t[M].data.push(E[g.a],E[g.b],E[g.c])}for(M=0;M<d;M++){var q=h[M].vertexNormals[u];c[M].data.push(q.a,q.b,q.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Oi=1,Ii=new tn,ki=new bn,Ni=new Xt,Ri=new Nn,Di=new Nn,Bi=new Xt;function zi(){Object.defineProperty(this,"id",{value:Oi+=2}),this.uuid=kt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}zi.prototype=Object.assign(Object.create(Lt.prototype),{constructor:zi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Li(e)>65535?Si:qi)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new Rt).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Ii.makeRotationX(e),this.applyMatrix4(Ii),this},rotateY:function(e){return Ii.makeRotationY(e),this.applyMatrix4(Ii),this},rotateZ:function(e){return Ii.makeRotationZ(e),this.applyMatrix4(Ii),this},translate:function(e,t,n){return Ii.makeTranslation(e,t,n),this.applyMatrix4(Ii),this},scale:function(e,t,n){return Ii.makeScale(e,t,n),this.applyMatrix4(Ii),this},lookAt:function(e){return ki.lookAt(e),ki.updateMatrix(),this.applyMatrix4(ki.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ni).negate(),this.translate(Ni.x,Ni.y,Ni.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Pi(3*t.vertices.length,3),i=new Pi(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Pi(t.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Pi(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ci).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new bi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new bi(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.setAttribute("color",new bi(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new bi(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new bi(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],u=0,c=l.length;u<c;u++){var h=l[u],d=new Pi(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new Pi(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new Pi(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Nn);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];Ri.setFromBufferAttribute(r),this.morphTargetsRelative?(Bi.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(Bi),Bi.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(Bi)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Bn);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var o=t[i];Di.setFromBufferAttribute(o),this.morphTargetsRelative?(Bi.addVectors(Ri.min,Di.min),Ri.expandByPoint(Bi),Bi.addVectors(Ri.max,Di.max),Ri.expandByPoint(Bi)):(Ri.expandByPoint(Di.min),Ri.expandByPoint(Di.max))}Ri.getCenter(n);var a=0;for(i=0,r=e.count;i<r;i++)Bi.fromBufferAttribute(e,i),a=Math.max(a,n.distanceToSquared(Bi));if(t)for(i=0,r=t.length;i<r;i++){o=t[i];for(var s=this.morphTargetsRelative,l=0,u=o.count;l<u;l++)Bi.fromBufferAttribute(o,l),s&&(Ni.fromBufferAttribute(e,l),Bi.add(Ni)),a=Math.max(a,n.distanceToSquared(Bi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new bi(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,o=i.length;r<o;r++)i[r]=0;var a,s,l,u=t.normal.array,c=new Xt,h=new Xt,d=new Xt,p=new Xt,f=new Xt;if(e){var m=e.array;for(r=0,o=e.count;r<o;r+=3)a=3*m[r+0],s=3*m[r+1],l=3*m[r+2],c.fromArray(n,a),h.fromArray(n,s),d.fromArray(n,l),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}else for(r=0,o=n.length;r<o;r+=9)c.fromArray(n,r),h.fromArray(n,r+3),d.fromArray(n,r+6),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),u[r]=p.x,u[r+1]=p.y,u[r+2]=p.z,u[r+3]=p.x,u[r+4]=p.y,u[r+5]=p.z,u[r+6]=p.x,u[r+7]=p.y,u[r+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,o=e.attributes[i],a=o.array,s=o.itemSize*t,l=Math.min(a.length,r.length-s),u=0,c=s;u<l;u++,c++)r[c]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Bi.x=e.getX(t),Bi.y=e.getY(t),Bi.z=e.getZ(t),Bi.normalize(),e.setXYZ(t,Bi.x,Bi.y,Bi.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i),a=0,s=0,l=0,u=t.length;l<u;l++){a=t[l]*i;for(var c=0;c<i;c++)o[s++]=n[a++]}return new bi(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new zi,n=this.index.array,i=this.attributes;for(var r in i){var o=e(i[r],n);t.setAttribute(r,o)}var a=this.morphAttributes;for(r in a){for(var s=[],l=a[r],u=0,c=l.length;u<c;u++)o=e(l[u],n),s.push(o);t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var h=this.groups,d=(u=0,h.length);u<d;u++){var p=h[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var o=(d=r[n]).toJSON();""!==d.name&&(o.name=d.name),e.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,h=l.length;c<h;c++){var d;o=(d=l[c]).toJSON(),""!==d.name&&(o.name=d.name),u.push(o)}u.length>0&&(a[n]=u,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new zi).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var a=o[t];this.setAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[t]=l}this.morphTargetsRelative=e.morphTargetsRelative;var c=e.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Fi=new tn,Ui=new Wn,ji=new Bn,Hi=new Xt,Vi=new Xt,Gi=new Xt,Wi=new Xt,Xi=new Xt,Yi=new Xt,Zi=new Xt,Ji=new Xt,Qi=new Xt,Ki=new Nt,$i=new Nt,er=new Nt,tr=new Xt,nr=new Xt;function rr(e,t){bn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new zi,this.material=void 0!==t?t:new yi,this.updateMorphTargets()}function or(e,t,n,i,r,o,a,s){if(null===(1===t.side?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,2!==t.side,s)))return null;nr.copy(s),nr.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(nr);return l<n.near||l>n.far?null:{distance:l,point:nr.clone(),object:e}}function ar(e,t,n,i,r,o,a,s,l,u,c,h){Hi.fromBufferAttribute(r,u),Vi.fromBufferAttribute(r,c),Gi.fromBufferAttribute(r,h);var d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){Zi.set(0,0,0),Ji.set(0,0,0),Qi.set(0,0,0);for(var p=0,f=o.length;p<f;p++){var m=d[p],v=o[p];0!==m&&(Wi.fromBufferAttribute(v,u),Xi.fromBufferAttribute(v,c),Yi.fromBufferAttribute(v,h),a?(Zi.addScaledVector(Wi,m),Ji.addScaledVector(Xi,m),Qi.addScaledVector(Yi,m)):(Zi.addScaledVector(Wi.sub(Hi),m),Ji.addScaledVector(Xi.sub(Vi),m),Qi.addScaledVector(Yi.sub(Gi),m)))}Hi.add(Zi),Vi.add(Ji),Gi.add(Qi)}e.isSkinnedMesh&&(e.boneTransform(u,Hi),e.boneTransform(c,Vi),e.boneTransform(h,Gi));var g=or(e,t,n,i,Hi,Vi,Gi,tr);if(g){s&&(Ki.fromBufferAttribute(s,u),$i.fromBufferAttribute(s,c),er.fromBufferAttribute(s,h),g.uv=si.getUV(tr,Hi,Vi,Gi,Ki,$i,er,new Nt)),l&&(Ki.fromBufferAttribute(l,u),$i.fromBufferAttribute(l,c),er.fromBufferAttribute(l,h),g.uv2=si.getUV(tr,Hi,Vi,Gi,Ki,$i,er,new Nt));var y=new mi(u,c,h);si.getNormal(Hi,Vi,Gi,y.normal),g.face=y}return g}rr.prototype=Object.assign(Object.create(bn.prototype),{constructor:rr,isMesh:!0,copy:function(e){return bn.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,i=this.geometry,r=this.material,o=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),ji.copy(i.boundingSphere),ji.applyMatrix4(o),!1!==e.ray.intersectsSphere(ji)&&(Fi.getInverse(o),Ui.copy(e.ray).applyMatrix4(Fi),null===i.boundingBox||!1!==Ui.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var a,s,l,u,c,h,d,p,f,m=i.index,v=i.attributes.position,g=i.morphAttributes.position,y=i.morphTargetsRelative,x=i.attributes.uv,b=i.attributes.uv2,_=i.groups,w=i.drawRange;if(null!==m)if(Array.isArray(r))for(u=0,h=_.length;u<h;u++)for(f=r[(p=_[u]).materialIndex],c=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);c<d;c+=3)a=m.getX(c),s=m.getX(c+1),l=m.getX(c+2),(n=ar(this,f,e,Ui,v,g,y,x,b,a,s,l))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,w.start),h=Math.min(m.count,w.start+w.count);u<h;u+=3)a=m.getX(u),s=m.getX(u+1),l=m.getX(u+2),(n=ar(this,r,e,Ui,v,g,y,x,b,a,s,l))&&(n.faceIndex=Math.floor(u/3),t.push(n));else if(void 0!==v)if(Array.isArray(r))for(u=0,h=_.length;u<h;u++)for(f=r[(p=_[u]).materialIndex],c=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);c<d;c+=3)(n=ar(this,f,e,Ui,v,g,y,x,b,a=c,s=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,w.start),h=Math.min(v.count,w.start+w.count);u<h;u+=3)(n=ar(this,r,e,Ui,v,g,y,x,b,a=u,s=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),t.push(n))}else if(i.isGeometry){var M,E,q,T,S=Array.isArray(r),P=i.vertices,A=i.faces,C=i.faceVertexUvs[0];C.length>0&&(T=C);for(var L=0,O=A.length;L<O;L++){var I=A[L],k=S?r[I.materialIndex]:r;if(void 0!==k&&(M=P[I.a],E=P[I.b],q=P[I.c],n=or(this,k,e,Ui,M,E,q,tr))){if(T&&T[L]){var N=T[L];Ki.copy(N[0]),$i.copy(N[1]),er.copy(N[2]),n.uv=si.getUV(tr,M,E,q,Ki,$i,er,new Nt)}n.face=I,n.faceIndex=L,t.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var sr=0,lr=new tn,ur=new bn,cr=new Xt;function hr(){Object.defineProperty(this,"id",{value:sr+=2}),this.uuid=kt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}hr.prototype=Object.assign(Object.create(Lt.prototype),{constructor:hr,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Rt).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return lr.makeRotationX(e),this.applyMatrix4(lr),this},rotateY:function(e){return lr.makeRotationY(e),this.applyMatrix4(lr),this},rotateZ:function(e){return lr.makeRotationZ(e),this.applyMatrix4(lr),this},translate:function(e,t,n){return lr.makeTranslation(e,t,n),this.applyMatrix4(lr),this},scale:function(e,t,n){return lr.makeScale(e,t,n),this.applyMatrix4(lr),this},lookAt:function(e){return ur.lookAt(e),ur.updateMatrix(),this.applyMatrix4(ur.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<r.length;u+=3)t.vertices.push((new Xt).fromArray(r,u)),void 0!==a&&t.colors.push((new hi).fromArray(a,u));function c(e,n,i,r){var u=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],c=new mi(e,n,i,void 0===o?[]:[(new Xt).fromArray(o,3*e),(new Xt).fromArray(o,3*n),(new Xt).fromArray(o,3*i)],u,r);t.faces.push(c),void 0!==s&&t.faceVertexUvs[0].push([(new Nt).fromArray(s,2*e),(new Nt).fromArray(s,2*n),(new Nt).fromArray(s,2*i)]),void 0!==l&&t.faceVertexUvs[1].push([(new Nt).fromArray(l,2*e),(new Nt).fromArray(l,2*n),(new Nt).fromArray(l,2*i)])}var h=e.groups;if(h.length>0)for(u=0;u<h.length;u++)for(var d=h[u],p=d.start,f=p,m=p+d.count;f<m;f+=3)void 0!==n?c(n[f],n[f+1],n[f+2],d.materialIndex):c(f,f+1,f+2,d.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<r.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(cr).negate(),this.translate(cr.x,cr.y,cr.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new tn;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var e=new Xt,t=new Xt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Xt;if(e){var s,l,u,c=new Xt,h=new Xt;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)a[(o=this.faces[i]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(o=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new hr;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Xt,u={a:new Xt,b:new Xt,c:new Xt},a.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Nn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Bn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Rt).getNormalMatrix(t));for(var h=0,d=a.length;h<d;h++){var p=a[h].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(h=0,d=c.length;h<d;h++)u.push(c[h].clone());for(h=0,d=l.length;h<d;h++){var f,m,v,g=l[h],y=g.vertexNormals,x=g.vertexColors;(f=new mi(g.a+r,g.b+r,g.c+r)).normal.copy(g.normal),void 0!==i&&f.normal.applyMatrix3(i).normalize();for(var b=0,_=y.length;b<_;b++)m=y[b].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),f.vertexNormals.push(m);for(f.color.copy(g.color),b=0,_=x.length;b<_;b++)v=x[b],f.vertexColors.push(v.clone());f.materialIndex=g.materialIndex+n,s.push(f)}for(h=0,d=e.faceVertexUvs.length;h<d;h++){var w=e.faceVertexUvs[h];for(void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]),b=0,_=w.length;b<_;b++){for(var M=w[b],E=[],q=0,T=M.length;q<T;q++)E.push(M[q].clone());this.faceVertexUvs[h].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,o,a,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Xt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var i,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(i=[]),a&&a.length===t&&(r=[]),n=0;n<t;n++){var s=e[n]._id;i&&i.push(o[s]),r&&r.push(a[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}var a=[],s=[],l={},u=[],c={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,x=0;if(x=M(x,0,0),x=M(x,1,!0),x=M(x,2,!1),x=M(x,3,f),x=M(x,4,m),x=M(x,5,v),x=M(x,6,g),x=M(x,7,y),a.push(x),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];a.push(T(b[0]),T(b[1]),T(b[2]))}if(m&&a.push(E(p.normal)),v){var _=p.vertexNormals;a.push(E(_[0]),E(_[1]),E(_[2]))}if(g&&a.push(q(p.color)),y){var w=p.vertexColors;a.push(q(w[0]),q(w[1]),q(w[2]))}}function M(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function q(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=i,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new hr).copy(this)},copy:function(e){var t,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var h=c[i],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],i=0,r=v[t].vertexNormals.length;i<r;i++){var y=v[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],i=0,r=v[t].faceNormals.length;i<r;i++)g.faceNormals.push(v[t].faceNormals[i].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var dr=function(e){w(n,e);var t=M(n);function n(e,i,r,o,a,s){var l;return b(this,n),(l=t.call(this)).type="BoxGeometry",l.parameters={width:e,height:i,depth:r,widthSegments:o,heightSegments:a,depthSegments:s},l.fromBufferGeometry(new pr(e,i,r,o,a,s)),l.mergeVertices(),l}return x(n)}(hr),pr=function(e){w(n,e);var t=M(n);function n(e,i,r,o,a,s){var l;b(this,n),(l=t.call(this)).type="BoxBufferGeometry",l.parameters={width:e,height:i,depth:r,widthSegments:o,heightSegments:a,depthSegments:s};var u=c(l);e=e||1,i=i||1,r=r||1,o=Math.floor(o)||1,a=Math.floor(a)||1,s=Math.floor(s)||1;var h=[],d=[],p=[],f=[],m=0,v=0;function g(e,t,n,i,r,o,a,s,l,c,g){for(var y=o/l,x=a/c,b=o/2,_=a/2,w=s/2,M=l+1,E=c+1,q=0,T=0,S=new Xt,P=0;P<E;P++)for(var A=P*x-_,C=0;C<M;C++){var L=C*y-b;S[e]=L*i,S[t]=A*r,S[n]=w,d.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=s>0?1:-1,p.push(S.x,S.y,S.z),f.push(C/l),f.push(1-P/c),q+=1}for(var O=0;O<c;O++)for(var I=0;I<l;I++){var k=m+I+M*O,N=m+I+M*(O+1),R=m+(I+1)+M*(O+1),D=m+(I+1)+M*O;h.push(k,N,D),h.push(N,R,D),T+=6}u.addGroup(v,T,g),v+=T,m+=q}return g("z","y","x",-1,-1,r,i,e,s,a,0),g("z","y","x",1,-1,r,i,-e,s,a,1),g("x","z","y",1,1,e,r,i,o,s,2),g("x","z","y",1,-1,e,r,-i,o,s,3),g("x","y","z",1,-1,e,i,r,o,a,4),g("x","y","z",-1,-1,e,i,-r,o,a,5),l.setIndex(h),l.setAttribute("position",new Pi(d,3)),l.setAttribute("normal",new Pi(p,3)),l.setAttribute("uv",new Pi(f,2)),l}return x(n)}(zi);function fr(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function mr(e){for(var t={},n=0;n<e.length;n++){var i=fr(e[n]);for(var r in i)t[r]=i[r]}return t}var vr={clone:fr,merge:mr};function gr(e){gi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function yr(){bn.call(this),this.type="Camera",this.matrixWorldInverse=new tn,this.projectionMatrix=new tn,this.projectionMatrixInverse=new tn}function xr(e,t,n,i){yr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}gr.prototype=Object.create(gi.prototype),gr.prototype.constructor=gr,gr.prototype.isShaderMaterial=!0,gr.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fr(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this},gr.prototype.toJSON=function(e){var t=gi.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},yr.prototype=Object.assign(Object.create(bn.prototype),{constructor:yr,isCamera:!0,copy:function(e,t){return bn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Xt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){bn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){bn.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),xr.prototype=Object.assign(Object.create(yr.prototype),{constructor:xr,isPerspectiveCamera:!0,copy:function(e,t){return yr.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*kt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*kt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*kt.RAD2DEG*Math.atan(Math.tan(.5*kt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*kt.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,t-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=bn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var br=90;function _r(e,t,n){if(bn.call(this),this.type="CubeCamera",!0===n.isWebGLCubeRenderTarget){this.renderTarget=n;var i=new xr(br,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Xt(1,0,0)),this.add(i);var r=new xr(br,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Xt(-1,0,0)),this.add(r);var o=new xr(br,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Xt(0,1,0)),this.add(o);var a=new xr(br,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Xt(0,-1,0)),this.add(a);var s=new xr(br,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Xt(0,0,1)),this.add(s);var l=new xr(br,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Xt(0,0,-1)),this.add(l),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var u=e.xr.enabled,c=e.getRenderTarget();e.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.xr.enabled=u},this.clear=function(e,t,i,r){for(var o=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(n,a),e.clear(t,i,r);e.setRenderTarget(o)}}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function wr(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),jt.call(this,e,e,t)}function Mr(e,t,n,i,r,o,a,s,l,u,c,h){Ft.call(this,null,o,a,s,l,u,i,r,c,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:nt,this.minFilter=void 0!==u?u:nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}_r.prototype=Object.create(bn.prototype),_r.prototype.constructor=_r,wr.prototype=Object.create(jt.prototype),wr.prototype.constructor=wr,wr.prototype.isWebGLCubeRenderTarget=!0,wr.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new _n,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV = equirectUv( direction );","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new gr({type:"CubemapFromEquirect",uniforms:fr(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;var o=new rr(new pr(5,5,5),r);return n.add(o),new _r(1,10,this).update(e,n),o.geometry.dispose(),o.material.dispose(),this},Mr.prototype=Object.create(Ft.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isDataTexture=!0;var Er=new Bn,qr=new Xt;function Tr(e,t,n,i,r,o){this.planes=[void 0!==e?e:new Jn,void 0!==t?t:new Jn,void 0!==n?n:new Jn,void 0!==i?i:new Jn,void 0!==r?r:new Jn,void 0!==o?o:new Jn]}Object.assign(Tr.prototype,{set:function(e,t,n,i,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-i,c-s,f-h,y-m).normalize(),t[1].setComponents(a+i,c+s,f+h,y+m).normalize(),t[2].setComponents(a+r,c+l,f+d,y+v).normalize(),t[3].setComponents(a-r,c-l,f-d,y-v).normalize(),t[4].setComponents(a-o,c-u,f-p,y-g).normalize(),t[5].setComponents(a+o,c+u,f+p,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Er.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Er)},intersectsSprite:function(e){return Er.center.set(0,0,0),Er.radius=.7071067811865476,Er.applyMatrix4(e.matrixWorld),this.intersectsSphere(Er)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(qr.x=i.normal.x>0?e.max.x:e.min.x,qr.y=i.normal.y>0?e.max.y:e.min.y,qr.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(qr)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Sr={common:{diffuse:{value:new hi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Rt},uv2Transform:{value:new Rt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new hi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new hi(15658734)},opacity:{value:1},center:{value:new Nt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rt}}};function Pr(){var e=null,t=!1,n=null;function i(r,o){!1!==t&&(n(r,o),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ar(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){t.isInterleavedBufferAttribute&&(t=t.data);var o=i.get(t);void 0===o?i.set(t,function(t,n){var i=t.array,r=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();var a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(function(t,i,r){var o=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,o):(n?e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,r),o.version=t.version)}}}function Cr(e,t,n,i){hr.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Lr(e,t,n,i)),this.mergeVertices()}function Lr(e,t,n,i){zi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,h=u+1,d=e/l,p=t/u,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(r=0;r<c;r++){var x=r*d-a;m.push(x,-y,0),v.push(0,0,1),g.push(r/l),g.push(1-o/u)}}for(o=0;o<u;o++)for(r=0;r<l;r++){var b=r+c*o,_=r+c*(o+1),w=r+1+c*(o+1),M=r+1+c*o;f.push(b,_,M),f.push(_,w,M)}this.setIndex(f),this.setAttribute("position",new Pi(m,3)),this.setAttribute("normal",new Pi(v,3)),this.setAttribute("uv",new Pi(g,2))}Cr.prototype=Object.create(hr.prototype),Cr.prototype.constructor=Cr,Lr.prototype=Object.create(zi.prototype),Lr.prototype.constructor=Lr;var Or={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ir={basic:{uniforms:mr([Sr.common,Sr.specularmap,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.fog]),vertexShader:Or.meshbasic_vert,fragmentShader:Or.meshbasic_frag},lambert:{uniforms:mr([Sr.common,Sr.specularmap,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.fog,Sr.lights,{emissive:{value:new hi(0)}}]),vertexShader:Or.meshlambert_vert,fragmentShader:Or.meshlambert_frag},phong:{uniforms:mr([Sr.common,Sr.specularmap,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.fog,Sr.lights,{emissive:{value:new hi(0)},specular:{value:new hi(1118481)},shininess:{value:30}}]),vertexShader:Or.meshphong_vert,fragmentShader:Or.meshphong_frag},standard:{uniforms:mr([Sr.common,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.roughnessmap,Sr.metalnessmap,Sr.fog,Sr.lights,{emissive:{value:new hi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Or.meshphysical_vert,fragmentShader:Or.meshphysical_frag},toon:{uniforms:mr([Sr.common,Sr.specularmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.gradientmap,Sr.fog,Sr.lights,{emissive:{value:new hi(0)},specular:{value:new hi(1118481)},shininess:{value:30}}]),vertexShader:Or.meshtoon_vert,fragmentShader:Or.meshtoon_frag},matcap:{uniforms:mr([Sr.common,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.fog,{matcap:{value:null}}]),vertexShader:Or.meshmatcap_vert,fragmentShader:Or.meshmatcap_frag},points:{uniforms:mr([Sr.points,Sr.fog]),vertexShader:Or.points_vert,fragmentShader:Or.points_frag},dashed:{uniforms:mr([Sr.common,Sr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Or.linedashed_vert,fragmentShader:Or.linedashed_frag},depth:{uniforms:mr([Sr.common,Sr.displacementmap]),vertexShader:Or.depth_vert,fragmentShader:Or.depth_frag},normal:{uniforms:mr([Sr.common,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,{opacity:{value:1}}]),vertexShader:Or.normal_vert,fragmentShader:Or.normal_frag},sprite:{uniforms:mr([Sr.sprite,Sr.fog]),vertexShader:Or.sprite_vert,fragmentShader:Or.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null}},vertexShader:Or.background_vert,fragmentShader:Or.background_frag},cube:{uniforms:mr([Sr.envmap,{opacity:{value:1}}]),vertexShader:Or.cube_vert,fragmentShader:Or.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Or.equirect_vert,fragmentShader:Or.equirect_frag},distanceRGBA:{uniforms:mr([Sr.common,Sr.displacementmap,{referencePosition:{value:new Xt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Or.distanceRGBA_vert,fragmentShader:Or.distanceRGBA_frag},shadow:{uniforms:mr([Sr.lights,Sr.fog,{color:{value:new hi(0)},opacity:{value:1}}]),vertexShader:Or.shadow_vert,fragmentShader:Or.shadow_frag}};function kr(e,t,n,i){var r,o,a=new hi(0),s=0,l=null,u=0,c=null;function h(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),h(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){h(a,s=e)},render:function(t,i,d,p){var f=i.background,m=e.xr,v=m.getSession&&m.getSession();if(v&&"additive"===v.environmentBlendMode&&(f=null),null===f?h(a,s):f&&f.isColor&&(h(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLCubeRenderTarget||f.mapping===Ke)){void 0===o&&((o=new rr(new pr(1,1,1),new gr({type:"BackgroundCubeMaterial",uniforms:fr(Ir.cube.uniforms),vertexShader:Ir.cube.vertexShader,fragmentShader:Ir.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o));var g=f.isWebGLCubeRenderTarget?f.texture:f;o.material.uniforms.envMap.value=g,o.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,(l!==f||u!==g.version||c!==e.toneMapping)&&(o.material.needsUpdate=!0,l=f,u=g.version,c=e.toneMapping),t.unshift(o,o.geometry,o.material,0,0,null)}else f&&f.isTexture&&(void 0===r&&((r=new rr(new Lr(2,2),new gr({type:"BackgroundMaterial",uniforms:fr(Ir.background.uniforms),vertexShader:Ir.background.vertexShader,fragmentShader:Ir.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),r.material.uniforms.uvTransform.value.copy(f.matrix),(l!==f||u!==f.version||c!==e.toneMapping)&&(r.material.needsUpdate=!0,l=f,u=f.version,c=e.toneMapping),t.unshift(r,r.geometry,r.material,0,0,null))}}}function Nr(e,t,n,i){var r,o=i.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(i,a,s,l){if(0!==l){var u,c;if(o)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](r,a,s,l),n.update(s,r,l)}}}function Rr(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=c>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}function Dr(){var e=this,t=null,n=0,i=!1,r=!1,o=new Jn,a=new Rt,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,i,r){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==r||null===u){var c=i+4*l,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,p=i;d!==l;++d,p+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(u,p),u[p+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var a=0!==e.length||r||0!==n||i;return i=r,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,o,a,c,h,d){if(!i||null===e||0===e.length||r&&!a)r?u(null):l();else{var p=r?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=u(e,c,f,d);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Br(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function zr(e,t,n){var i=new WeakMap,r=new WeakMap;function o(e){var a=e.target,s=i.get(a);for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),i.delete(a);var u=r.get(s);u&&(t.remove(u),r.delete(s)),n.memory.geometries--}function a(e){var n=[],i=e.index,o=e.attributes.position,a=0;if(null!==i){var s=i.array;a=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],d=s[l+2];n.push(c,h,h,d,d,c)}}else for(s=o.array,a=o.version,l=0,u=s.length/3-1;l<u;l+=3)c=l+0,h=l+1,d=l+2,n.push(c,h,h,d,d,c);var p=new(Li(n)>65535?Si:qi)(n,1);p.version=a,t.update(p,34963);var f=r.get(e);f&&t.remove(f),r.set(e,p)}return{get:function(e,t){var r=i.get(t);return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new zi).setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r)},update:function(e){var n=e.index,i=e.attributes;for(var r in null!==n&&t.update(n,34963),i)t.update(i[r],34962);var o=e.morphAttributes;for(var r in o)for(var a=o[r],s=0,l=a.length;s<l;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=r.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return r.get(e)}}}function Fr(e,t,n,i){var r,o,a,s=i.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,o,t*a),n.update(i,r)},this.renderInstances=function(i,l,u,c){if(0!==c){var h,d;if(s)h=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(h=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[d](r,u,o,l*a,c),n.update(u,r,c)}}}function Ur(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(i=i||1,t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function jr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Hr(e){var t={},n=new Float32Array(8);return{update:function(i,r,o,a){var s=i.morphTargetInfluences,l=void 0===s?0:s.length,u=t[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[r.id]=u}var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++)0!==(f=u[c])[1]&&(h&&r.deleteAttribute("morphTarget"+c),d&&r.deleteAttribute("morphNormal"+c));for(c=0;c<l;c++)(f=u[c])[0]=c,f[1]=s[c];u.sort(jr);var p=0;for(c=0;c<8;c++){var f;if(f=u[c]){var m=f[0],v=f[1];if(v){h&&r.setAttribute("morphTarget"+c,h[m]),d&&r.setAttribute("morphNormal"+c,d[m]),n[c]=v,p+=v;continue}}n[c]=0}var g=r.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",g),a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Vr(e,t,n,i){var r=new WeakMap;return{update:function(e){var o=i.render.frame,a=e.geometry,s=t.get(e,a);return r.get(s)!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),r.set(s,o)),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){r=new WeakMap}}}function Gr(e,t,n,i,r,o,a,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:301,a=void 0!==a?a:pt,Ft.call(this,e,t,n,i,r,o,a,s,l,u),this.flipY=!1}function Wr(e,t,n,i){Ft.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=nt,this.minFilter=nt,this.wrapR=et,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Xr(e,t,n,i){Ft.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=nt,this.minFilter=nt,this.wrapR=et,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ir.physical={uniforms:mr([Ir.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Nt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new hi(0)},transparency:{value:0}}]),vertexShader:Or.meshphysical_vert,fragmentShader:Or.meshphysical_frag},Gr.prototype=Object.create(Ft.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isCubeTexture=!0,Object.defineProperty(Gr.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Wr.prototype=Object.create(Ft.prototype),Wr.prototype.constructor=Wr,Wr.prototype.isDataTexture2DArray=!0,Xr.prototype=Object.create(Ft.prototype),Xr.prototype.constructor=Xr,Xr.prototype.isDataTexture3D=!0;var Yr=new Ft,Zr=new Wr,Jr=new Xr,Qr=new Gr,Kr=[],$r=[],eo=new Float32Array(16),to=new Float32Array(9),no=new Float32Array(4);function io(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,o=Kr[r];if(void 0===o&&(o=new Float32Array(r),Kr[r]=o),0!==t){i.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function ro(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function oo(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function ao(e,t){var n=$r[t];void 0===n&&(n=new Int32Array(t),$r[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function so(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function lo(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ro(n,t))return;e.uniform2fv(this.addr,t),oo(n,t)}}function uo(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ro(n,t))return;e.uniform3fv(this.addr,t),oo(n,t)}}function co(e,t){var n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ro(n,t))return;e.uniform4fv(this.addr,t),oo(n,t)}}function ho(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(ro(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),oo(n,t)}else{if(ro(n,i))return;no.set(i),e.uniformMatrix2fv(this.addr,!1,no),oo(n,i)}}function po(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(ro(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),oo(n,t)}else{if(ro(n,i))return;to.set(i),e.uniformMatrix3fv(this.addr,!1,to),oo(n,i)}}function fo(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(ro(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),oo(n,t)}else{if(ro(n,i))return;eo.set(i),e.uniformMatrix4fv(this.addr,!1,eo),oo(n,i)}}function mo(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Yr,r)}function vo(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Zr,r)}function go(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Jr,r)}function yo(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Qr,r)}function xo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function bo(e,t){var n=this.cache;ro(n,t)||(e.uniform2iv(this.addr,t),oo(n,t))}function _o(e,t){var n=this.cache;ro(n,t)||(e.uniform3iv(this.addr,t),oo(n,t))}function wo(e,t){var n=this.cache;ro(n,t)||(e.uniform4iv(this.addr,t),oo(n,t))}function Mo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Eo(e,t){e.uniform1fv(this.addr,t)}function qo(e,t){e.uniform1iv(this.addr,t)}function To(e,t){e.uniform2iv(this.addr,t)}function So(e,t){e.uniform3iv(this.addr,t)}function Po(e,t){e.uniform4iv(this.addr,t)}function Ao(e,t){var n=io(t,this.size,2);e.uniform2fv(this.addr,n)}function Co(e,t){var n=io(t,this.size,3);e.uniform3fv(this.addr,n)}function Lo(e,t){var n=io(t,this.size,4);e.uniform4fv(this.addr,n)}function Oo(e,t){var n=io(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Io(e,t){var n=io(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ko(e,t){var n=io(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function No(e,t,n){var i=t.length,r=ao(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTexture2D(t[o]||Yr,r[o])}function Ro(e,t,n){var i=t.length,r=ao(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTextureCube(t[o]||Qr,r[o])}function Do(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return so;case 35664:return lo;case 35665:return uo;case 35666:return co;case 35674:return ho;case 35675:return po;case 35676:return fo;case 5124:case 35670:return xo;case 35667:case 35671:return bo;case 35668:case 35672:return _o;case 35669:case 35673:return wo;case 5125:return Mo;case 35678:case 36198:case 36298:case 36306:case 35682:return mo;case 35679:case 36299:case 36307:return go;case 35680:case 36300:case 36308:case 36293:return yo;case 36289:case 36303:case 36311:case 36292:return vo}}(t.type)}function Bo(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Eo;case 35664:return Ao;case 35665:return Co;case 35666:return Lo;case 35674:return Oo;case 35675:return Io;case 35676:return ko;case 5124:case 35670:return qo;case 35667:case 35671:return To;case 35668:case 35672:return So;case 35669:case 35673:return Po;case 35678:case 36198:case 36298:case 36306:case 35682:return No;case 35680:case 36300:case 36308:case 36293:return Ro}}(t.type)}function zo(e){this.id=e,this.seq=[],this.map={}}Bo.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),oo(t,e)},zo.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var a=i[r];a.setValue(e,t[a.id],n)}};var Fo=/([\w\d_]+)(\])?(\[|\.)?/g;function Uo(e,t){e.seq.push(t),e.map[t.id]=t}function jo(e,t,n){var i=e.name,r=i.length;for(Fo.lastIndex=0;;){var o=Fo.exec(i),a=Fo.lastIndex,s=o[1],l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===r){Uo(n,void 0===u?new Do(s,e,t):new Bo(s,e,t));break}var c=n.map[s];void 0===c&&Uo(n,c=new zo(s)),n=c}}function Ho(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);jo(r,e.getUniformLocation(t,r.name),this)}}function Vo(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Ho.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Ho.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Ho.upload=function(e,t,n,i){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},Ho.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var o=e[i];o.id in t&&n.push(o)}return n};var Go=0;function Wo(e){switch(e){case Et:return["Linear","( value )"];case qt:return["sRGB","( value )"];case St:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case Tt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function Xo(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Yo(e,t){var n=Wo(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Zo(e,t){var n=Wo(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Jo(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Qo(e){return""!==e}function Ko(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function $o(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var ea=/^[ \t]*#include +<([\w\d./]+)>/gm;function ta(e){return e.replace(ea,na)}function na(e,t){var n=Or[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ta(n)}var ia=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ra=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function oa(e){return e.replace(ra,sa).replace(ia,aa)}function aa(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),sa(e,t,n,i)}function sa(e,t,n,i){for(var r="",o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function la(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ua(e,t,n){var i,r,o=e.getContext(),a=n.defines,s=n.vertexShader,l=n.fragmentShader,u=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case Ke:case 307:t="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:t="ENVMAP_TYPE_EQUIREC";break;case 305:t="ENVMAP_TYPE_SPHERE"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 304:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qo).join("\n")}(n),m=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),v=o.createProgram();if(n.isRawShaderMaterial?((i=[m].filter(Qo).join("\n")).length>0&&(i+="\n"),(r=[f,m].filter(Qo).join("\n")).length>0&&(r+="\n")):(i=[la(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qo).join("\n"),r=[f,la(n),"#define SHADER_NAME "+n.shaderName,m,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Or.tonemapping_pars_fragment:"",0!==n.toneMapping?Jo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?Or.encodings_pars_fragment:"",n.mapEncoding?Yo("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?Yo("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?Yo("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Yo("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?Yo("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?Zo("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Qo).join("\n")),s=$o(s=Ko(s=ta(s),n),n),l=$o(l=Ko(l=ta(l),n),n),s=oa(s),l=oa(l),n.isWebGL2&&!n.isRawShaderMaterial){var g=!1,y=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==s.match(y)&&null!==l.match(y)&&(g=!0,s=s.replace(y,""),l=l.replace(y,"")),i=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,r=["#version 300 es\n","#define varying in",g?"":"out highp vec4 pc_fragColor;",g?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+r}var x,b,_=r+l,w=Vo(o,35633,i+s),M=Vo(o,35632,_);if(o.attachShader(v,w),o.attachShader(v,M),void 0!==n.index0AttributeName?o.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),e.debug.checkShaderErrors){var E=o.getProgramInfoLog(v).trim(),q=o.getShaderInfoLog(w).trim(),T=o.getShaderInfoLog(M).trim(),S=!0,P=!0;if(!1===o.getProgramParameter(v,35714)){S=!1;var A=Xo(o,w,"vertex"),C=Xo(o,M,"fragment");console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(v,35715),"gl.getProgramInfoLog",E,A,C)}else""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):(""===q||""===T)&&(P=!1);P&&(this.diagnostics={runnable:S,programLog:E,vertexShader:{log:q,prefix:i},fragmentShader:{log:T,prefix:r}})}return o.deleteShader(w),o.deleteShader(M),this.getUniforms=function(){return void 0===x&&(x=new Ho(o,v)),x},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var o=e.getActiveAttrib(t,r).name;n[o]=e.getAttribLocation(t,o)}return n}(o,v)),b},this.destroy=function(){o.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Go++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=w,this.fragmentShader=M,this}function ca(e,t,n){var i=[],r=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,l=n.maxVertexUniforms,u=n.vertexTextures,c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function d(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Et,t}this.getParameters=function(i,h,p,f,m,v,g){var y=f.fog,x=i.isMeshStandardMaterial?f.environment:null,b=i.envMap||x,_=c[i.type],w=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(a)return 1024;var n=l,i=Math.floor((n-20)/4),r=Math.min(i,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}(g):0;null!==i.precision&&(s=n.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",s,"instead.");var M=function(e,t){var n;if(t){var i=Ir[t];n={name:e.type,uniforms:vr.clone(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}}else n={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};return n}(i,_);i.onBeforeCompile(M,e);var E=e.getRenderTarget();return{isWebGL2:r,shaderID:_,shaderName:M.name,uniforms:M.uniforms,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,defines:i.defines,isRawShaderMaterial:i.isRawShaderMaterial,isShaderMaterial:i.isShaderMaterial,precision:s,instancing:!0===g.isInstancedMesh,supportsVertexTextures:u,outputEncoding:null!==E?d(E.texture):e.outputEncoding,map:!!i.map,mapEncoding:d(i.map),matcap:!!i.matcap,matcapEncoding:d(i.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:d(b),envMapCubeUV:!!b&&(b.mapping===Ke||307===b.mapping),lightMap:!!i.lightMap,lightMapEncoding:d(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:d(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||!i.displacementMap),fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:o,skinning:i.skinning&&w>0,maxBones:w,useVertexTexture:a,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:v,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:r||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:r||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:r||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:i.onBeforeCompile}},this.getProgramCacheKey=function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);if(void 0===t.isRawShaderMaterial){for(var r=0;r<h.length;r++)n.push(t[h[r]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(t,n){for(var r,o=0,a=i.length;o<a;o++){var s=i[o];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new ua(e,n,t),i.push(r)),r},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function ha(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function da(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function pa(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function fa(){var e=[],t=0,n=[],i=[],r={id:-1};function o(n,i,o,a,s,l){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:i,material:o,program:o.program||r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=o,u.program=o.program||r,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=s,u.group=l),t++,u}return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(e,t,r,a,s,l){var u=o(e,t,r,a,s,l);(!0===r.transparent?i:n).push(u)},unshift:function(e,t,r,a,s,l){var u=o(e,t,r,a,s,l);(!0===r.transparent?i:n).unshift(u)},finish:function(){for(var n=t,i=e.length;n<i;n++){var r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}},sort:function(e,t){n.length>1&&n.sort(e||da),i.length>1&&i.sort(t||pa)}}}function ma(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r,o=e.get(n);return void 0===o?(r=new fa,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):void 0===(r=o.get(i))&&(r=new fa,o.set(i,r)),r},dispose:function(){e=new WeakMap}}}function va(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Xt,color:new hi};break;case"SpotLight":n={position:new Xt,direction:new Xt,color:new hi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Xt,color:new hi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Xt,skyColor:new hi,groundColor:new hi};break;case"RectAreaLight":n={color:new hi,position:new Xt,halfWidth:new Xt,halfHeight:new Xt}}return e[t.id]=n,n}}}var ga=0;function ya(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function xa(){for(var e=new va,t=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"PointLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new Nt,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)n.probe.push(new Xt);var r=new Xt,o=new tn,a=new tn;return{setup:function(i,s,l){for(var u=0,c=0,h=0,d=0;d<9;d++)n.probe[d].set(0,0,0);var p=0,f=0,m=0,v=0,g=0,y=0,x=0,b=0,_=l.matrixWorldInverse;i.sort(ya),d=0;for(var w=i.length;d<w;d++){var M=i[d],E=M.color,q=M.intensity,T=M.distance,S=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)u+=E.r*q,c+=E.g*q,h+=E.b*q;else if(M.isLightProbe)for(var P=0;P<9;P++)n.probe[P].addScaledVector(M.sh.coefficients[P],q);else if(M.isDirectionalLight){if((L=e.get(M)).color.copy(M.color).multiplyScalar(M.intensity),L.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(_),M.castShadow){var A=M.shadow;(C=t.get(M)).shadowBias=A.bias,C.shadowRadius=A.radius,C.shadowMapSize=A.mapSize,n.directionalShadow[p]=C,n.directionalShadowMap[p]=S,n.directionalShadowMatrix[p]=M.shadow.matrix,y++}n.directional[p]=L,p++}else if(M.isSpotLight)(L=e.get(M)).position.setFromMatrixPosition(M.matrixWorld),L.position.applyMatrix4(_),L.color.copy(E).multiplyScalar(q),L.distance=T,L.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(_),L.coneCos=Math.cos(M.angle),L.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),L.decay=M.decay,M.castShadow&&(A=M.shadow,(C=t.get(M)).shadowBias=A.bias,C.shadowRadius=A.radius,C.shadowMapSize=A.mapSize,n.spotShadow[m]=C,n.spotShadowMap[m]=S,n.spotShadowMatrix[m]=M.shadow.matrix,b++),n.spot[m]=L,m++;else if(M.isRectAreaLight)(L=e.get(M)).color.copy(E).multiplyScalar(q),L.position.setFromMatrixPosition(M.matrixWorld),L.position.applyMatrix4(_),a.identity(),o.copy(M.matrixWorld),o.premultiply(_),a.extractRotation(o),L.halfWidth.set(.5*M.width,0,0),L.halfHeight.set(0,.5*M.height,0),L.halfWidth.applyMatrix4(a),L.halfHeight.applyMatrix4(a),n.rectArea[v]=L,v++;else if(M.isPointLight){var C;if((L=e.get(M)).position.setFromMatrixPosition(M.matrixWorld),L.position.applyMatrix4(_),L.color.copy(M.color).multiplyScalar(M.intensity),L.distance=M.distance,L.decay=M.decay,M.castShadow)A=M.shadow,(C=t.get(M)).shadowBias=A.bias,C.shadowRadius=A.radius,C.shadowMapSize=A.mapSize,C.shadowCameraNear=A.camera.near,C.shadowCameraFar=A.camera.far,n.pointShadow[f]=C,n.pointShadowMap[f]=S,n.pointShadowMatrix[f]=M.shadow.matrix,x++;n.point[f]=L,f++}else if(M.isHemisphereLight){var L;(L=e.get(M)).direction.setFromMatrixPosition(M.matrixWorld),L.direction.transformDirection(_),L.direction.normalize(),L.skyColor.copy(M.color).multiplyScalar(q),L.groundColor.copy(M.groundColor).multiplyScalar(q),n.hemi[g]=L,g++}}n.ambient[0]=u,n.ambient[1]=c,n.ambient[2]=h;var O=n.hash;(O.directionalLength!==p||O.pointLength!==f||O.spotLength!==m||O.rectAreaLength!==v||O.hemiLength!==g||O.numDirectionalShadows!==y||O.numPointShadows!==x||O.numSpotShadows!==b)&&(n.directional.length=p,n.spot.length=m,n.rectArea.length=v,n.point.length=f,n.hemi.length=g,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=x,n.pointShadowMap.length=x,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=x,n.spotShadowMatrix.length=b,O.directionalLength=p,O.pointLength=f,O.spotLength=m,O.rectAreaLength=v,O.hemiLength=g,O.numDirectionalShadows=y,O.numPointShadows=x,O.numSpotShadows=b,n.version=ga++)},state:n}}function ba(){var e=new xa,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function _a(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r;return!1===e.has(n)?(r=new ba,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):!1===e.get(n).has(i)?(r=new ba,e.get(n).set(i,r)):r=e.get(n).get(i),r},dispose:function(){e=new WeakMap}}}function wa(e){gi.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function Ma(e){gi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Xt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}wa.prototype=Object.create(gi.prototype),wa.prototype.constructor=wa,wa.prototype.isMeshDepthMaterial=!0,wa.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Ma.prototype=Object.create(gi.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isMeshDistanceMaterial=!0,Ma.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Ea(e,t,n){var i=new Tr,r=new Nt,o=new Nt,a=new Ut,s=[],l=[],u={},c={0:1,1:0,2:2},h=new gr({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Nt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONAL_PASS=1;var p=new zi;p.setAttribute("position",new bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new rr(p,h),m=this;function v(n,i){var r=t.update(f);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,d,f,null)}function g(e,t,n){var i=e<<0|t<<1|n<<2,r=s[i];return void 0===r&&(r=new wa({depthPacking:3201,morphTargets:e,skinning:t}),s[i]=r),r}function y(e,t,n){var i=e<<0|t<<1|n<<2,r=l[i];return void 0===r&&(r=new Ma({morphTargets:e,skinning:t}),l[i]=r),r}function x(t,n,i,r,o,a,s){var l=null,h=g,d=t.customDepthMaterial;if(!0===r.isPointLight&&(h=y,d=t.customDistanceMaterial),void 0===d){var p=!1;!0===i.morphTargets&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var f=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=h(p,f,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var m=l.uuid,v=i.uuid,x=u[m];void 0===x&&(x={},u[m]=x);var b=x[v];void 0===b&&(b=l.clone(),x[v]=b),l=b}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=3===s?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:c[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function b(n,r,o,a,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,d=c.length;h<d;h++){var p=c[h],f=u[p.materialIndex];if(f&&f.visible){var m=x(n,l,f,a,o.near,o.far,s);e.renderBufferDirect(o,null,l,m,n,p)}}else u.visible&&(m=x(n,l,u,a,o.near,o.far,s),e.renderBufferDirect(o,null,l,m,n,null))}for(var v=n.children,g=0,y=v.length;g<y;g++)b(v[g],r,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,s,l){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var g=t[p],y=g.shadow;if(void 0!==y){r.copy(y.mapSize);var x=y.getFrameExtents();if(r.multiply(x),o.copy(y.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/x.x),r.x=o.x*x.x,y.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/x.y),r.y=o.y*x.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var _={minFilter:ot,magFilter:ot,format:ft};y.map=new jt(r.x,r.y,_),y.map.texture.name=g.name+".shadowMap",y.mapPass=new jt(r.x,r.y,_),y.camera.updateProjectionMatrix()}null===y.map&&(_={minFilter:nt,magFilter:nt,format:ft},y.map=new jt(r.x,r.y,_),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()),e.setRenderTarget(y.map),e.clear();for(var w=y.getViewportCount(),M=0;M<w;M++){var E=y.getViewport(M);a.set(o.x*E.x,o.y*E.y,o.x*E.z,o.y*E.w),d.viewport(a),y.updateMatrices(g,M),i=y.getFrustum(),b(s,l,y.camera,g,this.type)}!y.isPointLightShadow&&3===this.type&&v(y,l)}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,c,h)}}}function qa(e,t,n){var i,r,o=n.isWebGL2,a=new function(){var t=!1,n=new Ut,i=null,r=new Ut(0,0,0,0);return{setMask:function(n){i!==n&&!t&&(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?U(2929):j(2929)},setMask:function(i){n!==i&&!t&&(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},l=new function(){var t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?U(2960):j(2960))},setMask:function(i){n!==i&&!t&&(e.stencilMask(i),n=i)},setFunc:function(t,n,a){(i!==t||r!==n||o!==a)&&(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){(a!==t||s!==n||l!==i)&&(e.stencilOp(t,n,i),a=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,u=null}}},u=e.getParameter(34921),c=new Uint8Array(u),h=new Uint8Array(u),d=new Uint8Array(u),p={},f=null,v=null,g=null,y=null,x=null,b=null,_=null,w=null,M=null,E=!1,q=null,T=null,S=null,P=null,A=null,C=e.getParameter(35661),L=!1,O=0,I=e.getParameter(7938);-1!==I.indexOf("WebGL")?(O=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),L=O>=1):-1!==I.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),L=O>=2);var k=null,N={},R=new Ut,D=new Ut;function B(t,n,i){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<i;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return o}var z={};function F(n,i){c[n]=1,0===h[n]&&(e.enableVertexAttribArray(n),h[n]=1),d[n]!==i&&((o?e:t.get("ANGLE_instanced_arrays"))[o?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),d[n]=i)}function U(t){!0!==p[t]&&(e.enable(t),p[t]=!0)}function j(t){!1!==p[t]&&(e.disable(t),p[t]=!1)}z[3553]=B(3553,3553,1),z[34067]=B(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),U(2929),s.setFunc(3),X(!1),Y(1),U(2884),W(0);var H=(i={},(0,m.Z)(i,Je,32774),(0,m.Z)(i,101,32778),(0,m.Z)(i,102,32779),i);if(o)H[103]=32775,H[104]=32776;else{var V=t.get("EXT_blend_minmax");null!==V&&(H[103]=V.MIN_EXT,H[104]=V.MAX_EXT)}var G=(r={},(0,m.Z)(r,200,0),(0,m.Z)(r,201,1),(0,m.Z)(r,202,768),(0,m.Z)(r,204,770),(0,m.Z)(r,210,776),(0,m.Z)(r,208,774),(0,m.Z)(r,206,772),(0,m.Z)(r,203,769),(0,m.Z)(r,205,771),(0,m.Z)(r,209,775),(0,m.Z)(r,207,773),r);function W(t,n,i,r,o,a,s,l){if(0!==t){if(v||(U(3042),v=!0),5===t)o=o||n,a=a||i,s=s||r,(n!==y||o!==_)&&(e.blendEquationSeparate(H[n],H[o]),y=n,_=o),(i!==x||r!==b||a!==w||s!==M)&&(e.blendFuncSeparate(G[i],G[r],G[a],G[s]),x=i,b=r,w=a,M=s),g=t,E=null;else if(t!==g||l!==E){if((y!==Je||_!==Je)&&(e.blendEquation(32774),y=Je,_=Je),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}x=null,b=null,w=null,M=null,g=t,E=l}}else v&&(j(3042),v=!1)}function X(t){q!==t&&(t?e.frontFace(2304):e.frontFace(2305),q=t)}function Y(t){0!==t?(U(2884),t!==T&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):j(2884),T=t}function Z(t,n,i){t?(U(32823),(P!==n||A!==i)&&(e.polygonOffset(n,i),P=n,A=i)):j(32823)}function J(t){void 0===t&&(t=33984+C-1),k!==t&&(e.activeTexture(t),k=t)}return{buffers:{color:a,depth:s,stencil:l},initAttributes:function(){for(var e=0,t=c.length;e<t;e++)c[e]=0},enableAttribute:function(e){F(e,0)},enableAttributeAndDivisor:F,disableUnusedAttributes:function(){for(var t=0,n=h.length;t!==n;++t)h[t]!==c[t]&&(e.disableVertexAttribArray(t),h[t]=0)},vertexAttribPointer:function(t,n,i,r,a,s){!0!==o||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,r,a,s):e.vertexAttribIPointer(t,n,i,r,a,s)},enable:U,disable:j,useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:W,setMaterial:function(e,t){2===e.side?j(2884):U(2884);var n=1===e.side;t&&(n=!n),X(n),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),a.setMask(e.colorWrite);var i=e.stencilWrite;l.setTest(i),i&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Z(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:X,setCullFace:Y,setLineWidth:function(t){t!==S&&(L&&e.lineWidth(t),S=t)},setPolygonOffset:Z,setScissorTest:function(e){e?U(3089):j(3089)},activeTexture:J,bindTexture:function(t,n){null===k&&J();var i=N[k];void 0===i&&(i={type:void 0,texture:void 0},N[k]=i),(i.type!==t||i.texture!==n)&&(e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=N[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===R.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),R.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){for(var t=0;t<h.length;t++)1===h[t]&&(e.disableVertexAttribArray(t),h[t]=0);p={},k=null,N={},f=null,g=null,q=null,T=null,a.reset(),s.reset(),l.reset()}}}function Ta(e,t,n,i,r,o,a){var s,l,u,c=r.isWebGL2,h=r.maxTextures,d=r.maxCubemapSize,p=r.maxTextureSize,f=r.maxSamples,v=new WeakMap,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return g?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function x(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?kt.floorPowerOfTwo:Math.floor,a=o(r*e.width),s=o(r*e.height);void 0===u&&(u=y(a,s));var l=n?y(a,s):u;return l.width=a,l.height=s,l.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return kt.isPowerOfTwo(e.width)&&kt.isPowerOfTwo(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==nt&&e.minFilter!==ot}function w(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function M(n,i,r){if(!1===c)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),(33325===o||33326===o||34842===o||34836===o)&&t.get("EXT_color_buffer_float"),o}function E(e){return e===nt||e===it||e===rt?9728:9729}function q(t){var n=t.target;n.removeEventListener("dispose",q),function(t){var n=i.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),i.remove(t))}(n),n.isVideoTexture&&v.delete(n),a.memory.textures--}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}}(n),a.memory.textures--}var S=0;function P(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void N(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function A(t,r){if(6===t.image.length){var a=i.get(t);if(t.version>0&&a.__version!==t.version){k(a,t),n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),l=t.image[0]&&t.image[0].isDataTexture,u=[],h=0;h<6;h++)u[h]=s||l?l?t.image[h].image:t.image[h]:x(t.image[h],!1,!0,d);var p,f=u[0],m=b(f)||c,v=o.convert(t.format),g=o.convert(t.type),y=M(t.internalFormat,v,g);if(I(34067,t,m),s){for(h=0;h<6;h++){p=u[h].mipmaps;for(var E=0;E<p.length;E++){var q=p[E];t.format!==ft&&t.format!==pt?null!==v?n.compressedTexImage2D(34069+h,E,y,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+h,E,y,q.width,q.height,0,v,g,q.data)}}a.__maxMipLevel=p.length-1}else{for(p=t.mipmaps,h=0;h<6;h++)if(l)for(n.texImage2D(34069+h,0,y,u[h].width,u[h].height,0,v,g,u[h].data),E=0;E<p.length;E++){var T=(q=p[E]).image[h].image;n.texImage2D(34069+h,E+1,y,T.width,T.height,0,v,g,T.data)}else for(n.texImage2D(34069+h,0,y,v,g,u[h]),E=0;E<p.length;E++)q=p[E],n.texImage2D(34069+h,E+1,y,v,g,q.image[h]);a.__maxMipLevel=p.length}_(t,m)&&w(34067,t,f.width,f.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture)}}function C(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}var L=(s={},(0,m.Z)(s,$e,10497),(0,m.Z)(s,et,33071),(0,m.Z)(s,tt,33648),s),O=(l={},(0,m.Z)(l,nt,9728),(0,m.Z)(l,it,9984),(0,m.Z)(l,rt,9986),(0,m.Z)(l,ot,9729),(0,m.Z)(l,1007,9985),(0,m.Z)(l,at,9987),l);function I(n,o,a){a?(e.texParameteri(n,10242,L[o.wrapS]),e.texParameteri(n,10243,L[o.wrapT]),(32879===n||35866===n)&&e.texParameteri(n,32882,L[o.wrapR]),e.texParameteri(n,10240,O[o.magFilter]),e.texParameteri(n,10241,O[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),(32879===n||35866===n)&&e.texParameteri(n,32882,33071),(o.wrapS!==et||o.wrapT!==et)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(o.magFilter)),e.texParameteri(n,10241,E(o.minFilter)),o.minFilter!==nt&&o.minFilter!==ot&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(o.type===ct&&null===t.get("OES_texture_float_linear")||o.type===ht&&null===(c||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function k(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",q),t.__webglTexture=e.createTexture(),a.memory.textures++)}function N(t,i,r){var a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),k(t,i),n.activeTexture(33984+r),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var s=function(e){return!c&&(e.wrapS!==et||e.wrapT!==et||e.minFilter!==nt&&e.minFilter!==ot)}(i)&&!1===b(i.image),l=x(i.image,s,!1,p),u=b(l)||c,h=o.convert(i.format),d=o.convert(i.type),f=M(i.internalFormat,h,d);I(a,i,u);var m,v=i.mipmaps;if(i.isDepthTexture)f=6402,c?f=i.type===ct?36012:i.type===ut?33190:i.type===dt?35056:33189:i.type===ct&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===mt&&6402===f&&i.type!==lt&&i.type!==ut&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=lt,d=o.convert(i.type)),i.format===vt&&6402===f&&(f=34041,i.type!==dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=dt,d=o.convert(i.type))),n.texImage2D(3553,0,f,l.width,l.height,0,h,d,null);else if(i.isDataTexture)if(v.length>0&&u){for(var g=0,y=v.length;g<y;g++)m=v[g],n.texImage2D(3553,g,f,m.width,m.height,0,h,d,m.data);i.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,f,l.width,l.height,0,h,d,l.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(g=0,y=v.length;g<y;g++)m=v[g],i.format!==ft&&i.format!==pt?null!==h?n.compressedTexImage2D(3553,g,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,g,f,m.width,m.height,0,h,d,m.data);t.__maxMipLevel=v.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,f,l.width,l.height,l.depth,0,h,d,l.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,f,l.width,l.height,l.depth,0,h,d,l.data),t.__maxMipLevel=0;else if(v.length>0&&u){for(g=0,y=v.length;g<y;g++)m=v[g],n.texImage2D(3553,g,f,h,d,m);i.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,f,h,d,l),t.__maxMipLevel=0;_(i,u)&&w(a,i,l.width,l.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function R(t,r,a,s){var l=o.convert(r.texture.format),u=o.convert(r.texture.type),c=M(r.texture.internalFormat,l,u);n.texImage2D(s,0,c,r.width,r.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function D(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===ct?r=36012:a.type===ut&&(r=33190));var s=B(n);e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer)i?(s=B(n),e.renderbufferStorageMultisample(36161,s,35056,n.width,n.height)):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t);else{var l=o.convert(n.texture.format),u=o.convert(n.texture.type);r=M(n.texture.internalFormat,l,u),i?(s=B(n),e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)):e.renderbufferStorage(36161,r,n.width,n.height)}e.bindRenderbuffer(36161,null)}function B(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(f,e.samples):0}var z=!1,F=!1;this.allocateTextureUnit=function(){var e=S;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?N(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?N(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=A,this.setTextureCubeDynamic=C,this.setupRenderTarget=function(t){var r=i.get(t),s=i.get(t.texture);t.addEventListener("dispose",T),s.__webglTexture=e.createTexture(),a.memory.textures++;var l=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,h=b(t)||c;if(c&&t.texture.format===pt&&(t.texture.type===ct||t.texture.type===ht)&&(t.texture.format=ft,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){r.__webglFramebuffer=[];for(var d=0;d<6;d++)r.__webglFramebuffer[d]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),u)if(c){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var p=o.convert(t.texture.format),f=o.convert(t.texture.type),m=M(t.texture.internalFormat,p,f),v=B(t);e.renderbufferStorageMultisample(36161,v,m,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),D(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){for(n.bindTexture(34067,s.__webglTexture),I(34067,t.texture,h),d=0;d<6;d++)R(r.__webglFramebuffer[d],t,36064,34069+d);_(t.texture,h)&&w(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),I(3553,t.texture,h),R(r.__webglFramebuffer,t,36064,3553),_(t.texture,h)&&w(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&function(t){var n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(n.depthTexture).__webglTexture||n.depthTexture.image.width!==n.width||n.depthTexture.image.height!==n.height)&&(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),P(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===mt)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==vt)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),D(n.__webglDepthbuffer[o],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),D(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(_(t,b(e)||c)){var r=e.isWebGLCubeRenderTarget?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(r,o),w(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var r=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),P(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?A(e,t):C(e,t)}}function Sa(e,t,n){var i=n.isWebGL2;return{convert:function(e){var n;if(e===st)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===lt)return 5123;if(1013===e)return 5124;if(e===ut)return 5125;if(e===ct)return 5126;if(e===ht)return i?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(e===pt)return 6407;if(e===ft)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===mt)return 6402;if(e===vt)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===dt?i?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Pa(e){xr.call(this),this.cameras=e||[]}function Aa(){bn.call(this),this.type="Group"}function Ca(){this._targetRay=null,this._grip=null}function La(e,t){var n=this,i=null,r=1,o=null,a="local-floor",s=null,l=[],u=new Map,c=new xr;c.layers.enable(1),c.viewport=new Ut;var h=new xr;h.layers.enable(2),h.viewport=new Ut;var d=[c,h],p=new Pa;p.layers.enable(1),p.layers.enable(2);var f=null,m=null;function v(e){var t=u.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function g(){u.forEach((function(e,t){e.disconnect(t)})),u.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),E.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){o=e,E.setContext(i),E.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function x(e){for(var t=i.inputSources,n=0;n<l.length;n++)u.set(t[n],l[n]);for(n=0;n<e.removed.length;n++){var r=e.removed[n];(o=u.get(r))&&(o.dispatchEvent({type:"disconnected",data:r}),u.delete(r))}for(n=0;n<e.added.length;n++){var o;r=e.added[n],(o=u.get(r))&&o.dispatchEvent({type:"connected",data:r})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=l[e];return void 0===t&&(t=new Ca,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){var t=l[e];return void 0===t&&(t=new Ca,l[e]=t),t.getGripSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=function(e){if(null!==(i=e)){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",g);var n=t.getContextAttributes();!0!==n.xrCompatible&&t.makeXRCompatible();var o={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:r},s=new XRWebGLLayer(i,t,o);i.updateRenderState({baseLayer:s}),i.requestReferenceSpace(a).then(y),i.addEventListener("inputsourceschange",x)}};var b=new Xt,_=new Xt;function w(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){p.near=h.near=c.near=e.near,p.far=h.far=c.far=e.far,(f!==p.near||m!==p.far)&&(i.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);var t=e.parent,n=p.cameras;w(p,t);for(var r=0;r<n.length;r++)w(n[r],t);e.matrixWorld.copy(p.matrixWorld);for(var o=e.children,a=(r=0,o.length);r<a;r++)o[r].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){b.setFromMatrixPosition(t.matrixWorld),_.setFromMatrixPosition(n.matrixWorld);var i=b.distanceTo(_),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*c,p=a*h,f=i/(-c+h),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=a+f,g=s+f,y=d-m,x=p+(i-m),w=l*s/g*v,M=u*s/g*v;e.projectionMatrix.makePerspective(y,x,w,M,v,g)}(p,c,h):p.projectionMatrix.copy(c.projectionMatrix),p};var M=null,E=new Pr;E.setAnimationLoop((function(t,n){if(null!==(s=n.getViewerPose(o))){var r=s.views,a=i.renderState.baseLayer;e.setFramebuffer(a.framebuffer);var u=!1;r.length!==p.cameras.length&&(p.cameras.length=0,u=!0);for(var c=0;c<r.length;c++){var h=r[c],f=a.getViewport(h),m=d[c];m.matrix.fromArray(h.transform.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(f.x,f.y,f.width,f.height),0===c&&p.matrix.copy(m.matrix),!0===u&&p.cameras.push(m)}}var v=i.inputSources;for(c=0;c<l.length;c++){var g=l[c],y=v[c];g.update(y,n,o)}M&&M(t,n)})),this.setAnimationLoop=function(e){M=e},this.dispose=function(){}}function Oa(e){function t(t,n,i){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);var r,o,a=n.envMap||i;a&&(t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio,t.maxMipLevel.value=e.get(a).__maxMipLevel),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap&&(r=n.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,o,a){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i,r),i.isMeshPhysicalMaterial?function(e,t,i){n(e,t,i),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()),e.transparency.value=t.transparency}(e,i,r):n(e,i,r)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){var r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,o,a):i.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Ia(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Et,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,v,g,y,x,b,_,w,M,E,q,T,S,P,A,C,L,O=this,I=!1,k=null,N=0,R=0,D=null,B=null,z=-1,F={geometry:null,program:null,wireframe:!1},U=null,j=null,H=new Ut,V=new Ut,G=null,W=t.width,X=t.height,Y=1,Z=null,J=null,Q=new Ut(0,0,W,X),K=new Ut(0,0,W,X),$=!1,ee=new Tr,te=new Dr,ne=!1,ie=!1,re=new tn,oe=new Xt;function ae(){return null===D?Y:1}try{var se={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",de,!1),null===(p=n||t.getContext("webgl",se)||t.getContext("experimental-webgl",se)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function le(){f=new Br(p),!1===(m=new Rr(p,f,e)).isWebGL2&&(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),L=new Sa(p,f,m),(v=new qa(p,f,m)).scissor(V.copy(K).multiplyScalar(Y).floor()),v.viewport(H.copy(Q).multiplyScalar(Y).floor()),g=new Ur(p),y=new ha,x=new Ta(p,f,v,y,m,L,g),b=new Ar(p,m),_=new zr(p,b,g),w=new Vr(p,_,b,g),P=new Hr(p),M=new ca(O,f,m),E=new Oa(y),q=new ma,T=new _a,S=new kr(O,v,w,s),A=new Nr(p,f,g,m),C=new Fr(p,f,g,m),g.programs=M.programs,O.capabilities=m,O.extensions=f,O.properties=y,O.renderLists=q,O.state=v,O.info=g}le();var ue=new La(O,p);this.xr=ue;var ce=new Ea(O,w,m.maxTextureSize);function he(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1,le()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){fe(e),y.remove(e)}(t)}function fe(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&M.releaseProgram(t)}this.shadowMap=ce,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(W,X,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Nt),e.set(W,X)},this.setSize=function(e,n,i){ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,X=n,t.width=Math.floor(e*Y),t.height=Math.floor(n*Y),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Nt),e.set(W*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,n,i){W=e,X=n,Y=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Ut),e.copy(H)},this.getViewport=function(e){return e.copy(Q)},this.setViewport=function(e,t,n,i){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,i),v.viewport(H.copy(Q).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(K)},this.setScissor=function(e,t,n,i){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,i),v.scissor(V.copy(K).multiplyScalar(Y).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){v.setScissorTest($=e)},this.setOpaqueSort=function(e){Z=e},this.setTransparentSort=function(e){J=e},this.getClearColor=function(){return S.getClearColor()},this.setClearColor=function(){S.setClearColor.apply(S,arguments)},this.getClearAlpha=function(){return S.getClearAlpha()},this.setClearAlpha=function(){S.setClearAlpha.apply(S,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),p.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",de,!1),q.dispose(),T.dispose(),y.dispose(),w.dispose(),ue.dispose(),ge.stop()},this.renderBufferImmediate=function(e,t){v.initAttributes();var n=y.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var i=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),v.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),v.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),v.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),v.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0};var me=new _n;this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=me);var a=r.isMesh&&r.matrixWorld.determinant()<0,s=we(e,t,i,r);v.setMaterial(i,a);var l=!1;(F.geometry!==n.id||F.program!==s.id||F.wireframe!==(!0===i.wireframe))&&(F.geometry=n.id,F.program=s.id,F.wireframe=!0===i.wireframe,l=!0),(i.morphTargets||i.morphNormals)&&(P.update(r,n,i,s),l=!0),!0===r.isInstancedMesh&&(l=!0);var u=n.index,c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;var h=1;!0===i.wireframe&&(u=_.getWireframeAttribute(n),h=2);var d,g=A;null!==u&&(d=b.get(u),(g=C).setIndex(d)),l&&(function(e,t,n,i){if(!1!==m.isWebGL2||!e.isInstancedMesh&&!t.isInstancedBufferGeometry||null!==f.get("ANGLE_instanced_arrays")){v.initAttributes();var r=t.attributes,o=i.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var l=o[s];if(l>=0){var u=r[s];if(void 0!==u){var c=u.normalized,h=u.itemSize;if(void 0===(M=b.get(u)))continue;var d=M.buffer,g=M.type,y=M.bytesPerElement;if(u.isInterleavedBufferAttribute){var x=u.data,_=x.stride,w=u.offset;x&&x.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(l,x.meshPerAttribute),void 0===t._maxInstanceCount&&(t._maxInstanceCount=x.meshPerAttribute*x.count)):v.enableAttribute(l),p.bindBuffer(34962,d),v.vertexAttribPointer(l,h,g,c,_*y,w*y)}else u.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===t._maxInstanceCount&&(t._maxInstanceCount=u.meshPerAttribute*u.count)):v.enableAttribute(l),p.bindBuffer(34962,d),v.vertexAttribPointer(l,h,g,c,0,0)}else if("instanceMatrix"===s){var M;if(void 0===(M=b.get(e.instanceMatrix)))continue;d=M.buffer,g=M.type,v.enableAttributeAndDivisor(l+0,1),v.enableAttributeAndDivisor(l+1,1),v.enableAttributeAndDivisor(l+2,1),v.enableAttributeAndDivisor(l+3,1),p.bindBuffer(34962,d),p.vertexAttribPointer(l+0,4,g,!1,64,0),p.vertexAttribPointer(l+1,4,g,!1,64,16),p.vertexAttribPointer(l+2,4,g,!1,64,32),p.vertexAttribPointer(l+3,4,g,!1,64,48)}else if(void 0!==a){var E=a[s];if(void 0!==E)switch(E.length){case 2:p.vertexAttrib2fv(l,E);break;case 3:p.vertexAttrib3fv(l,E);break;case 4:p.vertexAttrib4fv(l,E);break;default:p.vertexAttrib1fv(l,E)}}}}v.disableUnusedAttributes()}}(r,n,i,s),null!==u&&p.bindBuffer(34963,d.buffer));var y=null!==u?u.count:c.count,x=n.drawRange.start*h,w=n.drawRange.count*h,M=null!==o?o.start*h:0,E=null!==o?o.count*h:1/0,q=Math.max(x,M),T=Math.min(y,x+w,M+E)-1,S=Math.max(0,T-q+1);if(0!==S){if(r.isMesh)!0===i.wireframe?(v.setLineWidth(i.wireframeLinewidth*ae()),g.setMode(1)):g.setMode(4);else if(r.isLine){var L=i.linewidth;void 0===L&&(L=1),v.setLineWidth(L*ae()),r.isLineSegments?g.setMode(1):r.isLineLoop?g.setMode(2):g.setMode(3)}else r.isPoints?g.setMode(0):r.isSprite&&g.setMode(4);if(r.isInstancedMesh)g.renderInstances(n,q,S,r.count);else if(n.isInstancedBufferGeometry){var O=Math.min(n.instanceCount,n._maxInstanceCount);g.renderInstances(n,q,S,O)}else g.render(q,S)}},this.compile=function(e,t){(d=T.get(e,t)).init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);var n={};e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r];o.uuid in n||(_e(o,e,t),n[o.uuid]=!0)}else i.uuid in n||(_e(i,e,t),n[i.uuid]=!0)}))};var ve=null,ge=new Pr;function ye(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ee.intersectsSprite(e)){i&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(re);var r=w.update(e);(o=e.material).visible&&h.push(e,r,o,n,oe.z,null)}}else if(e.isImmediateRenderObject)i&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(re),h.push(e,null,e.material,n,oe.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==g.render.frame&&(e.skeleton.update(),e.skeleton.frame=g.render.frame),!e.frustumCulled||ee.intersectsObject(e))){i&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(re),r=w.update(e);var o=e.material;if(Array.isArray(o))for(var a=r.groups,s=0,l=a.length;s<l;s++){var u=a[s],c=o[u.materialIndex];c&&c.visible&&h.push(e,r,c,n,oe.z,u)}else o.visible&&h.push(e,r,o,n,oe.z,null)}var p=e.children;for(s=0,l=p.length;s<l;s++)ye(p[s],t,n,i)}}function xe(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.object,l=a.geometry,u=void 0===i?a.material:i,c=a.group;if(n.isArrayCamera){j=n;for(var h=n.cameras,p=0,f=h.length;p<f;p++){var m=h[p];s.layers.test(m.layers)&&(v.viewport(H.copy(m.viewport)),d.setupLights(m),be(s,t,m,l,u,c))}}else j=null,be(s,t,n,l,u,c)}}function be(e,t,n,i,r,o){if(e.onBeforeRender(O,t,n,i,r,o),d=T.get(t,j||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=we(n,t,r,e);v.setMaterial(r),F.geometry=null,F.program=null,F.wireframe=!1,function(e,t){e.render((function(e){O.renderBufferImmediate(e,t)}))}(e,a)}else O.renderBufferDirect(n,t,i,r,e,o);e.onAfterRender(O,t,n,i,r,o),d=T.get(t,j||n)}function _e(e,t,n){var i=y.get(e),r=d.state.lights,o=d.state.shadowsArray,a=r.state.version,s=M.getParameters(e,r.state,o,t,te.numPlanes,te.numIntersection,n),l=M.getProgramCacheKey(s),u=i.program,c=!0;if(void 0===u)e.addEventListener("dispose",pe);else if(u.cacheKey!==l)fe(e);else if(i.lightsStateVersion!==a)i.lightsStateVersion=a,c=!1;else{if(void 0!==s.shaderID)return;c=!1}c&&(u=M.acquireProgram(s,l),i.program=u,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding,e.program=u);var h=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<O.maxMorphTargets;p++)h["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,p=0;p<O.maxMorphNormals;p++)h["morphNormal"+p]>=0&&e.numSupportedMorphNormals++;var f=i.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(i.numClippingPlanes=te.numPlanes,i.numIntersection=te.numIntersection,f.clippingPlanes=te.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(f.ambientLightColor.value=r.state.ambient,f.lightProbe.value=r.state.probe,f.directionalLights.value=r.state.directional,f.directionalLightShadows.value=r.state.directionalShadow,f.spotLights.value=r.state.spot,f.spotLightShadows.value=r.state.spotShadow,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.pointLightShadows.value=r.state.pointShadow,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),v=Ho.seqWithValue(m.seq,f);i.uniformsList=v}function we(e,t,n,i){x.resetTextureUnits();var r=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===D?O.outputEncoding:D.texture.encoding,s=y.get(n),l=d.state.lights;if(ne&&(ie||e!==U)){var u=e===U&&n.id===z;te.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,s,u)}n.version===s.__version?(void 0===s.program||n.fog&&s.fog!==r||s.environment!==o||s.needsLights&&s.lightsStateVersion!==l.state.version||void 0!==s.numClippingPlanes&&(s.numClippingPlanes!==te.numPlanes||s.numIntersection!==te.numIntersection)||s.outputEncoding!==a)&&_e(n,t,i):(_e(n,t,i),s.__version=n.version);var c=!1,h=!1,f=!1,g=s.program,b=g.getUniforms(),_=s.uniforms;if(v.useProgram(g.program)&&(c=!0,h=!0,f=!0),n.id!==z&&(z=n.id,h=!0),c||U!==e){if(b.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==e&&(U=e,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var w=b.map.cameraPosition;void 0!==w&&w.setValue(p,oe.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&b.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&b.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){b.setOptional(p,i,"bindMatrix"),b.setOptional(p,i,"bindMatrixInverse");var M=i.skeleton;if(M){var q=M.bones;if(m.floatVertexTextures){if(void 0===M.boneTexture){var T=Math.sqrt(4*q.length);T=kt.ceilPowerOfTwo(T),T=Math.max(T,4);var S=new Float32Array(T*T*4);S.set(M.boneMatrices);var P=new Mr(S,T,T,ft,ct);M.boneMatrices=S,M.boneTexture=P,M.boneTextureSize=T}b.setValue(p,"boneTexture",M.boneTexture,x),b.setValue(p,"boneTextureSize",M.boneTextureSize)}else b.setOptional(p,M,"boneMatrices")}}return(h||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,b.setValue(p,"receiveShadow",i.receiveShadow)),h&&(b.setValue(p,"toneMappingExposure",O.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",O.toneMappingWhitePoint),s.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(_,f),r&&n.fog&&E.refreshFogUniforms(_,r),E.refreshMaterialUniforms(_,n,o,Y,X),void 0!==_.ltc_1&&(_.ltc_1.value=Sr.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=Sr.LTC_2),Ho.upload(p,s.uniformsList,_,x)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ho.upload(p,s.uniformsList,_,x),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(p,"center",i.center),b.setValue(p,"modelViewMatrix",i.modelViewMatrix),b.setValue(p,"normalMatrix",i.normalMatrix),b.setValue(p,"modelMatrix",i.matrixWorld),g}ge.setAnimationLoop((function(e){ue.isPresenting||ve&&ve(e)})),"undefined"!=typeof window&&ge.setContext(window),this.setAnimationLoop=function(e){ve=e,ue.setAnimationLoop(e),ge.start()},this.render=function(e,t){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),t&&t.isCamera){if(!I){F.geometry=null,F.program=null,F.wireframe=!1,z=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ue.enabled&&ue.isPresenting&&(t=ue.getCamera(t)),e.onBeforeRender(O,e,t,n||D),(d=T.get(e,t)).init(),re.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ee.setFromProjectionMatrix(re),ie=this.localClippingEnabled,ne=te.init(this.clippingPlanes,ie,t),(h=q.get(e,t)).init(),ye(e,t,0,O.sortObjects),h.finish(),!0===O.sortObjects&&h.sort(Z,J),ne&&te.beginShadows();var r=d.state.shadowsArray;ce.render(r,e,t),d.setupLights(t),ne&&te.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),S.render(h,e,t,i);var o=h.opaque,a=h.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&xe(o,e,t,s),a.length&&xe(a,e,t,s)}else o.length&&xe(o,e,t),a.length&&xe(a,e,t);e.onAfterRender(O,e,t),null!==D&&(x.updateRenderTargetMipmap(D),x.updateMultisampleRenderTarget(D)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),h=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){k!==e&&null===D&&p.bindFramebuffer(36160,e),k=e},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return D},this.setRenderTarget=function(e,t,n){D=e,N=t,R=n,e&&void 0===y.get(e).__webglFramebuffer&&x.setupRenderTarget(e);var i=k,r=!1;if(e){var o=y.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=o[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?y.get(e).__webglMultisampledFramebuffer:o,H.copy(e.viewport),V.copy(e.scissor),G=e.scissorTest}else H.copy(Q).multiplyScalar(Y).floor(),V.copy(K).multiplyScalar(Y).floor(),G=$;if(B!==i&&(p.bindFramebuffer(36160,i),B=i),v.viewport(H),v.scissor(V),v.setScissorTest(G),r){var a=y.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,o,a){if(e&&e.isWebGLRenderTarget){var s=y.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var l=!1;s!==B&&(p.bindFramebuffer(36160,s),l=!0);try{var u=e.texture,c=u.format,h=u.type;if(c!==ft&&L.convert(c)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===st||L.convert(h)===p.getParameter(35738)||h===ct&&(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||h===ht&&(m.isWebGL2?f.get("EXT_color_buffer_float"):f.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&p.readPixels(t,n,i,r,L.convert(c),L.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&p.bindFramebuffer(36160,B)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i),a=L.convert(t.format);x.setTexture2D(t,0),p.copyTexImage2D(3553,n,a,e.x,e.y,r,o,0),v.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);var r=t.image.width,o=t.image.height,a=L.convert(n.format),s=L.convert(n.type);x.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,i,e.x,e.y,r,o,a,s,t.image.data):t.isCompressedTexture?p.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):p.texSubImage2D(3553,i,e.x,e.y,a,s,t.image),0===i&&n.generateMipmaps&&p.generateMipmap(3553),v.unbindTexture()},this.initTexture=function(e){x.setTexture2D(e,0),v.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ka(e,t){this.name="",this.color=new hi(e),this.density=void 0!==t?t:25e-5}function Na(e,t,n){this.name="",this.color=new hi(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Ra(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=At,this.updateRange={offset:0,count:-1},this.version=0}Pa.prototype=Object.assign(Object.create(xr.prototype),{constructor:Pa,isArrayCamera:!0}),Aa.prototype=Object.assign(Object.create(bn.prototype),{constructor:Aa,isGroup:!0}),Object.assign(Ca.prototype,{constructor:Ca,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Aa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Aa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(e,t,n){var i=null,r=null,o=this._targetRay,a=this._grip;return e&&(null!==o&&null!==(i=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==a&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),this}}),Object.assign(La.prototype,Lt.prototype),Object.assign(ka.prototype,{isFogExp2:!0,clone:function(){return new ka(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Na.prototype,{isFog:!0,clone:function(){return new Na(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ra.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ra.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var Da=new Xt;function Ba(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function za(e){gi.call(this),this.type="SpriteMaterial",this.color=new hi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(Ba.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ba.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)Da.x=this.getX(t),Da.y=this.getY(t),Da.z=this.getZ(t),Da.applyMatrix4(e),this.setXYZ(t,Da.x,Da.y,Da.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],t=0;t<this.count;t++)for(var n=t*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[n+i]);return new bi(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],t=0;t<this.count;t++)for(var n=t*this.data.stride+this.offset,i=0;i<this.itemSize;i++)e.push(this.data.array[n+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),za.prototype=Object.create(gi.prototype),za.prototype.constructor=za,za.prototype.isSpriteMaterial=!0,za.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Fa,Ua=new Xt,ja=new Xt,Ha=new Xt,Va=new Nt,Ga=new Nt,Wa=new tn,Xa=new Xt,Ya=new Xt,Za=new Xt,Ja=new Nt,Qa=new Nt,Ka=new Nt;function $a(e){if(bn.call(this),this.type="Sprite",void 0===Fa){Fa=new zi;var t=new Ra(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Fa.setIndex([0,1,2,0,2,3]),Fa.setAttribute("position",new Ba(t,3,0,!1)),Fa.setAttribute("uv",new Ba(t,2,3,!1))}this.geometry=Fa,this.material=void 0!==e?e:new za,this.center=new Nt(.5,.5)}function es(e,t,n,i,r,o){Va.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Ga.x=o*Va.x-r*Va.y,Ga.y=r*Va.x+o*Va.y):Ga.copy(Va),e.copy(t),e.x+=Ga.x,e.y+=Ga.y,e.applyMatrix4(Wa)}$a.prototype=Object.assign(Object.create(bn.prototype),{constructor:$a,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ja.setFromMatrixScale(this.matrixWorld),Wa.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ha.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ja.multiplyScalar(-Ha.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var o=this.center;es(Xa.set(-.5,-.5,0),Ha,o,ja,n,i),es(Ya.set(.5,-.5,0),Ha,o,ja,n,i),es(Za.set(.5,.5,0),Ha,o,ja,n,i),Ja.set(0,0),Qa.set(1,0),Ka.set(1,1);var a=e.ray.intersectTriangle(Xa,Ya,Za,!1,Ua);if(null!==a||(es(Ya.set(-.5,.5,0),Ha,o,ja,n,i),Qa.set(0,1),null!==(a=e.ray.intersectTriangle(Xa,Za,Ya,!1,Ua)))){var s=e.ray.origin.distanceTo(Ua);s<e.near||s>e.far||t.push({distance:s,point:Ua.clone(),uv:si.getUV(Ua,Xa,Ya,Za,Ja,Qa,Ka,new Nt),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return bn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var ts=new Xt,ns=new Xt;function is(){bn.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function rs(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),rr.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new tn,this.bindMatrixInverse=new tn}is.prototype=Object.assign(Object.create(bn.prototype),{constructor:is,isLOD:!0,copy:function(e){bn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){ts.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(ts);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){ts.setFromMatrixPosition(e.matrixWorld),ns.setFromMatrixPosition(this.matrixWorld);var n=ts.distanceTo(ns)/e.zoom;t[0].object.visible=!0;for(var i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){var t=bn.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),rs.prototype=Object.assign(Object.create(rr.prototype),{constructor:rs,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Ut,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){rr.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var e=new Xt,t=new Ut,n=new Ut,i=new Xt,r=new tn;return function(o,a){var s=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,o),n.fromBufferAttribute(l.attributes.skinWeight,o),e.fromBufferAttribute(l.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(var u=0;u<4;u++){var c=n.getComponent(u);if(0!==c){var h=t.getComponent(u);r.multiplyMatrices(s.bones[h].matrixWorld,s.boneInverses[h]),a.addScaledVector(i.copy(e).applyMatrix4(r),c)}}return a.applyMatrix4(this.bindMatrixInverse)}}()});var os=new tn,as=new tn;function ss(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new tn)}}function ls(){bn.call(this),this.type="Bone"}Object.assign(ss.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new tn;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,o=e.length;r<o;r++){var a=e[r]?e[r].matrixWorld:as;os.multiplyMatrices(a,t[r]),os.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new ss(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),ls.prototype=Object.assign(Object.create(bn.prototype),{constructor:ls,isBone:!0});var us=new tn,cs=new tn,hs=[],ds=new rr;function ps(e,t,n){rr.call(this,e,t),this.instanceMatrix=new bi(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function fs(e){gi.call(this),this.type="LineBasicMaterial",this.color=new hi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}ps.prototype=Object.assign(Object.create(rr.prototype),{constructor:ps,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,i=this.count;if(ds.geometry=this.geometry,ds.material=this.material,void 0!==ds.material)for(var r=0;r<i;r++){this.getMatrixAt(r,us),cs.multiplyMatrices(n,us),ds.matrixWorld=cs,ds.raycast(e,hs);for(var o=0,a=hs.length;o<a;o++){var s=hs[o];s.instanceId=r,s.object=this,t.push(s)}hs.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),fs.prototype=Object.create(gi.prototype),fs.prototype.constructor=fs,fs.prototype.isLineBasicMaterial=!0,fs.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};var ms=new Xt,vs=new Xt,gs=new tn,ys=new Wn,xs=new Bn;function bs(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),bn.call(this),this.type="Line",this.geometry=void 0!==e?e:new zi,this.material=void 0!==t?t:new fs,this.updateMorphTargets()}bs.prototype=Object.assign(Object.create(bn.prototype),{constructor:bs,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)ms.fromBufferAttribute(t,i-1),vs.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=ms.distanceTo(vs);e.setAttribute("lineDistance",new Pi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=o.length;i<r;i++)n[i]=n[i-1],n[i]+=o[i-1].distanceTo(o[i])}return this},raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),xs.copy(n.boundingSphere),xs.applyMatrix4(i),xs.radius+=r,!1!==e.ray.intersectsSphere(xs)){gs.getInverse(i),ys.copy(e.ray).applyMatrix4(gs);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Xt,l=new Xt,u=new Xt,c=new Xt,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position.array;if(null!==d)for(var f=d.array,m=0,v=f.length-1;m<v;m+=h){var g=f[m],y=f[m+1];s.fromArray(p,3*g),l.fromArray(p,3*y),ys.distanceSqToSegment(s,l,c,u)>a||(c.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(c))<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else for(m=0,v=p.length/3-1;m<v;m+=h)s.fromArray(p,3*m),l.fromArray(p,3*m+3),ys.distanceSqToSegment(s,l,c,u)>a||(c.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(c))<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(n.isGeometry){var x=n.vertices,b=x.length;for(m=0;m<b-1;m+=h){var _;ys.distanceSqToSegment(x[m],x[m+1],c,u)>a||(c.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(c))<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}}}},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _s=new Xt,ws=new Xt;function Ms(e,t){bs.call(this,e,t),this.type="LineSegments"}function Es(e,t){bs.call(this,e,t),this.type="LineLoop"}function qs(e){gi.call(this),this.type="PointsMaterial",this.color=new hi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Ms.prototype=Object.assign(Object.create(bs.prototype),{constructor:Ms,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)_s.fromBufferAttribute(t,i),ws.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+_s.distanceTo(ws);e.setAttribute("lineDistance",new Pi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(n=e.lineDistances,i=0,r=o.length;i<r;i+=2)_s.copy(o[i]),ws.copy(o[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+_s.distanceTo(ws)}return this}}),Es.prototype=Object.assign(Object.create(bs.prototype),{constructor:Es,isLineLoop:!0}),qs.prototype=Object.create(gi.prototype),qs.prototype.constructor=qs,qs.prototype.isPointsMaterial=!0,qs.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Ts=new tn,Ss=new Wn,Ps=new Bn,As=new Xt;function Cs(e,t){bn.call(this),this.type="Points",this.geometry=void 0!==e?e:new zi,this.material=void 0!==t?t:new qs,this.updateMorphTargets()}function Ls(e,t,n,i,r,o,a){var s=Ss.distanceSqToPoint(e);if(s<n){var l=new Xt;Ss.closestPointToPoint(e,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:a})}}function Os(e,t,n,i,r,o,a,s,l){Ft.call(this,e,t,n,i,r,o,a,s,l),this.format=void 0!==a?a:pt,this.minFilter=void 0!==o?o:ot,this.magFilter=void 0!==r?r:ot,this.generateMipmaps=!1}function Is(e,t,n,i,r,o,a,s,l,u,c,h){Ft.call(this,null,o,a,s,l,u,i,r,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function ks(e,t,n,i,r,o,a,s,l){Ft.call(this,e,t,n,i,r,o,a,s,l),this.needsUpdate=!0}function Ns(e,t,n,i,r,o,a,s,l,u){if((u=void 0!==u?u:mt)!==mt&&u!==vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===mt&&(n=lt),void 0===n&&u===vt&&(n=dt),Ft.call(this,null,i,r,o,a,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:nt,this.minFilter=void 0!==s?s:nt,this.flipY=!1,this.generateMipmaps=!1}function Rs(e){zi.call(this),this.type="WireframeGeometry";var t,n,i,r,o,a,s,l,u,c,h=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var v=m[t];for(n=0;n<3;n++)s=v[f[n]],l=v[f[(n+1)%3]],d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[u=d[0]+","+d[1]]&&(p[u]={index1:d[0],index2:d[1]})}for(u in p)a=p[u],c=e.vertices[a.index1],h.push(c.x,c.y,c.z),c=e.vertices[a.index2],h.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,y,x,b,_,w,M;if(c=new Xt,null!==e.index){for(g=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),r=0,o=x.length;r<o;++r)for(t=_=(b=x[r]).start,i=_+b.count;t<i;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[u=d[0]+","+d[1]]&&(p[u]={index1:d[0],index2:d[1]});for(u in p)a=p[u],c.fromBufferAttribute(g,a.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(t=0,i=(g=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)w=3*t+n,c.fromBufferAttribute(g,w),h.push(c.x,c.y,c.z),M=3*t+(n+1)%3,c.fromBufferAttribute(g,M),h.push(c.x,c.y,c.z)}this.setAttribute("position",new Pi(h,3))}function Ds(e,t,n){hr.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Bs(e,t,n)),this.mergeVertices()}function Bs(e,t,n){zi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,o=[],a=[],s=[],l=[],u=1e-5,c=new Xt,h=new Xt,d=new Xt,p=new Xt,f=new Xt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(i=0;i<=n;i++){var v=i/n;for(r=0;r<=t;r++){var g=r/t;e(g,v,h),a.push(h.x,h.y,h.z),g-u>=0?(e(g-u,v,d),p.subVectors(h,d)):(e(g+u,v,d),p.subVectors(d,h)),v-u>=0?(e(g,v-u,d),f.subVectors(h,d)):(e(g,v+u,d),f.subVectors(d,h)),c.crossVectors(p,f).normalize(),s.push(c.x,c.y,c.z),l.push(g,v)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var y=i*m+r,x=i*m+r+1,b=(i+1)*m+r+1,_=(i+1)*m+r;o.push(y,x,_),o.push(x,b,_)}this.setIndex(o),this.setAttribute("position",new Pi(a,3)),this.setAttribute("normal",new Pi(s,3)),this.setAttribute("uv",new Pi(l,2))}function zs(e,t,n,i){hr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Fs(e,t,n,i)),this.mergeVertices()}function Fs(e,t,n,i){zi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],o=[];function a(e,t,n,i){var r,o,a=Math.pow(2,i),l=[];for(r=0;r<=a;r++){l[r]=[];var u=e.clone().lerp(n,r/a),c=t.clone().lerp(n,r/a),h=a-r;for(o=0;o<=h;o++)l[r][o]=0===o&&r===a?u:u.clone().lerp(c,o/h)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var d=Math.floor(o/2);o%2==0?(s(l[r][d+1]),s(l[r+1][d]),s(l[r][d])):(s(l[r][d+1]),s(l[r+1][d+1]),s(l[r+1][d]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function u(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(function(e){for(var n=new Xt,i=new Xt,r=new Xt,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),a(n,i,r,e)})(i=i||0),function(e){for(var t=new Xt,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new Xt,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=c(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;o.push(n,1-i)}(function(){for(var e=new Xt,t=new Xt,n=new Xt,i=new Xt,a=new Nt,s=new Nt,l=new Nt,h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=c(i);u(a,d+0,e,p),u(s,d+2,t,p),u(l,d+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Pi(r,3)),this.setAttribute("normal",new Pi(r.slice(),3)),this.setAttribute("uv",new Pi(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Us(e,t){hr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new js(e,t)),this.mergeVertices()}function js(e,t){Fs.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Hs(e,t){hr.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vs(e,t)),this.mergeVertices()}function Vs(e,t){Fs.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gs(e,t){hr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ws(e,t)),this.mergeVertices()}function Ws(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Fs.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xs(e,t){hr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ys(e,t)),this.mergeVertices()}function Ys(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];Fs.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zs(e,t,n,i,r,o){hr.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Js(e,t,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Js(e,t,n,i,r){zi.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Xt,u=new Xt,c=new Nt,h=new Xt,d=[],p=[],f=[],m=[];function v(r){h=e.getPointAt(r/t,h);var a=o.normals[r],c=o.binormals[r];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);u.x=v*a.x+m*c.x,u.y=v*a.y+m*c.y,u.z=v*a.z+m*c.z,u.normalize(),p.push(u.x,u.y,u.z),l.x=h.x+n*u.x,l.y=h.y+n*u.y,l.z=h.z+n*u.z,d.push(l.x,l.y,l.z)}}(function(){for(a=0;a<t;a++)v(a);v(!1===r?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=i;s++)c.x=a/t,c.y=s/i,f.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=i;a++){var e=(i+1)*(s-1)+(a-1),n=(i+1)*s+(a-1),r=(i+1)*s+a,o=(i+1)*(s-1)+a;m.push(e,n,o),m.push(n,r,o)}}()})(),this.setIndex(m),this.setAttribute("position",new Pi(d,3)),this.setAttribute("normal",new Pi(p,3)),this.setAttribute("uv",new Pi(f,2))}function Qs(e,t,n,i,r,o,a){hr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ks(e,t,n,i,r,o)),this.mergeVertices()}function Ks(e,t,n,i,r,o){zi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var a,s,l=[],u=[],c=[],h=[],d=new Xt,p=new Xt,f=new Xt,m=new Xt,v=new Xt,g=new Xt,y=new Xt;for(a=0;a<=n;++a){var x=a/n*r*Math.PI*2;for(S(x,r,o,e,f),S(x+.01,r,o,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var b=s/i*Math.PI*2,_=-t*Math.cos(b),w=t*Math.sin(b);d.x=f.x+(_*y.x+w*v.x),d.y=f.y+(_*y.y+w*v.y),d.z=f.z+(_*y.z+w*v.z),u.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(a/n),h.push(s/i)}}for(s=1;s<=n;s++)for(a=1;a<=i;a++){var M=(i+1)*(s-1)+(a-1),E=(i+1)*s+(a-1),q=(i+1)*s+a,T=(i+1)*(s-1)+a;l.push(M,E,T),l.push(E,q,T)}function S(e,t,n,i,r){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.setAttribute("position",new Pi(u,3)),this.setAttribute("normal",new Pi(c,3)),this.setAttribute("uv",new Pi(h,2))}function $s(e,t,n,i,r){hr.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new el(e,t,n,i,r)),this.mergeVertices()}function el(e,t,n,i,r){zi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,a,s=[],l=[],u=[],c=[],h=new Xt,d=new Xt,p=new Xt;for(o=0;o<=n;o++)for(a=0;a<=i;a++){var f=a/i*r,m=o/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),u.push(p.x,p.y,p.z),c.push(a/i),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var v=(i+1)*o+a-1,g=(i+1)*(o-1)+a-1,y=(i+1)*(o-1)+a,x=(i+1)*o+a;s.push(v,g,x),s.push(g,y,x)}this.setIndex(s),this.setAttribute("position",new Pi(l,3)),this.setAttribute("normal",new Pi(u,3)),this.setAttribute("uv",new Pi(c,2))}Cs.prototype=Object.assign(Object.create(bn.prototype),{constructor:Cs,isPoints:!0,raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ps.copy(n.boundingSphere),Ps.applyMatrix4(i),Ps.radius+=r,!1!==e.ray.intersectsSphere(Ps)){Ts.getInverse(i),Ss.copy(e.ray).applyMatrix4(Ts);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var u=s.array,c=0,h=u.length;c<h;c++){var d=u[c];As.fromArray(l,3*d),Ls(As,d,a,i,e,t,this)}else{c=0;for(var p=l.length/3;c<p;c++)As.fromArray(l,3*c),Ls(As,c,a,i,e,t,this)}}else{var f=n.vertices;for(c=0,p=f.length;c<p;c++)Ls(f[c],c,a,i,e,t,this)}}},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Os.prototype=Object.assign(Object.create(Ft.prototype),{constructor:Os,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Is.prototype=Object.create(Ft.prototype),Is.prototype.constructor=Is,Is.prototype.isCompressedTexture=!0,ks.prototype=Object.create(Ft.prototype),ks.prototype.constructor=ks,ks.prototype.isCanvasTexture=!0,Ns.prototype=Object.create(Ft.prototype),Ns.prototype.constructor=Ns,Ns.prototype.isDepthTexture=!0,Rs.prototype=Object.create(zi.prototype),Rs.prototype.constructor=Rs,Ds.prototype=Object.create(hr.prototype),Ds.prototype.constructor=Ds,Bs.prototype=Object.create(zi.prototype),Bs.prototype.constructor=Bs,zs.prototype=Object.create(hr.prototype),zs.prototype.constructor=zs,Fs.prototype=Object.create(zi.prototype),Fs.prototype.constructor=Fs,Us.prototype=Object.create(hr.prototype),Us.prototype.constructor=Us,js.prototype=Object.create(Fs.prototype),js.prototype.constructor=js,Hs.prototype=Object.create(hr.prototype),Hs.prototype.constructor=Hs,Vs.prototype=Object.create(Fs.prototype),Vs.prototype.constructor=Vs,Gs.prototype=Object.create(hr.prototype),Gs.prototype.constructor=Gs,Ws.prototype=Object.create(Fs.prototype),Ws.prototype.constructor=Ws,Xs.prototype=Object.create(hr.prototype),Xs.prototype.constructor=Xs,Ys.prototype=Object.create(Fs.prototype),Ys.prototype.constructor=Ys,Zs.prototype=Object.create(hr.prototype),Zs.prototype.constructor=Zs,Js.prototype=Object.create(zi.prototype),Js.prototype.constructor=Js,Js.prototype.toJSON=function(){var e=zi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Qs.prototype=Object.create(hr.prototype),Qs.prototype.constructor=Qs,Ks.prototype=Object.create(zi.prototype),Ks.prototype.constructor=Ks,$s.prototype=Object.create(hr.prototype),$s.prototype.constructor=$s,el.prototype=Object.create(zi.prototype),el.prototype.constructor=el;var tl=function(e,t,n){n=n||2;var i,r,o,a,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,d=nl(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(e,t,n,i){var r,o,a,s=[];for(r=0,o=t.length;r<o;r++)(a=nl(e,t[r]*i,r<o-1?t[r+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),s.push(pl(a));for(s.sort(ul),r=0;r<s.length;r++)cl(s[r],n),n=il(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=o=e[0],r=a=e[1];for(var f=n;f<h;f+=n)(s=e[f])<i&&(i=s),(l=e[f+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-i,a-r))?1/u:0}return rl(d,p,n,i,r,u),p};function nl(e,t,n,i,r){var o,a;if(r===function(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=Ml(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=Ml(o,e[o],e[o+1],a);return a&&gl(a,a.next)&&(El(a),a=a.next),a}function il(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!gl(i,i.next)&&0!==vl(i.prev,i,i.next))i=i.next;else{if(El(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function rl(e,t,n,i,r,o,a){if(e){!a&&o&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=dl(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<u&&(s++,i=i.nextZ);t++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(a>1)}(r)}(e,i,r,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?al(e,i,r,o):ol(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),El(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?rl(e=sl(il(e),t,n),t,n,i,r,o,2):2===a&&ll(e,t,n,i,r,o):rl(il(e),t,n,i,r,o,1);break}}}function ol(e){var t=e.prev,n=e,i=e.next;if(vl(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(fl(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&vl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function al(e,t,n,i){var r=e.prev,o=e,a=e.next;if(vl(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,u=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=dl(s,l,t,n,i),d=dl(u,c,t,n,i),p=e.prevZ,f=e.nextZ;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&fl(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&vl(p.prev,p,p.next)>=0||(p=p.prevZ,f!==e.prev&&f!==e.next&&fl(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&vl(f.prev,f,f.next)>=0))return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&fl(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&vl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&fl(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&vl(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function sl(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!gl(r,o)&&yl(r,i,i.next,o)&&_l(r,o)&&_l(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),El(i),El(i.next),i=e=o),i=i.next}while(i!==e);return il(i)}function ll(e,t,n,i,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ml(a,s)){var l=wl(a,s);return a=il(a,a.next),l=il(l,l.next),rl(a,t,n,i,r,o),void rl(l,t,n,i,r,o)}s=s.next}a=a.next}while(a!==e)}function ul(e,t){return e.x-t.x}function cl(e,t){if(t=function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n;var l,u=n,c=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&fl(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),_l(i,e)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&hl(n,i)))&&(n=i,d=l)),i=i.next}while(i!==u);return n}(e,t)){var n=wl(t,e);il(t,t.next),il(n,n.next)}}function hl(e,t){return vl(e.prev,e,t.prev)<0&&vl(t.next,e,e.next)<0}function dl(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function pl(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function fl(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function ml(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&yl(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(_l(e,t)&&_l(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(vl(e.prev,e,t.prev)||vl(e,t.prev,t))||gl(e,t)&&vl(e.prev,e,e.next)>0&&vl(t.prev,t,t.next)>0)}function vl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function gl(e,t){return e.x===t.x&&e.y===t.y}function yl(e,t,n,i){var r=bl(vl(e,t,n)),o=bl(vl(e,t,i)),a=bl(vl(n,i,e)),s=bl(vl(n,i,t));return!!(r!==o&&a!==s||0===r&&xl(e,n,t)||0===o&&xl(e,i,t)||0===a&&xl(n,e,i)||0===s&&xl(n,t,i))}function xl(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function bl(e){return e>0?1:e<0?-1:0}function _l(e,t){return vl(e.prev,e,e.next)<0?vl(e,t,e.next)>=0&&vl(e,e.prev,t)>=0:vl(e,t,e.prev)<0||vl(e,e.next,t)<0}function wl(e,t){var n=new ql(e.i,e.x,e.y),i=new ql(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Ml(e,t,n,i){var r=new ql(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function El(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ql(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Tl={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Tl.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Sl(e),Pl(n,e);var o=e.length;t.forEach(Sl);for(var a=0;a<t.length;a++)i.push(o),o+=t[a].length,Pl(n,t[a]);var s=tl(n,i);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function Sl(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Pl(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Al(e,t){hr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Cl(e,t)),this.mergeVertices()}function Cl(e,t){zi.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],o=0,a=e.length;o<a;o++)s(e[o]);function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ll;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var v,g,y,x,b,_=!1;f&&(v=f.getSpacedPoints(s),_=!0,u=!1,g=f.computeFrenetFrames(s,!1),y=new Xt,x=new Xt,b=new Xt),u||(p=0,c=0,h=0,d=0);var w,M,E,q=e.extractPoints(a),T=q.shape,S=q.holes;if(!Tl.isClockWise(T))for(T=T.reverse(),M=0,E=S.length;M<E;M++)w=S[M],Tl.isClockWise(w)&&(S[M]=w.reverse());var P=Tl.triangulateShape(T,S),A=T;for(M=0,E=S.length;M<E;M++)w=S[M],T=T.concat(w);function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,O,I,k,N,R,D=T.length,B=P.length;function z(e,t,n){var i,r,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+s*s,h=a*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=t.x-s/d,m=t.y+a/d,v=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(a*u-s*l),g=(i=f+a*v-e.x)*i+(r=m+s*v-e.y)*r;if(g<=2)return new Nt(i,r);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(i=-s,r=a,o=Math.sqrt(c)):(i=a,r=s,o=Math.sqrt(c/2))}return new Nt(i/o,r/o)}for(var F=[],U=0,j=A.length,H=j-1,V=U+1;U<j;U++,H++,V++)H===j&&(H=0),V===j&&(V=0),F[U]=z(A[U],A[H],A[V]);var G,W,X=[],Y=F.concat();for(M=0,E=S.length;M<E;M++){for(w=S[M],G=[],U=0,H=(j=w.length)-1,V=U+1;U<j;U++,H++,V++)H===j&&(H=0),V===j&&(V=0),G[U]=z(w[U],w[H],w[V]);X.push(G),Y=Y.concat(G)}for(L=0;L<p;L++){for(I=L/p,k=c*Math.cos(I*Math.PI/2),O=h*Math.sin(I*Math.PI/2)+d,U=0,j=A.length;U<j;U++)J((N=C(A[U],F[U],O)).x,N.y,-k);for(M=0,E=S.length;M<E;M++)for(w=S[M],G=X[M],U=0,j=w.length;U<j;U++)J((N=C(w[U],G[U],O)).x,N.y,-k)}for(O=h+d,U=0;U<D;U++)N=u?C(T[U],Y[U],O):T[U],_?(x.copy(g.normals[0]).multiplyScalar(N.x),y.copy(g.binormals[0]).multiplyScalar(N.y),b.copy(v[0]).add(x).add(y),J(b.x,b.y,b.z)):J(N.x,N.y,0);for(W=1;W<=s;W++)for(U=0;U<D;U++)N=u?C(T[U],Y[U],O):T[U],_?(x.copy(g.normals[W]).multiplyScalar(N.x),y.copy(g.binormals[W]).multiplyScalar(N.y),b.copy(v[W]).add(x).add(y),J(b.x,b.y,b.z)):J(N.x,N.y,l/s*W);for(L=p-1;L>=0;L--){for(I=L/p,k=c*Math.cos(I*Math.PI/2),O=h*Math.sin(I*Math.PI/2)+d,U=0,j=A.length;U<j;U++)J((N=C(A[U],F[U],O)).x,N.y,l+k);for(M=0,E=S.length;M<E;M++)for(w=S[M],G=X[M],U=0,j=w.length;U<j;U++)N=C(w[U],G[U],O),_?J(N.x,N.y+v[s-1].y,v[s-1].x+k):J(N.x,N.y,l+k)}function Z(e,t){var n,i;for(U=e.length;--U>=0;){n=U,(i=U-1)<0&&(i=e.length-1);var r=0,o=s+2*p;for(r=0;r<o;r++){var a=D*r,l=D*(r+1);K(t+n+a,t+i+a,t+i+l,t+n+l)}}}function J(e,t,n){o.push(e),o.push(t),o.push(n)}function Q(e,t,r){$(e),$(t),$(r);var o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[2])}function K(e,t,r,o){$(e),$(t),$(o),$(t),$(r),$(o);var a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function $(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function ee(e){r.push(e.x),r.push(e.y)}(function(){var e=i.length/3;if(u){var t=0,r=D*t;for(U=0;U<B;U++)Q((R=P[U])[2]+r,R[1]+r,R[0]+r);for(r=D*(t=s+2*p),U=0;U<B;U++)Q((R=P[U])[0]+r,R[1]+r,R[2]+r)}else{for(U=0;U<B;U++)Q((R=P[U])[2],R[1],R[0]);for(U=0;U<B;U++)Q((R=P[U])[0]+D*s,R[1]+D*s,R[2]+D*s)}n.addGroup(e,i.length/3-e,0)})(),function(){var e=i.length/3,t=0;for(Z(A,t),t+=A.length,M=0,E=S.length;M<E;M++)Z(w=S[M],t),t+=w.length;n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Pi(i,3)),this.setAttribute("uv",new Pi(r,2)),this.computeVertexNormals()}Al.prototype=Object.create(hr.prototype),Al.prototype.constructor=Al,Al.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return Ol(this.parameters.shapes,this.parameters.options,e)},Cl.prototype=Object.create(zi.prototype),Cl.prototype.constructor=Cl,Cl.prototype.toJSON=function(){var e=zi.prototype.toJSON.call(this);return Ol(this.parameters.shapes,this.parameters.options,e)};var Ll={generateTopUV:function(e,t,n,i,r){var o=t[3*n],a=t[3*n+1],s=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new Nt(o,a),new Nt(s,l),new Nt(u,c)]},generateSideWallUV:function(e,t,n,i,r,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<.01?[new Nt(a,1-l),new Nt(u,1-h),new Nt(d,1-f),new Nt(m,1-g)]:[new Nt(s,1-l),new Nt(c,1-h),new Nt(p,1-f),new Nt(v,1-g)]}};function Ol(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var o=e[i];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Il(e,t){hr.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new kl(e,t)),this.mergeVertices()}function kl(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new hr;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Cl.call(this,i,t),this.type="TextBufferGeometry"}function Nl(e,t,n,i,r,o,a){hr.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Rl(e,t,n,i,r,o,a)),this.mergeVertices()}function Rl(e,t,n,i,r,o,a){zi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,u=Math.min(o+a,Math.PI),c=0,h=[],d=new Xt,p=new Xt,f=[],m=[],v=[],g=[];for(l=0;l<=n;l++){var y=[],x=l/n,b=0;for(0==l&&0==o?b=.5/t:l==n&&u==Math.PI&&(b=-.5/t),s=0;s<=t;s++){var _=s/t;d.x=-e*Math.cos(i+_*r)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(i+_*r)*Math.sin(o+x*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),v.push(p.x,p.y,p.z),g.push(_+b,1-x),y.push(c++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<t;s++){var w=h[l][s+1],M=h[l][s],E=h[l+1][s],q=h[l+1][s+1];(0!==l||o>0)&&f.push(w,M,q),(l!==n-1||u<Math.PI)&&f.push(M,E,q)}this.setIndex(f),this.setAttribute("position",new Pi(m,3)),this.setAttribute("normal",new Pi(v,3)),this.setAttribute("uv",new Pi(g,2))}function Dl(e,t,n,i,r,o){hr.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Bl(e,t,n,i,r,o)),this.mergeVertices()}function Bl(e,t,n,i,r,o){zi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l,u=[],c=[],h=[],d=[],p=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new Xt,v=new Nt;for(s=0;s<=i;s++){for(l=0;l<=n;l++)a=r+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<i;s++){var g=s*(n+1);for(l=0;l<n;l++){var y=a=l+g,x=a+n+1,b=a+n+2,_=a+1;u.push(y,x,_),u.push(x,b,_)}}this.setIndex(u),this.setAttribute("position",new Pi(c,3)),this.setAttribute("normal",new Pi(h,3)),this.setAttribute("uv",new Pi(d,2))}function zl(e,t,n,i){hr.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Fl(e,t,n,i)),this.mergeVertices()}function Fl(e,t,n,i){zi.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=kt.clamp(i,0,2*Math.PI);var r,o,a,s=[],l=[],u=[],c=1/t,h=new Xt,d=new Nt;for(o=0;o<=t;o++){var p=n+o*c*i,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),u.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=r=a+o*e.length,g=r+e.length,y=r+e.length+1,x=r+1;s.push(v,g,x),s.push(g,y,x)}if(this.setIndex(s),this.setAttribute("position",new Pi(l,3)),this.setAttribute("uv",new Pi(u,2)),this.computeVertexNormals(),i===2*Math.PI){var b=this.attributes.normal.array,_=new Xt,w=new Xt,M=new Xt;for(r=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)_.x=b[a+0],_.y=b[a+1],_.z=b[a+2],w.x=b[r+a+0],w.y=b[r+a+1],w.z=b[r+a+2],M.addVectors(_,w).normalize(),b[a+0]=b[r+a+0]=M.x,b[a+1]=b[r+a+1]=M.y,b[a+2]=b[r+a+2]=M.z}}function Ul(e,t){hr.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new jl(e,t)),this.mergeVertices()}function jl(e,t){zi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(a,s,l),a+=s,s=0;function u(e){var a,l,u,c=i.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;for(!1===Tl.isClockWise(d)&&(d=d.reverse()),a=0,l=p.length;a<l;a++)u=p[a],!0===Tl.isClockWise(u)&&(p[a]=u.reverse());var f=Tl.triangulateShape(d,p);for(a=0,l=p.length;a<l;a++)u=p[a],d=d.concat(u);for(a=0,l=d.length;a<l;a++){var m=d[a];i.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var v=f[a],g=v[0]+c,y=v[1]+c,x=v[2]+c;n.push(g,y,x),s+=3}}this.setIndex(n),this.setAttribute("position",new Pi(i,3)),this.setAttribute("normal",new Pi(r,3)),this.setAttribute("uv",new Pi(o,2))}function Hl(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function Vl(e,t){zi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,o,a=[],s=Math.cos(kt.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(o=new hr).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[c[v]],i=m[c[(v+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[r].face2=p;for(r in u){var g=u[r];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new Pi(a,3))}function Gl(e,t,n,i,r,o,a,s){hr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Wl(e,t,n,i,r,o,a,s)),this.mergeVertices()}function Wl(e,t,n,i,r,o,a,s){zi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],d=[],p=0,f=[],m=n/2,v=0;function g(n){var r,o,f,g=new Nt,y=new Xt,x=0,b=!0===n?e:t,_=!0===n?1:-1;for(o=p,r=1;r<=i;r++)c.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var w=r/i*s+a,M=Math.cos(w),E=Math.sin(w);y.x=b*E,y.y=m*_,y.z=b*M,c.push(y.x,y.y,y.z),h.push(0,_,0),g.x=.5*M+.5,g.y=.5*E*_+.5,d.push(g.x,g.y),p++}for(r=0;r<i;r++){var q=o+r,T=f+r;!0===n?u.push(T,T+1,q):u.push(T+1,T,q),x+=3}l.addGroup(v,x,!0===n?1:2),v+=x}(function(){var o,g,y=new Xt,x=new Xt,b=0,_=(t-e)/n;for(g=0;g<=r;g++){var w=[],M=g/r,E=M*(t-e)+e;for(o=0;o<=i;o++){var q=o/i,T=q*s+a,S=Math.sin(T),P=Math.cos(T);x.x=E*S,x.y=-M*n+m,x.z=E*P,c.push(x.x,x.y,x.z),y.set(S,_,P).normalize(),h.push(y.x,y.y,y.z),d.push(q,1-M),w.push(p++)}f.push(w)}for(o=0;o<i;o++)for(g=0;g<r;g++){var A=f[g][o],C=f[g+1][o],L=f[g+1][o+1],O=f[g][o+1];u.push(A,C,O),u.push(C,L,O),b+=6}l.addGroup(v,b,0),v+=b})(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.setAttribute("position",new Pi(c,3)),this.setAttribute("normal",new Pi(h,3)),this.setAttribute("uv",new Pi(d,2))}function Xl(e,t,n,i,r,o,a){Gl.call(this,0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Yl(e,t,n,i,r,o,a){Wl.call(this,0,e,t,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Zl(e,t,n,i){hr.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Jl(e,t,n,i)),this.mergeVertices()}function Jl(e,t,n,i){zi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,o,a=[],s=[],l=[],u=[],c=new Xt,h=new Nt;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),o=0,r=3;o<=t;o++,r+=3){var d=n+o/t*i;c.x=e*Math.cos(d),c.y=e*Math.sin(d),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[r]/e+1)/2,h.y=(s[r+1]/e+1)/2,u.push(h.x,h.y)}for(r=1;r<=t;r++)a.push(r,r+1,0);this.setIndex(a),this.setAttribute("position",new Pi(s,3)),this.setAttribute("normal",new Pi(l,3)),this.setAttribute("uv",new Pi(u,2))}Il.prototype=Object.create(hr.prototype),Il.prototype.constructor=Il,kl.prototype=Object.create(Cl.prototype),kl.prototype.constructor=kl,Nl.prototype=Object.create(hr.prototype),Nl.prototype.constructor=Nl,Rl.prototype=Object.create(zi.prototype),Rl.prototype.constructor=Rl,Dl.prototype=Object.create(hr.prototype),Dl.prototype.constructor=Dl,Bl.prototype=Object.create(zi.prototype),Bl.prototype.constructor=Bl,zl.prototype=Object.create(hr.prototype),zl.prototype.constructor=zl,Fl.prototype=Object.create(zi.prototype),Fl.prototype.constructor=Fl,Ul.prototype=Object.create(hr.prototype),Ul.prototype.constructor=Ul,Ul.prototype.toJSON=function(){var e=hr.prototype.toJSON.call(this);return Hl(this.parameters.shapes,e)},jl.prototype=Object.create(zi.prototype),jl.prototype.constructor=jl,jl.prototype.toJSON=function(){var e=zi.prototype.toJSON.call(this);return Hl(this.parameters.shapes,e)},Vl.prototype=Object.create(zi.prototype),Vl.prototype.constructor=Vl,Gl.prototype=Object.create(hr.prototype),Gl.prototype.constructor=Gl,Wl.prototype=Object.create(zi.prototype),Wl.prototype.constructor=Wl,Xl.prototype=Object.create(Gl.prototype),Xl.prototype.constructor=Xl,Yl.prototype=Object.create(Wl.prototype),Yl.prototype.constructor=Yl,Zl.prototype=Object.create(hr.prototype),Zl.prototype.constructor=Zl,Jl.prototype=Object.create(zi.prototype),Jl.prototype.constructor=Jl;var Ql=Object.freeze({__proto__:null,WireframeGeometry:Rs,ParametricGeometry:Ds,ParametricBufferGeometry:Bs,TetrahedronGeometry:Us,TetrahedronBufferGeometry:js,OctahedronGeometry:Hs,OctahedronBufferGeometry:Vs,IcosahedronGeometry:Gs,IcosahedronBufferGeometry:Ws,DodecahedronGeometry:Xs,DodecahedronBufferGeometry:Ys,PolyhedronGeometry:zs,PolyhedronBufferGeometry:Fs,TubeGeometry:Zs,TubeBufferGeometry:Js,TorusKnotGeometry:Qs,TorusKnotBufferGeometry:Ks,TorusGeometry:$s,TorusBufferGeometry:el,TextGeometry:Il,TextBufferGeometry:kl,SphereGeometry:Nl,SphereBufferGeometry:Rl,RingGeometry:Dl,RingBufferGeometry:Bl,PlaneGeometry:Cr,PlaneBufferGeometry:Lr,LatheGeometry:zl,LatheBufferGeometry:Fl,ShapeGeometry:Ul,ShapeBufferGeometry:jl,ExtrudeGeometry:Al,ExtrudeBufferGeometry:Cl,EdgesGeometry:Vl,ConeGeometry:Xl,ConeBufferGeometry:Yl,CylinderGeometry:Gl,CylinderBufferGeometry:Wl,CircleGeometry:Zl,CircleBufferGeometry:Jl,BoxGeometry:dr,BoxBufferGeometry:pr});function Kl(e){gi.call(this),this.type="ShadowMaterial",this.color=new hi(0),this.transparent=!0,this.setValues(e)}function $l(e){gr.call(this,e),this.type="RawShaderMaterial"}function eu(e){gi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new hi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function tu(e){eu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Nt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}function nu(e){gi.call(this),this.type="MeshPhongMaterial",this.color=new hi(16777215),this.specular=new hi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function iu(e){gi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new hi(16777215),this.specular=new hi(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ru(e){gi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ou(e){gi.call(this),this.type="MeshLambertMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function au(e){gi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new hi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function su(e){fs.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Kl.prototype=Object.create(gi.prototype),Kl.prototype.constructor=Kl,Kl.prototype.isShadowMaterial=!0,Kl.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this},$l.prototype=Object.create(gr.prototype),$l.prototype.constructor=$l,$l.prototype.isRawShaderMaterial=!0,eu.prototype=Object.create(gi.prototype),eu.prototype.constructor=eu,eu.prototype.isMeshStandardMaterial=!0,eu.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},tu.prototype=Object.create(eu.prototype),tu.prototype.constructor=tu,tu.prototype.isMeshPhysicalMaterial=!0,tu.prototype.copy=function(e){return eu.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new hi).copy(e.sheen):this.sheen=null,this.transparency=e.transparency,this},nu.prototype=Object.create(gi.prototype),nu.prototype.constructor=nu,nu.prototype.isMeshPhongMaterial=!0,nu.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},iu.prototype=Object.create(gi.prototype),iu.prototype.constructor=iu,iu.prototype.isMeshToonMaterial=!0,iu.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ru.prototype=Object.create(gi.prototype),ru.prototype.constructor=ru,ru.prototype.isMeshNormalMaterial=!0,ru.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ou.prototype=Object.create(gi.prototype),ou.prototype.constructor=ou,ou.prototype.isMeshLambertMaterial=!0,ou.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},au.prototype=Object.create(gi.prototype),au.prototype.constructor=au,au.prototype.isMeshMatcapMaterial=!0,au.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},su.prototype=Object.create(fs.prototype),su.prototype.constructor=su,su.prototype.isLineDashedMaterial=!0,su.prototype.copy=function(e){return fs.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var lu=Object.freeze({__proto__:null,ShadowMaterial:Kl,SpriteMaterial:za,RawShaderMaterial:$l,ShaderMaterial:gr,PointsMaterial:qs,MeshPhysicalMaterial:tu,MeshStandardMaterial:eu,MeshPhongMaterial:nu,MeshToonMaterial:iu,MeshNormalMaterial:ru,MeshLambertMaterial:ou,MeshDepthMaterial:wa,MeshDistanceMaterial:Ma,MeshBasicMaterial:yi,MeshMatcapMaterial:au,LineDashedMaterial:su,LineBasicMaterial:fs,Material:gi}),uu={arraySlice:function(e,t,n){return uu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*t,l=0;l!==t;++l)r[a++]=e[s+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)}},subclip:function(e,t,n,i,r){r=r||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var l=o.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var p=l.times[d]*r;if(!(p<n||p>=i)){c.push(l.times[d]);for(var f=0;f<u;++f)h.push(l.values[d*u+f])}}0!==c.length&&(l.times=uu.convertArray(c,l.times.constructor),l.values=uu.convertArray(h,l.values.constructor),a.push(l))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);for(var r=e.tracks.length,o=t/i,a=0;a<r;++a){var s=n.tracks[a],l=s.ValueTypeName;if("bool"!==l&&"string"!==l){var u=e.tracks.find((function(e){return e.name===s.name&&e.ValueTypeName===l}));if(void 0!==u){var c,h=s.getValueSize(),d=s.times.length-1;if(o<=s.times[0])c=uu.arraySlice(s.values,0,s.valueSize);else if(o>=s.times[d]){var p=d*h;c=uu.arraySlice(s.values,p)}else{var f=s.createInterpolant();f.evaluate(o),c=f.resultBuffer}"quaternion"===l&&new Vt(c[0],c[1],c[2],c[3]).normalize().conjugate().toArray(c);for(var m=u.times.length,v=0;v<m;++v){var g=v*h;if("quaternion"===l)Vt.multiplyQuaternionsFlat(u.values,g,c,0,u.values,g);else for(var y=0;y<h;++y)u.values[g+y]-=c[y]}}}}return e.blendMode=2501,e}};function cu(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function hu(e,t,n,i){cu.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function du(e,t,n,i){cu.call(this,e,t,n,i)}function pu(e,t,n,i){cu.call(this,e,t,n,i)}function fu(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=uu.convertArray(t,this.TimeBufferType),this.values=uu.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function mu(e,t,n){fu.call(this,e,t,n)}function vu(e,t,n,i){fu.call(this,e,t,n,i)}function gu(e,t,n,i){fu.call(this,e,t,n,i)}function yu(e,t,n,i){cu.call(this,e,t,n,i)}function xu(e,t,n,i){fu.call(this,e,t,n,i)}function bu(e,t,n,i){fu.call(this,e,t,n,i)}function _u(e,t,n,i){fu.call(this,e,t,n,i)}function wu(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:Mt,this.uuid=kt.generateUUID(),this.duration<0&&this.resetDuration()}function Mu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gu;case"vector":case"vector2":case"vector3":case"vector4":return _u;case"color":return vu;case"quaternion":return xu;case"bool":case"boolean":return mu;case"string":return bu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];uu.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(cu.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var o;n:{i:if(!(e<i)){for(var a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,e<(i=t[++n]))break t}o=t.length;break n}if(e>=r)break e;var s=t[1];for(e<s&&(n=2,r=s),a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,e>=(r=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(cu.prototype,{beforeStart_:cu.prototype.copySampleValue_,afterEnd_:cu.prototype.copySampleValue_}),hu.prototype=Object.assign(Object.create(cu.prototype),{constructor:hu,DefaultSettings_:{endingStart:bt,endingEnd:bt},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case _t:r=e,a=2*t-n;break;case wt:a=t+i[r=i.length-2]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case _t:o=e,s=2*n-t;break;case wt:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=r*u,this._offsetNext=o*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f,b=0;b!==a;++b)r[b]=v*o[u+b]+g*o[l+b]+y*o[s+b]+x*o[c+b];return r}}),du.prototype=Object.assign(Object.create(cu.prototype),{constructor:du,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(n-t)/(i-t),c=1-u,h=0;h!==a;++h)r[h]=o[l+h]*c+o[s+h]*u;return r}}),pu.prototype=Object.assign(Object.create(cu.prototype),{constructor:pu,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(fu,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:uu.convertArray(e.times,Array),values:uu.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(fu.prototype,{constructor:fu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:yt,InterpolantFactoryMethodDiscrete:function(e){return new pu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new du(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new hu(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case gt:t=this.InterpolantFactoryMethodDiscrete;break;case yt:t=this.InterpolantFactoryMethodLinear;break;case xt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gt;case this.InterpolantFactoryMethodLinear:return yt;case this.InterpolantFactoryMethodSmooth:return xt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=uu.arraySlice(n,r,o),this.values=uu.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==i&&uu.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=uu.arraySlice(this.times),t=uu.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===xt,r=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(i)s=!0;else for(var u=a*n,c=u-n,h=u+n,d=0;d!==n;++d){var p=t[u+d];if(p!==t[c+d]||p!==t[h+d]){s=!0;break}}if(s){if(a!==r){e[r]=e[a];var f=a*n,m=r*n;for(d=0;d!==n;++d)t[m+d]=t[f+d]}++r}}if(o>0){for(e[r]=e[o],f=o*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[f+d];++r}return r!==e.length?(this.times=uu.arraySlice(e,0,r),this.values=uu.arraySlice(t,0,r*n)):(this.times=e,this.values=t),this},clone:function(){var e=uu.arraySlice(this.times,0),t=uu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),mu.prototype=Object.assign(Object.create(fu.prototype),{constructor:mu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),vu.prototype=Object.assign(Object.create(fu.prototype),{constructor:vu,ValueTypeName:"color"}),gu.prototype=Object.assign(Object.create(fu.prototype),{constructor:gu,ValueTypeName:"number"}),yu.prototype=Object.assign(Object.create(cu.prototype),{constructor:yu,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(i-t),u=s+a;s!==u;s+=4)Vt.slerpFlat(r,0,o,s-a,o,s,l);return r}}),xu.prototype=Object.assign(Object.create(fu.prototype),{constructor:xu,ValueTypeName:"quaternion",DefaultInterpolation:yt,InterpolantFactoryMethodLinear:function(e){return new yu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),bu.prototype=Object.assign(Object.create(fu.prototype),{constructor:bu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),_u.prototype=Object.assign(Object.create(fu.prototype),{constructor:_u,ValueTypeName:"vector"}),Object.assign(wu,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,o=n.length;r!==o;++r)t.push(Mu(n[r]).scale(i));return new wu(e.name,e.duration,t,e.blendMode)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,o=n.length;r!==o;++r)t.push(fu.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var u=uu.getKeyframeOrder(s);s=uu.sortedArray(s,1,u),l=uu.sortedArray(l,1,u),!i&&0===s[0]&&(s.push(r),l.push(l[0])),o.push(new gu(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new wu(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(r);if(l&&l.length>1){var u=i[h=l[1]];u||(i[h]=u=[]),u.push(s)}}var c=[];for(var h in i)c.push(wu.CreateFromMorphTargetSequence(h,i[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var o=[],a=[];uu.flattenJSON(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.blendMode,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var p=0;p<c[d].morphTargets.length;p++)h[c[d].morphTargets[p]]=-1;for(var f in h){var m=[],v=[];for(p=0;p!==c[d].morphTargets.length;++p){var g=c[d];m.push(g.time),v.push(g.morphTarget===f?1:0)}i.push(new gu(".morphTargetInfluence["+f+"]",m,v))}o=h.length*(a||1)}else{var y=".bones["+t[u].name+"]";n(_u,y+".position",c,"pos",i),n(xu,y+".quaternion",c,"rot",i),n(_u,y+".scale",c,"scl",i)}}return 0===i.length?null:new wu(r,o,i,s)}}),Object.assign(wu.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new wu(this.name,this.duration,e,this.blendMode)}});var Eu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function qu(e,t,n){var i=this,r=!1,o=0,a=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var i=l[t],r=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}}var Tu=new qu;function Su(e){this.manager=void 0!==e?e:Tu,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Su.prototype,{load:function(){},loadAsync:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});var Pu={};function Au(e){Su.call(this,e)}function Cu(e){Su.call(this,e)}function Lu(e){Su.call(this,e)}function Ou(e){Su.call(this,e)}function Iu(e){Su.call(this,e)}function ku(e){Su.call(this,e)}function Nu(e){Su.call(this,e)}function Ru(){this.type="Curve",this.arcLengthDivisions=200}function Du(e,t,n,i,r,o,a,s){Ru.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Bu(e,t,n,i,r,o){Du.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function zu(){var e=0,t=0,n=0,i=0;function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(i-t)/(a+s)+(i-n)/s;r(t,n,l*=a,u*=a)},calc:function(r){var o=r*r;return e+t*r+n*o+i*(o*r)}}}Au.prototype=Object.assign(Object.create(Su.prototype),{constructor:Au,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Eu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;if(void 0===Pu[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],u=a[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(u.length),p=0;p<u.length;p++)d[p]=u.charCodeAt(p);c="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){t&&t(c),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Pu[e]=[],Pu[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response,i=Pu[e];if(delete Pu[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Eu.add(e,n);for(var o=0,a=i.length;o<a;o++)(s=i[o]).onLoad&&s.onLoad(n);r.manager.itemEnd(e)}else{for(o=0,a=i.length;o<a;o++){var s;(s=i[o]).onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=Pu[e],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=Pu[e];delete Pu[e];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=Pu[e];delete Pu[e];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(e),m}Pu[e].push({onLoad:t,onProgress:n,onError:i})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),Cu.prototype=Object.assign(Object.create(Su.prototype),{constructor:Cu,load:function(e,t,n,i){var r=this,o=new Au(r.manager);o.setPath(r.path),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=wu.parse(e[n]);t.push(i)}return t}}),Lu.prototype=Object.assign(Object.create(Su.prototype),{constructor:Lu,load:function(e,t,n,i){var r=this,o=[],a=new Is;a.image=o;var s=new Au(this.manager);function l(l){s.load(e[l],(function(e){var n=r.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=ot),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=r.parse(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ot),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,i);return a}}),Ou.prototype=Object.assign(Object.create(Su.prototype),{constructor:Ou,load:function(e,t,n,i){var r=this,o=new Mr,a=new Au(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var n=r.parse(e);!n||(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:et,o.wrapT=void 0!==n.wrapT?n.wrapT:et,o.magFilter=void 0!==n.magFilter?n.magFilter:ot,o.minFilter=void 0!==n.minFilter?n.minFilter:ot,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=at),1===n.mipmapCount&&(o.minFilter=ot),o.needsUpdate=!0,t&&t(o,n))}),n,i),o}}),Iu.prototype=Object.assign(Object.create(Su.prototype),{constructor:Iu,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Eu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),Eu.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}),ku.prototype=Object.assign(Object.create(Su.prototype),{constructor:ku,load:function(e,t,n,i){var r=new Gr,o=new Iu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){r.images[n]=e,6===++a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)s(l);return r}}),Nu.prototype=Object.assign(Object.create(Su.prototype),{constructor:Nu,load:function(e,t,n,i){var r=new Ft,o=new Iu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){r.image=n;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?pt:ft,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(Ru.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,o=i.length;n=t||e*i[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(o-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(o-1)},getTangent:function(e,t){var n=1e-4,i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);var o=this.getPoint(i),a=this.getPoint(r),s=t||(o.isVector2?new Nt:new Xt);return s.copy(a).sub(o).normalize(),s},getTangentAt:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){var n,i,r,o=new Xt,a=[],s=[],l=[],u=new Xt,c=new tn;for(n=0;n<=e;n++)i=n/e,a[n]=this.getTangentAt(i,new Xt),a[n].normalize();s[0]=new Xt,l[0]=new Xt;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(kt.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(a[n],s[n]);if(!0===t)for(r=Math.acos(kt.clamp(s[0].dot(s[e]),-1,1)),r/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(r=-r),n=1;n<=e;n++)s[n].applyMatrix4(c.makeRotationAxis(a[n],r*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Du.prototype=Object.create(Ru.prototype),Du.prototype.constructor=Du,Du.prototype.isEllipseCurve=!0,Du.prototype.getPoint=function(e,t){for(var n=t||new Nt,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0===this.aClockwise&&!o&&(r===i?r=-i:r-=i);var a=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return n.set(s,l)},Du.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Du.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Du.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Bu.prototype=Object.create(Du.prototype),Bu.prototype.constructor=Bu,Bu.prototype.isArcCurve=!0;var Fu=new Xt,Uu=new zu,ju=new zu,Hu=new zu;function Vu(e,t,n,i){Ru.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Gu(e,t,n,i,r){var o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function Wu(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Xu(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Yu(e,t,n,i){Ru.call(this),this.type="CubicBezierCurve",this.v0=e||new Nt,this.v1=t||new Nt,this.v2=n||new Nt,this.v3=i||new Nt}function Zu(e,t,n,i){Ru.call(this),this.type="CubicBezierCurve3",this.v0=e||new Xt,this.v1=t||new Xt,this.v2=n||new Xt,this.v3=i||new Xt}function Ju(e,t){Ru.call(this),this.type="LineCurve",this.v1=e||new Nt,this.v2=t||new Nt}function Qu(e,t){Ru.call(this),this.type="LineCurve3",this.v1=e||new Xt,this.v2=t||new Xt}function Ku(e,t,n){Ru.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Nt,this.v1=t||new Nt,this.v2=n||new Nt}function $u(e,t,n){Ru.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Xt,this.v1=t||new Xt,this.v2=n||new Xt}function ec(e){Ru.call(this),this.type="SplineCurve",this.points=e||[]}Vu.prototype=Object.create(Ru.prototype),Vu.prototype.constructor=Vu,Vu.prototype.isCatmullRomCurve3=!0,Vu.prototype.getPoint=function(e,t){var n,i,r,o,a=t||new Xt,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?n=s[(c-1)%l]:(Fu.subVectors(s[0],s[1]).add(s[0]),n=Fu),i=s[c%l],r=s[(c+1)%l],this.closed||c+2<l?o=s[(c+2)%l]:(Fu.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Fu),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Uu.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,p,f,m),ju.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,p,f,m),Hu.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Uu.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),ju.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),Hu.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return a.set(Uu.calc(h),ju.calc(h),Hu.calc(h)),a},Vu.prototype.copy=function(e){Ru.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Vu.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Vu.prototype.fromJSON=function(e){Ru.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Xt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Yu.prototype=Object.create(Ru.prototype),Yu.prototype.constructor=Yu,Yu.prototype.isCubicBezierCurve=!0,Yu.prototype.getPoint=function(e,t){var n=t||new Nt,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Xu(e,i.x,r.x,o.x,a.x),Xu(e,i.y,r.y,o.y,a.y)),n},Yu.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Yu.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Yu.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Zu.prototype=Object.create(Ru.prototype),Zu.prototype.constructor=Zu,Zu.prototype.isCubicBezierCurve3=!0,Zu.prototype.getPoint=function(e,t){var n=t||new Xt,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Xu(e,i.x,r.x,o.x,a.x),Xu(e,i.y,r.y,o.y,a.y),Xu(e,i.z,r.z,o.z,a.z)),n},Zu.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Zu.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Zu.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ju.prototype=Object.create(Ru.prototype),Ju.prototype.constructor=Ju,Ju.prototype.isLineCurve=!0,Ju.prototype.getPoint=function(e,t){var n=t||new Nt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ju.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ju.prototype.getTangent=function(e,t){return(t||new Nt).copy(this.v2).sub(this.v1).normalize()},Ju.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ju.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ju.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Qu.prototype=Object.create(Ru.prototype),Qu.prototype.constructor=Qu,Qu.prototype.isLineCurve3=!0,Qu.prototype.getPoint=function(e,t){var n=t||new Xt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Qu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Qu.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Qu.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Qu.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ku.prototype=Object.create(Ru.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isQuadraticBezierCurve=!0,Ku.prototype.getPoint=function(e,t){var n=t||new Nt,i=this.v0,r=this.v1,o=this.v2;return n.set(Wu(e,i.x,r.x,o.x),Wu(e,i.y,r.y,o.y)),n},Ku.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ku.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ku.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$u.prototype=Object.create(Ru.prototype),$u.prototype.constructor=$u,$u.prototype.isQuadraticBezierCurve3=!0,$u.prototype.getPoint=function(e,t){var n=t||new Xt,i=this.v0,r=this.v1,o=this.v2;return n.set(Wu(e,i.x,r.x,o.x),Wu(e,i.y,r.y,o.y),Wu(e,i.z,r.z,o.z)),n},$u.prototype.copy=function(e){return Ru.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$u.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$u.prototype.fromJSON=function(e){return Ru.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ec.prototype=Object.create(Ru.prototype),ec.prototype.constructor=ec,ec.prototype.isSplineCurve=!0,ec.prototype.getPoint=function(e,t){var n=t||new Nt,i=this.points,r=(i.length-1)*e,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],u=i[o>i.length-2?i.length-1:o+1],c=i[o>i.length-3?i.length-1:o+2];return n.set(Gu(a,s.x,l.x,u.x,c.x),Gu(a,s.y,l.y,u.y,c.y)),n},ec.prototype.copy=function(e){Ru.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},ec.prototype.toJSON=function(){var e=Ru.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},ec.prototype.fromJSON=function(e){Ru.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Nt).fromArray(i))}return this};var tc=Object.freeze({__proto__:null,ArcCurve:Bu,CatmullRomCurve3:Vu,CubicBezierCurve:Yu,CubicBezierCurve3:Zu,EllipseCurve:Du,LineCurve:Ju,LineCurve3:Qu,QuadraticBezierCurve:Ku,QuadraticBezierCurve3:$u,SplineCurve:ec});function nc(){Ru.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ic(e){nc.call(this),this.type="Path",this.currentPoint=new Nt,e&&this.setFromPoints(e)}function rc(e){ic.call(this,e),this.uuid=kt.generateUUID(),this.type="Shape",this.holes=[]}function oc(e,t){bn.call(this),this.type="Light",this.color=new hi(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ac(e,t,n){oc.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(bn.DefaultUp),this.updateMatrix(),this.groundColor=new hi(t)}function sc(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Nt(512,512),this.map=null,this.mapPass=null,this.matrix=new tn,this._frustum=new Tr,this._frameExtents=new Nt(1,1),this._viewportCount=1,this._viewports=[new Ut(0,0,1,1)]}function lc(){sc.call(this,new xr(50,1,.5,500))}function uc(e,t,n,i,r,o){oc.call(this,e,t),this.type="SpotLight",this.position.copy(bn.DefaultUp),this.updateMatrix(),this.target=new bn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new lc}function cc(){sc.call(this,new xr(90,1,.5,500)),this._frameExtents=new Nt(4,2),this._viewportCount=6,this._viewports=[new Ut(2,1,1,1),new Ut(0,1,1,1),new Ut(3,1,1,1),new Ut(1,1,1,1),new Ut(3,0,1,1),new Ut(1,0,1,1)],this._cubeDirections=[new Xt(1,0,0),new Xt(-1,0,0),new Xt(0,0,1),new Xt(0,0,-1),new Xt(0,1,0),new Xt(0,-1,0)],this._cubeUps=[new Xt(0,1,0),new Xt(0,1,0),new Xt(0,1,0),new Xt(0,1,0),new Xt(0,0,1),new Xt(0,0,-1)]}function hc(e,t,n,i){oc.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new cc}function dc(e,t,n,i,r,o){yr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function pc(){sc.call(this,new dc(-5,5,5,-5,.5,500))}function fc(e,t){oc.call(this,e,t),this.type="DirectionalLight",this.position.copy(bn.DefaultUp),this.updateMatrix(),this.target=new bn,this.shadow=new pc}function mc(e,t){oc.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function vc(e,t,n,i){oc.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function gc(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Xt)}function yc(e,t){oc.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new gc}function xc(e){Su.call(this,e),this.textures={}}nc.prototype=Object.assign(Object.create(Ru.prototype),{constructor:nc,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ju(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Ru.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ru.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Ru.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new tc[i.type]).fromJSON(i))}return this}}),ic.prototype=Object.assign(Object.create(nc.prototype),{constructor:ic,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Ju(this.currentPoint.clone(),new Nt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){var r=new Ku(this.currentPoint.clone(),new Nt(e,t),new Nt(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,o){var a=new Yu(this.currentPoint.clone(),new Nt(e,t),new Nt(n,i),new Nt(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this},splineThru:function(e){var t=new ec([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,i,r,o),this},absarc:function(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this},ellipse:function(e,t,n,i,r,o,a,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,o,a,s),this},absellipse:function(e,t,n,i,r,o,a,s){var l=new Du(e,t,n,i,r,o,a,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return nc.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=nc.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return nc.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),rc.prototype=Object.assign(Object.create(ic.prototype),{constructor:rc,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ic.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=ic.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){ic.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new ic).fromJSON(i))}return this}}),oc.prototype=Object.assign(Object.create(bn.prototype),{constructor:oc,isLight:!0,copy:function(e){return bn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=bn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ac.prototype=Object.assign(Object.create(oc.prototype),{constructor:ac,isHemisphereLight:!0,copy:function(e){return oc.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(sc.prototype,{_projScreenMatrix:new tn,_lightPositionWorld:new Xt,_lookTarget:new Xt,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),lc.prototype=Object.assign(Object.create(sc.prototype),{constructor:lc,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*kt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),sc.prototype.updateMatrices.call(this,e)}}),uc.prototype=Object.assign(Object.create(oc.prototype),{constructor:uc,isSpotLight:!0,copy:function(e){return oc.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),cc.prototype=Object.assign(Object.create(sc.prototype),{constructor:cc,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),hc.prototype=Object.assign(Object.create(oc.prototype),{constructor:hc,isPointLight:!0,copy:function(e){return oc.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),dc.prototype=Object.assign(Object.create(yr.prototype),{constructor:dc,isOrthographicCamera:!0,copy:function(e,t){return yr.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(r+=l*this.view.offsetX)+l*this.view.width,s=(a-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=bn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),pc.prototype=Object.assign(Object.create(sc.prototype),{constructor:pc,isDirectionalLightShadow:!0,updateMatrices:function(e){sc.prototype.updateMatrices.call(this,e)}}),fc.prototype=Object.assign(Object.create(oc.prototype),{constructor:fc,isDirectionalLight:!0,copy:function(e){return oc.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),mc.prototype=Object.assign(Object.create(oc.prototype),{constructor:mc,isAmbientLight:!0}),vc.prototype=Object.assign(Object.create(oc.prototype),{constructor:vc,isRectAreaLight:!0,copy:function(e){return oc.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=oc.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(gc.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}),Object.assign(gc,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),yc.prototype=Object.assign(Object.create(oc.prototype),{constructor:yc,isLightProbe:!0,copy:function(e){return oc.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){var t=oc.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),xc.prototype=Object.assign(Object.create(Su.prototype),{constructor:xc,load:function(e,t,n,i){var r=this,o=new Au(r.manager);o.setPath(r.path),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new lu[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new hi).setHex(e.sheen)),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var r in e.uniforms){var o=e.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=n(o.value);break;case"c":i.uniforms[r].value=(new hi).setHex(o.value);break;case"v2":i.uniforms[r].value=(new Nt).fromArray(o.value);break;case"v3":i.uniforms[r].value=(new Xt).fromArray(o.value);break;case"v4":i.uniforms[r].value=(new Ut).fromArray(o.value);break;case"m3":i.uniforms[r].value=(new Rt).fromArray(o.value);case"m4":i.uniforms[r].value=(new tn).fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)i.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new Nt).fromArray(s)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Nt).fromArray(e.clearcoatNormalScale)),i},setTextures:function(e){return this.textures=e,this}});var bc=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function _c(){zi.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function wc(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),bi.call(this,e,t,n),this.meshPerAttribute=i||1}function Mc(e){Su.call(this,e)}_c.prototype=Object.assign(Object.create(zi.prototype),{constructor:_c,isInstancedBufferGeometry:!0,copy:function(e){return zi.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=zi.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),wc.prototype=Object.assign(Object.create(bi.prototype),{constructor:wc,isInstancedBufferAttribute:!0,copy:function(e){return bi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=bi.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Mc.prototype=Object.assign(Object.create(Su.prototype),{constructor:Mc,load:function(e,t,n,i){var r=this,o=new Au(r.manager);o.setPath(r.path),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){var t=e.isInstancedBufferGeometry?new _c:new zi,n=e.data.index;if(void 0!==n){var i=new Ec[n.type](n.array);t.setIndex(new bi(i,1))}var r=e.data.attributes;for(var o in r){var a=r[o],s=(i=new Ec[a.type](a.array),new(a.isInstancedBufferAttribute?wc:bi)(i,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.setAttribute(o,s)}var l=e.data.morphAttributes;if(l)for(var o in l){for(var u=l[o],c=[],h=0,d=u.length;h<d;h++)a=u[h],s=new bi(i=new Ec[a.type](a.array),a.itemSize,a.normalized),void 0!==a.name&&(s.name=a.name),c.push(s);t.morphAttributes[o]=c}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];t.addGroup(m.start,m.count,m.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new Xt;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new Bn(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var Ec={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function qc(e){Su.call(this,e)}qc.prototype=Object.assign(Object.create(Su.prototype),{constructor:qc,load:function(e,t,n,i){var r=this,o=""===this.path?bc(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Au(r.manager);a.setPath(this.path),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),(void 0===e.images||0===e.images.length)&&void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new rc).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Mc,r=0,o=e.length;r<o;r++){var a,s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Ql[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Ql[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Ql[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Ql[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Ql[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Ql[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Ql[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Ql[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Ql[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Ql[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Ql[s.type]((new tc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Ql[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Ql[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=t[s.shapes[u]];l.push(h)}a=new Ql[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++)h=t[s.shapes[u]],l.push(h);var d=s.options.extrudePath;void 0!==d&&(s.options.extrudePath=(new tc[d.type]).fromJSON(d)),a=new Ql[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new xc;r.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=wu.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new Iu(new qu(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],u=l.url;if(Array.isArray(u)){i[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var d=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[l.uuid].push(r(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url,i[l.uuid]=r(p)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var a,s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Gr(t[s.image]):new Ft(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Tc)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Sc),a.wrapT=n(s.wrap[1],Sc)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Pc)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Pc)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),i[s.uuid]=a}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new _n,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new hi(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Na(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new ka(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new xr(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new dc(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new mc(e.color,e.intensity);break;case"DirectionalLight":i=new fc(e.color,e.intensity);break;case"PointLight":i=new hc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new vc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new uc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new ac(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new yc).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":i=new rr(a=r(e.geometry),s=o(e.material));break;case"InstancedMesh":var a=r(e.geometry),s=o(e.material),l=e.count,u=e.instanceMatrix;(i=new ps(a,s,l)).instanceMatrix=new bi(new Float32Array(u.array),16);break;case"LOD":i=new is;break;case"Line":i=new bs(r(e.geometry),o(e.material),e.mode);break;case"LineLoop":i=new Es(r(e.geometry),o(e.material));break;case"LineSegments":i=new Ms(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":i=new Cs(r(e.geometry),o(e.material));break;case"Sprite":i=new $a(o(e.material));break;case"Group":i=new Aa;break;default:i=new bn}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,h=0;h<c.length;h++)i.add(this.parseObject(c[h],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);for(var d=e.levels,p=0;p<d.length;p++){var f=d[p],m=i.getObjectByProperty("uuid",f.object);void 0!==m&&i.addLevel(m,f.distance)}}return i}});var Tc={UVMapping:Qe,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:Ke,CubeUVRefractionMapping:307},Sc={RepeatWrapping:$e,ClampToEdgeWrapping:et,MirroredRepeatWrapping:tt},Pc={NearestFilter:nt,NearestMipmapNearestFilter:it,NearestMipmapLinearFilter:rt,LinearFilter:ot,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:at};function Ac(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Su.call(this,e),this.options=void 0}function Cc(){this.type="ShapePath",this.color=new hi,this.subPaths=[],this.currentPath=null}function Lc(e){this.type="Font",this.data=e}function Oc(e,t,n,i,r){var o=r.glyphs[e]||r.glyphs["?"];if(o){var a,s,l,u,c,h,d,p,f=new Cc;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+i,f.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+i,f.lineTo(a,s);break;case"q":l=m[v++]*t+n,u=m[v++]*t+i,c=m[v++]*t+n,h=m[v++]*t+i,f.quadraticCurveTo(c,h,l,u);break;case"b":l=m[v++]*t+n,u=m[v++]*t+i,c=m[v++]*t+n,h=m[v++]*t+i,d=m[v++]*t+n,p=m[v++]*t+i,f.bezierCurveTo(c,h,d,p,l,u)}return{offsetX:o.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".")}function Ic(e){Su.call(this,e)}Ac.prototype=Object.assign(Object.create(Su.prototype),{constructor:Ac,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Eu.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)})).then((function(n){Eu.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(Cc.prototype,{moveTo:function(e,t){return this.currentPath=new ic,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new rc;o.curves=r.curves,t.push(o)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=t[r],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],l=-l,s=t[r],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=u*(e.x-a.x)-l*(e.y-a.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return i}var r=Tl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,u=[];if(1===o.length)return s=o[0],(l=new rc).curves=s.curves,u.push(l),u;var c=!r(o[0].getPoints());c=e?!c:c;var h,d=[],p=[],f=[],m=0;p[m]=void 0,f[m]=[];for(var v=0,g=o.length;v<g;v++)a=r(h=(s=o[v]).getPoints()),(a=e?!a:a)?(!c&&p[m]&&m++,p[m]={s:new rc,p:h},p[m].s.curves=s.curves,c&&m++,f[m]=[]):f[m].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var y=!1,x=[],b=0,_=p.length;b<_;b++)d[b]=[];for(b=0,_=p.length;b<_;b++)for(var w=f[b],M=0;M<w.length;M++){for(var E=w[M],q=!0,T=0;T<p.length;T++)i(E.p,p[T].p)&&(b!==T&&x.push({froms:b,tos:T,hole:M}),q?(q=!1,d[T].push(E)):y=!0);q&&d[b].push(E)}x.length>0&&(y||(f=d))}v=0;for(var S,P=p.length;v<P;v++){l=p[v].s,u.push(l);for(var A=0,C=(S=f[v]).length;A<C;A++)l.holes.push(S[A].h)}return u}}),Object.assign(Lc.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[],s=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)s=0,l-=o;else{var h=Oc(c,r,s,l,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Ic.prototype=Object.assign(Object.create(Su.prototype),{constructor:Ic,load:function(e,t,n,i){var r=this,o=new Au(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new Lc(e)}});var kc,Nc=function(){return void 0===kc&&(kc=new(window.AudioContext||window.webkitAudioContext)),kc};function Rc(e){Su.call(this,e)}function Dc(e,t,n){yc.call(this,void 0,n);var i=(new hi).set(e),r=(new hi).set(t),o=new Xt(i.r,i.g,i.b),a=new Xt(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function Bc(e,t){yc.call(this,void 0,t);var n=(new hi).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Rc.prototype=Object.assign(Object.create(Su.prototype),{constructor:Rc,load:function(e,t,n,i){var r=this,o=new Au(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.load(e,(function(n){try{var o=n.slice(0);Nc().decodeAudioData(o,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}),Dc.prototype=Object.assign(Object.create(yc.prototype),{constructor:Dc,isHemisphereLightProbe:!0,copy:function(e){return yc.prototype.copy.call(this,e),this},toJSON:function(e){return yc.prototype.toJSON.call(this,e)}}),Bc.prototype=Object.assign(Object.create(yc.prototype),{constructor:Bc,isAmbientLightProbe:!0,copy:function(e){return yc.prototype.copy.call(this,e),this},toJSON:function(e){return yc.prototype.toJSON.call(this,e)}});var zc=new tn,Fc=new tn;function Uc(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,i,r=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(kt.DEG2RAD*t.fov*.5)/t.zoom;Fc.elements[12]=-o,zc.elements[12]=o,n=-s*t.aspect+a,i=s*t.aspect+a,r.elements[0]=2*t.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-s*t.aspect-a,i=s*t.aspect-a,r.elements[0]=2*t.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Fc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(zc)}}),Object.assign(Uc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var jc=new Xt,Hc=new Vt,Vc=new Xt,Gc=new Xt;function Wc(){bn.call(this),this.type="AudioListener",this.context=Nc(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Uc}function Xc(e){bn.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Wc.prototype=Object.assign(Object.create(bn.prototype),{constructor:Wc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){bn.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jc,Hc,Vc),Gc.set(0,0,-1).applyQuaternion(Hc),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(jc.x,i),t.positionY.linearRampToValueAtTime(jc.y,i),t.positionZ.linearRampToValueAtTime(jc.z,i),t.forwardX.linearRampToValueAtTime(Gc.x,i),t.forwardY.linearRampToValueAtTime(Gc.y,i),t.forwardZ.linearRampToValueAtTime(Gc.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(jc.x,jc.y,jc.z),t.setOrientation(Gc.x,Gc.y,Gc.z,n.x,n.y,n.z)}}),Xc.prototype=Object.assign(Object.create(bn.prototype),{constructor:Xc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Yc=new Xt,Zc=new Vt,Jc=new Xt,Qc=new Xt;function Kc(e){Xc.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function $c(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function eh(e,t,n){var i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Kc.prototype=Object.assign(Object.create(Xc.prototype),{constructor:Kc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(bn.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Yc,Zc,Jc),Qc.set(0,0,1).applyQuaternion(Zc);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Yc.x,n),t.positionY.linearRampToValueAtTime(Yc.y,n),t.positionZ.linearRampToValueAtTime(Yc.z,n),t.orientationX.linearRampToValueAtTime(Qc.x,n),t.orientationY.linearRampToValueAtTime(Qc.y,n),t.orientationZ.linearRampToValueAtTime(Qc.z,n)}else t.setPosition(Yc.x,Yc.y,Yc.z),t.setOrientation(Qc.x,Qc.y,Qc.z)}}}),Object.assign($c.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(eh.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},accumulateAdditive:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=t*this._origIndex;this._mixBufferRegion(n,i,s,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){Vt.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){var o=this._workIndex*r;Vt.multiplyQuaternionsFlat(e,o,e,t,e,n),Vt.slerpFlat(e,t,e,t,e,o,i)},_lerp:function(e,t,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*i}},_lerpAdditive:function(e,t,n,i,r){for(var o=0;o!==r;++o){var a=t+o;e[a]=e[a]+e[n+o]*i}}});var th="\\[\\]\\.:\\/",nh=new RegExp("["+th+"]","g"),ih="[^"+th+"]",rh="[^"+th.replace("\\.","")+"]",oh=/((?:WC+[\/:])*)/.source.replace("WC",ih),ah=/(WCOD+)?/.source.replace("WCOD",rh),sh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ih),lh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ih),uh=new RegExp("^"+oh+ah+sh+lh+"$"),ch=["material","materials","bones"];function hh(e,t,n){var i=n||dh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function dh(e,t,n){this.path=t,this.parsedPath=n||dh.parseTrackName(t),this.node=dh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ph(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;for(var r=t.tracks,o=r.length,a=new Array(o),s={endingStart:bt,endingEnd:bt},l=0;l!==o;++l){var u=r[l].createInterpolant(null);a[l]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function fh(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function mh(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function vh(e,t,n){Ra.call(this,e,t),this.meshPerAttribute=n||1}function gh(e,t,n,i){this.ray=new Wn(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new an,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function yh(e,t){return e.distance-t.distance}function xh(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,o=0,a=r.length;o<a;o++)xh(r[o],t,n,!0)}Object.assign(hh.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(dh,{Composite:hh,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new dh.Composite(e,t,n):new dh(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(nh,"")},parseTrackName:function(e){var t=uh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==ch.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var o=e(r.children);if(o)return o}return null}(e.children);if(i)return i}return null}}),Object.assign(dh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=dh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(dh.prototype,{_getValue_unbound:dh.prototype.getValue,_setValue_unbound:dh.prototype.setValue}),Object.assign(function(){this.uuid=kt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,p=i[d];if(void 0===p){p=t++,i[d]=p,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new dh(h,r[f],o[f]))}else if(p<n){l=e[p];var v=--n,g=e[v];for(i[g.uuid]=p,e[p]=g,i[d]=v,e[v]=h,f=0,m=s;f!==m;++f){var y=a[f],x=y[v],b=y[p];y[p]=x,void 0===b&&(b=new dh(h,r[f],o[f])),y[v]=b}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];n[h.uuid]=u,e[u]=h,n[l]=c,e[c]=s;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[c],v=f[u];f[u]=m,f[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var h=--n,d=e[h],p=e[y=--t];i[d.uuid]=c,e[c]=d,i[p.uuid]=h,e[h]=p,e.pop();for(var f=0,m=o;f!==m;++f){var v=(x=r[f])[h],g=x[y];x[c]=v,x[h]=g,x.pop()}}else{var y;for(i[(p=e[y=--t]).uuid]=c,e[c]=p,e.pop(),f=0,m=o;f!==m;++f){var x;(x=r[f])[c]=x[y],x.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(c);for(var h=u,d=s.length;h!==d;++h){var p=s[h];c[h]=new dh(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(ph.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,o=r/i,a=i/r;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(e-r)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(2501===this.blendMode)for(var c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulateAdditive(s);else for(c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulate(i,s)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,o=2202===i;if(0===e)return-1===r?t:o&&1==(1&r)?n-t:t;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1==(1&r))return n-t}return t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=_t,i.endingEnd=_t):(i.endingStart=e?this.zeroSlopeAtStart?_t:bt:wt,i.endingEnd=t?this.zeroSlopeAtEnd?_t:bt:wt)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}),fh.prototype=Object.assign(Object.create(Lt.prototype),{constructor:fh,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==r;++c){var h=i[c],d=h.name,p=u[d];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new eh(dh.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],o=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new du(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){var i=t||this._root,r=i.uuid,o="string"==typeof e?wu.findByName(i,e):e,a=null!==o?o.uuid:e,s=this._actionsByClip[a],l=null;if(void 0===n&&(n=null!==o?o.blendMode:Mt),void 0!==s){var u=s.actionByRoot[r];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;var c=new ph(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?wu.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a)t[a]._update(i,e,r,o);var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),mh.prototype.clone=function(){return new mh(void 0===this.value.clone?this.value:this.value.clone())},vh.prototype=Object.assign(Object.create(Ra.prototype),{constructor:vh,isInstancedInterleavedBuffer:!0,copy:function(e){return Ra.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(gh.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return xh(e,this,i,t),i.sort(yh),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=e.length;r<o;r++)xh(e[r],this,i,t);return i.sort(yh),i}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(kt.clamp(t/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var bh=new Nt;function _h(e,t){this.min=void 0!==e?e:new Nt(1/0,1/0),this.max=void 0!==t?t:new Nt(-1/0,-1/0)}Object.assign(_h.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=bh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Nt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Nt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Nt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Nt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return bh.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var wh=new Xt,Mh=new Xt;function Eh(e,t){this.start=void 0!==e?e:new Xt,this.end=void 0!==t?t:new Xt}function qh(e){bn.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign(Eh.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Xt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Xt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Xt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){wh.subVectors(e,this.start),Mh.subVectors(this.end,this.start);var n=Mh.dot(Mh),i=Mh.dot(wh)/n;return t&&(i=kt.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Xt),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),qh.prototype=Object.create(bn.prototype),qh.prototype.constructor=qh,qh.prototype.isImmediateRenderObject=!0;var Th=new Xt;function Sh(e,t){bn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new zi,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Pi(i,3));var l=new fs({fog:!1,toneMapped:!1});this.cone=new Ms(n,l),this.add(this.cone),this.update()}Sh.prototype=Object.create(bn.prototype),Sh.prototype.constructor=Sh,Sh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Sh.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Th.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Th),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Ph=new Xt,Ah=new tn,Ch=new tn;function Lh(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Lh(e.children[n]));return t}function Oh(e){for(var t=Lh(e),n=new zi,i=[],r=[],o=new hi(0,0,1),a=new hi(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Pi(i,3)),n.setAttribute("color",new Pi(r,3));var u=new fs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Ms.call(this,n,u),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Ih(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Rl(t,4,2),r=new yi({wireframe:!0,fog:!1,toneMapped:!1});rr.call(this,i,r),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Oh.prototype=Object.create(Ms.prototype),Oh.prototype.constructor=Oh,Oh.prototype.isSkeletonHelper=!0,Oh.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,i=n.getAttribute("position");Ch.getInverse(this.root.matrixWorld);for(var r=0,o=0;r<t.length;r++){var a=t[r];a.parent&&a.parent.isBone&&(Ah.multiplyMatrices(Ch,a.matrixWorld),Ph.setFromMatrixPosition(Ah),i.setXYZ(o,Ph.x,Ph.y,Ph.z),Ah.multiplyMatrices(Ch,a.parent.matrixWorld),Ph.setFromMatrixPosition(Ah),i.setXYZ(o+1,Ph.x,Ph.y,Ph.z),o+=2)}n.getAttribute("position").needsUpdate=!0,bn.prototype.updateMatrixWorld.call(this,e)},Ih.prototype=Object.create(rr.prototype),Ih.prototype.constructor=Ih,Ih.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ih.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var kh=new Xt,Nh=new hi,Rh=new hi;function Dh(e,t,n){bn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Vs(t);i.rotateY(.5*Math.PI),this.material=new yi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new bi(o,3)),this.add(new rr(i,this.material)),this.update()}function Bh(e,t,n,i){e=e||10,t=t||10,n=new hi(void 0!==n?n:4473924),i=new hi(void 0!==i?i:8947848);for(var r=t/2,o=e/t,a=e/2,s=[],l=[],u=0,c=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=u===r?n:i;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var p=new zi;p.setAttribute("position",new Pi(s,3)),p.setAttribute("color",new Pi(l,3));var f=new fs({vertexColors:!0,toneMapped:!1});Ms.call(this,p,f),this.type="GridHelper"}function zh(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new hi(void 0!==r?r:4473924),o=new hi(void 0!==o?o:8947848);var a,s,l,u,c,h,d,p=[],f=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),d=1&u?r:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?r:o,h=e-e/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),l=(c+1)/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new zi;m.setAttribute("position",new Pi(p,3)),m.setAttribute("color",new Pi(f,3));var v=new fs({vertexColors:!0,toneMapped:!1});Ms.call(this,m,v),this.type="PolarGridHelper"}Dh.prototype=Object.create(bn.prototype),Dh.prototype.constructor=Dh,Dh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Dh.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Nh.copy(this.light.color),Rh.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?Nh:Rh;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(kh.setFromMatrixPosition(this.light.matrixWorld).negate())},Bh.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Bh,copy:function(e){return Ms.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),zh.prototype=Object.create(Ms.prototype),zh.prototype.constructor=zh;var Fh=new Xt,Uh=new Xt,jh=new Xt;function Hh(e,t,n){bn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new zi;i.setAttribute("position",new Pi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new fs({fog:!1,toneMapped:!1});this.lightPlane=new bs(i,r),this.add(this.lightPlane),(i=new zi).setAttribute("position",new Pi([0,0,0,0,0,1],3)),this.targetLine=new bs(i,r),this.add(this.targetLine),this.update()}Hh.prototype=Object.create(bn.prototype),Hh.prototype.constructor=Hh,Hh.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Hh.prototype.update=function(){Fh.setFromMatrixPosition(this.light.matrixWorld),Uh.setFromMatrixPosition(this.light.target.matrixWorld),jh.subVectors(Uh,Fh),this.lightPlane.lookAt(Uh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Uh),this.targetLine.scale.z=jh.length()};var Vh=new Xt,Gh=new yr;function Wh(e){var t=new zi,n=new fs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={},a=new hi(16755200),s=new hi(16711680),l=new hi(43775),u=new hi(16777215),c=new hi(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.setAttribute("position",new Pi(i,3)),t.setAttribute("color",new Pi(r,3)),Ms.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Xh(e,t,n,i,r,o,a){Vh.set(r,o,a).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Vh.x,Vh.y,Vh.z)}Wh.prototype=Object.create(Ms.prototype),Wh.prototype.constructor=Wh,Wh.prototype.update=function(){var e=this.geometry,t=this.pointMap;Gh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xh("c",t,e,Gh,0,0,-1),Xh("t",t,e,Gh,0,0,1),Xh("n1",t,e,Gh,-1,-1,-1),Xh("n2",t,e,Gh,1,-1,-1),Xh("n3",t,e,Gh,-1,1,-1),Xh("n4",t,e,Gh,1,1,-1),Xh("f1",t,e,Gh,-1,-1,1),Xh("f2",t,e,Gh,1,-1,1),Xh("f3",t,e,Gh,-1,1,1),Xh("f4",t,e,Gh,1,1,1),Xh("u1",t,e,Gh,.7,1.1,-1),Xh("u2",t,e,Gh,-.7,1.1,-1),Xh("u3",t,e,Gh,0,2,-1),Xh("cf1",t,e,Gh,-1,0,1),Xh("cf2",t,e,Gh,1,0,1),Xh("cf3",t,e,Gh,0,-1,1),Xh("cf4",t,e,Gh,0,1,1),Xh("cn1",t,e,Gh,-1,0,-1),Xh("cn2",t,e,Gh,1,0,-1),Xh("cn3",t,e,Gh,0,-1,-1),Xh("cn4",t,e,Gh,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Yh=new Nn;function Zh(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new zi;r.setIndex(new bi(n,1)),r.setAttribute("position",new bi(i,3)),Ms.call(this,r,new fs({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Jh(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new zi;i.setIndex(new bi(n,1)),i.setAttribute("position",new Pi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ms.call(this,i,new fs({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function Qh(e,t,n){this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new zi;r.setAttribute("position",new Pi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),bs.call(this,r,new fs({color:i,toneMapped:!1})),this.type="PlaneHelper";var o=new zi;o.setAttribute("position",new Pi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new rr(o,new yi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}Zh.prototype=Object.create(Ms.prototype),Zh.prototype.constructor=Zh,Zh.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Yh.setFromObject(this.object),!Yh.isEmpty()){var t=Yh.min,n=Yh.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Zh.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Zh.prototype.copy=function(e){return Ms.prototype.copy.call(this,e),this.object=e.object,this},Zh.prototype.clone=function(){return(new this.constructor).copy(this)},Jh.prototype=Object.create(Ms.prototype),Jh.prototype.constructor=Jh,Jh.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),bn.prototype.updateMatrixWorld.call(this,e))},Qh.prototype=Object.create(bs.prototype),Qh.prototype.constructor=Qh,Qh.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),bn.prototype.updateMatrixWorld.call(this,e)};var Kh,$h,ed=new Xt;function td(e,t,n,i,r,o){bn.call(this),this.type="ArrowHelper",void 0===e&&(e=new Xt(0,0,1)),void 0===t&&(t=new Xt(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===Kh&&((Kh=new zi).setAttribute("position",new Pi([0,0,0,0,1,0],3)),($h=new Wl(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new bs(Kh,new fs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rr($h,new yi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function nd(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new zi;n.setAttribute("position",new Pi(t,3)),n.setAttribute("color",new Pi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new fs({vertexColors:!0,toneMapped:!1});Ms.call(this,n,i),this.type="AxesHelper"}td.prototype=Object.create(bn.prototype),td.prototype.constructor=td,td.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ed.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ed,t)}},td.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},td.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},td.prototype.copy=function(e){return bn.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},td.prototype.clone=function(){return(new this.constructor).copy(this)},nd.prototype=Object.create(Ms.prototype),nd.prototype.constructor=nd;var id=Math.pow(2,8),rd=[.125,.215,.35,.446,.526,.582],od=5+rd.length,ad=20,sd=(T={},(0,m.Z)(T,Et,0),(0,m.Z)(T,qt,1),(0,m.Z)(T,St,2),(0,m.Z)(T,3004,3),(0,m.Z)(T,3005,4),(0,m.Z)(T,3006,5),(0,m.Z)(T,Tt,6),T),ld=new dc,ud=function(){for(var e=[],t=[],n=[],i=8,r=0;r<od;r++){var o=Math.pow(2,i);t.push(o);var a=1/o;r>4?a=rd[r-8+4-1]:0==r&&(a=0),n.push(a);for(var s=1/(o-1),l=-s/2,u=1+s/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],h=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,v=f>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];h.set(g,18*f),d.set(c,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var x=new zi;x.setAttribute("position",new bi(h,3)),x.setAttribute("uv",new bi(d,2)),x.setAttribute("faceIndex",new bi(p,1)),e.push(x),i>4&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),cd=ud._lodPlanes,hd=ud._sizeLods,dd=ud._sigmas,pd=null,fd=(1+Math.sqrt(5))/2,md=1/fd,vd=[new Xt(1,1,1),new Xt(-1,1,1),new Xt(1,1,-1),new Xt(-1,1,-1),new Xt(0,fd,md),new Xt(0,fd,-md),new Xt(md,0,fd),new Xt(-md,0,fd),new Xt(fd,md,0),new Xt(-fd,md,0)];function gd(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new $l({defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(e)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Xt(0,1,0)},inputEncoding:{value:sd[Et]},outputEncoding:{value:sd[Et]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1});return t.type="SphericalGaussianBlur",t}(ad),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function yd(e){return void 0!==e&&e.type===st&&(e.encoding===Et||e.encoding===qt||e.encoding===Tt)}function xd(e){var t=new jt(3*id,3*id,e);return t.texture.mapping=Ke,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function bd(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function _d(){var e=new $l({uniforms:{envMap:{value:null},texelSize:{value:new Nt(1,1)},inputEncoding:{value:sd[Et]},outputEncoding:{value:sd[Et]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#include <common>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv = equirectUv( outputDirection );\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function wd(){var e=new $l({uniforms:{envMap:{value:null},inputEncoding:{value:sd[Et]},outputEncoding:{value:sd[Et]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function Md(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Vu.call(this,e),this.type="catmullrom"}gd.prototype={constructor:gd,fromScene:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;pd=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r},fromEquirectangular:function(e){return e.magFilter=nt,e.minFilter=nt,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){pd=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=wd(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=_d(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<cd.length;e++)cd[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(pd),e.scissorTest=!1,e.setSize(e.width,e.height)},_allocateTargets:function(e){var t={magFilter:nt,minFilter:nt,generateMipmaps:!1,type:st,format:1023,encoding:yd(e)?e.encoding:St,depthBuffer:!1,stencilBuffer:!1},n=xd(t);return n.depthBuffer=!e,this._pingPongRenderTarget=xd(t),n},_compileMaterial:function(e){var t=new rr(cd[0],e);this._renderer.compile(t,ld)},_sceneToCubeUV:function(e,t,n,i){var r=new xr(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.outputEncoding,u=s.toneMapping,c=s.toneMappingExposure,h=s.getClearColor(),d=s.getClearAlpha();s.toneMapping=1,s.toneMappingExposure=1,s.outputEncoding=Et;var p=e.background;if(p&&p.isColor){p.convertSRGBToLinear();var f=Math.max(p.r,p.g,p.b),m=Math.min(Math.max(Math.ceil(Math.log2(f)),-128),127);p=p.multiplyScalar(Math.pow(2,-m));var v=(m+128)/255;s.setClearColor(p,v),e.background=null}for(var g=0;g<6;g++){var y=g%3;0==y?(r.up.set(0,o[g],0),r.lookAt(a[g],0,0)):1==y?(r.up.set(0,0,o[g]),r.lookAt(0,a[g],0)):(r.up.set(0,o[g],0),r.lookAt(0,0,a[g])),bd(i,y*id,g>2?id:0,id,id),s.setRenderTarget(i),s.render(e,r)}s.toneMapping=u,s.toneMappingExposure=c,s.outputEncoding=l,s.setClearColor(h,d)},_textureToCubeUV:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=wd()):null==this._equirectShader&&(this._equirectShader=_d());var i=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new rr(cd[0],i),o=i.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=sd[e.encoding],o.outputEncoding.value=sd[t.texture.encoding],bd(t,0,0,3*id,2*id),n.setRenderTarget(t),n.render(r,ld)},_applyPMREM:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<od;i++){var r=Math.sqrt(dd[i]*dd[i]-dd[i-1]*dd[i-1]),o=vd[(i-1)%vd.length];this._blur(e,i-1,i,r,o)}t.autoClear=n},_blur:function(e,t,n,i,r){var o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)},_halfBlur:function(e,t,n,i,r,o,a){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new rr(cd[i],l),c=l.uniforms,h=hd[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):ad;f>ad&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(ad));for(var m=[],v=0,g=0;g<ad;++g){var y=g/p,x=Math.exp(-y*y/2);m.push(x),0==g?v+=x:g<f&&(v+=2*x)}for(g=0;g<m.length;g++)m[g]=m[g]/v;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a),c.dTheta.value=d,c.mipInt.value=8-n,c.inputEncoding.value=sd[e.texture.encoding],c.outputEncoding.value=sd[e.texture.encoding];var b=hd[i];bd(t,y=3*Math.max(0,id-2*b),(0===i?0:2*id)+2*b*(i>4?i-8+4:0),3*b,2*b),s.setRenderTarget(t),s.render(u,ld)}},Ru.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ru.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(nc.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new hr,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Xt(r.x,r.y,r.z||0))}return t}}),Object.assign(ic.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(Vu.prototype),Object.create(Vu.prototype),Md.prototype=Object.create(Vu.prototype),Object.assign(Md.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Bh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Oh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Su.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),bc(e)}}),Su.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(qc.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(_h.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Nn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Bn.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Tr.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Eh.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(kt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),kt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),kt.ceilPowerOfTwo(e)}}),Object.assign(Rt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(tn.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Xt).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),Jn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Vt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Wn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(si.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(si,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),si.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),si.getNormal(e,t,n,i)}}),Object.assign(rc.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Al(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ul(this,e)}}),Object.assign(Nt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ut.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(hr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(bn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(bn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(rr.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(rr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(is.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ss.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),rs.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ru.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),xr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(oc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(bi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ct},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ct)}}}),Object.assign(bi.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ct:At),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(zi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new bi(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(zi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(_c.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(gh.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Ra.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Ct},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Ra.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ct:At),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Cl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(mh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(gi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new hi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(nu.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(gr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ia.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ia.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?qt:Et}}}),Object.defineProperties(Ea.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(jt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Xc.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Rc).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),$c.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},_r.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Bt.crossOrigin=void 0,Bt.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Nu;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},Bt.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new ku;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},Bt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Bt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"117"}})),O(),O();var Ed="\u202f",qd=function(){function e(){b(this,e)}return x(e,null,[{key:"separator",get:function(){return Ed},set:function(e){Ed=e}},{key:"parse",value:function(e){if(!isNaN(parseFloat(e))&&isFinite(e))return Number(e);var t=String(e).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==t[t.length-1]&&t.splice(t.length-1),""==t)return NaN;var n=null;switch(t.length){case 3:n=t[0]/1+t[1]/60+t[2]/3600;break;case 2:n=t[0]/1+t[1]/60;break;case 1:n=t[0];break;default:return NaN}return/^-|[WS]$/i.test(e.trim())&&(n=-n),Number(n)}},{key:"toDms",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d",i=arguments.length>2?arguments[2]:void 0;if(isNaN(t)||"string"==typeof t&&""==t.trim()||"boolean"==typeof t||t==1/0||null==t)return null;if(void 0===i)switch(n){case"d":case"deg":i=4;break;case"dm":case"deg+min":i=2;break;case"dms":case"deg+min+sec":i=0;break;default:n="d",i=4}t=Math.abs(t);var r=null,o=null,a=null,s=null;switch(n){default:case"d":case"deg":(o=t.toFixed(i))<100&&(o="0"+o),o<10&&(o="0"+o),r=o+"\xb0";break;case"dm":case"deg+min":o=Math.floor(t),60==(a=(60*t%60).toFixed(i))&&(a=(0).toFixed(i),o++),a<10&&(a="0"+a),r=(o=("000"+o).slice(-3))+"\xb0"+e.separator+a+"\u2032";break;case"dms":case"deg+min+sec":o=Math.floor(t),a=Math.floor(3600*t/60)%60,60==(s=(3600*t%60).toFixed(i))&&(s=(0).toFixed(i),a++),60==a&&(a=0,o++),o=("000"+o).slice(-3),a=("00"+a).slice(-2),s<10&&(s="0"+s),r=o+"\xb0"+e.separator+a+"\u2032"+e.separator+s+"\u2033"}return r}},{key:"toLat",value:function(t,n,i){var r=e.toDms(e.wrap90(t),n,i);return null===r?"\u2013":r.slice(1)+e.separator+(t<0?"S":"N")}},{key:"toLon",value:function(t,n,i){var r=e.toDms(e.wrap180(t),n,i);return null===r?"\u2013":r+e.separator+(t<0?"W":"E")}},{key:"toBrng",value:function(t,n,i){var r=e.toDms(e.wrap360(t),n,i);return null===r?"\u2013":r.replace("360","0")}},{key:"fromLocale",value:function(e){var t=123456.789.toLocaleString(),n={thousands:t.slice(3,4),decimal:t.slice(7,8)};return e.replace(n.thousands,"\u205c").replace(n.decimal,".").replace("\u205c",",")}},{key:"toLocale",value:function(e){var t=123456.789.toLocaleString(),n={thousands:t.slice(3,4),decimal:t.slice(7,8)};return e.replace(/,([0-9])/,"\u205c$1").replace(".",n.decimal).replace("\u205c",n.thousands)}},{key:"compassPoint",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(![1,2,3].includes(Number(n)))throw new RangeError("invalid precision \u2018".concat(n,"\u2019"));t=e.wrap360(t);var i=4*Math.pow(2,n-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(t*i/360)%i*16/i]}},{key:"wrap360",value:function(e){return 0<=e&&e<360?e:(e%360+360)%360}},{key:"wrap180",value:function(e){return-180<e&&e<=180?e:(e+540)%360-180}},{key:"wrap90",value:function(e){return-90<=e&&e<=90?e:Math.abs((e%360+270)%360-180)-90}}]),e}();Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var Td,Sd,Pd=qd,Ad=Math.PI,Cd=function(){function e(t,n){if(b(this,e),isNaN(t))throw new TypeError("invalid lat \u2018".concat(t,"\u2019"));if(isNaN(n))throw new TypeError("invalid lon \u2018".concat(n,"\u2019"));this._lat=Pd.wrap90(Number(t)),this._lon=Pd.wrap180(Number(n))}return x(e,[{key:"lat",get:function(){return this._lat},set:function(e){if(this._lat=isNaN(e)?Pd.wrap90(Pd.parse(e)):Pd.wrap90(Number(e)),isNaN(this._lat))throw new TypeError("invalid lat \u2018".concat(e,"\u2019"))}},{key:"latitude",get:function(){return this._lat},set:function(e){if(this._lat=isNaN(e)?Pd.wrap90(Pd.parse(e)):Pd.wrap90(Number(e)),isNaN(this._lat))throw new TypeError("invalid latitude \u2018".concat(e,"\u2019"))}},{key:"lon",get:function(){return this._lon},set:function(e){if(this._lon=isNaN(e)?Pd.wrap180(Pd.parse(e)):Pd.wrap180(Number(e)),isNaN(this._lon))throw new TypeError("invalid lon \u2018".concat(e,"\u2019"))}},{key:"lng",get:function(){return this._lon},set:function(e){if(this._lon=isNaN(e)?Pd.wrap180(Pd.parse(e)):Pd.wrap180(Number(e)),isNaN(this._lon))throw new TypeError("invalid lng \u2018".concat(e,"\u2019"))}},{key:"longitude",get:function(){return this._lon},set:function(e){if(this._lon=isNaN(e)?Pd.wrap180(Pd.parse(e)):Pd.wrap180(Number(e)),isNaN(this._lon))throw new TypeError("invalid longitude \u2018".concat(e,"\u2019"))}},{key:"distanceTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6371e3;if(t instanceof e||(t=e.parse(t)),isNaN(n))throw new TypeError("invalid radius \u2018".concat(n,"\u2019"));var i=n,r=this.lat.toRadians(),o=this.lon.toRadians(),a=t.lat.toRadians(),s=a-r,l=t.lon.toRadians()-o,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r)*Math.cos(a)*Math.sin(l/2)*Math.sin(l/2);return i*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}},{key:"initialBearingTo",value:function(t){if(t instanceof e||(t=e.parse(t)),this.equals(t))return NaN;var n=this.lat.toRadians(),i=t.lat.toRadians(),r=(t.lon-this.lon).toRadians(),o=Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(r),a=Math.sin(r)*Math.cos(i),s=Math.atan2(a,o).toDegrees();return Pd.wrap360(s)}},{key:"finalBearingTo",value:function(t){t instanceof e||(t=e.parse(t));var n=t.initialBearingTo(this)+180;return Pd.wrap360(n)}},{key:"midpointTo",value:function(t){t instanceof e||(t=e.parse(t));var n=this.lat.toRadians(),i=this.lon.toRadians(),r=t.lat.toRadians(),o=(t.lon-this.lon).toRadians(),a=Math.cos(n),s=Math.sin(n),l={x:a+Math.cos(r)*Math.cos(o),y:0+Math.cos(r)*Math.sin(o),z:s+Math.sin(r)},u=Math.atan2(l.z,Math.sqrt(l.x*l.x+l.y*l.y)),c=i+Math.atan2(l.y,l.x);return new e(u.toDegrees(),c.toDegrees())}},{key:"intermediatePointTo",value:function(t,n){if(t instanceof e||(t=e.parse(t)),this.equals(t))return new e(this.lat,this.lon);var i=this.lat.toRadians(),r=this.lon.toRadians(),o=t.lat.toRadians(),a=t.lon.toRadians(),s=o-i,l=a-r,u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(i)*Math.cos(o)*Math.sin(l/2)*Math.sin(l/2),c=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),h=Math.sin((1-n)*c)/Math.sin(c),d=Math.sin(n*c)/Math.sin(c),p=h*Math.cos(i)*Math.cos(r)+d*Math.cos(o)*Math.cos(a),f=h*Math.cos(i)*Math.sin(r)+d*Math.cos(o)*Math.sin(a),m=h*Math.sin(i)+d*Math.sin(o),v=Math.atan2(m,Math.sqrt(p*p+f*f)),g=Math.atan2(f,p);return new e(v.toDegrees(),g.toDegrees())}},{key:"destinationPoint",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6371e3,r=t/i,o=Number(n).toRadians(),a=this.lat.toRadians(),s=this.lon.toRadians(),l=Math.sin(a)*Math.cos(r)+Math.cos(a)*Math.sin(r)*Math.cos(o),u=Math.asin(l),c=Math.sin(o)*Math.sin(r)*Math.cos(a),h=Math.cos(r)-Math.sin(a)*l,d=s+Math.atan2(c,h),p=u.toDegrees(),f=d.toDegrees();return new e(p,f)}},{key:"crossTrackDistanceTo",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6371e3;t instanceof e||(t=e.parse(t)),n instanceof e||(n=e.parse(n));var r=i;if(this.equals(t))return 0;var o=t.distanceTo(this,r)/r,a=t.initialBearingTo(this).toRadians(),s=t.initialBearingTo(n).toRadians();return Math.asin(Math.sin(o)*Math.sin(a-s))*r}},{key:"alongTrackDistanceTo",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6371e3;t instanceof e||(t=e.parse(t)),n instanceof e||(n=e.parse(n));var r=i;if(this.equals(t))return 0;var o=t.distanceTo(this,r)/r,a=t.initialBearingTo(this).toRadians(),s=t.initialBearingTo(n).toRadians(),l=Math.asin(Math.sin(o)*Math.sin(a-s));return Math.acos(Math.cos(o)/Math.abs(Math.cos(l)))*Math.sign(Math.cos(s-a))*r}},{key:"maxLatitude",value:function(e){var t=Number(e).toRadians(),n=this.lat.toRadians();return Math.acos(Math.abs(Math.sin(t)*Math.cos(n))).toDegrees()}},{key:"rhumbDistanceTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6371e3;t instanceof e||(t=e.parse(t));var i=n,r=this.lat.toRadians(),o=t.lat.toRadians(),a=o-r,s=Math.abs(t.lon-this.lon).toRadians();Math.abs(s)>Ad&&(s=s>0?-(2*Ad-s):2*Ad+s);var l=Math.log(Math.tan(o/2+Ad/4)/Math.tan(r/2+Ad/4)),u=Math.abs(l)>1e-11?a/l:Math.cos(r);return Math.sqrt(a*a+u*u*s*s)*i}},{key:"rhumbBearingTo",value:function(t){if(t instanceof e||(t=e.parse(t)),this.equals(t))return NaN;var n=this.lat.toRadians(),i=t.lat.toRadians(),r=(t.lon-this.lon).toRadians();Math.abs(r)>Ad&&(r=r>0?-(2*Ad-r):2*Ad+r);var o=Math.log(Math.tan(i/2+Ad/4)/Math.tan(n/2+Ad/4)),a=Math.atan2(r,o).toDegrees();return Pd.wrap360(a)}},{key:"rhumbDestinationPoint",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6371e3,r=this.lat.toRadians(),o=this.lon.toRadians(),a=Number(n).toRadians(),s=t/i,l=s*Math.cos(a),u=r+l;Math.abs(u)>Ad/2&&(u=u>0?Ad-u:-Ad-u);var c=Math.log(Math.tan(u/2+Ad/4)/Math.tan(r/2+Ad/4)),h=Math.abs(c)>1e-11?l/c:Math.cos(r),d=o+s*Math.sin(a)/h,p=u.toDegrees(),f=d.toDegrees();return new e(p,f)}},{key:"rhumbMidpointTo",value:function(t){t instanceof e||(t=e.parse(t));var n=this.lat.toRadians(),i=this.lon.toRadians(),r=t.lat.toRadians(),o=t.lon.toRadians();Math.abs(o-i)>Ad&&(i+=2*Ad);var a=(n+r)/2,s=Math.tan(Ad/4+n/2),l=Math.tan(Ad/4+r/2),u=Math.tan(Ad/4+a/2),c=((o-i)*Math.log(u)+i*Math.log(l)-o*Math.log(s))/Math.log(l/s);return isFinite(c)||(c=(i+o)/2),new e(a.toDegrees(),c.toDegrees())}},{key:"equals",value:function(t){return t instanceof e||(t=e.parse(t)),!(Math.abs(this.lat-t.lat)>Number.EPSILON||Math.abs(this.lon-t.lon)>Number.EPSILON)}},{key:"toGeoJSON",value:function(){return{type:"Point",coordinates:[this.lon,this.lat]}}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d",t=arguments.length>1?arguments[1]:void 0;if(!["d","dm","dms","n"].includes(e))throw new RangeError("invalid format \u2018".concat(e,"\u2019"));return"n"==e?(null==t&&(t=4),"".concat(this.lat.toFixed(t),",").concat(this.lon.toFixed(t))):"".concat(Pd.toLat(this.lat,e,t),", ").concat(Pd.toLon(this.lon,e,t))}}],[{key:"metresToKm",get:function(){return.001}},{key:"metresToMiles",get:function(){return 1/1609.344}},{key:"metresToNauticalMiles",get:function(){return 1/1852}},{key:"parse",value:function(){for(var t,n,i,o,a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];if(0==s.length)throw new TypeError("invalid (empty) point");if(null===s[0]||null===s[1])throw new TypeError("invalid (null) point");if(2==s.length&&(i=(t=r(s,2))[0],o=t[1],i=Pd.wrap90(Pd.parse(i)),o=Pd.wrap180(Pd.parse(o)),isNaN(i)||isNaN(o)))throw new TypeError("invalid point \u2018".concat(s.toString(),"\u2019"));if(1==s.length&&"string"==typeof s[0]&&(i=(n=r(s[0].split(","),2))[0],o=n[1],i=Pd.wrap90(Pd.parse(i)),o=Pd.wrap180(Pd.parse(o)),isNaN(i)||isNaN(o)))throw new TypeError("invalid point \u2018".concat(s[0],"\u2019"));if(1==s.length&&"object"==typeof s[0]){var u,c=s[0];if("Point"==c.type&&Array.isArray(c.coordinates)?(o=(u=r(c.coordinates,2))[0],i=u[1]):(null!=c.latitude&&(i=c.latitude),null!=c.lat&&(i=c.lat),null!=c.longitude&&(o=c.longitude),null!=c.lng&&(o=c.lng),null!=c.lon&&(o=c.lon),i=Pd.wrap90(Pd.parse(i)),o=Pd.wrap180(Pd.parse(o))),isNaN(i)||isNaN(o))throw new TypeError("invalid point \u2018".concat(JSON.stringify(s[0]),"\u2019"))}if(isNaN(i)||isNaN(o))throw new TypeError("invalid point \u2018".concat(s.toString(),"\u2019"));return new e(i,o)}},{key:"intersection",value:function(t,n,i,r){if(t instanceof e||(t=e.parse(t)),i instanceof e||(i=e.parse(i)),isNaN(n))throw new TypeError("invalid brng1 \u2018".concat(n,"\u2019"));if(isNaN(r))throw new TypeError("invalid brng2 \u2018".concat(r,"\u2019"));var o=t.lat.toRadians(),a=t.lon.toRadians(),s=i.lat.toRadians(),l=i.lon.toRadians(),u=Number(n).toRadians(),c=Number(r).toRadians(),h=s-o,d=l-a,p=2*Math.asin(Math.sqrt(Math.sin(h/2)*Math.sin(h/2)+Math.cos(o)*Math.cos(s)*Math.sin(d/2)*Math.sin(d/2)));if(Math.abs(p)<Number.EPSILON)return new e(t.lat,t.lon);var f=(Math.sin(s)-Math.sin(o)*Math.cos(p))/(Math.sin(p)*Math.cos(o)),m=(Math.sin(o)-Math.sin(s)*Math.cos(p))/(Math.sin(p)*Math.cos(s)),v=Math.acos(Math.min(Math.max(f,-1),1)),g=Math.acos(Math.min(Math.max(m,-1),1)),y=u-(Math.sin(l-a)>0?v:2*Ad-v),x=(Math.sin(l-a)>0?2*Ad-g:g)-c;if(0==Math.sin(y)&&0==Math.sin(x)||Math.sin(y)*Math.sin(x)<0)return null;var b=-Math.cos(y)*Math.cos(x)+Math.sin(y)*Math.sin(x)*Math.cos(p),_=Math.atan2(Math.sin(p)*Math.sin(y)*Math.sin(x),Math.cos(x)+Math.cos(y)*b),w=Math.asin(Math.min(Math.max(Math.sin(o)*Math.cos(_)+Math.cos(o)*Math.sin(_)*Math.cos(u),-1),1)),M=a+Math.atan2(Math.sin(u)*Math.sin(_)*Math.cos(o),Math.cos(_)-Math.sin(o)*Math.sin(w));return new e(w.toDegrees(),M.toDegrees())}},{key:"crossingParallels",value:function(e,t,n){if(e.equals(t))return null;var i=Number(n).toRadians(),r=e.lat.toRadians(),o=e.lon.toRadians(),a=t.lat.toRadians(),s=t.lon.toRadians()-o,l=Math.sin(r)*Math.cos(a)*Math.cos(i)*Math.sin(s),u=Math.sin(r)*Math.cos(a)*Math.cos(i)*Math.cos(s)-Math.cos(r)*Math.sin(a)*Math.cos(i),c=Math.cos(r)*Math.cos(a)*Math.sin(i)*Math.sin(s);if(c*c>l*l+u*u)return null;var h=Math.atan2(-u,l),d=Math.acos(c/Math.sqrt(l*l+u*u)),p=o+h+d,f=(o+h-d).toDegrees(),m=p.toDegrees();return{lon1:Pd.wrap180(f),lon2:Pd.wrap180(m)}}},{key:"areaOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6371e3,n=t,i=e[0].equals(e[e.length-1]);i||e.push(e[0]);for(var r=e.length-1,o=0,a=0;a<r;a++){var s=e[a].lat.toRadians(),l=e[a+1].lat.toRadians(),u=(e[a+1].lon-e[a].lon).toRadians();o+=2*Math.atan2(Math.tan(u/2)*(Math.tan(s/2)+Math.tan(l/2)),1+Math.tan(s/2)*Math.tan(l/2))}(function(e){for(var t=0,n=e[0].initialBearingTo(e[1]),i=0;i<e.length-1;i++){var r=e[i].initialBearingTo(e[i+1]),o=e[i].finalBearingTo(e[i+1]);t+=(r-n+540)%360-180,t+=(o-r+540)%360-180,n=o}return t+=(e[0].initialBearingTo(e[1])-n+540)%360-180,Math.abs(t)<90})(e)&&(o=Math.abs(o)-2*Ad);var c=Math.abs(o*n*n);return i||e.pop(),c}}]),e}();function Ld(e,t){var n=function(e){var t=new Nn;return e.forEach((function(e){var n=new Nn;n.setFromObject(e),t.union(n)})),t}(e.map((function(e){return e.object})));return t&&(n.max.add(new Xt(0,0,t)),n.min.sub(new Xt(0,0,t))),n}function Od(e){e&&(e.map&&(e.map.dispose(),e.map=void 0),e.dispose())}function Id(){if(!Td)try{var e="mi-uuid";(Td=localStorage.getItem(e))||(Td=We(),localStorage.setItem(e,Td))}catch(e){Td="NLS-"+We()}return Td}function kd(){if(!Sd)try{var e="mi-session";(Sd=sessionStorage.getItem(e))||(Sd=We(),sessionStorage.setItem(e,Sd))}catch(e){Sd="NSS-"+We()}return Sd}function Nd(e){return"string"==typeof e?e:e.id}function Rd(e,t){return null==t?e:"string"==typeof e?t.find((function(t){return t.id==e})):e}function Dd(e){return(new Nn).setFromObject(e)}function Bd(e){var t=e.min,n=e.max;return[new Xt(t.x,t.y,t.z),new Xt(n.x,t.y,t.z),new Xt(t.x,n.y,t.z),new Xt(n.x,n.y,t.z),new Xt(t.x,t.y,n.z),new Xt(n.x,t.y,n.z),new Xt(t.x,n.y,n.z),new Xt(n.x,n.y,n.z)]}function zd(e,t,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var u=Date.now();!s&&!1===n.leading&&(s=u);var c=t-(u-s);return i=this,r=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(i,r),a||(i=r=null)):!a&&!1!==n.trailing&&(a=setTimeout(l,c)),o}}function Fd(e,t,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||e.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(r,o)}}function Ud(e,t,n){var i=e*(Math.PI/180)/2,r=t/2;return n*Math.tan(i)/r}function jd(e,t,n){var i=e.max.y,r=t/2,o=n/2*Math.PI/180;return r/Math.tan(o)+i}function Hd(e,t,n){for(var i=[e],r=(t.x-e.x)/n,o=(t.y-e.y)/n,a=(t.z-e.z)/n,s=1;s<n;s++){var l=e.clone(),u=new Xt(s*r,s*o,s*a);l.add(u),i.push(l)}return i.push(t),i}var Vd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"==typeof e&&e.length>50?(console.warn("Detected a color string value with abnormal length. Please ensure a real color is being passed in. Using fallback ".concat(t)),t):e},Gd=function(e,t){if("string"==typeof e){if(null==t||!Array.isArray(t.polygons))return null;e=t.polygons.find((function(t){return t.id==e}))}var n=null;if(null!=e&&null!=e.locations&&e.locations.length>0){n=e.locations[0];for(var i=0,r=e.locations.length;i<r;i++){for(var o=e.locations[i];null!=o.parent;)(o=o.parent).polygons.includes(e)&&(n=o);if(null==o.parent&&o.polygons.includes(e))return o}}return n};O();var Wd=(0,L.c)(D()),Xd=["websdk","web","webv2"],Yd=function e(t){var n=(t=t||{}).key,i=t.secret,r=t.noAuth,o="https://api-gateway.mappedin.com/track-analytics/a/";!r&&n&&!function(e){return/^[\da-f]{24}$/i.test(e)}(n)&&(o="https://web-proxy.mappedin.com/a/");var a=t.url||t.baseUrl||o;a+=t.venue+"/";var s=!1,l=t.testMode,u=Xd.find((function(e){return e===t.context}))||Xd[0],c=Id(),h=kd(),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==l&&"True"!==l&&"true"!==l){var o=g(g({},t),{},{g:s}),d=a+e+"?"+Wd.default.stringify(o),p={method:"GET",mode:"cors",headers:{"mi-context":u,"mi-session":h,"mi-device":c}};r||(p.headers.Authorization="Basic "+btoa(n+":"+i)),fetch(d,p)}};this.locationSelected=function(e){var t=e.id||e;d("select-location",{id:t})},this.categorySelected=function(e){var t=e.id||e;d("select-category",{id:t})},this.mapViewLoaded=function(e,t,n,i){d("load-mapview",{type:e,force:t,benchmark:n||-1,reason:i||"success"}),delete this.mapViewLoaded},this.getDirections=function(e,t){d("query-directions",{start:e,end:t,type:"location_to_location"})},this.getSessionID=function(){return h},this.getDeviceID=function(){return c},this.setGeolocationMode=function(e){s=e},this.trackBlueDotEvent=function(t){t&&Object.values(e.BLUEDOT_EVENT).includes(t)?d(t):console.warn('Ignored unsupported blue dot event: "'.concat(t,'".'))}};Yd.BLUEDOT_EVENT={ATTEMPT_BLUEDOT:"attempt-bluedot",FOUND_POSITION:"found-position",FOUND_FLOOR:"found-floor"};var Zd,Jd,Qd,Kd,$d,ep,tp,np,ip,rp,op,ap=Yd;O(),O(),(op=Zd||(Zd={}))[op.SUCCESS=0]="SUCCESS",function(e){e[e.OPTIONAL_MINIMUM=0]="OPTIONAL_MINIMUM",e[e.OPTIONAL_MAXIMUM=1]="OPTIONAL_MAXIMUM",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=3]="HIGH",e[e.ALWAYS_VISIBLE=4]="ALWAYS_VISIBLE"}(Jd||(Jd={})),function(e){e[e.OUTSIDE_MAP=0]="OUTSIDE_MAP",e[e.NO_POSITIONS_PROVIDED=1]="NO_POSITIONS_PROVIDED",e[e.GEOLOCATION_PROVIDER_ERROR=2]="GEOLOCATION_PROVIDER_ERROR",e[e.CUSTOM_GEOLOCATION_PROVIDER_ERROR=3]="CUSTOM_GEOLOCATION_PROVIDER_ERROR"}(Qd||(Qd={})),function(e){e[e.NOT_LISTENING=0]="NOT_LISTENING",e[e.LISTENING=1]="LISTENING",e[e.HAS_POSITION=2]="HAS_POSITION",e[e.HAS_INDOOR_POSITION=3]="HAS_INDOOR_POSITION",e[e.LOCATION_UNCERTAIN=4]="LOCATION_UNCERTAIN"}(Kd||(Kd={})),function(e){e[e.HIDDEN=0]="HIDDEN",e[e.GHOST=1]="GHOST",e[e.NORMAL=2]="NORMAL",e[e.UNCERTAIN=3]="UNCERTAIN"}($d||($d={})),function(e){e.EXPLORE="explore",e.FOLLOW="follow"}(ep||(ep={})),function(e){e[e.CENTER=0]="CENTER",e[e.TOP=1]="TOP",e[e.LEFT=2]="LEFT",e[e.BOTTOM=3]="BOTTOM",e[e.RIGHT=4]="RIGHT"}(tp||(tp={})),function(e){e.CLICK="CLICK",e.STATE_CHANGE="STATE_CHANGE",e.POLYGON_CLICKED="POLYGON_CLICKED",e.NOTHING_CLICKED="NOTHING_CLICKED",e.MAP_CHANGED="MAP_CHANGED"}(np||(np={})),function(e){e.POSITION_UPDATE="POSITION_UPDATE",e.STATE_CHANGE="STATE_CHANGE"}(ip||(ip={})),function(e){e.USER_INTERACTION_START="USER_INTERACTION_START",e.USER_INTERACTION_END="USER_INTERACTION_END",e.POSITION_CHANGED="POSITION_CHANGED",e.ZOOM_CHANGED="ZOOM_CHANGED",e.ROTATION_CHANGED="ROTATION_CHANGED",e.TILT_CHANGED="TILT_CHANGED"}(rp||(rp={})),O(),O();var sp,lp=function(){function e(){b(this,e),(0,L.d)(this,"_subscribers",{})}return x(e,[{key:"publish",value:function(e,t){!this._subscribers||!this._subscribers[e]||this._subscribers[e].forEach((function(e){"function"==typeof e&&e(t)}))}},{key:"on",value:function(e,t){this._subscribers||(this._subscribers={}),this._subscribers[e]=this._subscribers[e]||[],this._subscribers[e].push(t)}},{key:"off",value:function(e,t){if(this._subscribers&&null!=this._subscribers[e]){var n=this._subscribers[e].indexOf(t);-1!==n&&this._subscribers[e].splice(n,1)}}},{key:"destroy",value:function(){this._subscribers={}}}]),e}(),up=(0,L.c)(B());!function(e){e.PIXELS="pixels",e.PORTIONS="portions"}(sp||(sp={}));var cp,hp={linear:up.default.Easing.Linear.None,"ease-in":up.default.Easing.Quadratic.In,"ease-out":up.default.Easing.Quadratic.Out,"ease-in-out":up.default.Easing.Quadratic.InOut};!function(e){e.LINEAR="linear",e.EASE_IN="ease-in",e.EASE_OUT="ease-out",e.EASE_IN_OUT="ease-in-out"}(cp||(cp={}));var dp,pp,fp,mp,vp=function(e){w(n,e);var t=M(n);function n(e){var i;b(this,n),i=t.call(this),(0,L.f)(c(i),dp,void 0),(0,L.f)(c(i),pp,void 0),(0,L.f)(c(i),fp,void 0),(0,L.f)(c(i),mp,void 0),(0,L.g)(c(i),dp,e);var r=function(){return i.publish(rp.USER_INTERACTION_START,void 0)};return(0,L.e)(c(i),dp).controls.addEventListener("userPan",r),(0,L.e)(c(i),dp).controls.addEventListener("userZoom",r),(0,L.e)(c(i),dp).controls.addEventListener("userRotate",r),(0,L.e)(c(i),dp).controls.addEventListener("userTilt",r),(0,L.e)(c(i),dp).controls.addEventListener("userPedestal",r),(0,L.e)(c(i),dp).controls.addEventListener("userDolly",r),(0,L.e)(c(i),dp).controls.addEventListener("zoomUpdated",(function(){return i.publish(rp.ZOOM_CHANGED,i.zoom)})),(0,L.e)(c(i),dp).controls.addEventListener("rotationUpdated",(function(){return i.publish(rp.ROTATION_CHANGED,i.rotation)})),(0,L.e)(c(i),dp).controls.addEventListener("tiltUpdated",(function(){return i.publish(rp.TILT_CHANGED,i.tilt)})),i}return x(n,[{key:"currentAnimation",get:function(){return(0,L.e)(this,pp)}},{key:"zoom",get:function(){return(0,L.e)(this,dp).controls.getZoom()}},{key:"rotation",get:function(){return(0,L.e)(this,dp).controls.getRotation()}},{key:"tilt",get:function(){return(0,L.e)(this,dp).controls.getTilt()}},{key:"minZoom",get:function(){return(0,L.e)(this,dp).controls.minZoom},set:function(e){(0,L.e)(this,dp).controls.minZoom=e}},{key:"maxZoom",get:function(){return(0,L.e)(this,dp).controls.maxZoom},set:function(e){(0,L.e)(this,dp).controls.maxZoom=e}},{key:"setSafeAreaInsets",value:function(e){(0,L.e)(this,dp).setPadding(e)}},{key:"getSafeAreaInsets",value:function(){return(0,L.e)(this,dp).cachedPadding}},{key:"focusOn",value:function(e){var t,n=this,i=e.targets,r=e.cameraOptions,o=e.animationOptions,a=(null==i?void 0:i.points)||(null==(t=null==i?void 0:i.coordinates)?void 0:t.map((function(e){return(0,L.e)(n,dp).convertTo3DMapPosition({x:e.x,y:e.y})}))),s=(0,L.e)(this,dp).focusOn({changeZoom:null==r?void 0:r.changeZoom,duration:null==o?void 0:o.duration,focusZoomFactor:1,curve:(null==o?void 0:o.easing)&&hp[o.easing],minZoom:null==r?void 0:r.minZoom,nodes:null==i?void 0:i.nodes,points:a,polygons:null==i?void 0:i.polygons,padding:null==r?void 0:r.safeAreaInsets,tilt:null==r?void 0:r.tilt,rotation:null==r?void 0:r.rotation}),l=new Promise((function(e,t){(0,L.g)(n,fp,e),(0,L.g)(n,mp,t)}));return s.onComplete((function(){(0,L.g)(n,pp,void 0),(0,L.e)(n,fp).call(n),(0,L.g)(n,fp,void 0),(0,L.g)(n,mp,void 0)})),(0,L.g)(this,pp,l),l}},{key:"set",value:function(e){if(e){var t=e.zoom,n=e.rotation,i=e.tilt;(0,L.e)(this,dp).controls.setMulti((0,L.e)(this,dp).controls.getPosition(),t,n,i)}}},{key:"animate",value:function(e){var t=this,n=e.positionOptions,i=e.animationOptions,r={zoom:null==n?void 0:n.zoom,tilt:null==n?void 0:n.tilt,rotation:null==n?void 0:n.rotation},o=(0,L.e)(this,dp).controls.animateCamera(r,null==i?void 0:i.duration,(null==i?void 0:i.easing)&&hp[i.easing]),a=new Promise((function(e,n){(0,L.g)(t,fp,e),(0,L.g)(t,mp,n)}));return o.onComplete((function(){(0,L.g)(t,pp,void 0),(0,L.e)(t,fp).call(t),(0,L.g)(t,fp,void 0),(0,L.g)(t,mp,void 0)})),(0,L.g)(this,pp,a),a}},{key:"cancelAnimation",value:function(){!(0,L.e)(this,pp)||((0,L.e)(this,dp).controls.cancelAnimation(),(0,L.e)(this,mp).call(this),(0,L.g)(this,pp,void 0),(0,L.g)(this,fp,void 0),(0,L.g)(this,mp,void 0))}}]),n}(lp);dp=new WeakMap,pp=new WeakMap,fp=new WeakMap,mp=new WeakMap;var gp,yp=vp;O(),O(),O(),function(e){e[e.initial=0]="initial",e[e.show=1]="show",e[e.hide=2]="hide"}(gp||(gp={}));var xp=function(){function e(t){b(this,e),(0,L.d)(this,"__engine"),(0,L.d)(this,"_initialRank",0),(0,L.d)(this,"screenPosition",[0,0]),(0,L.d)(this,"currentStrategyName",null),(0,L.d)(this,"enabled",!1),(0,L.d)(this,"options",{}),(0,L.d)(this,"mapId",""),(0,L.d)(this,"id","0"),(0,L.d)(this,"action",0),(0,L.d)(this,"rank",0),(0,L.d)(this,"visible",!1),(0,L.d)(this,"position",new Xt(0,0,0)),(0,L.d)(this,"dimensions",{width:0,height:0});var n=t.rank;this._initialRank=n,this.rank=n}return x(e,[{key:"flipIfNeeded",value:function(){}},{key:"setPriority",value:function(e){this.rank=e,null!=this.__engine&&"function"==typeof this.__engine.resort&&(this.__engine.makeCollidersDirty(),this.__engine.resort())}},{key:"setAction",value:function(e){this.action=e}},{key:"resetPriority",value:function(){this.rank!==this._initialRank&&this.setPriority(this._initialRank)}},{key:"promote",value:function(){}},{key:"demote",value:function(){}},{key:"strategies",get:function(){return[]}},{key:"removeSelf",value:function(){this.__engine=null}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"colliderDidUpdatePosition",value:function(e,t){this.screenPosition=[e,t]}},{key:"colliderDidNotFindAHome",value:function(){this.visible=!1}},{key:"colliderDidMount",value:function(){this.dimensions={width:0,height:0}}},{key:"colliderDidUpdateVisiblity",value:function(){}}]),e}(),bp=xp;O(),O();var _p,wp=function(e){w(n,e);var t=M(n);function n(){var e;return b(this,n),e=t.apply(this,arguments),(0,L.d)(c(e),"contentEl",document.createElement("div")),(0,L.d)(c(e),"containerEl",document.createElement("div")),e}return x(n,[{key:"removeSelf",value:function(){var e;this.__engine=null,(null==(e=this.containerEl.parentElement)?void 0:e.contains(this.containerEl))&&this.containerEl.parentElement.removeChild(this.containerEl),this.containerEl=null,this.contentEl=null}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.containerEl.style.opacity="0"}},{key:"colliderDidGoOffscreen",value:function(){this.visible=!1,this.containerEl.style.opacity="0"}},{key:"colliderDidNotFindAHome",value:function(){this.visible=!1}},{key:"colliderDidUpdatePosition",value:function(e,t){this.containerEl.style.transform="translate(".concat(e,"px, ").concat(t,"px)")}},{key:"colliderDidMount",value:function(){var e={width:0,height:0},t=this.contentEl.getBoundingClientRect();e.width=t.width,e.height=t.height,this.contentEl.style.width=e.width+"px",this.contentEl.style.height=e.height+"px",this.dimensions=e}},{key:"colliderDidUpdateVisiblity",value:function(){this.containerEl.style.opacity=this.visible?"1":"0"}}]),n}(bp),Mp=wp;!function(e){e[e.FREE=0]="FREE",e[e.OFFSCREEN=1]="OFFSCREEN",e[e.OTHER=2]="OTHER"}(_p||(_p={}));var Ep=500*devicePixelRatio,qp="LOW_PRIORITY",Tp=function(e,t,n,i){for(var o=r(t,4),a=o[0],s=o[1],l=o[2],u=o[3],c=a;c<=s;++c)for(var h=l;h<=u;++h)if(e[c*n+h]===i)return!0;return!1},Sp=function(e,t,n,i){for(var o=r(t,4),a=o[0],s=o[1],l=o[2],u=o[3],c=a;c<=s;++c)for(var h=l;h<=u;++h)e[c*n+h]=i},Pp=function(e){w(n,e);var t=M(n);function n(){return b(this,n),t.apply(this,arguments)}return x(n,[{key:"strategies",get:function(){var e=function(){};return[{name:"left",getBoundingBox:function(e){return[Ep,e.totalHeight,Ep,Ep+5]},onStrategySelected:e},{name:"top",getBoundingBox:function(e){return[Ep,Ep+5,Ep,e.totalWidth]},onStrategySelected:e},{name:"right",getBoundingBox:function(e){return[Ep,e.totalHeight,e.totalWidth-2,e.totalWidth]},onStrategySelected:e},{name:"bottom",getBoundingBox:function(e){return[e.totalHeight-2,e.totalHeight,Ep,e.totalWidth]},onStrategySelected:e}]}}]),n}(bp),Ap=function e(t,n,i,r){var o=i||0,a=r||n.length,s=Math.floor(o+(a-o)/2);return n[s].rank===t.rank?s:a-o<=1?n[s].rank<t.rank?s:s+1:n[s].rank>t.rank?e(t,n,s,r):e(t,n,i,s)},Cp=function(){var e,t,n,i,r,o,a=new Map,s=6*devicePixelRatio,l=document.createElement("canvas"),u=document.createElement("div");l.classList.add("mappedin__smart-collision-engine-debug__container"),u.classList.add("mappedin__smart-collision-engine__container");var c=l.getContext("2d"),h=[],d=function(){h.sort((function(e,t){return t.rank-e.rank}))},p=[],f=function(a,c){o=c,a.appendChild(u),a.appendChild(l),i=a.clientWidth,r=a.clientHeight,t=Math.round((i+2*Ep)*devicePixelRatio/s),n=Math.round((r+2*Ep)*devicePixelRatio/s),l.width=i*devicePixelRatio,l.height=r*devicePixelRatio,l.style.width=i+"px",l.style.height=r+"px",p=new Pp({rank:999}).strategies.map((function(e){return(0,e.getBoundingBox)({x:0,y:0,totalHeight:r+Ep,totalWidth:i+Ep}).map((function(e){return Math.round(e/s)}))})),d(),e=new Uint8Array(t*n),m(),v()},m=function(){var n=!1;null==h.find((function(e){return e._dirty&&e.enabled}))&&(n=!0),n||(e.fill(0),p.forEach((function(n){Sp(e,n,t,1)})));var a,l=(0,C.Z)(h);try{var u=function(){var l=a.value,u=l.position,c=l.mapId,h=o({position:u,mapId:c});if("function"==typeof l.colliderDidUpdatePosition&&l.colliderDidUpdatePosition(h.x,h.y),!l.enabled)return l.setAction(gp.hide),l._dirty=!0,"continue";if((h.x<-Ep||h.x+Ep>i+2*Ep||h.y<-Ep||h.y+Ep>r+2*Ep)&&"function"==typeof l.colliderDidGoOutsideGrid)return l.colliderDidGoOutsideGrid(),"continue";if(n)return"continue";if(!l._dirty){if(null!=l.currentStrategyName){var d=l.strategies.find((function(e){return e.name===l.currentStrategyName})).getBoundingBox({x:h.x+Ep,y:h.y+Ep}).map((function(e){return Math.round(e/s)}));Sp(e,d,t,2)}return"continue"}var p=!1,f=!1;if(l.rank===Jd.ALWAYS_VISIBLE)l.setAction(gp.show),l.strategies[0].onStrategySelected(l),p=!0;else{var m,v=l.strategies,g=l.currentStrategyName;g&&g!==qp&&(m=v.find((function(e){return e.name==g})),m&&v.unshift(m));var y,x=(0,C.Z)(v);try{for(x.s();!(y=x.n()).done;){var b=y.value,_=b.name,w=b.getBoundingBox,M=b.onStrategySelected,E=w({x:h.x+Ep,y:h.y+Ep}).map((function(e){return Math.round(e/s)}));if(Tp(e,E,t,1)&&"function"==typeof l.colliderDidGoOffscreen)f=!0;else if(!Tp(e,E,t,2)){f=!1,p=!0,Sp(e,E,t,2),l.setAction(gp.show),_!==l.currentStrategyName&&(l._dirty=!0),l.currentStrategyName=_,M(l);break}}}catch(q){x.e(q)}finally{x.f()}f&&"function"==typeof l.colliderDidGoOffscreen&&l.colliderDidGoOffscreen(),!p&&"function"==typeof l.colliderDidNotFindAHome&&(l.colliderDidNotFindAHome(),l._dirty=!0)}};for(l.s();!(a=l.n()).done;)u()}catch(v){l.e(v)}finally{l.f()}c.clearRect(0,0,i*devicePixelRatio,r*devicePixelRatio);var d,f=(0,C.Z)(h);try{for(f.s();!(d=f.n()).done;){var m=d.value;m instanceof Wp&&m.draw(c)}}catch(v){f.e(v)}finally{f.f()}},v=function(){var e,t=(0,C.Z)(h);try{for(t.s();!(e=t.n()).done;){var n=e.value;"function"==typeof n.colliderDidUpdateVisiblity&&n.colliderDidUpdateVisiblity()}}catch(i){t.e(i)}finally{t.f()}},g=v,y={_makeCollidersDirtyThrottled:void 0,add:function(e,t){t instanceof Mp&&(t.containerEl.style.opacity=0,u.appendChild(t.containerEl)),t.__engine=y,t.enable(),"function"==typeof t.colliderDidMount&&t.colliderDidMount(),t.disable(),t instanceof Mp&&(t.containerEl.style.opacity=1),a.set(e,t),function(e,t){t.length?t.splice(Ap(e,t),0,e):t.push(e)}(t,h)},remove:function(e){var t=a.get(e);null!=t&&(t.__engine=void 0,t instanceof Mp&&u.removeChild(t.containerEl),a.delete(e),h=Array.from(a.values()),d())},makeCollidersDirty:function(){h.forEach((function(e){e._dirty=!0}))},makeCollidersDirtyThrottled:function(e){(null==y._makeCollidersDirtyThrottled||e!==y._makeCollidersDirtyThrottled[1])&&(y._makeCollidersDirtyThrottled=[zd(y.makeCollidersDirty,e),e]),y._makeCollidersDirtyThrottled[0]()},resort:d,init:f,resize:function(e){f(e,o)},updatePosition:m,updateVisibility:g,update:function(){m(),g()},destroy:function(){h.forEach((function(e){y.remove(e.id)})),e.fill(0)}};return y};O();var Lp=document.createElement("canvas");Lp.width=500*devicePixelRatio,Lp.height=500*devicePixelRatio,Lp.style.width="500px",Lp.style.height="500px";var Op=Lp.getContext("2d"),Ip=(0,L.c)(z()),kp=(0,L.c)(F());O();var Np,Rp,Dp={margin:0,text:{numLines:2,lineHeight:1.2,size:14,maxWidth:300,foregroundColor:"white",backgroundColor:"#333"},marker:{size:6,foregroundColor:{active:"white",inactive:void 0},backgroundColor:{active:"#333",inactive:void 0}}},Bp={lightOnDark:g(g({},Dp),{},{text:g(g({},Dp.text),{},{foregroundColor:"white",backgroundColor:"#333"}),marker:g(g({},Dp.marker),{},{foregroundColor:{active:"white",inactive:void 0},backgroundColor:{active:"#333",inactive:void 0}})}),darkOnLight:g(g({},Dp),{},{text:g(g({},Dp.text),{},{foregroundColor:"#333",backgroundColor:"white"}),marker:g(g({},Dp.marker),{},{foregroundColor:{active:"#333",inactive:void 0},backgroundColor:{active:"white",inactive:void 0}})})},zp=function(e){return e*devicePixelRatio},Fp=4*devicePixelRatio,Up=0,jp={heightAbovePolygon:0,scale:devicePixelRatio,appearance:Bp.darkOnLight};!function(e){e[e.OPAQUE=1]="OPAQUE",e[e.SEMI_TRANSPARENT=.5]="SEMI_TRANSPARENT"}(Np||(Np={})),function(e){e.LEFT="left",e.CENTER="center",e.RIGHT="right"}(Rp||(Rp={}));var Hp="Smart Labels do not support setting and clearing colors. Re-label the polygon with desired colors instead",Vp=function(e){w(n,e);var t=M(n);function n(e,i){var r;if(b(this,n),r=t.call(this,e),(0,L.d)(c(r),"lines",0),(0,L.d)(c(r),"contextConfigured",!1),(0,L.d)(c(r),"fillText"),(0,L.d)(c(r),"newStyle",{}),(0,L.d)(c(r),"style",{top:0,left:0,textLabelVisible:!0,pinVisibility:1,textAlign:Rp.LEFT}),(0,L.d)(c(r),"setColor",(function(){console.warn(Hp)})),(0,L.d)(c(r),"clearColor",(function(){console.warn(Hp)})),(0,L.d)(c(r),"zoomProportion",0),(0,L.d)(c(r),"_cache",{}),(0,L.d)(c(r),"_dirty",!0),(0,L.d)(c(r),"appearance"),(0,L.d)(c(r),"mapView"),r.id=e.polygon.id,r.mapView=i,r.options=(0,kp.default)({},{text:e.shortText||e.text||""},e,jp),null!=e.rank&&e.rank>0)r.rank=e.rank,r._initialRank=e.rank;else{var o="test"===A.env.NODE_ENV?Up:Math.random();Up++,r.rank=o,r._initialRank=o}var a=r.options,s=a.position,l=a.polygon,u=a.scale,d=a.heightAbovePolygon,p=a.polygonHeight;e.stateText&&(r.options.text+=" (".concat(e.stateText,")")),r.appearance={margin:r.options.appearance.margin/u,text:{lineHeight:r.options.appearance.lineHeight,numLines:r.options.appearance.text.numLines,size:r.options.appearance.text.size,maxWidth:r.options.appearance.text.maxWidth/u,foregroundColor:r.options.appearance.text.foregroundColor,backgroundColor:r.options.appearance.text.backgroundColor},marker:{size:r.options.appearance.marker.size/u,foregroundColor:{active:r.options.appearance.marker.foregroundColor.active,inactive:r.options.appearance.marker.foregroundColor.inactive||(0,Ip.default)(r.options.appearance.marker.foregroundColor.active).setAlpha(.5).toRgbString()},backgroundColor:{active:r.options.appearance.marker.backgroundColor.active,inactive:r.options.appearance.marker.backgroundColor.inactive||(0,Ip.default)(r.options.appearance.marker.backgroundColor.active).setAlpha(.5).toRgbString()}}};var f=p+d;return s.setZ(f),r.position=s,r.mapId=l.map,h(r)}return x(n,[{key:"enable",value:function(){f(d(n.prototype),"enable",this).call(this),this._dirty=!0}},{key:"strategies",get:function(){var e=this,t=this.dimensions,n=t.width,i=t.height,r=this.appearance.margin,o=this.appearance.marker.size*devicePixelRatio*(1+Math.pow(1-this.zoomProportion,3)),a=8*devicePixelRatio,s=n+2*Fp-a,l=i+2*Fp-a;return[{name:"RIGHT",getBoundingBox:function(e){var t=e.x,n=e.y;return[n-l/2-r,n+l/2+r,t-o/2-r,t+o/2+s+r]},onStrategySelected:function(t){e.newStyle=Object.assign({},t.style,{textAlign:Rp.LEFT,pinVisibility:1,top:-l/2-a/2,left:o/2,textLabelVisible:!0,cachedSymbol:e.getCachedSymbol("RIGHT",Rp.LEFT,Fp)})}},{name:"LEFT",getBoundingBox:function(e){var t=e.x,n=e.y;return[n-l/2-r,n+l/2+r,t-o/2-s-a/2-r,t+o/2+r]},onStrategySelected:function(t){e.newStyle=Object.assign({},t.style,{textAlign:Rp.RIGHT,pinVisibility:1,top:-l/2-a/2,left:-o/2-s-a/2,textLabelVisible:!0,cachedSymbol:e.getCachedSymbol("LEFT",Rp.RIGHT,s*devicePixelRatio-2*Fp+a)})}},{name:"TOP",getBoundingBox:function(e){var t=e.x,n=e.y;return[n-l-o/2-r,n+o/2+r,t-s/2-r,t+s/2+r]},onStrategySelected:function(t){e.newStyle=Object.assign({},t.style,{pinVisibility:1,textAlign:Rp.CENTER,textLabelVisible:!0,top:-l-o/2-a/2,left:-s/2,cachedSymbol:e.getCachedSymbol("TOP",Rp.CENTER,s*devicePixelRatio/2)})}},{name:qp,getBoundingBox:function(e){var t=e.x,n=e.y;return[n-o/4,n+o/4,t-o/4,t+o/4]},onStrategySelected:function(t){e.newStyle=Object.assign({},t.style,{pinVisibility:.5,textLabelVisible:!1})}}]}},{key:"getCachedSymbol",value:function(e,t,n){var i=this.dimensions,r=i.width,o=i.height;if(null==this._cache[e]){var a,s=r+2*Fp,l=o+2*Fp;null!=window.OffscreenCanvas?a=new OffscreenCanvas(s*devicePixelRatio,l*devicePixelRatio):((a=document.createElement("canvas")).width=s*devicePixelRatio,a.height=l*devicePixelRatio,a.style.width=s+"px",a.style.height=l+"px");var u=a.getContext("2d"),c=this.options.appearance.text.size;u.textAlign=t,u.font="bold ".concat(c*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),u.textBaseline="middle",u.lineJoin="miter",u.miterLimit=2,u.strokeStyle="white",u.lineWidth=Fp,u.fillStyle=this.appearance.text.foregroundColor,u.strokeStyle=this.appearance.text.backgroundColor,this.fillText&&"function"==typeof this.fillText&&this.fillText(u,n,l*devicePixelRatio/2),this._cache[e]=a}return this._cache[e]}},{key:"colliderDidMount",value:function(){var e=this.appearance.text,t=e.size,n=e.maxWidth,i=e.numLines,r=e.lineHeight,o=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{strokeText:!0},a="bold ".concat(t*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif");Op.font=a;for(var s=[],l=e.split(" "),u=0,c=0,h=0;c<l.length;){var d=l[c];if(u===i&&u>0){s[u-1]+="...";break}if(null==s[u]&&(s[u]=d,c++),1===l.length){s[u]=d;break}if(null==l[c])break;Op.measureText(s[u]+" "+l[c]).width<=n?(s[u]+=" "+l[c],c++):u++}s.forEach((function(e){var t=Op.measureText(e).width;h=Math.max(t,h)}));var p=t*devicePixelRatio*r,f=s.length*p;return{maxWidth:h,maxHeight:f,lines:s.length,draw:function(e,t,n){1===s.length?(o.strokeText&&e.strokeText(s[0],t,n),e.fillText(s[0],t,n)):(o.strokeText&&(e.strokeText(s[0],t,n-p/2),e.strokeText(s[1],t,n+p/2)),e.fillText(s[0],t,n-p/2),e.fillText(s[1],t,n+p/2))}}}(this.options.text||"",t,n,i,r),a=o.draw,s=o.lines,l=o.maxWidth,u=o.maxHeight;this.fillText=a,this.lines=s,this.dimensions={width:l/devicePixelRatio,height:u/devicePixelRatio}}},{key:"colliderDidUpdatePosition",value:function(e,t){this.screenPosition=[e,t]}},{key:"setPriority",value:function(e){f(d(n.prototype),"setPriority",this).call(this,e),this._dirty=!0}},{key:"colliderDidUpdateVisiblity",value:function(){!this._dirty||(this.action===gp.show?this.visible=!0:this.action===gp.hide&&(this.visible=!1),this.action=gp.initial,this.style=this.newStyle,this._dirty=!1)}},{key:"colliderDidGoOutsideGrid",value:function(){this._dirty=!0}},{key:"colliderDidNotFindAHome",value:function(){this.action=gp.hide}},{key:"disable",value:function(){f(d(n.prototype),"disable",this).call(this),this._dirty=!0,this.visible=!1}},{key:"draw",value:function(e){if(this.visible){var t=r(this.screenPosition,2),n=t[0],i=t[1],o=this.style,a=o.pinVisibility,s=o.textLabelVisible,l=o.top,u=o.left,c=o.textAlign,h=o.cachedSymbol,d=zp(n),p=zp(i),f=1+Math.pow(1-this.mapView.currentScale,3),m=this.appearance.marker.size*devicePixelRatio*f;e.lineWidth=4*devicePixelRatio,e.textAlign=c,s&&null!=h&&(e.shadowColor="transparent",e.drawImage(h,d+zp(u),p+zp(l)));var v=zp(1===a?m/4:m/6);e.shadowColor="rgba(0,0,0,0.4)",e.shadowOffsetY=2*devicePixelRatio,e.shadowBlur=5*devicePixelRatio,e.beginPath(),e.arc(d,p,v+zp(3),0,2*Math.PI),e.fillStyle=1===a?this.appearance.marker.backgroundColor.active:this.appearance.marker.backgroundColor.inactive,e.fill(),e.beginPath(),e.arc(d,p,v+zp(.2),0,2*Math.PI),e.shadowColor="transparent",e.fillStyle=1===a?this.appearance.marker.foregroundColor.active:this.appearance.marker.foregroundColor.inactive,e.fill()}}}],[{key:"clone",value:function(e,t){if(void 0===n.original)return n.original=new n(e,t),n.original;var i=Object.create(n.original);if(i.id=e.polygon.id,i.options.text=e.text,null!=e.rank&&e.rank>0)i.rank=e.rank,i._initialRank=e.rank;else{var r=Math.random();i.rank=r,i._initialRank=r}i.position=e.position;var o=e.polygonHeight;return i.position.setZ(o),i.mapId=e.polygon.map,e.stateText&&(i.options.text+=" (".concat(e.stateText,")")),i}}]),n}(bp),Gp=Vp;(0,L.d)(Gp,"original");var Wp=Gp;O(),O();var Xp=function(e){var t,n,i=this,r=document.createElement("div");r.style.display="none!important",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",this.hovering=!1,e.appendChild(r),this.show=function(e){i.hovering||i.setPosition(t,n),i.hovering=!0,r.style.removeProperty("display"),r.textContent=e.toString(),r.className=e.hoverLabelClass},this.hide=function(){i.hovering&&(i.hovering=!1,r.style.setProperty("display","none","important"),r.textContent="")},this.setZIndex=function(e){r.style.zIndex=e},this.setPosition=function(o,a){t=o,n=a,i.hovering&&(a-r.clientHeight>0?(a-=r.clientHeight,o+r.clientWidth>e.clientWidth&&(o-=r.clientWidth)):o=o-r.clientWidth-10,r.style.transform="translate("+o+"px, "+a+"px)")},this.destroy=function(){e.removeChild(r)}};Xp.MODES={NONE:1,NO_TEXT_LABEL_ONLY:2,ALL:3};var Yp,Zp,Jp,Qp,Kp,$p,ef=Xp,tf=2,nf=.5,rf=56/1.2,of=function(){function e(){b(this,e),this.x=0,this.y=0,this.width=0,this.height=0,this.layer=null,this.index=null}return x(e,[{key:"layout",value:function(e,t,n,i,r,o){var a,s=this.canvasBounds.rotation*Math.PI/180,l=this.width*this.pixelsPerMu,u=this.height*this.pixelsPerMu;"left"==this.canvasBounds.align?a=this.margin:"right"==this.canvasBounds.align?a=this.canvasBounds.maxWidth-l-this.margin:"center"==this.canvasBounds.align&&(a=(this.canvasBounds.maxWidth-l-this.margin)/2);var c=a*Math.cos(s),h=-a*Math.sin(s),d=this.index;t.setXYZ(d,this.canvasBounds.x-e.width/2+c,-this.canvasBounds.y+e.height/2+h,this.z+.1),n.setXY(d,l,u),i.setX(d,s);var p=this.layer.canvas;r.setXYZW(d,this.x/p.width,1-this.y/p.height,this.width/p.width,this.height/p.height),o.setXYZ(d,this.color.r,this.color.g,this.color.b),t.needsUpdate=!0,n.needsUpdate=!0,i.needsUpdate=!0,r.needsUpdate=!0,o.needsUpdate=!0}}]),e}(),af=function(){function e(t,n,i,r){b(this,e),this.x=t,this.y=n,this.width=i,this.height=r}return x(e,[{key:"leftOverSpace",value:function(e){return this.width<e.width||this.height<e.height?null:this.height*(this.width-e.width)+this.width*(this.height-e.height)}},{key:"split",value:function(t,n,i){t.x=this.x,t.y=this.y,this.width-t.height<16&&this.height-t.height<16?n.splice(i,1):this.width===t.width?n.splice(i,1,new e(this.x,this.y+t.height,this.width,this.height-t.height)):this.height===t.height?n.splice(i,1,new e(this.x+t.width,this.y,this.width-t.width,this.height)):n.splice(i,1,new e(this.x+t.width,this.y,this.width-t.width,t.height),new e(this.x,this.y+t.height,this.width,this.height-t.height))}}]),e}(),sf=function(){function e(t,n,i,r){b(this,e);for(var o=5;Math.pow(2,o)<r;)o+=1;for(r=Math.pow(2,o),o=10;Math.pow(2,o)<i;)o+=1;i=Math.pow(2,o),this.atlas=t,this.map=n,this.canvasWidth=i,this.canvasHeight=r,this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.spaces=[new af(0,0,this.canvas.width,this.canvas.height)],this.free=[],this.labels=[],this.count=64;var a=new Float32Array(3*this.count),s=new Float32Array(2*this.count),l=new Float32Array(this.count),u=new Float32Array(4*this.count),c=new Float32Array(3*this.count);this.uv=new wc(u,4,!1,1),this.uv.set(u),this.uv.needsUpdate=!0,this.origin=new wc(a,3,!1,1),this.origin.set(a),this.origin.needsUpdate=!0,this.size=new wc(s,2,!1,1),this.size.set(s),this.size.needsUpdate=!0,this.rotation=new wc(l,1,!1,1),this.rotation.set(l),this.rotation.needsUpdate=!0,this.color=new wc(c,3,!0,1),this.color.set(c),this.color.needsUpdate=!0;for(var h=0;h<this.count;h++)this.zero(h);var d=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]);this.geometry=new _c,this.geometry.setIndex([0,3,1,3,2,1]),this.geometry.setAttribute("position",new bi(d,3)),this.geometry.setAttribute("size",this.size),this.geometry.setAttribute("origin",this.origin),this.geometry.setAttribute("rotation",this.rotation),this.geometry.setAttribute("uv",this.uv),this.geometry.setAttribute("color",this.color),this.texture=new ks(this.canvas),this.texture.anisotropy=16,this.material=new $l,this.material.vertexShader="attribute vec2 position;\nattribute vec3 origin;\nattribute vec2 size;\nattribute float rotation;\nattribute vec4 uv;\nattribute vec3 color;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tvec4 mapDirectionVector = vec4(0, 1, 0, 0) * viewMatrix * modelMatrix;\n\tfloat mapDirection = atan(mapDirectionVector.y, mapDirectionVector.x);\n\n\tfloat cosRotation = cos(rotation);\n\tfloat sinRotation = sin(rotation);\n\n\tmat4 rotationMatrix = mat4(\n\t\tvec4(cosRotation, -sinRotation, 0.0, 0.0),\n\t\tvec4(sinRotation, cosRotation, 0.0, 0.0),\n\t\tvec4(0.0, 0.0, 1.0, 0.0),\n\t\tvec4(0.0, 0.0, 0.0, 1.0)\n\t);\n\n\tmat4 translate = mat4(\n\t\tvec4(1, 0, 0, 0),\n\t\tvec4(0, 1, 0, 0),\n\t\tvec4(0, 0, 1, 0),\n\t\tvec4(origin, 1)\n\t);\n\n\tgl_Position = projectionMatrix *\n\t              viewMatrix *\n\t              modelMatrix *\n\t              translate *\n\t              rotationMatrix *\n\t              (vec4(position * size - vec2(0, size.y / 2.0), 0, 1));\n\n\n\tvec2 uvStart = uv.xy;\n\tvec2 uvSize = uv.zw;\n\n\tif (sin(mapDirection + rotation) > 0.0) {\n\t\tvUV = position * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\n\t} else {\n\t\tvUV = (vec2(1, 1) - position) * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\t\t\n\t}\n\n\tvColor = color;\n} ",this.material.fragmentShader="precision mediump float;\n\nuniform sampler2D textureLabel;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tgl_FragColor = texture2D(textureLabel, vUV);\n\tgl_FragColor.rgb = vColor;\n}",this.material.uniforms={textureLabel:{value:this.texture}},this.material.transparent=!0,this.mesh=new rr(this.geometry,this.material),this.obj=new bn,this.obj.add(this.mesh),this.obj.frustumCulled=!1,this.mesh.frustumCulled=!1,this.map.add(this.obj)}return x(e,[{key:"space",value:function(){return this.spaces.map((function(e){return e.width*e.height})).reduce((function(e,t){return e+t}))}},{key:"zero",value:function(e){this.origin.array[3*e+0]=0,this.origin.array[3*e+1]=0,this.origin.array[3*e+2]=0,this.size.array[2*e+0]=0,this.size.array[2*e+1]=0,this.rotation.array[e]=0,this.uv.array[4*e+0]=0,this.uv.array[4*e+1]=0,this.uv.array[4*e+2]=0,this.uv.array[4*e+3]=0,this.color.array[3*e+0]=0,this.color.array[3*e+1]=0,this.color.array[3*e+2]=0,this.origin.needsUpdate=!0,this.size.needsUpdate=!0,this.rotation.needsUpdate=!0,this.uv.needsUpdate=!0,this.color.needsUpdate=!0}},{key:"findSpace",value:function(e){if(0!=this.free.length&&this.labels.length==this.count)return!1;for(var t=-1,n=0;n<this.spaces.length;n++){var i=this.spaces[n].leftOverSpace(e);null!==i&&(-1===t||this.spaces[n].leftOverSpace(e)<i)&&(t=n)}return-1!==t&&(this.spaces[t].split(e,this.spaces,t),e.layer=this,0===this.free.length?(e.index=this.labels.length,this.labels.push(e)):(e.index=this.free.pop(),this.labels[e.index]=e)),-1!=t}},{key:"remove",value:function(e){if(void 0!==e.index){this.zero(e.index),this.context.clearRect(e.x,e.y,e.width,e.height),this.spaces.push(new af(e.x,e.y,e.width,e.height)),this.free.push(e.index),this.labels[e.index]=null;var t,n=!0,i=(0,C.Z)(this.labels);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(!(n=n&&null!=r))break}}catch(o){i.e(o)}finally{i.f()}n&&this.atlas.removeLayer(this)}}},{key:"render",value:function(e){this.context.save(),this.context.rect(e.x+1,e.y+1,e.width-2,e.height-2),this.context.clip(),this.context.font=e.size+"px "+e.font;var t,n=(0,C.Z)(e.lines);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.context.fillText(i.text,i.x+e.x+4,i.y+e.y+i.height+4)}}catch(r){n.e(r)}finally{n.f()}this.texture.needsUpdate=!0,this.context.restore()}},{key:"onWebGLContextRestored",value:function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.texture=new ks(this.canvas),this.texture.anisotropy=16,this.material.uniforms.textureLabel.value=this.texture;var e,t=(0,C.Z)(this.labels);try{for(t.s();!(e=t.n()).done;){var n=e.value;null!=n&&this.render(n)}}catch(i){t.e(i)}finally{t.f()}}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.texture.dispose()}}]),e}(),lf=function(){function e(){b(this,e),this.layers=[],this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}return x(e,[{key:"addLabel",value:function(e,t,n,i,r,o){var a,s=0,l=0,u=(0,C.Z)(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;l=Math.max(Math.ceil(c.width+c.x),l),s=Math.max(Math.ceil(c.height+c.y),s)}}catch(m){u.e(m)}finally{u.f()}var h,d=new of;d.map=e,d.width=l+8,d.height=s+8,d.lines=t,d.font=n,d.size=i,d.canvasBounds=r.canvasBounds,d.margin=r.margin,d.heightMargin=r.heightMargin,d.pixelsPerMu=o,d.z=r.height,d.view=r,d.color=r.color;var p,f=(0,C.Z)(this.layers);try{for(f.s();!(p=f.n()).done;){if((h=p.value).map===e){if(h.findSpace(d))break;h=null}else h=null}}catch(m){f.e(m)}finally{f.f()}if(null==h){if(h=new sf(this,e,d.width,d.height),this.layers.push(h),!h.findSpace(d))return;this.layers.sort((function(e,t){return t.space()-e.space()}))}return h.render(d),d.layout(e.mapClass,h.origin,h.size,h.rotation,h.uv,h.color),d.layer=h,d}},{key:"removeLayer",value:function(e){var t=this.layers.indexOf(e);-1!=t&&this.layers.splice(t,1)}},{key:"measure",value:function(e,t,n){return this.context.font=n+"px "+t,this.context.measureText(e)}},{key:"onWebGLContextRestored",value:function(){var e,t=(0,C.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){e.value.onWebGLContextRestored()}}catch(n){t.e(n)}finally{t.f()}}},{key:"dispose",value:function(){var e,t=(0,C.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),uf=function(){function e(t,n,i,r,o,a,s,l,u){b(this,e);var c=Rd(t.polygon,n.polygons);this.text=(t.shortText||t.text).trim(),this.stateText=t.stateText?" ("+t.stateText+")":"",this.font=t.font||r,this.atlas=u,this.canvasBounds=t.canvasBounds||c.canvasBounds,this.mapScale=i.getMapScale()||1,this.margin=(t.margin||tf)*this.mapScale,this.heightMargin=(t.heightMargin||nf)*this.mapScale,this.scaleMin=t.scaleMin||.25,this.scaleStep=t.scaleStep>0?t.scaleStep:.25,this.multiline=null==t.multiline||t.multiline,this.height=Number(t.height)||null,this.polygonMeshesById=o,this.polyId=t.polygonId||Nd(t.polygon,n.polygons),this.map=i,this.color=new hi(Vd(t.color||l.colors.text||0,0)),this.baseColor=this.color,this.hideOnCreate=!1,this.hoverLabelText=t.text.trim(),this.fontSize=t.fontSize*this.mapScale||t.size*rf||56,this.hoverLabelMode=t.hoverLabelMode3D||ef.MODES.ALL,this.hoverLabelClass=t.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=this.hoverLabelMode==ef.MODES.ALL||this.hoverLabelMode==ef.MODES.NO_TEXT_LABEL_ONLY,this.hoverIfLabelFails=this.hoverLabelMode==ef.MODES.ALL||this.hoverLabelMode==ef.MODES.NO_TEXT_LABEL_ONLY,this.textLabelsByPolygonId=a,this.map.textObjects.push(this)}return x(e,[{key:"create",value:function(){var e=this;if(!this.doNotCreate){if(null==e.canvasBounds)return e.invalid=!0,e.message="No Canvas Bounds. Can't draw text '"+e.text+"'",void(e.showHoverLabel=e.hoverIfLabelFails);e.showHoverLabel=this.hoverLabelMode==ef.MODES.ALL;var t=.03571428571428571*this.mapScale,n=28/this.mapScale,i=[this.text];this.stateText.length&&i.unshift(this.text+this.stateText);for(var r=0,o=i;r<o.length;r++){for(var a,s,l,u=o[r].split(" ").map((function(t){return{width:e.atlas.measure(t,e.font,e.fontSize).width,word:t}})),c=(this.canvasBounds.maxWidth-2*this.margin)*n,h=(this.canvasBounds.maxHeight-2*this.heightMargin)*n,d=(1-this.scaleMin)/this.scaleStep,p=0,f=this.atlas.measure(" ",this.font,this.fontSize).width,m=hf(this.fontSize+"px "+this.font),v=0,g=u.length;v<g;v++){var y=u[v].width,x=Math.ceil((y-c)/(y*this.scaleStep));p=Math.max(x,p)}if(null==this.height)if(this.polygonMeshesById[this.polyId]){var b=this.polygonMeshesById[this.polyId];b.geometry.boundingBox||b.geometry.computeBoundingBox(),this.height=b.geometry.boundingBox.max.z+b.position.z}else this.height=0;var _=this.scaleStep;e:for(s=p;s<=d;s++){l=1-s*_;var w=u[0].width*l;a=[{text:u[0].word,width:w,height:m*l,x:0,y:0}];for(var M=1;M<u.length;M++){var E=u[M],q=(E.width+f)*l;if(w+q<c)a[a.length-1].text+=" "+E.word,a[a.length-1].width+=q,w+=q;else{if(!this.multiline)continue e;a[a.length-1].width=w,w=E.width*l,a.push({text:E.word,width:w,height:m*l,x:0,y:a[a.length-1].height+a[a.length-1].y})}}if(a.length*m*l<=h){this.invalid=!1;break}}if(0==this.invalid)break}if(0==this.invalid){var T,S=a.map((function(e){return Math.ceil(e.width)})).reduce((function(e,t){return Math.max(e,t)})),P=(0,C.Z)(a);try{for(P.s();!(T=P.n()).done;){var A=T.value;A.x=(S-A.width)/2}}catch(L){P.e(L)}finally{P.f()}this.label=this.atlas.addLabel(this.map,a,this.font,this.fontSize*l,this,t)}this.created=!0}}},{key:"flipIfNeeded",value:function(e){}},{key:"removeSelf",value:function(e){var t=this;this.created?(null!=this.label&&(this.label.layer.remove(this.label),this.label=null),e||(this.map.textObjects=this.map.textObjects.filter((function(e){return e!=t})),Object.keys(this.textLabelsByPolygonId).forEach((function(e){t.textLabelsByPolygonId[e]==t&&delete t.textLabelsByPolygonId[e]})))):this.doNotCreate=!0}},{key:"setColor",value:function(e){this.color=new hi(Vd(e,0)),null!=this.label&&null!=this.label.layer&&(this.label.color=this.color,this.label.layout(this.map.mapClass,this.label.layer.origin,this.label.layer.size,this.label.layer.rotation,this.label.layer.uv,this.label.layer.color))}},{key:"clearColor",value:function(){this.setColor(this.baseColor)}},{key:"hide",value:function(){this.label?this.label.layer.zero(this.label.index):this.hideOnCreate=!0}},{key:"show",value:function(){if(this.label){var e=this.label.layer,t=this.map;this.label.layout(t.mapClass,e.origin,e.size,e.rotation,e.uv,e.color)}else this.hideOnCreate=!1}},{key:"toString",value:function(){return this.hoverLabelText}}]),e}(),cf=new Map,hf=function(e){var t=cf[e];if(null!=t)return t;var n=document.createElement("span");n.textContent="Hg",n.style.font=e;var i=document.createElement("div");i.style.cssText="display: inline-block; width: 1px; height: 0px;";var r=document.createElement("div");r.appendChild(n),r.appendChild(i),document.body.appendChild(r);try{var o=n.getBoundingClientRect()}finally{r.remove()}return null!=o.height&&(cf[e]=o.height,t=o.height),t},df=new lf,pf={},ff=function(){function e(t,n){b(this,e),(0,L.f)(this,Jp),(0,L.f)(this,Kp),(0,L.f)(this,Yp,void 0),(0,L.f)(this,Zp,void 0),(0,L.g)(this,Yp,t),(0,L.g)(this,Zp,n)}return x(e,[{key:"labelAllLocations",value:function(){var e,t,n,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.excludeTypes||[],a=r.sortFunction,s=(r.locations||(0,L.e)(this,Yp).venue.locations).filter((function(e){return-1===o.indexOf(e.type)})),l=r.translationMap||{},u=s;null!=a&&(u=s.sort(a));for(var c={},h={},d=0,p=u.length;d<p;++d)for(var f=u[d],m=f.polygons,v=0,y=m.length;v<y;++v){var x=m[v],b=c[x.id];if(!0!==b){var _=x.canvasBounds;c[x.id]=!0;var w=(0,L.e)(this,Yp).currentMap,M=0;if(_){var E=_.x-w.width/2,q=-_.y+w.height/2;M=Math.sqrt(Math.pow(E,2)+Math.pow(q,2))}var T=f;if(a?c[x.id]=!0:!1===b?(T=Gd(x,(0,L.e)(this,Yp).venue),c[x.id]=!0):c[x.id]=!1,null==T)continue;var S=T.name,P=T.shortName,A=x.rank,O="";T.states&&T.states.length>0&&(O=(null==(e=T.state)?void 0:e.id)&&l[null==(t=T.state)?void 0:t.id]||(null==(n=T.state)?void 0:n.name)||"");var I=T.showLabelWhenImagePresent;h[x.id]={polygon:x,text:S,shortText:P,stateText:O,distance:M,rank:A,showLabelWhenImagePresent:I}}}for(var k=[],N=Object.values(h),R=0,D=N.length;R<D;++R){var B=N[R];if(r.flatLabels){var z=g(g(g({},r),B),{},{createDespiteImage:B.showLabelWhenImagePresent});k.push((0,L.h)(this,Kp,$p).call(this,B.polygon,z))}else{var F,U=void 0,j=g(g({appearance:r.appearance},B),{},{createDespiteImage:B.showLabelWhenImagePresent,rank:null==(i=B.rank)?void 0:i.score}),H=(0,C.Z)(B.polygon.entrances);try{for(H.s();!(F=H.n()).done;){var V=F.value;if((!B.rank||B.rank.node==V.id)&&(U=(0,L.e)(this,Zp).getPositionNode(V))){if(j.position=U,!(0,L.e)(this,Zp).polygonMeshesById[B.polygon.id+"_image"]||r.createDespiteImage){var G=(0,L.h)(this,Jp,Qp).call(this,j);B.polygon.map===(0,L.e)(this,Yp).currentMap.id&&!1===G.enabled&&G.enable(),k.push(G)}break}}}catch(W){H.e(W)}finally{H.f()}}}return(0,L.e)(this,Zp).mapObjects.forEach((function(e){return e.textObjects.forEach((function(e){return e.show()}))})),k}},{key:"removeLabel",value:function(e){var t=(0,L.e)(this,Zp).textLabelsByPolygonId[e];(0,L.e)(this,Zp).smartCollisionEngine.remove(e),t.removeSelf(),delete(0,L.e)(this,Zp).textLabelsByPolygonId[e]}},{key:"removeAllLabels",value:function(){var e=this;Array.from((0,L.e)(this,Zp).mapObjects.values()).forEach((function(t){t.labels.forEach((function(t){(0,L.e)(e,Zp).smartCollisionEngine.remove(t.id)}))})),(0,L.e)(this,Zp).textLabelsByPolygonId={},(0,L.e)(this,Yp).tryRendering(),(0,L.e)(this,Zp).renderer.disposeOfRenderLists()}},{key:"labelPolygon",value:function(e,t){var n,i,r,o,a=Rd(e);if("flatLabels"in t&&!0===t.flatLabels)return(0,L.h)(this,Kp,$p).call(this,a,t);var s,l=(0,C.Z)(a.entrances);try{for(l.s();!(s=l.n()).done;){var u=s.value;null!=(null==(n=a.rank)?void 0:n.node)&&(null==(i=a.rank)?void 0:i.node)!=u.id||(o=u)}}catch(h){l.e(h)}finally{l.f()}var c=g(g({},t),{},{polygon:a,scale:"scale"in t&&t.scale||1,rank:(null==(r=a.rank)?void 0:r.score)||0,position:(0,L.e)(this,Zp).getPositionNode(o.id)});return(0,L.h)(this,Jp,Qp).call(this,c,!1)}}]),e}();Yp=new WeakMap,Zp=new WeakMap,Jp=new WeakSet,Qp=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.polygon,r=(0,L.e)(this,Zp).mapObjects.get(i.map);null!=(0,L.e)(this,Zp).textLabelsByPolygonId[i.id]&&this.removeLabel(i.id);var o,a=i.geometry.scale.z*Math.max(r.mapClass.width,r.mapClass.height)/1e3;return o=new Wp(g(g({polygonHeight:a},e),{},{polygon:i}),(0,L.e)(this,Zp)),(0,L.e)(this,Zp).smartCollisionEngine.add(i.id,o),r.labels.add(o),r.addPendingLowPriorityTask("createTextObject",(function(){var n=o.options.polygon.id;!(0,L.e)(t,Zp).polygonMeshesById[n+"_image"]||e.createDespiteImage?(0,L.e)(t,Zp).determineNewLabelSize():(o.disable(),(0,L.e)(t,Zp).smartCollisionEngine.remove(n),r.labels.delete(o)),(0,L.e)(t,Zp).smartCollisionEngine.makeCollidersDirty()})),(0,L.e)(this,Zp).textLabelsByPolygonId[i.id]=o,n||(0,L.e)(this,Yp).tryRendering(),o},Kp=new WeakSet,$p=function(e,t){var n=this,i=(0,L.e)(this,Zp).mapObjects.get(e.map||t.map||(0,L.e)(this,Yp).currentMap),r=new uf(g(g(g({},t),t.appearance),{},{polygon:e}),(0,L.e)(this,Yp).venue,i,"Sans-Serif",(0,L.e)(this,Zp).polygonMeshesById,(0,L.e)(this,Zp).textLabelsByPolygonId,pf,(0,L.e)(this,Zp),df);return i.addPendingLowPriorityTask("createLabel",(function(){r.create(),(0,L.e)(n,Yp).tryRendering()})),(0,L.e)(this,Zp).textLabelsByPolygonId[e.id]=r,r};var mf=ff;O();var vf=(0,L.c)(B());O();var gf={ANIMATED:"animated",ALWAYS_ON_TOP:"always_on_top",ALL:"all",TWEEN:"tween"};O();var yf=new Map([["journey-departure",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 468.614 468.614">\n    <g>\n        <path d="M291.299 116.517h-3.501c10.635-12.36 17.102-28.378 17.102-45.915C304.899 31.666 273.219 0 234.305 0c-38.93 0-70.584 31.666-70.584 70.602 0 17.537 6.477 33.555 17.093 45.915h-3.51c-19.645 0-35.626 15.997-35.626 35.645v117.105c0 19.648 15.982 35.633 35.626 35.633h1.372v128.07c0 20.332 10.697 35.645 24.884 35.645h61.468c14.208 0 24.908-15.312 24.908-35.645V304.9h1.363c19.642 0 35.639-15.984 35.639-35.633V152.161c-.006-19.647-15.998-35.644-35.639-35.644z" fill="#386460" />\n        <path d="M291.299 116.517h-3.501c10.635-12.36 17.102-28.378 17.102-45.915C304.899 31.666 273.219 0 234.305 0c-38.93 0-70.584 31.666-70.584 70.602 0 17.537 6.477 33.555 17.093 45.915h-3.51c-19.645 0-35.626 15.997-35.626 35.645v117.105c0 19.648 15.982 35.633 35.626 35.633h1.372v128.07c0 20.332 10.697 35.645 24.884 35.645h61.468c14.208 0 24.908-15.312 24.908-35.645V304.9h1.363c19.642 0 35.639-15.984 35.639-35.633V152.161c-.006-19.647-15.998-35.644-35.639-35.644z" style="fill:none;stroke-width:8px;stroke:white" />\n    </g>\n</svg>'],["journey-destination",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n    <g>\n        <path d="M12 0a8 8 0 00-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0020 8a8 8 0 00-8-8zm0 4a4 4 0 110 8 4 4 0 010-8z" fill="#e74c3c"/>\n        <path d="M12 0a8 8 0 00-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0020 8a8 8 0 00-8-8zm0 4a4 4 0 110 8 4 4 0 010-8z" style="fill:none;stroke-width:1px;stroke-linecap:round;stroke:white"/>\n        <path d="M12 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6z" fill="#c0392b"/>\n    </g>\n</svg>'],["question-mark",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M25.86,2.59A10.12,10.12,0,0,0,22.4.65a14,14,0,0,0-8.85.14A10.33,10.33,0,0,0,10,3.1,9.78,9.78,0,0,0,7.72,6.68,10,10,0,0,0,7,11h6a6.3,6.3,0,0,1,.18-2.33,5.57,5.57,0,0,1,1-1.77,4.05,4.05,0,0,1,1.5-1.13,6.87,6.87,0,0,1,4.5-.08,4.4,4.4,0,0,1,1.6.88,3.37,3.37,0,0,1,.93,1.22A3.84,3.84,0,0,1,23,9.29a3.15,3.15,0,0,1-.38,1.5,10.54,10.54,0,0,1-1.26,1.72,18.9,18.9,0,0,1-1.78,1.8c-.71.66-1.4,1.34-2,2C16.31,17.55,14,19,14,21v6h6V23c0-.63,0-1,1-2s1.24-1.3,2-2,1.69-1.66,2.5-2.52a14,14,0,0,0,2.28-2.81,7.51,7.51,0,0,0,1.08-4.05,9.68,9.68,0,0,0-.78-3.91A8.34,8.34,0,0,0,25.86,2.59Z"/><circle cx="17" cy="33" r="3"/></svg>'],["arrow","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAQkHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZpZciQ7rkT/uYpeAicQ5HI4mr0dvOX3ATOl0li3q3SVJkUqFMEBcHc4IuX2///fcf/hK7cSXRatpZXi+cott9h5U/3j63EMPt+fL1/h+fPdeff6NnJMHNPjD2U/7+qcl183aH6eH+/PO52PN7E+B3qZ+Tlgspkjb57X1edAKT7Oh+fvrj3v6/nNdp7ftd057abHnz78npVgLGG8FF3cKSTPz2oXJFaQWuocCz9D0mhnEu8Tx54k6dexc98F77vY+f48n96HwvnyvKB8iNHzfJCvY3cj9HZF4dfM7/6QZ4j+7deb2J2z6jn7sbueC5Eq7rmpl63cd1w4GCrd2wov5Vt4r/fVeFW2OMnYIpuD13ShhUi0T8hhhR5O2Pc4w2SJOe5IuGOMM6Z7rhL+FudNSrZXOFFJz3KpkqtJ1hKn4+tawp233flmqMy8AlfGwGCBOz693Fcn/+b1OtA5Bt0QfH2NFeuKFnCWYZmzn1xFQsJ5xlRufO/LvcGNf5PYRAblhrmywe7HY4gh4Re20s1z4jrx2fkHNYKu5wCEiLmFxYREBnwJSUIJXmPUEIhjJT+dlceU4yADQSSu4A65SamQnBptbu7RcK+NEh+nkRYSIZBGSQ0EIlk5C/jRXMFQlyTZiUgRlSpNekklFymlaDGN6po0q2hR1apNe001V6mlaq211d5iS0iYtNLUtdpa651JO0N37u5c0fuII408ZJSho442+gQ+M0+ZZeqss82+4koL+q+y1K262uo7bKC085Zdtu662+4HrJ108pFTjp562umvWXtm9X3WwofM/T5r4Zk1y1i+1+mvrHFa9WWIYHIiljMyFnMg42oZANDRcuZryDla5ixnvkVIIZGsBbHkrGAZI4N5hygnvObuV+Z+mzcn+Y/yFr/LnLPU/RuZc5a6Z+Y+5+2LrK1+K0q6CTIWWkx9OggbF+zaY+1Wk/766H46wF8ONFY+O8hBMEc7oc4Vdh+8JsE+PUSrVjr70Zz1+H56PH3o9sRR1ql5Ha8bUMQxpe89Tki8Sb0tE23cw3DcfEo+ugnj2G3WEmononVfoag71pVjR+EmAE53eT5tqYfEHl/7ThMusaI+St0jktFa9gKnreiQqCNpZ2mJdSkbaiK6DrovYR4/JhJfRsx5d5EVZnEIPetHnU5KynJPTSuCPuC0lOuXH7n1DNq7DpUtHbhM5lDA0c2bnDCJoOObMnyj+aPjPwx0yiDUxKKsg35VnRnBEVhonKwK5hOk5NttUrhr2+tMOXkPJb1RZ+iAelYjL2MuO3pGRQ78GdxwOOaTAcJZcewq7ilB1RJCSozUdSEdwVJVb6asiBsHH1Bqgbiv3Cmkkis6ktVnZGRRwMNJjUA3Ao2127YWdhAIblxF51hzMcZsVZc0r0dJo5Liqfn41Q+q193SGhhkMkgaLJRNnEpqBtyVvbcVffIk+LE9QPFBTMTQe0aWkMXMnx3dy5sfHreDE60Ql50E+SqRcmfK16L2p0Ol8JFATu3qASXy7SvmiGW2cdMBxsty44CvtLogfGlv7WkCSV0WId2270EaD5Ym40cs+SAwZuNjPSTywAvEfLmzQhtLDntfCnhl/fNmUNnzyA2g76Zn0SP+c+I6bCC0FONUQ4L50e95dif+DH/m9htQjBEhPPpOjYjmm2ChbfEMIUaYtAIxmWJHlilLU8ZRs9pCsHbDpFaRgZljz2QandjDIBPZDGTuoZW1KdlYh52ALzisKJRNWSQmLAWx8iv9mGttT15bBc2oxd57bZtVF98CYtK3UH22Yd/A7WaKa+ZjNTOXEzNhMJ5kmQOvfzsbxbZALJ2xwGBjX2HFQybhi7kpbA7DVpS3RxMJwFyHwGk5gs6a4lrRHVqhYT0QTJC9UZcC9Yrelkn6yXch68NKNtG7CiU3vf/zMZAYXPWdrR9XZ/ctMV1sJQ2wJEGxzaHs7LmmHIwnUwbwnNAapBY9xhE19DNJW3ua0dDk/AjwITacR0PqZxkbyJ+E5jYbxI84x1TBE+y90hwDCYZIM0tqAKPZfCzFrbH8kYCm3eqQkZ2+2GovcL8Suokyg8yyCJes6dcouSLiNSLb0ETJU+/N/WFsBBSOXBbm9Cwp4CzlOag7ro7R2vC19nSsCPmAjIEMiobFwaoVXhjTU2XMpgEsDH/L3Sx54OCTMUSXI/IIA2V4QcLQpwVz12pInI0bY56pIQ2BSGRLL+yLfZ7JkiimbK+aepsbwRStpokx5gCqe1hjdMAwcINbkk5jmedrNRAG5pUXPe0sZIoXy1h7lSDxApzheg24JeDNtDS1oBDBUC4iWZFilBPhZx0Kqx2lihpbG9q4sYidksCN4yRYhNM4nxfBbTi4E3AT6B3igbvs9Gv8ZkHsIfdlep+2HelEDbkJdNjqZQ90B7k6OIoFfkkPNoY+z0gzACa1f2qcBYxVJpT2QQgS19dKQlbC24S92xiEAFRKB5Uy1qrBgOtwIge55G0kRPfIytGx0tMOrGfrijB2FHOk/TKcMjDTMPeBo4FnXD5cQ8vtdgoAN0yuzZQHQI09wm/5vAB6RHyI9rYKiZ6YWC6rbaiLmDtoaToC1bViXQFNtgWsOfEEKCleC3GWPSfgQWRQWMgw/9FDgvOZrFAT3SmsA3DLbqlsSppQG5QeOjPXavUUkxF/qgLM05vW5o7UakuBqo2ZW8Nj0LB7imVJC9QSA+wd7RPztIUZ80xQZq0ROrc8CSVncWzkTA/RwmunldCPAQKjqVC7bhRuTIv0plbk7gOX4m5OAi2YesYZ0KBQRToG8iv9x8dgGtgECYRBeEU87OxoSc8epu+s7Mq/MN0VbBT19dii7ekO66UZwdAMtoAVQd13J5nwZe98OgGslmVqAGBkeLZNVNVlWpV18qihntXKnBZvrDIVgFpx4q5poLqREOVplMPSpTF2KvjBAzDpprkruXIaaUmUD4Xo2yrGWcYlixKIwRFjl0jPQhKznUXZAoSjlg9c/NwAI4p3Q/w5bCNfhUZS7bGfqesHqKAlyZZxZgNrhGevZXccaqBys4NEqB3Vqfptji9uUrhCL6yXFqxtm0hhLyYU3Tjd8I/HZaWD1oyVjnG5hhpCN5yHSf8BQUZlVNd00OP4M0TK+JSM7iqWi01SinFkCQXWxiZJLqqAHiEt3G3I2WYd46KU9pIJIOkoRQYCcEAAPguHo0Y4k8Hl6SW50MoW0uZU8jJOUghKo38Nl5ZSwsJNAUC2/lFZWkfMjrU8dFrTjHpJnUrLCILQIxINiYdQlDXaE/razQ4jjQluN5jW1Eh/S7yYvI5gigSjdLYU9TiFXAcHjISiLhQd9obb3OQmwY+YqVwiBMCkOGLXaK/ljBShh56c1g0uyIb2lBRKO7ZTAFncw5c5UGjGSy3CsI1Jt2mtruZkfhBZmbR+842Yu1eDiWEl0V6LZcGem6Ct+LW4Wy3oAjyNObazKBHomhJ3HMKEKHgiGksH+Ig1nTidfNMyA+oYHqVFaRGLiQreVLc9GvQgftKjW9cfUSKNYL80rqU7Um2rwqQJR1ai31Wq7vzKJEsFHDj0bAEMUKXgvfD5bWbaLPBTKz1Nk/Fg+GUZvUzFw80CLaKtPAACVAWrismh863FU4IJ0716SXBUNVb/SDMVvZgDt34CXoOq1JKvg0n08gPHTwXBNgD5W8pZZ8E9EVWcv1DZMB2NFysIwkqBSaH5QRmsAHdkHB+UANvLJvFpQKAahSmYTLEd2AFO+5rsqRRU6sVv5IP0wsSPLcWsbC1Y95mte71CUm6RJJWwkg6Q4k+xWMM0ByElJPQ6j2ED5hY42ALpZRytx9RlgQlJLijzhKi5eX5JBSIRGfo9o2xhd/0aWku8OS+4D9ZnovHDQMPaYo4qm2mlZbUnd7pR6oQj29Z2BqJ9n3LRT+MTLu3IR+ZP2TCPh3EDw8H1NHpoT7FibNYU8WHd9ESHcY12aDOQCUBddi4Ucp+4yuzz8ybcCCu1h8zvzXhDN4HYLq1R+U0xzUqg5QSA3iSBgdDouy55Ifx0DaeEhgezxBRGmoEJ6AJitVuzwtKPlUskHgU2F0LS7AFIwW5jPu0RUL7sp+fkNk0ee8P6uXYgl40WM+cdCOW21r13e0ivt0ff/mYcUfrQZWs2BiN6G+MDTGz1BKORmUTNQp9YGSHFxAeTkQrKd6FoVUogyytW25OLy3OpaO5oZCQp46aPzb5LnJiFEIwAKkmbYVYIjzVv3vj7rA6HignEeQAXTAHKDhoD7Uujh0QjtsB6fTP1NzO7T1Nzq4F1GnfHdXCG1Yxjwdtjf+PGRGTzEtEAUCz7KLfTdItLwCXuSOAzVjaZB6LvbUZhYGWmifSZlcMDnGHPd6gPeiK9erhpiw7ZP9ahTrMhFDa1J53m9ri2DloziqGETTcVSppCbTDDjExg6RrZ6cPEzB8XArEjQSB29odrUoLyoS/65RfM9fprGGjlHpbhGgbYD8MtmW1eFcAWX5dbcMHcl8sUI2k+H7GPW9VrArw3G+BefcCrCaAT/N53YLvP26Uy0kMFnDEZz0DJkmQqEOlL7SlKweYhH8gxpYeAYi0f9magqPbMYZuUI6007lSZQoyoGfYQHsNRzHXR3MMINTSMZpq1KD2A5MDJgtMLdRU6R4CEOJcKGiIJ7K6P/vAM6xpECHI8rRHsaEj6smkngAUjXTzrRoSI48ZpHOqgOY5OejKVdpnmiYUChQnVdIPa6ekGqRSRgEO119oDHOiIUQ5ciYVgaF1oG8Udo8WYtD+DEi8D/w8rAJE2k2PoyV0oMtpauxreaFjpujAvxFlwBhjuNqM9P0IfI5iD8Nh8y1kG4igjJkDNkOijnlLhItAd9lhRd670yNRTu95cR/Xuu0c5WO4DEFk5YQAPtLvU4TYPGRh4APPEDNiuuwR6SC21JoFbQBBMr+zJmT32QplNI6p16PbculN/pCX1wAyTWGTeJ774aln0gvQikw7TmkfsNbdQNs0adutYUDqNtGc0RqngUYdhUYuHSL1/eLrgvqDTC5neu++vufRkEgP9D2T64Kg/c4n+s7k3dDr3me8nOr0c72MRNmgF7D4WySPP0YAI/bI4eixwc7K13QiRiL85A8fnSsUj+mvTrsZtVUEQZ6sTpVafW8nYJZyaZS0U+0xIb6et9PhhtoObozQbjKAoDf6eiFgx1UUvpUYj1GweH0MNMrofhynfWn7+KYu7n5r83hN9aqm+6qjcH7dUlgvZVLV3xqq4fbP16qv+eofuTz43eomAqfS7GBAB9zEE31WJ37eVIPtdGN5A8nMYPvvLt8t2/V/6gM19G4g/hIL7UXf9JgbuLRZ+AoW//AzyMxTcWyz8BAruLRZ+AgX3r3y2+mT/PwfiN1DoVI+QT3CZDmvb8022JeYb6HiQPQpPPvboFB+i1MZdcqWZqthHmix6vttw0UAI1z8oEnGwVe++c7JamxslC+8xKJE41XJmug1npz+6CUAKyURd9gSxo+kWxvtZth848GBlws/0SKjYhmbZ9IiV+mcGBSdWHk8sqSr2zz5J7QME/0yD+z4Pe+JuGn1MV/vUyZwOHojWPlmPXgf9CuoeN9UAT+FGwaLg44v3dWe6QpvuL3Ln/p3k/2AgqNDcfwHgqUmIIqn+hwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4wYRESAMujenGAAAB9FJREFUeNrtnWlsFVUUx899fS1gUoKioEY+WBRUEohGkUhAKxgEjSgGoRGB4AJCNKAIJBJZJSiyGYMKKkIoLlEUKhUraxFkKUE2kU1aCrRgW2jpg9f29R2/sBTo67v3zL2zvfP73MzM+XU6mf+5504BGIZhGIZhGIZhGIZhGMZGGq3JvSmR62++BXHH7Ylbf9ouRMT99yVq/e0PICIiHumUmPV3PooXOf5EItafXoCXOdUn8ep/pgjrUDY40ervX4JXUTEiocoXL5/FawiNEwlU/6hzeB3hqQljQIwJYT3UzEkQA2JiGOslsiAhDIgZ1RiD6NIEMBD8NIKxyQr6vv7FtdgQa31uILg0ig2zsZmv4//yePUj7rjNv/U3yUEJ/r7Xr/XfvBmlOPKwT+vfhpIUdvdj/Wm7UZpTz/mv/g4HUYGyQb5r/+SjEhXD/VV/j5OoSGisj16LRe9iVCY8xTcGxIulSKBmtk8MiKHlSMIn8ViMqkQivojHgfcuIJ0VAc/XPzmMVljrcQOBmdVojY1NvVx/8mcRtEqeh+NxypJatM6+ezxb/7Io6uBwR4/e/1moicJunvz956A2ip/1Xv3Nt6JGSgd6rf47/0KtlHssHrfZi5rxVDwWDx5C7XgoHotHC9AANbO8YqBXERohMt8bv/8X/kNDRDM9cA+IgWVojhWuNxAYXo4mWePyeBwYHUKz5Lo6HidNvICmybvVxfXPqEbz7Gvr2vrn1KAdHH7IpX//8yNoD8dcGY+TM6NoF26MxzLTL26Mx0majtM4q5ed7yhNulVsd5WAxqset/mGS6/d5CIBLXI62/7I6ZKyzjUC0rIfsP+hE3zkxt9c8vy7tPnJbiKfuyP+Xdn8ZDeuiMei+zF0juWOGyBNv+iMxw4bEBkl6CzOxmPx6ll0mryWDtb/ViU6z17H4rEYG0I3cMiheByYFEZ34Ew8Dn5UjW7BiXisY/rFDfGYmgWCCwcngXto0q08z1YBSUsy3NWgb5Qe2WSjgJRlfdy2RJPcNXm9bQIarexpsP5VdxHjcbMcm2Q3/5P64i71U8k/ELuLNsVjcct2cnST+rGg+Jo4XmhLPBZ376GOfoOkAIB5NWTHxuu/nzj9ElkA8gLgA+pLlvF43IU4/VI9G1QEAHnIPjfVaP1PnqRdVngKqAkActDMa2Hw/u9zijjjNg5UBcBr1FbD3jbG6h9QSruk8ovfyFESABnUWSNT8VgMI06/lF7aBqomAJ4n3m+G4nHgbeJfZfHljcCKAqDHcWo87m2g/gnE53LhlS+lqQqATv9S4/FL2u//qcT2T34XoAuAdvuJBspf11z/LOKbyYG6q4bqAqDVTqKByjFa21/U6ZfdaWBNADTdTDQQnqSv/pRMYjrZevVLCUUAiF+JBqpnaqv/J2I+zb3mxZwkAMTPDq8ep1A3P/1y3ZOEJABgiaPxuOnvxLN/B7oEwELq/sPl1utvSdz8VPsl6BMAn1AbBKut1t96F+3ENXOFTgFiehXRwAZL8Vi0JW5+qppW7+HIAgDGnyca2G4hHouOh2knvTARdAuAkedsj8cinTj9Ujka9AuAV87YHI/F08TNT2eHgQkB0I/aIDhGmuIU/YnnKxkAZgTAU8SGHC0eDyJufiqKfTKrAqBrPtFAiXo8HlFBO1VBA7ebZQHQifhUVo7H4p2QgQeOdQHQbp8t8Tg4idj+2dPgwJIGAdBqhw3xmDz9EuelQ4cASP3DeDwOziW+ecdbldEiACDbcDxOWkBs/8QNHpoEAPXjLNFMmfpv+IZ4+PjRU5cAWGwwHqcQNz/J2NUmAMgjavHjMfEPTGpvvz4BQH1MrzMkoHoW2CsAppEaBFskemQUA+HJYLcAeJfQINgpNVuvbiA0FuwXAG8qNwh2S07WqxqQ/saPXgEwRDGu7W8te2Q1A6XSH0HWLAD6nVa5zoPS9asZKJb/DLZuAdDzhPx1Hu2gkobkDRQq/J8w7QJAfstevuI3+WQN1F39dkAAtP9H7jpPdFVtiMgZOKC0Z9aAAEiT+mrbScLQjIyBXWngtABokRf/kKefonRF4xvYqrjmYEQApG6Md8SyvrS+eDwDG5QbzUYExL3QMxnUlZGGD5wFbhEADQ7YVwyhr401YCD6LbhHACyK3SA4N9TK6mhMA5EvwE0CYF6sBkFopLXl8exYq9/gLgHwYf3x+PxoqwMC9RoIvw9uE1D/gH3VeOsjItnSq9/OCqhvwL5qAoABA5XU28qsAHjj2tW8mukABgzEXP12WgAMvrpBEPkYwICB2KvfjguAvnUH7GvnARgwUGRhEt24gLoD9tGvAAwYKLDyySzzAqDzpQH76CIAAwYOWtqNYoMAaH9xwP57AAMG9ljbj2SHALhjJyLijwAGDGyzuCPNFgGQuhlxpfw1yR94dfAxi5cmojI/lRyx+rtaX9XDhADr2CVABc//JycWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWIDToH8FyJUWtVWAALedDoFhGIZhGIZhGIZhGIYxyf+YwEMsIhMo/AAAAABJRU5ErkJggg=="],["door",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="36 14.99 28 7.99 28 12.99 17 12.99 17 16.99 28 16.99 28 21.99 36 14.99"/><path d="M24,29H15V7L6,2H24v9h2V0H0V29l14.94,7L15,31H26V19H24Z"/></svg>'],["elevator",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="27 4 26 3 24 5 24 0 22 0 22 5 20 3 19 4 23 8 27 4"/><polygon points="17 4 16 5 14 3 14 8 12 8 12 3 10 5 9 4 13 0 17 4"/></svg>'],["elevator-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 5 19 3 19 8 17 8 17 3 15 5 14 4 18 0 22 4"/></svg>'],["elevator-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 3 19 5 19 0 17 0 17 5 15 3 14 4 18 8 22 4"/></svg>'],["elevator-alt",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="4 16 18 0 31.99 16 4 16"/><polygon points="31.99 20 18 36 4 20 31.99 20"/></svg>'],["escalator-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="30.18 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.69 27.59 30.18 26.18"/></svg>'],["escalator-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="25.67 34 29.84 29.18 29.84 32.18 31.84 32.18 31.84 26.18 24.84 26.18 24.84 28.18 27.84 28.18 24.16 32.58 25.67 34"/></svg>'],["ramp",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/></svg>'],["ramp-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="18.18 4.18 14 9 14 6 12 6 12 12 19 12 19 10 16 10 19.69 5.59 18.18 4.18"/></svg>'],["ramp-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="13.82 13.82 18 9 18 12 20 12 20 6 13 6 13 8 16 8 12.31 12.41 13.82 13.82"/></svg>'],["sligntTurnLeft",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M10,0,26,2s-5.59,5.68-5.56,5.71C23.32,10.88,23.94,15.27,24,18V36H20V18c-.05-2.09-.54-5.32-2.47-7.53L12,16Z"/></svg>'],["sightTurnRight",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M26,0,10,2s5.59,5.68,5.57,5.71C12.68,10.88,12.06,15.27,12,18V36h4V18c.06-2.09.54-5.32,2.47-7.53L24,16Z"/></svg>'],["stairs",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="35.99 2 30 2 25.99 2 25.99 6.59 25.99 8.84 24 8.84 19.99 8.84 19.99 13.43 19.99 15.67 13.99 15.67 13.99 15.69 13.99 20.27 13.99 22.52 12 22.52 7.99 22.52 7.99 27.12 7.99 29.36 0 29.36 0 33.95 7.99 33.95 11.99 33.95 12 33.95 12 27.12 13.99 27.12 18 27.12 18 22.52 18 20.27 19.99 20.27 24 20.27 24 15.67 24 13.43 25.99 13.43 30 13.43 30 8.84 30 6.59 35.99 6.59 35.99 2"/></svg>'],["stairs-down",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="30.17 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.68 27.59 30.17 26.18"/></svg>'],["stairs-up",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="24.83 33.82 29 29 29 32 31 32 31 26 24 26 24 28 27 28 23.32 32.41 24.83 33.82"/></svg>'],["turnLeft",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M5,10,17,0V8a11,11,0,0,1,8.44,3.5c2.88,3.2,3.5,7.8,3.56,10.5V36H25V22c-.05-2.11-.54-5.61-2.53-7.82A7.1,7.1,0,0,0,17,12v8Z"/></svg>'],["turnRight",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M29,10,17,0V8a11,11,0,0,0-8.44,3.5C5.68,14.7,5.06,19.3,5,22V36H9V22c.06-2.11.54-5.61,2.53-7.82A7.1,7.1,0,0,1,17,12v8Z"/></svg>'],["uTurn",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M20,0c-5.38,0-9.79,5.34-10,12H2L12,24,22,12H14c.19-4.39,2.86-8,6-8s6,4.58,6,10V36h4V14C30,6.13,25.6,0,20,0Z"/></svg>'],["blue-arrow",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M21,3c-.44-.92-1-3-3-3s-2.63,2.16-3,3C15,3,2,29,2,33a2.65,2.65,0,0,0,3,3c2,0,6.1-2.2,9-4,2-1,3-2,4-2s2,1,4,2c0,0,7,4,9,4a2.65,2.65,0,0,0,3-3C34,29,21,3,21,3Z"/></svg>'],["start",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,4A14,14,0,1,1,4,18,14,14,0,0,1,18,4m0-4A18,18,0,1,0,36,18,18,18,0,0,0,18,0Z"/><circle cx="18" cy="18" r="6"/></svg>'],["destination-marker-back",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Zm0,19a5,5,0,1,1,5-5A5,5,0,0,1,18,19Z"/></svg>'],["destination-marker-front",'<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Z"/></svg>'],["smart-label-pin-back",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Marker Pin</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-104.5%" y="-63.3%" width="309.1%" height="259.8%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="2" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-204.000000, -523.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <path stroke="#FFFFFF" stroke-width="1.5" d="M4.95868222,15.5191099 C4.09118889,14.6145045 3.08708286,13.4178617 1.94340415,11.9271041 C0.219570966,9.68012899 -0.75,7.4435468 -0.75,5.73529412 C-0.75,2.16043095 2.04102866,-0.75 5.5,-0.75 C8.95897134,-0.75 11.75,2.16043095 11.75,5.73529412 C11.75,7.44173178 10.7794284,9.68143336 9.05659585,11.9271041 C7.91291714,13.4178617 6.90881111,14.6145045 6.04131778,15.5191099 L5.5,16.0835856 L4.95868222,15.5191099 Z" fill="#FFFFFF" fill-rule="evenodd"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n'],["smart-label-pin-front",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="27px" viewBox="0 0 23 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Oval Copy 25</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-90.9%" y="-53.3%" width="281.8%" height="236.1%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="0.5" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-205.000000, -524.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n'],["smart-label-circle-back",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <defs>\n      <filter id="f3" x="-50%" y="-50%" width="200%" height="200%">\n        <feMorphology radius="3" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n        <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n        <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n        <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.4 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n      </filter>\n    </defs>\n    <circle cx="50" cy="50" r="40" fill="white" filter="url(#f3)"/>\n    <circle cx="50" cy="50" r="40" fill="white"/>\n</svg>\n'],["smart-label-circle-front",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <circle cx="50" cy="50" r="30" />\n</svg>\n']]);O();var xf,bf,_f={STATIC:0,ANIMATED:1,ALWAYS_ON_TOP:2},wf=new Nu,Mf=function(){function e(t,n){b(this,e),(0,L.f)(this,xf,void 0),(0,L.f)(this,bf,void 0),(0,L.d)(this,"pathSegments",new Map),(0,L.d)(this,"paths",new Map),(0,L.g)(this,xf,t),(0,L.g)(this,bf,n)}return x(e,[{key:"getPathLength",value:function(e){for(var t=0,n=0,i=e.length-1;n<i;++n){var r=e[n],o=e[n+1];r.path.includes(o)&&(t+=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)))}return t}},{key:"drawPath",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={color:4952290,pulseColor:16777215,pulseIterations:1,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1200,curve:vf.default.Easing.Cubic.InOut,drawConnectionSegments:!0,displayArrowsOnPath:!1},r=g({color:8311585,pulseColor:16777215,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:800,curve:vf.default.Easing.Cubic.InOut,displayArrowsOnPath:!1},n.connectionPathOptions),o=n.pulsePauseDuration||600;null!=r.radius&&(console.warn("Deprecation warning: `connectionPathOptions.radius` has been deprecated. Use `connectionPathOptions.nearRadius` and `connectionPathOptions.farRadius` instead."),r.nearRadius=r.radius),null==r.farRadius&&(r.farRadius=2.3*r.nearRadius);var a=g(g(g({},i),n),{},{connectionPathOptions:r});null!=n.radius&&(console.warn("Deprecation warning: `options.radius` has been deprecated. Use `options.nearRadius` and `options.farRadius` instead."),a.nearRadius=n.radius),null==a.farRadius&&(a.farRadius=2.3*a.nearRadius);var s,l,u,c=0,h=e.reduce((function(n,i,r){var o=e[r+1],h=e[r-1];return 0===r?s=i.map:(i.map!=s||null==o)&&(u=t.drawPathSegment(e.slice(c,null==o?r+1:r),s,a),c=r,n.push(u),null!=l&&(l.tween.chain(u.tween),l.pulseTween.chain(u.pulseTween),l.pulseTween.onComplete(l.resetPulse)),l=u,null!=h&&h.map!=i.map&&a.drawConnectionSegments,s=i.map),n}),[]),d=1,p=a.pulseIterations||1/0;if(h.length>0){var f=h[0],m=h[h.length-1];f.tween.start(),f.tween.onComplete((function(){f.pulseTween.start()})),m.endPauseTween=new vf.default.Tween({}).to({value:1},o).chain(f.pulseTween).onUpdate((function(){return(0,L.e)(t,xf).tryRendering(gf.TWEEN)})),p>1&&m.pulseTween.chain(m.endPauseTween),m.pulseTween.onComplete((function(){d+1>=p?h.forEach((function(e){e.pulseTween.onComplete((function(){})),e.pulseTween.stop(),e.endPauseTween&&e.endPauseTween.stop(),e.resetPulse(),(0,L.e)(t,xf).tryRendering(gf.ANIMATED)})):(m.resetPulse(),f.resetPulse()),d++}))}(0,L.e)(this,xf).tryRendering(gf.ANIMATED);var v=We();return this.paths.set(v,h),v}},{key:"drawSegment",value:function(e,t,n){var i=this,r=(n=n||{}).color||16745292,o=n.pulseColor||0,a=void 0!==n.nearRadius?n.nearRadius:1.8,s=void 0!==n.farRadius?n.farRadius:a,l=void 0!==n.nearZoom?n.nearZoom:375,u=void 0!==n.farZoom?n.farZoom:1e4,c=void 0!==n.drawDuration?n.drawDuration:1500,h=n.curve||vf.default.Easing.Cubic.InOut,d=n.displayArrowsOnPath||!1,p=n.isConnectionPathSegment||!1,f=n.displayArrowsOnPath||n.flattenPath||!1,m=void 0===n.showPulse||n.showPulse,v=void 0===n.animateDrawing||n.animateDrawing,g=0;if(p)for(var y=1;y<e.length;++y){var x=e[y].x-e[y-1].x,b=e[y].z-e[y-1].z;g+=Math.sqrt(x*x+b*b)}else for(var _=1;_<e.length;++_){var w=e[_].x-e[_-1].x,M=e[_].y-e[_-1].y,E=e[_].z-e[_-1].z;g+=Math.sqrt(w*w+M*M+E*E)}var q={vertexes:{type:"f",value:1},resolution:{type:"v2",value:(0,L.e)(this,bf).resolution},cameraParameters:{type:"v2",value:(0,L.e)(this,bf).cameraParameters},complete:{type:"f",value:v?0:1},color:{type:"c",value:new hi(Vd(r,16745292))},pathLength:{type:"f",value:g},nearRadius:{type:"f",value:a},farRadius:{type:"f",value:s},nearZoom:{type:"f",value:l},farZoom:{type:"f",value:u},pulseColor:{type:"c",value:new hi(Vd(o,0))},pulse:{type:"f",value:0},pulseLength:{type:"f",value:.075},pulseBulge:{type:"b",value:!1},pathIsVertical:{type:"b",value:p},arrowAnimationTimer:{type:"f",value:0},arrowTexture:{type:"t",value:wf.load(yf.get("arrow"))},displayArrowsOnPath:{type:"b",value:d},flattenFactor:{type:"f",value:f?.05:1},showPulse:{type:"b",value:m}},T=new Vu(e);T.curveType="catmullrom",T.tension=0;for(var S=30*t.length,P=new Js(T,S,a,8,!1),A=new Float32Array(P.attributes.position.count),C=t.length;C<A.length;C++)A[C]=C;P.setAttribute("vertexIndex",new bi(A,1));for(var O=new bi(new Float32Array(P.attributes.position.count),1),I=0;I<S;I++)for(var k=0;k<=8;++k)O.setX(9*I+k,I/S);P.setAttribute("pathDistance",O);for(var N=new bi(new Float32Array(3*P.attributes.normal.count),3),R=0;R<S;R++)for(var D=P.tangents[R],B=0;B<=8;++B)N.setXYZ(9*R+B,D.x,D.y,D.z);P.setAttribute("pathTangent",N);for(var z=new bi(new Float32Array(3*P.attributes.normal.count),3),F=0;F<S;F++){var U,j,H,V=P.tangents[F];p?(U=V.x*V.y,j=V.y*V.y-1,H=V.z*V.y):(U=-V.x*V.z,j=-V.y*V.z,H=1-V.z*V.z);var G=Math.sqrt(U*U+j*j+H*H);0===G&&(G=1);for(var W=U/G,X=j/G,Y=H/G,Z=0;Z<=8;++Z)z.setXYZ(9*F+Z,W,X,Y)}P.setAttribute("pathNormal",z);var J=new gr({uniforms:q,vertexShader:"attribute float pathDistance;\nattribute vec3 pathNormal;\nattribute vec3 pathTangent;\n\nuniform vec2 uvScale;\nuniform float vertexes;\nuniform float complete;\nuniform float nearRadius;\nuniform float farRadius;\nuniform float nearZoom;\nuniform float farZoom;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pulseBulge;\nuniform bool pathIsVertical;\nuniform bool displayArrowsOnPath;\nuniform vec2 cameraParameters;\nuniform float flattenFactor;\n\nvarying float zoomLevel;\nvarying float radius;\nvarying vec2 fragTexcoord;\nvarying float fragTopTextureU;\nvarying float fragPathDistance;\n\n// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using\n// linear interpolation/extrapolation.\n//\n// This performs a pure linear mapping `y = mx + b` where\n// `m = (yMax - yMin) / (xMax - xMin)`,\n// `b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin`.\nfloat remap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;\n}\n\n// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear\n// interpolation, clamping result values outside [yMin, yMax].\nfloat clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);\n}\n\nvoid main() {\n\tfragPathDistance = pathDistance;\n\n\t// We can get an origin point for the cross-section of the path by\n\t// subtracting the surface normal times the radius, since the surface normal\n\t// points strictly away from the centre.\n\tvec3 origin = position - nearRadius * normal;\n\n\t// Inflate the path along its surface normal to increase its radius from\n\t// `nearRadius` to `farRadius` when the camera is at `farZoom`.\n\tvec3 adjustedPosition = position;\n\tzoomLevel = clampRemap(cameraParameters.x, nearZoom, farZoom, 0.0, 1.0);\n\tadjustedPosition += normal * (farRadius - nearRadius) * zoomLevel;\n\n\t// Determine how far the path extends \"up\" or \"down\" in the direction of the\n\t// path normal.\n\tfloat height = dot(adjustedPosition - origin, pathNormal);\n\n\t// Flatten the bottom half of the path entirely so that it's flat\n\t// against the floor. This makes the path look nicer when it's\n\t// semitransparent behind opaque geometry, so you don't see it\n\t// peeking through.\n\tfloat desiredHeight = max(height, 0.0);\n\n\tdesiredHeight = desiredHeight * flattenFactor;\n\n\tfloat flattenMagnitude = height - desiredHeight;\n\tadjustedPosition = adjustedPosition - pathNormal * flattenMagnitude;\n\n\t// Transform the vertices into NDC.\n\tvec4 mvPosition = modelViewMatrix * vec4(adjustedPosition, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n\n\tfragTexcoord = uv;\n\n\t// Compute a texture coordinate for mapping the arrow texture to the path.\n\t// We don't want to use the u-value that Three.js provides, because the\n\t// path may end up twisting arbitrarily -- but we want the arrow texture to\n\t// always be on the top of the path.\n\tvec3 bitangent = cross(normal, pathTangent);\n\tfragTopTextureU = -dot(bitangent, pathNormal) * 0.5 + 0.5;\n\n\tradius = mix(nearRadius, farRadius, zoomLevel);\n}\n",fragmentShader:'uniform float complete;\nuniform float nearRadius;\nuniform float farRadius;\nuniform vec2 resolution;\nuniform vec2 cameraParameters;\nuniform vec3 color;\nuniform float pathLength;\nuniform bool showPulse;\nuniform vec3 pulseColor;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pathIsVertical;\nuniform bool displayArrowsOnPath;\nuniform float arrowAnimationTimer;\nuniform sampler2D arrowTexture;\n\nvarying float zoomLevel;\nvarying float radius;\nvarying vec2 fragTexcoord;\nvarying float fragTopTextureU;\nvarying float fragPathDistance;\n\n// How long the arrow should be, as a factor of `pathRadius`. Since we\'ve\n// mostly flattened the top of the path, values near 2.0 (the diameter)\n// will probably look best.\nconst float arrowLength = 2.0;\n\n// How much of a relative margin the arrow texture should have inside the\n// area laid out for it. Useful to pull the arrow away from the edges of the\n// path, which slope down.\nconst float arrowMargin = 0.1;\n\n// How many arrow-lengths of space should be between arrows on a short path.\nconst float arrowSpacingOnShortPath = 6.0;\n\n// How many arrow-lengths of space should be between arrows on a long path.\nconst float arrowSpacingOnLongPath = 7.5;\n\n// How long a path must be to be considered "long", as a factor of\n// the path radius.\nconst float longPathLength = 200.;\n\n// How long a path must be to be considered "short", as a factor of the\n// path radius.\nconst float shortPathLength = 75.;\n\n// How much of the path\'s length the fade-in should comprise when going from\n// zero opacity to full opacity.\nconst float completeLength = 0.1;\n\n// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using\n// linear interpolation/extrapolation.\n//\n// This performs a pure linear mapping `y = mx + b` where\n// `m = (yMax - yMin) / (xMax - xMin)`,\n// `b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin`.\nfloat remap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;\n}\n\n// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear\n// interpolation, clamping result values outside [yMin, yMax].\nfloat clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);\n}\n\nvoid main(void) {\n\t// Compute the opacity of the path based on the distance from the current\n\t// fragment to the `complete` value as it varies from 0.0 to 1.0.\n\t// Fragments that are at the `complete` value or past it will be fully\n\t// transparent, while fragments that are at `complete - completeLength`\n\t// or before it will be fully opaque. However, we adjust the `complete`\n\t// value here so that it overshoots by one full `completeLength`, so that\n\t// the entire path will be opaque when the `complete` value is at 1.0.\n\tfloat completeLocation = complete * (1.0 + completeLength);\n\tfloat completeAmount = clampRemap(\n\t\tfragPathDistance,\n\t\tcompleteLocation - completeLength,\n\t\tcompleteLocation,\n\t\t0.0,\n\t\t1.0\n\t);\n\tfloat opacity = 1.0 - smoothstep(0.0, 1.0, completeAmount);\n\n\t// 2020/01/09 Terence Dickson\n\t// When we render the background and overlay for the mapbox outdoor context\n\t// behind everything else in single-buffer rendering, the fact that the path\n\t// writes to the depth buffer means that the background and overlay will not\n\t// be drawn behind the path even when the path is still fading in. The effect\n\t// is subtle and is only visible in single-buffer rendering so this quick fix\n\t// prevents writes to the depth buffer for zero opacity fragments, which gets\n\t// rid of the most visually-offensive ghosting.\n\tif (opacity <= 0.0) {\n\t\tdiscard;\n\t}\n\n\t// Push in the texture coordinates so that they ramp up\n\t// at `arrowMargin` instead of at zero; this remapping looks somewhat\n\t// like this:\n\t// 1 ^        ___\n\t//   |       /\n\t//   |      /\n\t//   |     /\n\t//   |    /\n\t//   |___/\n\t// 0 +----------\x3e\n\t//   0   ^      1\n\t//       arrowMargin\n\t// Making the arrows narrower on the path.\n\tfloat u = fragTopTextureU;\n\tu = clamp(\n\t\tu * (1. / (1. - arrowMargin * 2.)) - (1. / (1. - arrowMargin * 2.) - 1.) / 2.,\n\t\t0.0,\n\t\t1.0\n\t);\n\n\tfloat arrowSpacing = clampRemap(\n\t\tpathLength,\n\t\tshortPathLength * radius,\n\t\tlongPathLength * radius,\n\t\tarrowSpacingOnShortPath,\n\t\tarrowSpacingOnLongPath\n\t);\n\n\t// Reduce the spacing between arrows when the camera zooms out, as increasing\n\t// the path radius will increase the arrow size and thus be able to fit\n\t// fewer arrows on in total, and this secondary movement of the arrows\n\t// "zooming off" the end of the path is unpleasant\n\tfloat expandAmount = mix(1.0, farRadius / nearRadius, zoomLevel);\n\tfloat effectiveArrowSpacing =\n\t\tarrowSpacing * 1.0 / expandAmount +\n\t\tarrowMargin * 2.0;\n\n\tfloat effectiveArrowLength = arrowLength * radius * (1. - arrowMargin * 2.0);\n\n\t// Adjust the slope of the vertical texture coordinate so that it goes\n\t// from 0 to 1 along the length of the arrow plus the spacing between\n\t// arrows, and adjust its x-intercept so that one arrow moves to the\n\t// exact position of the next arrow as `arrowAnimationTimer` goes\n\t// from 0 to 1\n\tfloat v = (\n\t\tfragTexcoord.x * (pathLength / effectiveArrowLength)\n\t\t- arrowAnimationTimer * (1. + effectiveArrowSpacing)\n\t);\n\n\t// Compute a "looping sawtooth" wave for determining the vertical texture\n\t// coordinates of the arrow texture, roughly as follows:\n\t// 3 ^              /\n\t//   |          ___/\n\t// 2 |         /\n\t//   |     ___/\n\t// 1 |    /\n\t//   |___/\n\t// 0 +---------------\x3e\n\t//   0   ^ ^\n\t//   ^   |_|\n\t//   |   effectiveArrowLength\n\t//   |___|\n\t//   effectiveArrowSpacing\n\t//\n\t// This is effectively equivalent to this sort of sawtooth wave:\n\t//   ^\n\t// 1 |    /    /    /\n\t//   |___/ ___/ ___/\n\t// 0 +---------------\x3e\n\t//\n\t// Causing the image of the arrow to repeat, with dead space (the bottom\n\t// edge of the texture stretched out) between the arrows at the provided\n\t// spacing. The reason why the "looping" design is preferred is because\n\t// it takes advantage of WebGL\'s `GL_REPEAT` texture wrapping behaviour\n\t// to avoid the discontinuity that can end up causing visual artifacts.\n\tif (mod(v, (1. + effectiveArrowSpacing)) < 1.) {\n\t\tv = v - effectiveArrowSpacing * floor(v / (1. + effectiveArrowSpacing));\n\t} else {\n\t\tv = ceil(v / (1. + effectiveArrowSpacing));\n\t}\n\n\t// Use the r-component of the texture to determine whether the arrow covers\n\t// this fragment or not\n\tvec2 sampleTexcoord = vec2(u, v);\n\tfloat arrowAmount = 0.0;\n\tif (displayArrowsOnPath) {\n\t\tarrowAmount = texture2D(arrowTexture, sampleTexcoord).r;\n\t}\n\n\tif (showPulse) {\n\t\t// Add the pulse color to the path by determining how far the current fragment\n\t\t// is from `pulse`\n\t\tfloat pulseLocation = remap(\n\t\tpulse,\n\t\t0.0,\n\t\t1.0,\n\t\t-pulseLength,\n\t\t1.0 + pulseLength\n\t\t);\n\t\tfloat pulseDistance = smoothstep(\n\t\t0.0,\n\t\tpulseLength,\n\t\tabs(fragPathDistance - pulseLocation)\n\t\t);\n\n\t\t// Blend the pulse color to the path based on how close this fragment is to\n\t\t// the `pulse` value and whether it\'s covered by an arrow -- but if it\'s\n\t\t// covered by *both*, then we go back to using the regular path color\n\t\t// (making arrows look like "holes" when they\'re overlapping the pulse.)\n\t\tfloat pulseLevel = abs(1.0 - pulseDistance - arrowAmount);\n\n\t\tgl_FragColor = vec4(mix(color, pulseColor, pulseLevel), opacity);\n\t} else {\n\t\tgl_FragColor = vec4(color, opacity);\n\t}\n}\n'});J.transparent=!0,J.alphaTest=.5,q.resolution.value.x=(0,L.e)(this,bf).renderer.getBufferSize().width,q.resolution.value.y=(0,L.e)(this,bf).renderer.getBufferSize().height,q.vertexes.value=A.length,q.arrowTexture.value.wrapS=$e,q.arrowTexture.value.wrapT=$e,q.arrowTexture.value.anisotropy=(0,L.e)(this,bf).renderer.getMaxAnisotropy();var Q=new rr(P,J),K=function(){(0,L.e)(i,xf).tryRendering(gf.ANIMATED)},$=new vf.default.Tween(q.pulse).to({value:1},c).easing(h).onUpdate(K),ee=new vf.default.Tween(q.complete).to({value:1},c).easing(h).onUpdate(K),te=new vf.default.Tween(q.arrowAnimationTimer).to({value:1},3e3).easing(vf.default.Easing.Linear.None).repeat(1/0).onUpdate(K);return d&&te.start(),{id:Q.id,object:Q,tween:ee,pulseTween:$,arrowAnimationTween:te,reset:function(){q.complete.value=0},resetPulse:function(){q.pulse.value=0}}}},{key:"drawPathSegment",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{color:16745292,pulseColor:"white",pulseIterations:1/0,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1500,displayArrowsOnPath:!1},i=n.nearRadius||2,r=n.farRadius||n.nearRadius||2,o=t?(0,L.e)(this,xf).venue.maps.find((function(e){return e.id===t})):(0,L.e)(this,xf).currentMap,a=(null==o?void 0:o.scale)||1;i/=a,r/=a;for(var s=t?Nd(t):(0,L.e)(this,xf).currentMap,l=[],u=(0,L.e)(this,bf).mapObjects.get(s).mapClass,c=0;c<e.length;c++){var h=e[c],d=new Xt(h.x-u.width/2,-h.y+u.height/2,i/2);l.push(d)}l.push(l[l.length-1].clone().setZ(-i)),l.unshift(l[0].clone().setZ(-i));var p=this.drawSegment(l,e,g(g({},n),{},{nearRadius:i,farRadius:r,mapId:s}));return this.pathSegments.set(p.id,p),p.object.layers.set(_f.ANIMATED),(0,L.e)(this,bf).mapObjects.get(s).add(p.object),p}},{key:"drawConnectionPathSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:8246050,pulseColor:16777215,pulseIterations:1/0,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1500,curve:vf.default.Easing.Cubic.InOut,displayArrowsOnPath:!1},n=(0,L.e)(this,bf).mapObjects.get(e[0].map),i=(0,L.e)(this,bf).mapObjects.get(e[1].map),r=n.mapClass,o=i.mapClass,a=new Xt(e[0].x-r.width/2,-e[0].y+r.height/2,0),s=new Xt(e[1].x-o.width/2,-e[1].y+o.height/2,0),l=Hd(a.clone().applyMatrix4(n.object.matrix),s.clone().applyMatrix4(i.object.matrix),10),u=this.drawSegment(l,e,g(g({},t),{},{mapId:n.id,isConnectionPathSegment:!0}));return this.pathSegments.set(u.id,u),u.object.layers.set(_f.ANIMATED),(0,L.e)(this,bf).scene.add(u.object),u}},{key:"removePath",value:function(e){if(this.paths.has(e)){var t,n=(0,C.Z)(this.paths.get(e));try{for(n.s();!(t=n.n()).done;){var i=t.value,r=this.pathSegments.get(i.id);this.removePathSegment(r)}}catch(o){n.e(o)}finally{n.f()}}}},{key:"removePathSegment",value:function(e){e&&((0,L.e)(this,bf).scene.remove(e.object),e.object.destroy(),e.pulseTween.stop(),e.endPauseTween&&e.endPauseTween.stop(),e.tween.stop(),e.arrowAnimationTween.stop(),e.pulseTween=void 0,e.tween=void 0,e.arrowAnimationTween=void 0,this.pathSegments.delete(e.id))}},{key:"removeAllPaths",value:function(){var e,t=(0,C.Z)(this.pathSegments.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.removePathSegment(n)}}catch(i){t.e(i)}finally{t.f()}this.pathSegments.clear(),(0,L.e)(this,bf).renderer.disposeOfRenderLists()}}]),e}();xf=new WeakMap,bf=new WeakMap;var Ef=Mf;O(),O();var qf=(0,L.c)(U());O(),O(),O();var Tf=(0,L.c)(Ae());O();var Sf=x((function e(t){var n,i,r=t.origin,o=t.destination,a=t.vortex,s=t.elevationDelta,l=void 0===s?0:s,u=t.distance,c=void 0===u?0:u,h=t.angle,d=void 0===h?0:h;if(b(this,e),(0,L.d)(this,"origin"),(0,L.d)(this,"destination"),(0,L.d)(this,"vortex"),(0,L.d)(this,"distance"),(0,L.d)(this,"angle"),(0,L.d)(this,"weight"),this.origin=r,this.destination=o,this.vortex=a,this.distance=c,this.angle=d,a?(this.distance=0,this.angle=0,n=void 0!==a.weight&&a.weight>0?a.weight:"elevator"===a.type?2e3:1e3,i=a.multiplier&&a.multiplier>=1?a.multiplier:1,this.weight=l*i+n):(n=o.weight&&o.weight>=0?o.weight:0,i=o.multiplier&&o.multiplier>=1?o.multiplier:1,this.weight=this.distance*i+n),isNaN(this.angle))throw new Error("nan angle")})),Pf=Sf;function Af(e){if(e.scale||e.x_scale)return 1/(e.scale||e.x_scale||1);try{if(!e.georeference)throw new Error("map ".concat(e.name||e.shortName||e.id," does not have a georeference field"));if(e.georeference.length<3)throw new Error("map ".concat(e.name||e.shortName||e.id," has less than 3 georeference points, we require at least 3 for proper map scaling"));var t=e.georeference[0],n=e.georeference[2],i=(0,Tf.getDistance)({latitude:t.target.x,longitude:t.target.y},{latitude:n.target.x,longitude:n.target.y}),r=t.control.x-n.control.x,o=t.control.y-n.control.y;return Math.sqrt(r*r+o*o)/i}catch(e){return console.error(e),1}}function Cf(e,t){var n=e.x-t.x,i=e.y-t.y;return(Math.atan2(i,n)+2.5*Math.PI)%(2*Math.PI)}var Lf,Of,If,kf=function(){function e(t){var n=this,i=t.nodes,r=t.vortexes,o=t.maps,a=t.showVortexNames,s=void 0!==a&&a;b(this,e),(0,L.d)(this,"edges"),(0,L.d)(this,"nodesById"),(0,L.d)(this,"mapsById"),this.edges={},this.mapsById=o.map((function(e){return g(g({},e),{},{_scale:Af(e)})})).reduce((function(e,t){return e[t.id]=t,e}),{});var l=i.filter((function(e){return!!n.mapsById[e.map]})).map((function(e){return g(g({},e),{},{paths:e.paths?e.paths.filter((function(t){return t.map===e.map})):[]})}));for(var u in this.nodesById=l.reduce((function(e,t){return e[t.id]=t,e}),{}),this.nodesById)this.nodesById.hasOwnProperty(u)&&(this.nodesById[u].paths=this.nodesById[u].paths.filter((function(e){var t=e.node;return!!n.nodesById[t]})));var c=r.map((function(e){return g(g({},e),{},{name:s?e.name:e.type,nodes:e.nodes?e.nodes.filter((function(e){return!!n.nodesById[e]})):[]})}));l.forEach((function(e){n.edges[e.id]=e.paths.map((function(t){var i=t.node,r=n.nodesById[i];return new Pf({angle:Cf(e,r),destination:r,distance:n.getDistance(e,r),origin:e})}))})),c.forEach((function(e){if(null!=e.nodes&&0!==e.nodes.length)for(var t=0;t<e.nodes.length-1;){var i=n.nodesById[e.nodes[t]];if(t++,null!=i)for(var r=t;r<e.nodes.length;){var o=n.nodesById[e.nodes[r]];if(r++,null!=o){var a=n.mapsById[i.map].elevation||0,s=n.mapsById[o.map].elevation||0,l=Math.abs(a-s);n.edges[i.id].push(new Pf({destination:o,elevationDelta:l,origin:i,vortex:e})),n.edges[o.id].push(new Pf({destination:i,elevationDelta:l,origin:o,vortex:e}))}}}}))}return x(e,[{key:"aStar",value:function(e,t,n){var i=this,r=e.map((function(e){return i.nodesById[e]})).filter((function(e){return e})),o=t.map((function(e){return i.nodesById[e]})).filter((function(e){return e}));if(0===r.length||0===o.length)return[];var a=[],s={},l={};for(r.forEach((function(e){var t=i.getShortestEuclideanDistance(e,o);a.push({origin:e,priority:t}),s[e.id]=null,l[e.id]=0})),a.sort((function(e,t){return e.priority-t.priority}));a.length>0;){var u=a[0];if(o.includes(u.origin)){for(var c=[],h=s[u.origin.id];null!=h;){c.push(h);var d=s[h.origin.id];h=null!=d?d:null}return c.reverse()}var p,f=(0,C.Z)(this.edges[u.origin.id]);try{for(f.s();!(p=f.n()).done;){var m=p.value,v=m.vortex&&!1===m.vortex.accessible;if(!n||!v&&!1!==m.origin.accessible&&!1!==m.destination.accessible){var g=l[u.origin.id]+m.weight;if(null==l[m.destination.id]||g<l[m.destination.id]){l[m.destination.id]=g;var y=g+this.getShortestEuclideanDistance(m.destination,o);a.push({origin:m.destination,priority:y}),s[m.destination.id]=m}}}}catch(x){f.e(x)}finally{f.f()}a.splice(0,1),a.sort((function(e,t){return e.priority-t.priority}))}return[]}},{key:"getDistance",value:function(e,t){var n,i=e.x-t.x,r=e.y-t.y,o=i*i+r*r;return n=null==this.mapsById[e.map]?1:this.mapsById[e.map]._scale,Math.sqrt(o)/n}},{key:"getShortestEuclideanDistance",value:function(e,t){var n=this;return t.reduce((function(t,i){var r=n.getDistance(e,i);return Math.min(t,r)}),Number.MAX_VALUE)}}]),e}(),Nf=kf;O(),O(),function(e){e.DEPARTURE="Departure",e.TAKEVORTEX="TakeVortex",e.EXITVORTEX="ExitVortex",e.TURN="Turn",e.ARRIVAL="Arrival"}(Lf||(Lf={})),function(e){e.STRAIGHT="Straight",e.RIGHT="Right",e.SLIGHTRIGHT="SlightRight",e.LEFT="Left",e.SLIGHTLEFT="SlightLeft"}(Of||(Of={})),function(e){e.UP="up",e.DOWN="down",e.NONE="none"}(If||(If={}));var Rf,Df=x((function e(t){var n=t.origin,i=t.action,r=t.distance,o=t.atLocation,a=t.instruction;b(this,e),(0,L.d)(this,"node"),(0,L.d)(this,"instruction"),(0,L.d)(this,"action"),(0,L.d)(this,"atLocation"),(0,L.d)(this,"type"),(0,L.d)(this,"distance",0),this.node=n,this.action=i,this.distance=r||0,this.atLocation=o,this.instruction="",a?this.instruction=a:(null!=i&&i.type===Lf.DEPARTURE?this.instruction=null!=o?"Depart from ".concat(o.name):"Depart from current location":null!=i&&i.type===Lf.ARRIVAL?this.instruction=null!=o?"Arrive at ".concat(o.name):"Arrive at destination":null!=i&&i.type===Lf.TAKEVORTEX?this.instruction="Take ".concat(o&&o.name," ").concat(function(e){switch(e){case If.DOWN:case If.UP:return"".concat(e," ");default:return""}}(i.direction),"to ").concat(i.toMap.name):null!=i&&i.type===Lf.EXITVORTEX?this.instruction="Exit ".concat(o&&o.name," at ").concat(i.toMap.name):null!=i&&i.bearing===Of.RIGHT?this.instruction="Turn right":null!=i&&i.bearing===Of.SLIGHTRIGHT?this.instruction="Turn slightly right":null!=i&&i.bearing===Of.STRAIGHT?this.instruction="Head straight":null!=i&&i.bearing===Of.SLIGHTLEFT?this.instruction="Turn slightly left":null!=i&&i.bearing===Of.LEFT&&(this.instruction="Turn left"),null!=i&&i.type===Lf.TURN&&o&&(this.instruction+=" at ".concat(o.name)))})),Bf=Df;(Rf||(Rf={})).NO_VALID_PATH="No Valid Path Available";var zf=.1*Math.PI;function Ff(e,t){return((t-e+Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-Math.PI}var Uf=function(){function e(t){var n=t.locations,i=t.nodes,r=t.vortexes,o=t.maps,a=t.showVortexNames;b(this,e),(0,L.d)(this,"graph"),(0,L.d)(this,"locationsByNodeId"),this.graph=new Nf({maps:o,nodes:i,showVortexNames:a,vortexes:r}),this.locationsByNodeId=n.reduce((function(e,t){return t.nodes&&t.nodes.forEach((function(n){e[n.node]=t})),t.polygons&&t.polygons.forEach((function(n){n.entrances&&n.entrances.forEach((function(n){e[n]=t}))})),e}),{})}return x(e,[{key:"getClosestLocationInRay",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5*Math.PI,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=0,r=0,o=e;Math.abs(i)<t&&r<n;){var a,s=this.graph.edges[o.destination.id],l=null,u=0,c=(0,C.Z)(s);try{for(c.s();!(a=c.n()).done;){var h=a.value;if(h.distance>0)if(null!=l){var d=-Ff(o.angle,h.angle);Math.abs(d)<Math.abs(u)&&(l=h,u=d)}else l=h,u=-Ff(o.angle,h.angle)}}catch(f){c.e(f)}finally{c.f()}if(null==l)return null;if(Math.abs(u)>=t||(i+=u,r+=l.distance,Math.abs(i)>=t||r>n))return null;var p=this.locationsByNodeId[l.destination.id];if(null!=p)return p;o=l}return null}},{key:"getDirections",value:function(e){var t=this,n=e.originIds,i=e.destinationNodeIds,r=e.accessible,o=e.departFrom,a=e.arriveAt,s=this.graph.aStar(n,i,r);if(0===s.length)return{distance:0,instructions:[new Bf({distance:0,instruction:Rf.NO_VALID_PATH})],path:[]};for(var l=0,u=new Array(s.length+1),c=0;c<s.length;c++)u[c]=s[c].origin;u[s.length]=s[s.length-1].destination;for(var h=[],d=null,p=null,f=0,m=0,v=function(e){var n=s[e],i=n.origin,r=n.destination;if(l+=n.distance,f+=(null==p?void 0:p.distance)||0,0===e&&h.push(new Bf({action:{type:Lf.DEPARTURE},atLocation:o,distance:0,origin:i})),null!=n.vortex){var u=t.graph.mapsById[i.map],c=t.graph.mapsById[r.map],v=If.NONE;if(null!=u.elevation&&null!=c.elevation){var g=u.elevation-c.elevation;g>0?v=If.DOWN:g<0&&(v=If.UP)}h.push(new Bf({action:{direction:v,fromMap:u,toMap:c,type:Lf.TAKEVORTEX},atLocation:n.vortex,distance:f,origin:i})),m+=f,f=0}else if(null!=d&&null!=p)if(null!=p.vortex){var y=t.graph.mapsById[d.map],x=t.graph.mapsById[p.destination.map];h.push(new Bf({action:{fromMap:y,toMap:x,type:Lf.EXITVORTEX},atLocation:p.vortex,distance:f,origin:i})),m+=f,f=0}else{var b=t.graph.edges[i.id].filter((function(e){return e.destination!==d&&e.destination!==n.destination}));if(b.length>0){var _=-Ff(p.angle,n.angle),w=b.reduce((function(e,t){var i=-Ff(n.angle,t.angle);return Math.min(e,Math.abs(i))}),Math.PI);if(Math.abs(_)>=zf||Math.abs(w)<=zf){var M;M=_<=-Math.PI/4?Of.RIGHT:_<=-zf?Of.SLIGHTRIGHT:_<=zf?Of.STRAIGHT:_<=Math.PI/4?Of.SLIGHTLEFT:Of.LEFT;var E=t.locationsByNodeId[i.id];if(E||(E=t.getClosestLocationInRay(p,.5*Math.PI,10)),null!=E){var q=new Bf({action:{bearing:M,referencePosition:"At",type:Lf.TURN},atLocation:E,distance:f,origin:i});q.type=M,h.push(q)}else h.push(new Bf({action:{bearing:M,referencePosition:"At",type:Lf.TURN},distance:f,origin:i}));m+=f,f=0}}}e===s.length-1&&(h.push(new Bf({action:{type:Lf.ARRIVAL},atLocation:a,distance:l-m<0?0:l-m,origin:n.destination})),m+=f,f=0),d=i,p=n},g=0;g<s.length;g++)v(g);for(var y=[],x=null,b=h.length-1;b>=0;b--){var _=h[b],w=_.action;w&&w.type===Lf.TAKEVORTEX?(x=_.node,y.unshift(_)):w&&w.type===Lf.TURN&&null!=x?this.graph.getDistance(_.node,x)>5&&y.unshift(_):y.unshift(_)}return{distance:l,instructions:y,path:u}}}]),e}(),jf=Uf;O(),O(),O(),O(),O();var Hf=x((function e(t){b(this,e),(0,L.d)(this,"destinations",[]),this.destinations=t}));O();var Vf,Gf,Wf=function(){function e(t,n){var i=this;b(this,e),(0,L.f)(this,Vf,void 0),(0,L.f)(this,Gf,void 0),(0,L.d)(this,"distance",0),(0,L.d)(this,"path",[]),(0,L.d)(this,"instructions",[]),(0,L.g)(this,Gf,t),(0,L.g)(this,Vf,n),this.distance=n.distance,this.instructions=n.instructions.map((function(e){var t,n,r,o,a,s,l,u,c,h,d,p,f=g(g({},e),{},{action:g({},e.action),atLocation:(null==(t=e.atLocation)?void 0:t.id)?null==(r=null==(n=(0,L.e)(i,Gf))?void 0:n._vortexesById)?void 0:r[e.atLocation.id]:void 0,node:(null==(o=e.node)?void 0:o.id)?null==(s=null==(a=(0,L.e)(i,Gf))?void 0:a._nodesById)?void 0:s[e.node.id]:void 0});return((null==(l=f.action)?void 0:l.type)===Lf.TAKEVORTEX||(null==(u=f.action)?void 0:u.type)===Lf.EXITVORTEX)&&(f.action.fromMap=null==(h=(0,L.e)(i,Gf)._mapsById)?void 0:h[null==(c=f.action)?void 0:c.fromMap.id],f.action.toMap=null==(p=(0,L.e)(i,Gf)._mapsById)?void 0:p[null==(d=f.action)?void 0:d.toMap.id]),f})),this.path=n.path.map((function(e){var t,n;return null==(n=null==(t=(0,L.e)(i,Gf))?void 0:t._nodesById)?void 0:n[e.id]}))}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,Vf)}}]),e}();Vf=new WeakMap,Gf=new WeakMap;var Xf,Yf=function(){function e(t){b(this,e),(0,L.f)(this,Xf,void 0),(0,L.g)(this,Xf,t)}return x(e,[{key:"directionsTo",value:function(e,t){if(e instanceof Hf){for(var n=[],i=this,r=0;r<e.destinations.length;r++){var o=e.destinations[r],a=bm(i),s=bm(o),l=(0,L.e)(this,Xf).navigator.getDirections({originIds:a,destinationNodeIds:s,accessible:(null==t?void 0:t.accessible)||!1}),u=new Wf((0,L.e)(this,Xf),l);n.push(u),i=o}return n}var c=bm(this),h=bm(e),d=(0,L.e)(this,Xf).navigator.getDirections({originIds:c,destinationNodeIds:h,accessible:(null==t?void 0:t.accessible)||!1});return new Wf((0,L.e)(this,Xf),d)}},{key:"distanceTo",value:function(e,t){var n=this.directionsTo(e,t);return(null==n?void 0:n.distance)||0}},{key:"directionsToCallback",value:function(e,t){return this.directionsTo(e,t)}}]),e}();Xf=new WeakMap;var Zf="9999-12-31T00:00:00.000Z";var Jf,Qf,Kf,$f,em,tm,nm=function(e){w(n,e);var t=M(n);function n(e,i){var r;return b(this,n),r=t.call(this,e),(0,L.f)(c(r),Jf,void 0),(0,L.f)(c(r),Qf,void 0),(0,L.f)(c(r),Kf,{}),(0,L.d)(c(r),"states"),(0,L.d)(c(r),"id",""),(0,L.d)(c(r),"name",""),(0,L.d)(c(r),"type",""),(0,L.d)(c(r),"description"),(0,L.d)(c(r),"sortOrder"),(0,L.d)(c(r),"logo"),(0,L.d)(c(r),"phone"),(0,L.d)(c(r),"social"),(0,L.d)(c(r),"color"),(0,L.d)(c(r),"shortName"),(0,L.d)(c(r),"detailsUrl"),(0,L.d)(c(r),"tags"),(0,L.d)(c(r),"externalId"),(0,L.d)(c(r),"showLabelWhenImagePresent"),(0,L.d)(c(r),"picture"),(0,L.d)(c(r),"operationHours"),(0,L.d)(c(r),"siblingGroups"),(0,L.d)(c(r),"gallery"),(0,L.d)(c(r),"categories",[]),(0,L.f)(c(r),$f,void 0),(0,L.f)(c(r),em,[]),(0,L.f)(c(r),tm,void 0),(0,L.g)(c(r),Jf,e),(0,L.g)(c(r),Qf,i),Object.assign(c(r),i),r}return x(n,[{key:"polygons",get:function(){var e=(0,L.e)(this,Kf).polygons;if(void 0!==e)return e;var t=[],n=(0,L.e)(this,$f),i=(0,L.e)(this,Jf)._polygonsById;if(Array.isArray(n))for(var r=0,o=n.length;r<o;++r){var a=i[n[r].id];null!=a&&a.geometry.visible&&t.push(a)}return(0,L.e)(this,Kf).polygons=t,t},set:function(e){(0,L.g)(this,$f,e)}},{key:"rank",get:function(){var e=this,t=(0,L.e)(this,Kf).rank;if(void 0!==t)return t;var n=(0,L.e)(this,Jf).locationRankings;if(!n||!n.locations)return null;var i=n.locations.find((function(t){return t.ids.find((function(t){return t===e.id}))}));return i?((0,L.e)(this,Kf).rank=i.score,i.score):null}},{key:"nodes",get:function(){var e=(0,L.e)(this,Kf).nodes;if(void 0!==e)return e;var t=[],n=(0,L.e)(this,em),i=(0,L.e)(this,Jf)._nodesById;if(n)for(var r=0,o=n.length;r<o;++r){var a=i[n[r].node];null!=a&&t.push(a)}return(0,L.e)(this,Kf).nodes=t,t},set:function(e){(0,L.g)(this,em,e)}},{key:"parent",get:function(){var e=(0,L.e)(this,Kf).parent;if(void 0!==e)return e;var t,n=(0,L.e)(this,Jf)._locationsById,i=(0,L.e)(this,tm);return void 0!==i&&(t=n[i]),(0,L.e)(this,Kf).parent=t,t},set:function(e){(0,L.g)(this,tm,e)}},{key:"state",get:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;if(e.states){var i=n||new Date,r=e.states.find((function(e){var t=new Date(e.start||0),n=new Date(e.end||Zf);return t<i&&n>i}));return r?t.find((function(e){return e.value===r.type})):void 0}}(this,(0,L.e)(this,Jf).locationStates)}},{key:"clone",value:function(){return new n((0,L.e)(this,Jf),(0,L.e)(this,Qf))}},{key:"nodeOperationHours",get:function(){var e=(0,L.e)(this,Kf).nodeOperationHours;if(void 0!==e)return e;if(null==this.nodes)return{};var t=(0,L.e)(this,Qf).nodes.reduce((function(e,t){return null!=t.operationHours&&(e[t.node]=t.operationHours),e}),{});return(0,L.e)(this,Kf).nodeOperationHours=t,t}},{key:"toJSON",value:function(){return(0,L.e)(this,Qf)}}],[{key:"hydrate",value:function(e,t){return e.map((function(e){return new n(t,e)}))}},{key:"fetch",value:function(){var e=a(l().mark((function e(t){var i,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.options.things.locations.slice(),t.options.things.categories&&xm(i,"categories"),t.options.things.nodes&&xm(i,"nodes"),t.options.things.polygons&&xm(i,"polygons"),t.options.things.locationStates&&xm(i,"states"),r={fields:i,venue:t.options.venue},e.prev=3,e.next=6,pm(t.options,"location",r);case 6:return o=e.sent,e.abrupt("return",(t.options.includeHidden||(o=o.filter((function(e){return!e.hidden}))),o.map((function(e){return new n(t,e)}))));case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",(console.error("Fetch Locations:",e.t0),[]));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(Yf),im=nm;Jf=new WeakMap,Qf=new WeakMap,Kf=new WeakMap,$f=new WeakMap,em=new WeakMap,tm=new WeakMap,O();var rm,om,am,sm,lm=function(e){w(n,e);var t=M(n);function n(e,i){var r;return b(this,n),r=t.call(this,e),(0,L.f)(c(r),rm,void 0),(0,L.f)(c(r),om,void 0),(0,L.f)(c(r),am,{}),(0,L.d)(c(r),"geometry"),(0,L.d)(c(r),"id",""),(0,L.d)(c(r),"map",""),(0,L.d)(c(r),"layer"),(0,L.d)(c(r),"layerId"),(0,L.d)(c(r),"name"),(0,L.d)(c(r),"externalId"),(0,L.d)(c(r),"vertexes"),(0,L.d)(c(r),"canvasBounds"),(0,L.f)(c(r),sm,void 0),(0,L.g)(c(r),rm,e),(0,L.g)(c(r),om,i),Object.assign(c(r),i),r}return x(n,[{key:"locations",get:function(){var e=(0,L.e)(this,am).locations;if(void 0!==e)return e;for(var t=[],n=(0,L.e)(this,rm).locations,i=this.id,r=0,o=n.length;r<o;++r){var a=n[r],s=a.polygons;if(Array.isArray(s))for(var l=0,u=s.length;l<u;++l)if(s[l].id===i){t.push(a);break}}return(0,L.e)(this,am).locations=t,t}},{key:"entrances",get:function(){var e=(0,L.e)(this,am).entrances;if(void 0!==e)return e;var t=[],n=(0,L.e)(this,sm),i=(0,L.e)(this,rm)._nodesById;if(Array.isArray(n)){for(var r=0,o=n.length;r<o;++r){var a=i[n[r].id];null!=a&&t.push(a)}return(0,L.e)(this,am).entrances=t,t}return[]},set:function(e){(0,L.g)(this,sm,e)}},{key:"rank",get:function(){var e=this,t=(0,L.e)(this,am).rank;if(void 0!==t)return t;var n=(0,L.e)(this,rm).rankings;if(!n||!n.polygons)return null;var i=n.polygons.find((function(t){return t.polygonId===e.id}));return i?((0,L.e)(this,am).rank={score:i.score,node:i.entranceNodeId},{score:i.score,node:i.entranceNodeId}):((0,L.e)(this,am).rank=null,null)}},{key:"toJSON",value:function(){return(0,L.e)(this,om)}}],[{key:"hydrate",value:function(e,t){return e.map((function(e){return new n(t,e)}))}},{key:"fetch",value:function(){var e=a(l().mark((function e(t){var i,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.options.things.polygons.slice(),t.options.things.maps&&xm(i,"map"),t.options.things.nodes&&xm(i,"entrances"),r={fields:i,perspective:t.options.do2D&&t.options.perspective||void 0,venue:t.options.venue},e.prev=3,e.next=6,pm(t.options,"polygon",r);case 6:return e.abrupt("return",e.sent.filter((function(e){return e.geometry.visible})).map((function(e){return new n(t,e)})));case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",(console.error("Fetch Polygons:",e.t0),[]));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(Yf),um=lm;function cm(e){return/^[\da-f]{24}$/i.test(e)}function hm(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";if(null!=e)for(var i="?",r=t?Object.keys(e).filter((function(e){return!["slug","venue"].includes(e)})):Object.keys(e),o=0,a=r.length;o<a;++o){var s=r[o],l=e[s];null!=l&&(n+="".concat(i+encodeURIComponent(s),"=").concat(encodeURIComponent(l)),i="&")}return n}function dm(e,t,n){var i,r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o?"".concat(e.supplementaryUrl).concat(t,"?venue=").concat(n.venue||n.slug):(null==(i=e.baseUrl)?void 0:i.includes("gateway"))?"".concat(e.baseUrl).concat(t,"/").concat(n.venue||n.slug).concat(hm(n,null==(r=e.baseUrl)?void 0:r.includes("gateway"))):e.baseUrl+t+hm(n)}function pm(e,t,n){return fm.apply(this,arguments)}function fm(){return fm=a(l().mark((function e(t,n,i){var r,o=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>3&&void 0!==o[3]&&o[3],e.abrupt("return",mm(t,n,i,r,!0));case 2:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function mm(e,t,n){return vm.apply(this,arguments)}function vm(){return vm=a(l().mark((function e(t,n,i){var r,o,a,s,u=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>3&&void 0!==u[3]&&u[3],o=u.length>4&&void 0!==u[4]&&u[4],a=dm(t,n,i,r),e.next=5,gm(t,a,r);case 5:if(s=e.sent,o||!Array.isArray(s)){e.next=10;break}if(1!==s.length){e.next=9;break}return e.abrupt("return",s[0]);case 9:throw new Error("Invalid response object");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function gm(e,t){return ym.apply(this,arguments)}function ym(){return ym=a(l().mark((function e(t,n){var i,r,o,a,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],r={language:t.language,clientId:t.clientId,clientSecret:t.clientSecret},i&&delete r.language,r.language&&(n+="&lang=".concat(encodeURIComponent(r.language))),(o=t.headers)["Content-Type"]="text/json",t.authorization&&(o.Authorization=t.authorization),r.language&&(o["Accept-Language"]=r.language),e.next=7,fetch(n,{method:"GET",headers:o});case 7:if((a=e.sent).ok){e.next=10;break}throw new Error("".concat(a.status," ").concat(a.statusText));case 10:return e.abrupt("return",a.json());case 11:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function xm(e,t){e.indexOf(t)<0&&e.push(t)}function bm(e){var t;return e instanceof um?e.entrances.map((function(e){return e.id})):e instanceof im?(null==(t=e.nodes)?void 0:t.map((function(e){return e.id})))||[]:[e.id]}function _m(e){return wm.apply(this,arguments)}function wm(){return wm=a(l().mark((function e(t){var n,i,r,o,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},i=t.maps,r=t.images,o=t.scenes,a=t.polygons,null==r){e.next=11;break}return e.prev=2,s=Object.keys(r).map((function(e){return fetch("data:image/png;base64,".concat(r[e])).then((function(e){return e.blob()})).then((function(t){n[e]=t})).catch((function(e){console.error(e)}))})),e.next=6,Promise.all(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:return e.abrupt("return",(i.forEach((function(e){var t;!(null==(t=e.scene)?void 0:t.polygons)&&!o[e.id]||(null!=o&&o[e.id]&&(e.scene||(e.scene={}),Object.defineProperty(e.scene,"polygons",{get:function(){return o[e.id]}})),null!=r&&(e.scene.images=e.scene.images.map((function(e){var t=e.filename;return{filename:t,url:n[t]}})),e.scene.polygons.forEach((function(e){var t,i;if((null==(t=null==e?void 0:e.image)?void 0:t.url)&&(null==(i=null==e?void 0:e.image)?void 0:i.url)){var r=e.image.url.split("/"),o=n[r[r.length-1]];o&&(e.image.url=o)}}))))})),null!=r&&a.forEach((function(e){var t;if(null==(t=null==e?void 0:e.image)?void 0:t.url){var i=e.image.url.split("/"),r=n[i[i.length-1]];r&&(e.image.url=r)}})),null!=t.images&&delete t.images,null!=t.scenes&&delete t.scenes,t));case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),wm.apply(this,arguments)}function Mm(e,t){var n,i,r,o=t.x,a=t.y,s=Number.MAX_SAFE_INTEGER;return e.forEach((function(e){i=e.x,r=e.y;var t=Math.pow(o-i,2)+Math.pow(a-r,2);t<s&&(s=t,n=e)})),n}rm=new WeakMap,om=new WeakMap,am=new WeakMap,sm=new WeakMap;var Em,qm,Tm,Sm=function(){function e(t,n){b(this,e),(0,L.f)(this,Em,void 0),(0,L.f)(this,qm,{}),(0,L.f)(this,Tm,void 0),(0,L.d)(this,"name"),(0,L.d)(this,"externalId"),(0,L.d)(this,"parents"),(0,L.d)(this,"id"),(0,L.d)(this,"icon"),this.id=n.id,(0,L.g)(this,Tm,n),(0,L.g)(this,Em,t),Object.assign(this,n)}return x(e,[{key:"locations",get:function(){var e=(0,L.e)(this,qm).locations;if(void 0!==e)return e;for(var t=[],n=(0,L.e)(this,Em).locations,i=this.id,r=0,o=n.length;r<o;++r){var a=n[r],s=a.categories;if(Array.isArray(s))for(var l=0,u=s.length;l<u;++l)if(s[l]===i){t.push(a);break}}return(0,L.e)(this,qm).locations=t,t}},{key:"toJSON",value:function(){return(0,L.e)(this,Tm)}}],[{key:"hydrate",value:function(t,n){return t.map((function(t){return new e(n,t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={fields:n.options.things.categories,venue:n.options.venue},t.prev=1,t.next=4,pm(n.options,"category",i);case 4:return t.abrupt("return",t.sent.map((function(t){return new e(n,t)})));case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",(console.error("Fetch Categories:",t.t0),[]));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Pm=Sm;Em=new WeakMap,qm=new WeakMap,Tm=new WeakMap,O();var Am,Cm,Lm,Om=function(){function e(t,n){b(this,e),(0,L.f)(this,Am,void 0),(0,L.f)(this,Cm,void 0),(0,L.f)(this,Lm,{}),(0,L.d)(this,"id",""),(0,L.d)(this,"type",""),(0,L.d)(this,"name",""),(0,L.d)(this,"description"),(0,L.d)(this,"image"),(0,L.d)(this,"startDate"),(0,L.d)(this,"endDate"),(0,L.d)(this,"showDate"),(0,L.g)(this,Cm,n),(0,L.g)(this,Am,t),Object.assign(this,n)}return x(e,[{key:"location",value:function(){var e=(0,L.e)(this,Lm).location;if(void 0!==e)return e;var t,n=(0,L.e)(this,Am)._locationsById,i=(0,L.e)(this,Cm).location;if(null!=i){var r=n[i];null!=r&&(t=r)}return(0,L.e)(this,Lm).location=t,t}},{key:"toJSON",value:function(){return(0,L.e)(this,Cm)}}],[{key:"hydrate",value:function(t,n){return t.map((function(t){return new e(n,t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.options.things.events.slice(),n.options.things.locations&&xm(i,"location"),r={fields:i,venue:n.options.venue,activeAtOrAfter:Date.now()},t.prev=3,t.next=6,pm(n.options,"event",r);case 6:return t.abrupt("return",t.sent.map((function(t){return new e(n,t)})));case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",(console.error("Fetch Events:",t.t0),[]));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Im=Om;Am=new WeakMap,Cm=new WeakMap,Lm=new WeakMap,O();var km,Nm=function(){function e(t){b(this,e),(0,L.f)(this,km,void 0),(0,L.d)(this,"locations",[]),(0,L.g)(this,km,t),Object.assign(this,t)}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,km)}}],[{key:"hydrate",value:function(t){return new e(t)}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,mm(n.options,"smart-labels/location-label-ranking",{venue:n.options.venue},!0);case 3:return i=t.sent,t.abrupt("return",new e(i));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(console.error("Fetch Location Rankings:",t.t0),{}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Rm=Nm;km=new WeakMap,O();var Dm,Bm=function(){function e(t){b(this,e),(0,L.f)(this,Dm,void 0),(0,L.d)(this,"id",""),(0,L.d)(this,"name",""),(0,L.d)(this,"value",""),(0,L.g)(this,Dm,t),Object.assign(this,t)}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,Dm)}}],[{key:"hydrate",value:function(t){return t.map((function(t){return new e(t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={fields:n.options.things.locationStates.slice(),venue:n.options.venue},t.prev=1,t.next=4,pm(n.options,"location-state",i);case 4:return t.abrupt("return",t.sent.map((function(t){return new e(t)})));case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",(console.error("Fetch Location States:",t.t0),[]));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),zm=Bm;Dm=new WeakMap,O(),O();var Fm,Um,jm=function(){function e(t,n,i,r,o,a){b(this,e),(0,L.d)(this,"map"),(0,L.d)(this,"x",0),(0,L.d)(this,"y",0),(0,L.d)(this,"lat",0),(0,L.d)(this,"lon",0),(0,L.f)(this,Fm,{}),(0,L.f)(this,Um,void 0),this.lat=t,this.lon=n,this.map="string"==typeof o?o:o.id,this.x=i,this.y=r,(0,L.g)(this,Um,a)}return x(e,[{key:"absoluteDistanceTo",value:function(e){return function(e,t){var n=r(e,2),i=n[0],o=n[1],a=r(t,2),s=a[0],l=a[1],u=new Cd(i,o),c=new Cd(s,l);return u.distanceTo(c)}([e.lat,e.lon],[this.lat,this.lon])}},{key:"nearestNode",get:function(){var e=this,t=(0,L.e)(this,Fm).nearestNode;if(void 0!==t)return t;var n=Mm((0,L.e)(this,Um).nodes.filter((function(t){return t.map===e.map})),this);return(0,L.e)(this,Fm).nearestNode=n,n}}]),e}();Fm=new WeakMap,Um=new WeakMap;var Hm,Vm,Gm,Wm=function(){function e(t,n){b(this,e),(0,L.f)(this,Hm,void 0),(0,L.f)(this,Vm,{}),(0,L.f)(this,Gm,void 0),(0,L.d)(this,"id",""),(0,L.d)(this,"group",""),(0,L.d)(this,"name",""),(0,L.d)(this,"shortName",""),(0,L.d)(this,"elevation",0),(0,L.d)(this,"scale",0),(0,L.d)(this,"x_scale"),(0,L.d)(this,"perspectiveId"),(0,L.d)(this,"scene"),(0,L.d)(this,"width",0),(0,L.d)(this,"height",0),(0,L.d)(this,"georeference",[]),(0,L.d)(this,"_scale",0),(0,L.g)(this,Hm,t),(0,L.g)(this,Gm,n),Object.assign(this,n),this._scale=function(e){if(e.scale||e.x_scale)return 1/(e.scale||e.x_scale);var t;try{var n=e.georeference[0],i=e.georeference[2],r=new Cd(n.target.x,n.target.y),o=new Cd(i.target.x,i.target.y),a=r.distanceTo(o),s=n.control.x-i.control.x,l=n.control.y-i.control.y;t=Math.sqrt(s*s+l*l)/a}catch(n){t=1,console.warn(n),console.warn("Couldn't georeference ".concat(e.name||e.shortName||e.id,". Probably not enough geocoordinates."))}return t}(this),this.scale=this.x_scale}return x(e,[{key:"polygons",get:function(){var e=(0,L.e)(this,Vm).polygons;if(void 0!==e)return e;for(var t=[],n=(0,L.e)(this,Hm).polygons,i=this.id,r=0,o=n.length;r<o;++r){var a=n[r];a.map===i&&t.push(a)}return(0,L.e)(this,Vm).polygons=t,t}},{key:"mapGroup",get:function(){var e=(0,L.e)(this,Vm).mapGroup;if(void 0!==e)return e;var t=this.group,n=t&&(0,L.e)(this,Hm)._mapGroupsById[t]||null;return(0,L.e)(this,Vm).mapGroup=n,n}},{key:"createCoordinateByXY",value:function(e,t){var n=this.georeference[0],i=new Cd(n.target.x,n.target.y),r=e-n.control.x,o=n.control.y-t,a=Math.atan2(r,o),s=r/Math.sin(a),l=a-this.getNorth(),u=s/this._scale,c=i.destinationPoint(u,180*l/Math.PI);return new jm(c.lat,c.lon,e,t,this.id,(0,L.e)(this,Hm))}},{key:"createCoordinate",value:function(e,t){var n=this.georeference[0],i=new Cd(n.target.x,n.target.y),r=new Cd(e,t),o=i.distanceTo(r),a=(i.finalBearingTo(r)+360)%360*Math.PI/180,s=o*(1/this.scale),l=a+this.getNorth(),u=Math.sin(l)*s,c=Math.cos(l)*s;return new jm(e,t,n.control.x+u,n.control.y-c,this.id,(0,L.e)(this,Hm))}},{key:"getNorth",value:function(){var e;try{var t=this.georeference[0],n=this.georeference[2],i=new Cd(t.target.x,t.target.y),r=new Cd(n.target.x,n.target.y);e=-((i.finalBearingTo(r)+0)*Math.PI/180-Math.atan2(n.control.y-t.control.y,n.control.x-t.control.x)-Math.PI/2)}catch(t){e=0,console.warn(t),console.warn("Couldn't georeference ".concat(this.name||this.shortName||this.id,". Probably not enough geocoordinates."))}return e}},{key:"toJSON",value:function(){return(0,L.e)(this,Gm)}}],[{key:"hydrate",value:function(t,n){return t.map((function(t){return new e(n,t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i,r,o,a,s,u,c,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.options.things.maps.slice(),n.options.perspective&&xm(i,"perspectives"),n.options.things.mapGroups&&xm(i,"group"),xm(i,"elevation"),xm(i,"x_scale"),xm(i,"scale"),xm(i,"georeference"),r={fields:i,perspective:n.options.perspective,venue:n.options.venue},t.prev=3,t.next=6,pm(n.options,"map",r);case 6:for(o=t.sent,a=function(e){var t=c.layers.find((function(t){return t.id===e}));t?t.visible=!0:c.layers.push({id:e,visible:!0})},s=0,u=o.length;s<u;++s)(c=o[s])&&(null!=(h=c.perspective)&&(c.perspectiveId=h.id,n.options.do2D?(i.indexOf("width")>-1&&(c.width=h.size&&h.size.width||h.width),i.indexOf("height")>-1&&(c.height=h.size&&h.size.height||h.height),i.indexOf("tiles")>-1&&(c.tiles=h.tiles),i.indexOf("original")>-1&&(c.original=h.original)):(i.indexOf("scene")>-1&&(c.scene=h.scene),h.layers?(c.layers.forEach((function(e){e.visible=!1})),h.layers.forEach(a)):c.layers.forEach((function(e){e.visible=!0})))),delete c.perspective),o[s]=new e(n,c);return t.abrupt("return",o);case 12:return t.prev=12,t.t0=t.catch(3),t.abrupt("return",(console.error("Fetch Maps:",t.t0),[]));case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Xm=Wm;Hm=new WeakMap,Vm=new WeakMap,Gm=new WeakMap,O();var Ym,Zm,Jm,Qm=function(){function e(t,n){b(this,e),(0,L.f)(this,Ym,void 0),(0,L.f)(this,Zm,void 0),(0,L.f)(this,Jm,{}),(0,L.d)(this,"id",""),(0,L.d)(this,"name",""),(0,L.g)(this,Zm,n),(0,L.g)(this,Ym,t),Object.assign(this,n)}return x(e,[{key:"maps",get:function(){var e=(0,L.e)(this,Jm).maps;if(void 0!==e)return e;for(var t=[],n=(0,L.e)(this,Ym).maps,i=(0,L.e)(this,Zm).id,r=0,o=n.length;r<o;++r){var a=n[r];a.group===i&&t.push(a)}return(0,L.e)(this,Jm).maps=t,t}},{key:"toJSON",value:function(){return(0,L.e)(this,Zm)}}],[{key:"hydrate",value:function(t,n){return t.map((function(t){return new e(n,t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={fields:n.options.things.mapGroups.slice(),venue:n.options.venue},t.prev=1,t.next=4,pm(n.options,"map-group",i);case 4:return t.abrupt("return",t.sent.map((function(t){return new e(n,t)})));case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",(console.error("Fetch Map Groups:",t.t0),[]));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),Km=Qm;Ym=new WeakMap,Zm=new WeakMap,Jm=new WeakMap,O();var $m,ev,tv,nv,iv=function(e){w(n,e);var t=M(n);function n(e,i){var r;return b(this,n),r=t.call(this,e),(0,L.f)(c(r),$m,void 0),(0,L.f)(c(r),ev,void 0),(0,L.f)(c(r),tv,{}),(0,L.d)(c(r),"id",""),(0,L.d)(c(r),"map",""),(0,L.d)(c(r),"x",0),(0,L.d)(c(r),"y",0),(0,L.d)(c(r),"operationHours"),(0,L.d)(c(r),"externalId"),(0,L.f)(c(r),nv,void 0),(0,L.g)(c(r),$m,e),(0,L.g)(c(r),ev,i),Object.assign(c(r),i),r}return x(n,[{key:"lat",get:function(){var e,t=(0,L.e)(this,tv).cachedLatLon;if(null!=t)return t.lat;var n=null==(e=(0,L.e)(this,$m)._mapsById)?void 0:e[this.map];if(null==n)throw new Error("Map not found");return(0,L.e)(this,tv).cachedLatLon=n.createCoordinateByXY(this.x,this.y),(0,L.e)(this,tv).cachedLatLon.lat}},{key:"lon",get:function(){var e,t=(0,L.e)(this,tv).cachedLatLon;if(null!=t)return t.lon;var n=null==(e=(0,L.e)(this,$m)._mapsById)?void 0:e[this.map];if(null==n)throw new Error("Map not found");return(0,L.e)(this,tv).cachedLatLon=n.createCoordinateByXY(this.x,this.y),(0,L.e)(this,tv).cachedLatLon.lon}},{key:"paths",get:function(){var e=(0,L.e)(this,tv).paths;if(void 0!==e)return e;var t=[],n=(0,L.e)(this,$m)._nodesById,i=(0,L.e)(this,nv);if(Array.isArray(i))for(var r=0,o=i.length;r<o;++r){var a=n[i[r].node];null!=a&&t.push(a)}return(0,L.e)(this,tv).paths=t,t},set:function(e){(0,L.g)(this,nv,e)}},{key:"locations",get:function(){var e=(0,L.e)(this,tv).locations;if(void 0!==e)return e;for(var t=[],n=(0,L.e)(this,$m).locations,i=this.id,r=0,o=n.length;r<o;++r){var a=n[r],s=a.nodes;if(Array.isArray(s))for(var l=0,u=s.length;l<u;++l)if(s[l].id===i){t.push(a);break}}return(0,L.e)(this,tv).locations=t,t}},{key:"polygon",get:function(){var e=(0,L.e)(this,tv).polygon;if(void 0!==e)return e;for(var t,n=(0,L.e)(this,$m).polygons,i=this.id,r=0,o=n.length;r<o;++r){var a=n[r];a.entrances.map((function(e){return e.id})).includes(i)&&(t=a)}return(0,L.e)(this,tv).polygon=t,t}},{key:"toJSON",value:function(){return(0,L.e)(this,ev)}}],[{key:"hydrate",value:function(e,t){return e.map((function(e){return new n(t,e)}))}},{key:"fetch",value:function(){var e=a(l().mark((function e(t){var i,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.options.things.nodes.slice(),t.options.things.maps&&xm(i,"map"),["weight","multiplier","accessible"].forEach((function(e){xm(i,e)})),r={fields:i,perspective:t.options.do2D&&t.options.perspective||void 0,venue:t.options.venue},e.prev=3,e.next=6,pm(t.options,"node",r);case 6:return e.abrupt("return",e.sent.map((function(e){return new n(t,e)})));case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",(console.error("Fetch Nodes:",e.t0),[]));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(Yf),rv=iv;$m=new WeakMap,ev=new WeakMap,tv=new WeakMap,nv=new WeakMap,O();var ov,av=function(){function e(t){b(this,e),(0,L.f)(this,ov,void 0),(0,L.d)(this,"polygons",[]),(0,L.g)(this,ov,t),Object.assign(this,t)}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,ov)}}],[{key:"hydrate",value:function(t){return new e(t)}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,mm(n.options,"smart-labels/polygon-label-ranking",{venue:n.options.venue},!0);case 3:return i=t.sent,t.abrupt("return",new e(i));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(console.error("Fetch Rankings:",t.t0),null));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),sv=av;ov=new WeakMap,O();var lv,uv=function(){function e(t){b(this,e),(0,L.d)(this,"id",""),(0,L.f)(this,lv,void 0),(0,L.g)(this,lv,t),Object.assign(this,t)}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,lv)}}],[{key:"hydrate",value:function(t){return t.map((function(t){return new e(t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={fields:n.options.things.themes.slice(),venue:n.options.venue},t.prev=1,t.next=4,pm(n.options,"apollo-theme",i);case 4:return t.abrupt("return",t.sent.map((function(t){return new e(t)})));case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",(console.error("Fetch Theme:",t.t0),[]));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),cv=uv;lv=new WeakMap,O();var hv,dv=function(){function e(t){b(this,e),(0,L.f)(this,hv,void 0),(0,L.d)(this,"defaultMap",""),(0,L.d)(this,"address",""),(0,L.d)(this,"city",""),(0,L.d)(this,"countrycode",""),(0,L.d)(this,"externalId",""),(0,L.d)(this,"id",""),(0,L.d)(this,"latitude"),(0,L.d)(this,"logo"),(0,L.d)(this,"longitude"),(0,L.d)(this,"metadata"),(0,L.d)(this,"name",""),(0,L.d)(this,"operationHours"),(0,L.d)(this,"postal",""),(0,L.d)(this,"slug",""),(0,L.d)(this,"state",""),(0,L.d)(this,"telephone",""),(0,L.d)(this,"tzid",""),(0,L.d)(this,"tzidOverride",""),(0,L.d)(this,"utcOffset",""),(0,L.d)(this,"website",""),(0,L.g)(this,hv,t),Object.assign(this,t)}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,hv)}}],[{key:"hydrate",value:function(t){return new e(t)}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={fields:n.options.things.venue,slug:n.options.venue,limit:1},t.prev=1,t.next=4,pm(n.options,"venue",i);case 4:return r=t.sent,t.abrupt("return",new e(r[0]));case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",(console.error("Fetch Venue:",t.t0),{}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),pv=dv;hv=new WeakMap,O();var fv,mv=function(){function e(t){b(this,e),(0,L.d)(this,"id",""),(0,L.f)(this,fv,void 0),(0,L.d)(this,"name"),(0,L.d)(this,"type"),(0,L.d)(this,"weight"),(0,L.d)(this,"multiplier"),(0,L.g)(this,fv,t),Object.assign(this,t)}return x(e,[{key:"toJSON",value:function(){return(0,L.e)(this,fv)}}],[{key:"hydrate",value:function(t){return t.map((function(t){return new e(t)}))}},{key:"fetch",value:function(){var t=a(l().mark((function t(n){var i,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.options.things.vortexes.slice(),["name","type","accessible","weight","multiplier","nodes"].forEach((function(e){xm(i,e)})),r={fields:i,venue:n.options.venue},t.prev=3,t.next=6,pm(n.options,"vortex",r);case 6:return t.abrupt("return",t.sent.map((function(t){return new e(t)})));case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",(console.error("Fetch Vortexes:",t.t0),[]));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()}]),e}(),vv=mv;fv=new WeakMap;var gv,yv={supplementaryUrl:"https://api-gateway.mappedin.com/analytics/",headers:{},accessToken:"",clientId:"",noAuth:!1,includeHidden:!0,do2D:!1,clientSecret:"",apiGateway:"",authorization:"",perspective:"Website",language:"",things:{},venue:""};!function(e){e.CATEGORY="categories",e.EVENT="events",e.LOCATION="locations",e.MAPGROUP="mapGroups",e.MAP="maps",e.NODE="nodes",e.POLYGON="polygons",e.VORTEX="vortexes"}(gv||(gv={}));var xv,bv,_v={categories:Pm,locations:im,vortexes:vv,maps:Xm,nodes:rv,polygons:um,venue:pv,events:Im,mapGroups:Km,themes:cv,locationStates:zm,locationRankings:Rm,rankings:sv},wv=function(){function e(t){b(this,e),(0,L.d)(this,"perspective"),(0,L.d)(this,"things"),(0,L.d)(this,"options"),(0,L.f)(this,xv,{}),(0,L.f)(this,bv,""),(0,L.d)(this,"updatedAt"),(0,L.d)(this,"categories",[]),(0,L.d)(this,"locations",[]),(0,L.d)(this,"vortexes",[]),(0,L.d)(this,"maps",[]),(0,L.d)(this,"nodes",[]),(0,L.d)(this,"polygons",[]),(0,L.d)(this,"venue",{}),(0,L.d)(this,"events",[]),(0,L.d)(this,"mapGroups",[]),(0,L.d)(this,"themes",[]),(0,L.d)(this,"locationStates",[]),(0,L.d)(this,"locationRankings",[]),(0,L.d)(this,"rankings"),(0,L.d)(this,"_categoriesById"),(0,L.d)(this,"_locationsById"),(0,L.d)(this,"_vortexesById"),(0,L.d)(this,"_mapsById"),(0,L.d)(this,"_nodesById"),(0,L.d)(this,"_polygonsById"),(0,L.d)(this,"_eventsById"),(0,L.d)(this,"_mapGroupsById"),(0,L.d)(this,"_locationStatesById"),(0,L.d)(this,"_locationRankingsById"),(0,L.d)(this,"_rankingsById"),(0,L.d)(this,"_categoriesByExternalId"),(0,L.d)(this,"_locationsByExternalId"),(0,L.d)(this,"_vortexesByExternalId"),(0,L.d)(this,"_mapsByExternalId"),(0,L.d)(this,"_nodesByExternalId"),(0,L.d)(this,"_polygonsByExternalId"),(0,L.d)(this,"_eventsByExternalId"),(0,L.d)(this,"_mapGroupsByExternalId"),(0,L.d)(this,"_locationStatesByExternalId"),(0,L.d)(this,"_locationRankingsByExternalId"),(0,L.d)(this,"_rankingsByExternalId"),(0,L.d)(this,"images"),(0,L.d)(this,"scenes"),(0,L.d)(this,"navigator"),this.options=t}return x(e,[{key:"generateGetters",value:function(e){var t=this;try{for(var n=function(n,i){i=e[n];Array.isArray(t[i])&&(Object.defineProperty(t,"_".concat(i,"ByExternalId"),{get:function(){var e=(0,L.e)(this,xv)[i];if(void 0!==e)return e;var t={};return this[i].forEach((function(e){return t[e.externalId]=e})),(0,L.e)(this,xv)[i]=t,t}}),Object.defineProperty(t,"_".concat(i,"ById"),{get:function(){var e=(0,L.e)(this,xv)[i];if(void 0!==e)return e;var t={};return this[i].forEach((function(e){return t[e.id]=e})),(0,L.e)(this,xv)[i]=t,t}}))},i=0,r=e.length;i<r;++i)n(i,r);return this}catch(e){throw new Error("Unable to generate getters, "+e)}}},{key:"getCollectionItemById",value:function(e,t){var n="_".concat(e,"ByExternalId"),i=this["_".concat(e,"ById")];return null!=i&&null!=i[t]||null!=(i=this[n])&&null!=i[t]?i[t]:null}},{key:"hydrate",value:function(){var e=a(l().mark((function e(t,n){var i,r,o,a,s,u,c,h,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=10;break}e.prev=1,(0,L.g)(this,bv,t),i=JSON.parse(t),e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",void console.error("Unable to parse JSON",e.t0));case 8:e.next=11;break;case 10:i=t,(0,L.g)(this,bv,JSON.stringify(i));case 11:for(r=Object.keys(i),o=0,a=r.length;o<a;++o)s=r[o],u=i[s],null!=_v[s]&&"function"==typeof _v[s].hydrate&&(this[s]=_v[s].hydrate(u,this));if(e.t1=n,!e.t1){e.next=17;break}return e.next=17,_m(i);case 17:h=(c=i).images,d=c.scenes,this.images=h,this.scenes=d,this.generateGetters(r),this.initNavigator();case 19:case"end":return e.stop()}}),e,this,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=a(l().mark((function e(){var t,n,i,r,o,a,s=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"vortexes"in this.options.things||(this.options.things.vortexes=["name","type","accessible","weight","multiplier","nodes"]),"locationStates"in this.options.things||(this.options.things.locationStates=["name","id","value"]),cm(this.options.clientId)||(this.options.things.rankings&&delete this.options.things.rankings,this.options.things.locationRankings&&delete this.options.things.locationRankings),t=this.options.things,n=[],i=Object.keys(t),r=function(e,t){var r=i[e];_v[r]&&n.push(_v[r].fetch(s).then((function(e){return s[r]=e,Promise.resolve()})))};for(o=0,a=i.length;o<a;++o)r(o);return e.abrupt("return",(this.generateGetters(i),Promise.all(n).then((function(){s.initNavigator(),(0,L.g)(s,bv,JSON.stringify(s.toJSON()))}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initNavigator",value:function(){this.navigator=new jf({locations:this.locations.map((function(e){return e.toJSON()})),nodes:this.nodes.map((function(e){return e.toJSON()})),vortexes:this.vortexes.map((function(e){return e.toJSON()})),maps:this.maps.map((function(e){return e.toJSON()}))})}},{key:"toJSON",value:function(){var e,t={};for(var n in _v)Array.isArray(this[n])&&(t[n]=this[n].map((function(e){return e.toJSON()})));return g(g({},t),{},{venue:this.venue.toJSON(),rankings:null==(e=this.rankings)?void 0:e.toJSON()})}},{key:"toString",value:function(){return(0,L.e)(this,bv)}}]),e}();xv=new WeakMap,bv=new WeakMap,O();var Mv={venue:["slug","name","defaultMap","metadata","countrycode","tzid","logo","externalId"],nodes:["externalId","x","y","paths","accessible","operationHours"],vortexes:["externalId","nodes","types","accessible"],polygons:["vertexes","geometry","canvasBounds","layer","externalId","entrances"],locations:["externalId","name","type","picture","description","icon","logo","sortOrder","phone","operationHours","social","color","toMap","tags","shortName","detailsUrl","locationState","metadata","siblingGroups","gallery"],categories:["name","color","sortOrder","parents"],maps:["name","elevation","height","width","layers","shortName","scene","group","x_scale"],mapGroups:["name"],themes:["name","themeData"],rankings:["polygons"],locationRankings:[]};function Ev(e){var t=g(g({},yv),{},{things:Mv},e);return t.noAuth||(t.accessToken?t.authorization="Bearer ".concat(t.accessToken):t.clientId&&t.clientSecret&&(t.authorization="Basic ".concat(globalThis.btoa("".concat(t.clientId,":").concat(t.clientSecret))))),t}function qv(e){return Tv.apply(this,arguments)}function Tv(){return Tv=a(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ev(g({baseUrl:"https://api-gateway.mappedin.com/"},t)),i=new wv(g(g({},n),{},{baseUrl:n.baseUrl+"public/1/"})),e.next=3,i.fetch();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}Le(),globalThis.btoa||(globalThis.btoa=qf.encode);var Sv;void 0!==globalThis.navigator&&globalThis.navigator.product;O(),function(e){e[e.CENTER=0]="CENTER",e[e.TOP=1]="TOP",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT"}(Sv||(Sv={}));var Pv={anchor:0},Av=function(e){w(n,e);var t=M(n);function n(e){var i;b(this,n),i=t.call(this,e),(0,L.d)(c(i),"_el",null),(0,L.d)(c(i),"style",{}),(0,L.d)(c(i),"polygon");var r=e.contentHtml,o=e.position,a=e.mapId,s=e.id,l=e.collisionRank,u=void 0===l?Jd.HIGH:l;return i.containerEl.innerHTML='<div class="mappedin-marker__wrapper"><div class="mappedin-marker">'.concat(r,"</div></div>"),i.position=o,i.rank=u,i.mapId=a,i.id="string"==typeof s?s:We(),i.containerEl=i.containerEl.querySelector(".mappedin-marker"),i.contentEl=i.containerEl.firstElementChild,i._el=i.contentEl,i.options=g(g({},Pv),e),i}return x(n,[{key:"strategies",get:function(){var e=this,t=this.dimensions,n=t.width,i=t.height;return[{name:"center",getBoundingBox:function(t){var r=t.x,o=t.y,a=o-i/2,s=o+i/2,l=r-n/2,u=r+n/2;switch(e.options.anchor){case 1:a=o-i,s=o;break;case 2:a=o,s=o+i;break;case 3:l=r-n,u=r;break;case 4:l=r,u=r+n}return[a,s,l,u]},onStrategySelected:function(){var t=-i/2+"px",r=-n/2+"px";switch(e.style.top=t,e.style.left=r,e.options.anchor){case 1:e.style.top=-i+"px";break;case 2:e.style.top=i+"px";break;case 3:e.style.left=-n+"px";break;case 4:e.style.left=n+"px";break;default:e.style.top=t,e.style.left=r}}}]}},{key:"colliderDidMount",value:function(){this.updateDimensions()}},{key:"setAction",value:function(e){f(d(n.prototype),"setAction",this).call(this,e),this.visible=e===gp.show}},{key:"updateDimensions",value:function(){var e=this.containerEl.getBoundingClientRect(),t=e.width,n=e.height;this.dimensions={width:t,height:n},Object.assign(this.containerEl,{width:t+"px",height:n+"px"})}},{key:"colliderDidGoOffscreen",value:function(){}},{key:"colliderDidUpdateVisiblity",value:function(){this.containerEl.style.opacity=this.action===gp.show?"1":"0",!0===this.visible&&Object.assign(this.containerEl.style,this.style)}}]),n}(Mp),Cv=Av,Lv={};var Ov,Iv,kv=function(){function e(t,n){b(this,e),(0,L.f)(this,Ov,void 0),(0,L.f)(this,Iv,void 0),(0,L.g)(this,Ov,t),(0,L.g)(this,Iv,n)}return x(e,[{key:"createMarker",value:function(e,t,n){var i=this,r=(0,L.e)(this,Iv).mapObjects.get(e.map||(0,L.e)(this,Iv).currentMap),o=(0,L.e)(this,Iv).convertTo3DMapPosition(e);if(e instanceof rv){var a=function(e,t){var n;return null!=(null==(n=Lv[e.id])?void 0:n[t])||(null==Lv[e.id]&&(Lv[e.id]={}),e.polygons.forEach((function(t){t.entrances.forEach((function(n){Lv[e.id][n.id]=t}))}))),Lv[e.id][t]}(r.mapClass,e.id);null!=a&&o.setZ(a.geometry.scale.z*Math.max(r.mapClass.width,r.mapClass.height)/1e3)}var s=new Cv(g(g({},n),{},{contentHtml:t,mapId:r.id,position:o.clone()}));return(0,L.e)(this,Iv).smartCollisionEngine.add(s.id,s),r.addPendingLowPriorityTask("createTextObject",(function(){r.markers.add(s),s.enable(),(0,L.e)(i,Iv).smartCollisionEngine.makeCollidersDirty(),(0,L.e)(i,Ov).tryRendering()})),(0,L.e)(this,Ov).tryRendering(),s}},{key:"removeMarker",value:function(e){(0,L.e)(this,Iv).smartCollisionEngine.remove("string"==typeof e?e:e.id),(0,L.e)(this,Iv).smartCollisionEngine.makeCollidersDirty(),(0,L.e)(this,Ov).tryRendering()}},{key:"removeAllMarkers",value:function(){var e=this;Array.from((0,L.e)(this,Iv).mapObjects.values()).forEach((function(t){t.markers.forEach((function(t){(0,L.e)(e,Iv).smartCollisionEngine.remove(t.id)}))})),(0,L.e)(this,Ov).tryRendering()}}]),e}();Ov=new WeakMap,Iv=new WeakMap;var Nv=kv;O(),O();var Rv,Dv,Bv={top:!0,left:!0,topLeft:!0,right:!0,topRight:!0,bottom:!0,bottomLeft:!0,bottomRight:!0},zv=function(e){w(n,e);var t=M(n);function n(e){var i;b(this,n),i=t.call(this,e),(0,L.d)(c(i),"className","top"),(0,L.d)(c(i),"_el",null),(0,L.d)(c(i),"style",{}),(0,L.d)(c(i),"updateClassName",(function(e){i.containerEl.classList.item(1)&&i.containerEl.classList.remove(i.containerEl.classList.item(1)),i.containerEl.classList.add("tooltip--anchor-".concat(e))}));var r=e.html,o=e.contentHtml,a=e.text,s=e.position,l=e.selector,u=e.map,h=e.padding,d=void 0===h?0:h,p=e.collisionRank,f=void 0===p?Jd.HIGH:p,m=e.defaultAnchorType,v=void 0===m?"top":m,y=e.enabledAnchorTypes;i.containerEl.innerHTML=r||'<div class="mappedin-tooltip"><div class="mappedin-tooltip__content" style="padding: '.concat(d,'px">').concat(a||o,"</div></div>"),i.position=s,i.rank=f,i.mapId=u,i.id=We();var x=r?l:".mappedin-tooltip";return i.containerEl=i.containerEl.querySelector(x),i.contentEl=i.containerEl.firstElementChild,i._el=i.contentEl,i.options={padding:d/Math.SQRT2,defaultAnchorType:v,enabledAnchorTypes:g(g({},Bv),y)},i}return x(n,[{key:"strategies",get:function(){for(var e=this,t=this.dimensions,n=t.width,i=t.height,r=this.options.padding,o=r/2,a=[{name:"top",getBoundingBox:function(e){var t=e.x,o=e.y;return[o-i-r,o-r,t-n/2,t+n/2+r/2]},onStrategySelected:function(){e.style.top=-i-r+"px",e.style.left=-n/2+"px",e.className="top"}},{name:"right",getBoundingBox:function(e){var t=e.x,o=e.y;return[o-i/2-r/2,o+i/2+r/2,t+r,t+r+n]},onStrategySelected:function(){e.style.top=-i/2+"px",e.style.left=r+"px",e.className="right"}},{name:"left",getBoundingBox:function(e){var t=e.x,o=e.y;return[o-i/2,o+i/2,t-n-r,t]},onStrategySelected:function(){e.style.top=-i/2+"px",e.style.left=-n-r+"px",e.className="left"}},{name:"bottom",getBoundingBox:function(e){var t=e.x,o=e.y;return[o+r,o+r+i,t-n/2,t+n/2]},onStrategySelected:function(){e.style.top=r+"px",e.style.left=-n/2+"px",e.className="bottom"}},{name:"bottomLeft",getBoundingBox:function(e){var t=e.x,a=e.y;return[a+o+r,a+o+i+r,t-n-o,t-o]},onStrategySelected:function(){e.style.top=r+"px",e.style.left=-n-r+"px",e.className="bottom-left"}},{name:"bottomRight",getBoundingBox:function(e){var t=e.x,a=e.y;return[a+o,a+o+i+r,t+o,t+o+n+r]},onStrategySelected:function(){e.style.top=r+"px",e.style.left=r+"px",e.className="bottom-right"}},{name:"topLeft",getBoundingBox:function(e){var t=e.x,r=e.y;return[r-i-o,r-o,t-n-o,t-o]},onStrategySelected:function(){e.style.top=-i-r+"px",e.style.left=-n-r+"px",e.className="top-left"}},{name:"topRight",getBoundingBox:function(e){var t=e.x,a=e.y;return[a-i-o,a-o,t+o+r,t+o+n+r]},onStrategySelected:function(){e.style.top=-i-r+"px",e.style.left=r+"px",e.className="top-right"}}],s=[],l=0,u=a;l<u.length;l++){var c=u[l];!0===this.options.enabledAnchorTypes[c.name]&&s.push(c)}return s}},{key:"colliderDidMount",value:function(){this.updateDimensions()}},{key:"setAction",value:function(e){f(d(n.prototype),"setAction",this).call(this,e),this.visible=e===gp.show}},{key:"updateDimensions",value:function(){var e=this.containerEl.getBoundingClientRect(),t=e.width,n=e.height;this.dimensions={width:t,height:n},Object.assign(this.containerEl,{width:t+"px",height:n+"px"})}},{key:"colliderDidNotFindAHome",value:function(){this.visible=!0}},{key:"colliderDidGoOffscreen",value:function(){}},{key:"colliderDidUpdateVisiblity",value:function(){this.containerEl.style.opacity=this.action===gp.show?"1":"0",this.updateClassName(this.className),!0===this.visible&&Object.assign(this.containerEl.style,this.style)}}]),n}(Mp),Fv=zv,Uv=function(){function e(t,n){b(this,e),(0,L.f)(this,Rv,void 0),(0,L.f)(this,Dv,void 0),(0,L.g)(this,Rv,t),(0,L.g)(this,Dv,n)}return x(e,[{key:"createTooltip",value:function(e,t){var n=this,i=(0,L.e)(this,Dv).mapObjects.get(e.map),r=(0,L.e)(this,Dv).convertTo3DMapPosition(e);if(e instanceof rv&&e.polygon){var o=(0,L.e)(this,Dv).getPositionPolygon(e.polygon);o&&r.setZ(o.z)}var a=new Fv(g(g({},t),{},{map:e.map,position:r}));return(0,L.e)(this,Dv).smartCollisionEngine.add(a.id,a),i.addPendingLowPriorityTask("createTextObject",(function(){i.tooltips.add(a),a.enable(),(0,L.e)(n,Dv).smartCollisionEngine.makeCollidersDirty(),(0,L.e)(n,Rv).tryRendering()})),(0,L.e)(this,Rv).tryRendering(),a}},{key:"removeTooltip",value:function(e){(0,L.e)(this,Dv).smartCollisionEngine.remove("string"==typeof e?e:e.id),(0,L.e)(this,Rv).tryRendering()}},{key:"removeAllTooltips",value:function(){var e=this;Array.from((0,L.e)(this,Dv).mapObjects.values()).forEach((function(t){t.tooltips.forEach((function(t){(0,L.e)(e,Dv).smartCollisionEngine.remove(t.id)}))})),(0,L.e)(this,Rv).tryRendering()}}]),e}();Rv=new WeakMap,Dv=new WeakMap;var jv=Uv;O();var Hv,Vv,Gv=function(){function e(t,n){b(this,e),(0,L.f)(this,Hv,void 0),(0,L.f)(this,Vv,void 0),(0,L.g)(this,Hv,t),(0,L.g)(this,Vv,n)}return x(e,[{key:"enableImageFlippingForAllLocations",value:function(e){(0,L.e)(this,Vv).imageFlippingEnabled=!0,e||(e={});for(var t=e.excludeTypes||[],n=(e.locations||(0,L.e)(this,Hv).venue.locations.slice()).filter((function(e){return-1===t.indexOf(e.type)})),i={},r=0,o=n.length;r<o;++r)for(var a=n[r].polygons,s=0,l=a.length;s<l;++s){var u=a[s];i[u.id]||(i[u.id]=!0,this.enableImageFlippingForPolygon({polygon:u}))}}},{key:"enableImageFlippingForPolygon",value:function(e){if(null!=e&&(null!=e.polygon||null!=e.polygonId)){var t=e.polygon.id||e.polygonId,n=e.polygon,i=(0,L.e)(this,Vv).mapObjects.get(e.map||n?n.map:(0,L.e)(this,Hv).currentMap.id),r=0,o=(0,L.e)(this,Hv).currentMap.perspectiveId;"number"!=typeof e.rotation||isNaN(e.rotation)?o&&n&&n.perspectives&&n.perspectives[o]&&n.perspectives[o].image&&n.perspectives[o].image.rotation&&!isNaN(n.perspectives[o].image.rotation.z)?r=n.perspectives[o].image.rotation.z*(Math.PI/180):e.polygon&&e.polygon.image&&e.polygon.image.rotation&&!isNaN(e.polygon.image.rotation.z)&&(r=e.polygon.image.rotation.z*(Math.PI/180)):r=e.rotation*(Math.PI/180),t&&((0,L.e)(this,Vv).imageFlippingCache[e.polygon.map]=(0,L.e)(this,Vv).imageFlippingCache[e.polygon.map]||[],(0,L.e)(this,Vv).imageFlippingCache[e.polygon.map].push([t,r]),i.mapClass.id===(0,L.e)(this,Hv).currentMap.id&&i.load().then((function(){i.enableImageFlipping(t,r)})))}}},{key:"disableImageFlippingForAllPolygons",value:function(){for(var e=Object.keys((0,L.e)(this,Vv).mapObjects),t=0,n=e.length;t<n;t++){var i=e[t];(0,L.e)(this,Vv).mapObjects.get(i).disableAllImageFlipping()}}}]),e}();Hv=new WeakMap,Vv=new WeakMap;var Wv=Gv;O(),O(),O();var Xv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAkklEQVRoge3awQ3AIAxD0VAMYf+F0yUixbL8JshXuLSwIqJCwDc9QBeZEOy9p2doAQDTM7TQ2cg5Z3qGFjpHS2YjDiGDe+/0DC0cwkYpJKdnaIFMkY1kymzEIVQcwsYhbPDem56hhc5GHELGIWwcwsYhbJS+2R1CxSFsdH5iO4SMr97Y6FxPqxytVVV+HcTEIWx+9mcIqHSOm9QAAAAASUVORK5CYII=";O(),O();var Yv=function(){function e(t){b(this,e),this.active=!1,this.positions=[],this.positionIndex=0,this.timerList=[],this.timeElapsed=0,this.startTime=void 0,this.startPos=0,this.endPos=0,this.smoothingType=void 0,this.isActive=this.isActive.bind(this),this.setCallbacks=this.setCallbacks.bind(this),this.watchPosition=this.watchPosition.bind(this),this.sendPositionResponse=this.sendPositionResponse.bind(this),this.start=this.start.bind(this),this.pause=this.pause.bind(this),this.speed=t.speed||10,window.positions&&this.setPositions(window.positions)}return x(e,[{key:"isActive",value:function(){return this.active}},{key:"setPositions",value:function(e){this.reset(),this.positions=e,this.endPos=e.length-1}},{key:"setCallbacks",value:function(e,t,n){this.successCallback=e,this.errorCallback=t,this.options=n}},{key:"clearWatch",value:function(){this.reset()}},{key:"watchPosition",value:function(e,t,n){this.setCallbacks(e,t,n),this.start()}},{key:"sendPositionResponse",value:function(e){switch(this.timeElapsed=Date.now()-this.startTime,e.type){case"ERROR":this.errorCallback({code:e.code,message:e.message,timestamp:Date.now()});break;case"ANNOTATION":console.log("Annotation Update: ".concat(e.annotation));break;default:this.successCallback({coords:e.coords,timestamp:e.timestamp,positionIndex:this.positionIndex})}this.positionIndex===this.endPos?this.reset():this.positionIndex+=1}},{key:"start",value:function(){var e=this,t=0;this.positions[this.positionIndex-1]?t=this.positions[this.positionIndex-1].timestamp:this.positions[0].timestamp>1e6&&(t=this.positions[0].timestamp),this.startTime=Date.now(),this.positions.slice(this.positionIndex,this.endPos+1).forEach((function(n){var i=n.timestamp;e.timerList.push(setTimeout((function(){return e.sendPositionResponse(n)}),(i-t)/e.speed))})),this.active=!0}},{key:"pause",value:function(){this.timerList.forEach((function(e){clearTimeout(e)})),this.timerList=[],this.active=!1}},{key:"reset",value:function(){this.pause(),this.positionIndex=this.startPos}}]),e}(),Zv=Yv;O(),O();var Jv,Qv=function(){function e(){b(this,e),(0,L.d)(this,"_subscribers",{})}return x(e,[{key:"publish",value:function(e,t){!this._subscribers||!this._subscribers[e]||this._subscribers[e].forEach((function(e){"function"==typeof e&&e(t)}))}},{key:"on",value:function(e,t){this._subscribers||(this._subscribers={}),this._subscribers[e]=this._subscribers[e]||[],this._subscribers[e].push(t)}},{key:"off",value:function(e,t){if(this._subscribers&&null!=this._subscribers[e]){var n=this._subscribers[e].indexOf(t);-1!==n&&this._subscribers[e].splice(n,1)}}},{key:"destroy",value:function(){this._subscribers={}}}]),e}();function Kv(e){var t=new Qv;Object.assign(t,e);var n=function(n){if(null!=n){var i=e[n];if("function"==typeof i)return"continue";t["_".concat(n)]=i,Object.defineProperty(t,n,{get:function(){return t["_".concat(n)]},set:function(e){var i=t["_".concat(n)];t["_".concat(n)]=e,t.publish("".concat(n,"Changed"),{oldValue:i,newValue:t[n]})}})}};for(var i in e)n(i);return t}Object.assign(function(){}.prototype,{publish:function(e,t){!this._subscribers||!this._subscribers[e]||this._subscribers[e].forEach((function(e){"function"==typeof e&&e(t)}))},on:function(e,t){this._subscribers||(this._subscribers={}),this._subscribers[e]=this._subscribers[e]||[],this._subscribers[e].push(t)},off:function(e,t){if(this._subscribers&&null!=this._subscribers[e]){var n=this._subscribers[e].indexOf(t);-1!==n&&this._subscribers[e].splice(n,1)}},destroy:function(){this._subscribers={}}}),function(e){e[e.gotPosition=0]="gotPosition",e[e.gotPositionWithFloor=1]="gotPositionWithFloor",e[e.gotError=2]="gotError",e[e.timedOut=3]="timedOut",e[e.disabledBlueDot=4]="disabledBlueDot",e[e.enabledBlueDot=5]="enabledBlueDot"}(Jv||(Jv={}));var $v,eg=(S={},(0,m.Z)(S,Kd.NOT_LISTENING,{actions:{5:Kd.LISTENING}}),(0,m.Z)(S,Kd.LISTENING,{actions:{0:Kd.HAS_POSITION,1:Kd.HAS_INDOOR_POSITION,3:Kd.LOCATION_UNCERTAIN,4:Kd.NOT_LISTENING},markerState:$d.HIDDEN}),(0,m.Z)(S,Kd.HAS_POSITION,{actions:{1:Kd.HAS_INDOOR_POSITION,3:Kd.LOCATION_UNCERTAIN,2:Kd.LISTENING,4:Kd.NOT_LISTENING},markerState:$d.GHOST}),(0,m.Z)(S,Kd.HAS_INDOOR_POSITION,{actions:{0:Kd.HAS_POSITION,3:Kd.LOCATION_UNCERTAIN,2:Kd.LISTENING,4:Kd.NOT_LISTENING},markerState:$d.NORMAL}),(0,m.Z)(S,Kd.LOCATION_UNCERTAIN,{actions:{0:Kd.HAS_POSITION,1:Kd.HAS_INDOOR_POSITION,3:Kd.LOCATION_UNCERTAIN,2:Kd.LISTENING,4:Kd.NOT_LISTENING},markerState:$d.UNCERTAIN}),S);!function(e){e[e.stateChanged=0]="stateChanged",e[e.markerStateChanged=1]="markerStateChanged"}($v||($v={}));var tg=function(){var e=Kv({state:Kd.NOT_LISTENING,markerState:$d.HIDDEN,transition:function(t){if(null!=eg[e.state]){var n=eg[e.state].actions[t];null!=n&&e.state!==n&&(e.state=n,e.markerState=eg[e.state].markerState)}},reset:function(){e.state=Kd.NOT_LISTENING}});return e};O();var ng=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=!1;return(n?[n]:t).forEach((function(t){Math.abs(e.x)<t.width*i&&Math.abs(e.y)<t.height*i&&(r=!0)})),!r};O();var ig=(0,L.c)(Oe());function rg(e){return null===e||"number"==typeof e}O();var og=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;b(this,e),this.nextLevel=void 0,this.inertia=t,this.levelConfirmations=0}return x(e,[{key:"_resetConfirmations",value:function(){this.levelConfirmations=0,this.nextLevel=void 0}},{key:"_resetFilter",value:function(){this._resetConfirmations(),this.previousLevel=void 0}},{key:"filter",value:function(e){var t=null,n=void 0===e?null:e;if(!rg(n))throw new TypeError("The argument given to filter() must be null, undefined, or a number");return null===n?this._resetFilter():(rg(this.previousLevel)&&n!==this.previousLevel?rg(this.nextLevel)&&n===this.nextLevel?this.levelConfirmations>=this.inertia?(this._resetConfirmations(),t=n):(this.levelConfirmations++,t=this.previousLevel):(this.levelConfirmations++,this.nextLevel=n,t=this.previousLevel):t=n,this.previousLevel=t),t}}]),e}(),ag=og,sg="kalman",lg=function(){function e(t){b(this,e),this.smooth=this.smooth.bind(this),this.smoothingType=window.mappedin&&window.mappedin.smoothingType||sg,this.lastLocation=null,this.levelFilter=t}return x(e,[{key:"formatLocation",value:function(e){return{type:"SUCCESS",timestamp:e.timestamp,coords:{latitude:e.latitude,longitude:e.longitude,accuracy:e.accuracy,floorLevel:this.levelFilter.filter(e.floorLevel)}}}},{key:"kalman",value:function(e,t){if(t){var n=1.4*(e.timestamp-t.timestamp)/1e3;this.latitudeKF.setProcessNoise(n),this.longitudeKF.setProcessNoise(n),this.latitudeKF.setMeasurementNoise(e.accuracy),this.longitudeKF.setMeasurementNoise(e.accuracy)}else this.latitudeKF=new ig.default({R:1,Q:e.accuracy}),this.longitudeKF=new ig.default({R:1,Q:e.accuracy});return g(g({},e),{},{latitude:this.latitudeKF.filter(e.latitude),longitude:this.longitudeKF.filter(e.longitude)})}},{key:"setSmoothingType",value:function(e){this.smoothingType=e}},{key:"smooth",value:function(e){var t;return this.smoothingType===sg?(t=this.kalman(function(e){return{floorLevel:e.coords.floorLevel,timestamp:e.timestamp,latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,speed:-1,type:e.type}}(e),this.lastLocation),this.lastLocation=t,this.formatLocation(t)):e}},{key:"reset",value:function(){this.lastLocation=null,this.levelFilter=new ag(this.levelFilter.inertia)}}]),e}(),ug=lg;O();var cg,hg=function(e){return e*Math.PI/180},dg=function(){var e,t=Kv({bearingExpired:!1,previousLat:null,previousLong:null,calculateHeading:function(e,n,i){t.previousLat||(t.previousLat=e),t.previousLong||(t.previousLong=n);var r=Math.pow(Math.pow(t.previousLat-e,2)+Math.pow(t.previousLong-n,2),.5),o=i&&i.coords.accuracy<20,a=parseFloat(r.toFixed(5))>0;if(o&&a){t.resetBearingExpirationTimer();var s=t.getBearing([t.previousLat,t.previousLong],[e,n]);return t.previousLat=e,t.previousLong=n,s}return!1},getBearing:function(e,t){var n=r(e,2),i=n[0],o=n[1],a=r(t,2),s=a[0],l=a[1],u=hg(i),c=hg(o),h=hg(s),d=hg(l),p=Math.sin(d-c)*Math.cos(h),f=Math.cos(u)*Math.sin(h)-Math.sin(u)*Math.cos(h)*Math.cos(d-c),m=Math.atan2(p,f);return m=function(e){return 180*e/Math.PI}(m),(m+360)%360},resetBearingExpirationTimer:function(){null!==e&&t.clearBearingExpirationTimer(),e=setTimeout((function(){t.bearingExpired=!0,t.clearBearingExpirationTimer()}),5e3)},clearBearingExpirationTimer:function(){null!==e&&(clearTimeout(e),e=null)}});return t},pg=2254591;!function(e){e[e.POSITION_UPDATE=0]="POSITION_UPDATE",e[e.ERROR=1]="ERROR"}(cg||(cg={}));var fg,mg=function(e){w(n,e);var t=M(n);function n(){var e;return b(this,n),e=t.apply(this,arguments),(0,L.d)(c(e),"update",(function(t){e.publish(0,t)})),(0,L.d)(c(e),"throwError",(function(t){e.publish(1,t)})),e}return x(n)}(Qv),vg={showBearing:!1,allowImplicitFloorLevel:!1,smoothing:!0,positionUpdater:void 0,baseColor:pg,useRotationMode:!1},gg=function(e){w(n,e);var t=M(n);function n(){var e;return b(this,n),e=t.apply(this,arguments),(0,L.f)(c(e),fg,-1),e}return x(n,[{key:"start",value:function(e){(0,L.g)(this,fg,globalThis.navigator.geolocation.watchPosition(this.update,this.throwError,e))}},{key:"stop",value:function(){globalThis.navigator.geolocation.clearWatch((0,L.e)(this,fg))}}]),n}(mg);fg=new WeakMap;var yg=function(e){var t,n,i,r=e.data,o=e.mapView,a=e.core,s=r.maps,l=r.venue,u={enableHighAccuracy:!0},c=tg(),h=s.length>1,d=!1,p=dg();p.on("bearingExpiredChanged",(function(e){e.newValue&&(x.bearing=null,f(x.userPosition,null))}));var f=function(e,t){if(x.userPosition=e,null!=t){x.userMap=t;var n=Mm(r.nodes.filter((function(e){return e.map===t.id&&e.paths.length})),(x.userMap||o.currentMap).createCoordinate(e.coords.latitude,e.coords.longitude));x.nearestNode=n}x.userData={state:c.state,position:x.userPosition,map:x.userMap,bearing:x.bearing,nearestNode:x.nearestNode,error:x.error},o.BlueDot.publish(ip.POSITION_UPDATE,{nearestNode:x.nearestNode,bearing:x.bearing,map:x.userMap,position:x.userPosition})},m=function(e){(function(e,t,n){v(t,n),x.error=e,x.stateMachine.transition(Jv.gotError),f(null,null)})("position-error",e.code,e.message),console.warn("ERROR(".concat(e.code,"): ").concat(e.message))};function v(e,t){x.error=null,x.state={reason:e,message:t,markerVisibility:c.markerState,name:c.state},o.BlueDot.publish(ip.STATE_CHANGE,x.state)}var y=function(e){var r,o=e.coords.floorLevel;void 0!==window.floorLevel&&(o=window.floorLevel);var u={timestamp:e.timestamp,type:e.type,coords:{accuracy:e.coords.accuracy,latitude:e.coords.latitude,longitude:e.coords.longitude,floorLevel:o}};null!=o&&(d=!0),window.mappedin&&(Array.isArray(window.mappedin.bluedotCaptureData)?window.mappedin.bluedotCaptureData.push(u):window.mappedin.bluedotCaptureData=[u]),i&&clearTimeout(i),i=setTimeout((function(){c.transition(Jv.timedOut),v(),x.positionSmoothing.reset(),f(x.userPosition,null)}),x.locationUncertainTimeoutPeriod);var m=a.getPositionLatLon(u.coords.latitude,u.coords.longitude),y=ng(m,s);if(null==u.coords.latitude||null==u.coords.longitude)return x.positionSmoothing.reset(),void v(Qd.NO_POSITIONS_PROVIDED);if(y)return x.positionSmoothing.reset(),x.stateMachine.transition(Jv.gotError),v(Qd.OUTSIDE_MAP),void(x.userData={state:c.state,position:null,map:null,bearing:null,nearestNode:null,error:null});var b=x.positionSmoothing.smooth(u);o=b.coords.floorLevel;var _=b.coords.latitude,w=b.coords.longitude;if(null==(r=x.enableBlueDotOptions)?void 0:r.showBearing){var M=p.calculateHeading(_,w,b);!1!==M&&(x.bearing=M)}var E=null;if("hudson-yards"===l.slug){var q=x.userMap;if(null==o&&ng(m,s,q,.55)&&(E=s.filter((function(e){return"5b5f5becadd5444692000001"===e.id}))[0]),null!=o){var T=s.filter((function(e){return e.elevation===o}));T.length>1&&(T=T.filter((function(e){return"5b5f20e3f3ea231068000000"===e.group}))),E=T[0]}}if(!E&&null!=o){var S=s.filter((function(e){return e.elevation===o}));1===S.length&&(E=S[0])}if(x.forceBlueDot&&x.userMap&&!d?E=x.userMap:h||(E=s[0]),E||x.forceBlueDot&&c.state!==Kd.HAS_INDOOR_POSITION)c.transition(Jv.gotPositionWithFloor),null!=t&&(clearTimeout(t),t=null);else{if(c.state===Kd.HAS_INDOOR_POSITION)return n=g({},b),void(null==t&&(t=setTimeout((function(){c.transition(Jv.gotPosition),f(n,E),t=null}),x.fallbackToGPSTimeoutPeriod)));c.transition(Jv.gotPosition)}v(),f(b,E)},x=Kv({bearing:null,state:{reason:void 0,message:void 0,markerVisibility:c.markerState,name:c.state},positionUpdater:null,positionSmoothing:new ug(new ag),locationUncertainTimeoutPeriod:3e4,fallbackToGPSTimeoutPeriod:1e4,userMap:s.find((function(e){return e.id===l.defaultMap})),userPosition:null,nearestNode:null,forceBlueDot:!1,error:null,userData:null,stateMachine:c,enableBlueDotOptions:vg,enableBlueDot:function(e){var t,n,i,r,o,a;x.enableBlueDotOptions=g(g({},vg),e),x.enableBlueDotOptions&&x.enableBlueDotOptions.allowImplicitFloorLevel&&(x.forceBlueDot=x.enableBlueDotOptions.allowImplicitFloorLevel),!1===(null==(t=x.enableBlueDotOptions)?void 0:t.smoothing)&&(x.positionSmoothing={reset:function(){},smooth:function(e){return e}}),null!=(null==(n=x.enableBlueDotOptions)?void 0:n.positionUpdater)?(x.positionUpdater=x.enableBlueDotOptions.positionUpdater,"function"==typeof(null==(i=null==x?void 0:x.positionUpdater)?void 0:i.start)&&(null==(r=null==x?void 0:x.positionUpdater)||r.start())):(x.positionUpdater=new gg,null==(a=null==(o=x.positionUpdater)?void 0:o.start)||a.call(o,u)),x.positionUpdater.on(0,y),x.positionUpdater.on(1,m),c.transition(Jv.enabledBlueDot)},disableBlueDot:function(){var e,t,n,i;"function"==typeof(null==(e=null==x?void 0:x.positionUpdater)?void 0:e.stop)&&(null==(t=null==x?void 0:x.positionUpdater)||t.stop()),null==(n=x.positionUpdater)||n.off(0,y),null==(i=x.positionUpdater)||i.off(1,m),c.transition(Jv.disabledBlueDot)}});return x};yg.FakeGeolocation=Zv;var xg=yg,bg="ghost",_g="grey",wg="blue",Mg=function(e,t){return new yi({color:e,transparent:!0,depthTest:!1,opacity:t})},Eg=function(e){var t=new rc,n=0;for(t.moveTo(e,0);n<=2*Math.PI;)t.lineTo(Math.cos(n)*e,Math.sin(n)*e),n+=Math.PI/16;return t},qg=function(e){var t=e.baseColor,n=void 0===t?pg:t;return{outer:{blue:Mg(16777215,1),ghost:Mg(16777215,.5)},inner:{blue:Mg(n,1),grey:Mg(14540253,1),ghost:Mg(n,.5)},aura:{inner:Mg(n,.2),outer:Mg(n,.3)},bearing:{blue:Mg(n,.7),ghost:Mg(n,.4)}}},Tg=function(e,t){var n=Eg(e);if(t&&t<e){var i=Eg(t);n.holes=[i]}return new Al(n,{depth:0,bevelEnabled:!1,steps:2})},Sg=function(e,t,n){var i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))/n;return i>1?i=1:i<0&&(i=0),new Nt(0,i)},Pg=function(e){return{generateTopUV:function(t,n,i,r,o){var a=n[3*i],s=n[3*i+1],l=n[3*r],u=n[3*r+1],c=n[3*o],h=n[3*o+1];return[Sg(a,s,e),Sg(l,u,e),Sg(c,h,e)]},generateSideWallUV:function(){return[new Nt(0,1),new Nt(0,1),new Nt(0,1),new Nt(0,1)]}}},Ag=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Math.abs(e)>=Math.PI)throw new Error("Sector angle too wide!");var i=n/Math.tan(e/2),r=n/Math.sin(e/2),o=r+t,a=10,s=new rc;s.moveTo(r*Math.cos(e/2)-i,r*Math.sin(e/2));for(var l=0;l<a;l++)s.lineTo(o*Math.cos(e/2-e/a*l)-i,o*Math.sin(e/2-e/a*l));for(var u=0;u<a;u++)s.lineTo(n*Math.cos(Math.PI/-2+Math.PI/a*u),n*Math.sin(Math.PI/-2+Math.PI/a*u));return new Al(s,{depth:1,bevelEnabled:!1,UVGenerator:Pg(t)})},Cg=function(e,t,n){var i=Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2),r=0;i&&(r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i),r>1&&(r=1),r<0&&(r=0);var o=t.x+r*(n.x-t.x),a=t.y+r*(n.y-t.y);return{proportion:r,distance:Math.sqrt(Math.pow(e.x-o,2)+Math.pow(e.y-a,2))}},Lg=function(e,t){return null!=e?Og(-e)-t+Math.PI/2:null},Og=function(e){return e*Math.PI/180},Ig=(0,L.c)(B()),kg={duration:2e3,easing:Ig.default.Easing.Cubic.Out};function Ng(e){return"number"==typeof e&&!isNaN(e)&&e>=0}var Rg=function(e){w(n,e);var t=M(n);function n(e){var i,r=e.mapManager,o=e.mapView,a=e.core,s=e.minRadius,l=void 0===s?8:s,u=e.maxRadius,c=void 0===u?65:u,d=e.radiusUpdateInterval,p=void 0===d?3:d,f=e.radiusTweenOptions,m=void 0===f?kg:f;if(b(this,n),(i=t.call(this)).mapManager=r,i.mapView=o,i.core=a,!Ng(l))throw new Error("Expecting minRadius parameter to be a valid number >= 0. Provided: ".concat(l));if(i.minRadius=l,!Ng(c))throw new Error("Expecting maxRadius parameter to be a valid number >= 0. Provided: ".concat(c));if(c<i.minRadius)throw new Error("Expecting maxRadius parameter to be >= minRadius parameter. Provided: ".concat(c,"; minRadius = ").concat(i.minRadius));if(i.maxRadius=c,!Ng(p))throw new Error("Expecting radiusUpdateInterval parameter to be a valid number >= 0. Provided: ".concat(p));return i.radiusUpdateInterval=p,i.radiusTweenOptions=m,i.state=null,i.prevRadius=null,i.radiusTween=null,i.prevBearing=null,i.bearingTween=null,i.currentX=null,h(i)}return x(n,[{key:"computeNewRadius",value:function(e){if(!Ng(e)||e<this.minRadius)return 0;if(e>=this.maxRadius)return this.maxRadius;if(0===this.radiusUpdateInterval)return e;var t=e-this.minRadius;return t-t%this.radiusUpdateInterval+this.minRadius}},{key:"updateBlueDotSize",value:function(){var e=this;!this.blueDots||this.blueDots.forEach((function(t){var n=e.core.controls.getZoomScaledMin(),i=3*n,r=5*n,o=function(e,t,n){return e<t?e:e<n?t:e*t/n}(e.currentX,i,r)/2e3;t.dotObject.scale.set(o,o,o),t.bearing&&t.bearing.scale.set(o,o,o)}))}},{key:"setBlueDotSizeFromZoom",value:function(e){this.currentX=e,this.updateBlueDotSize()}},{key:"update",value:function(e){var t=this,n=e.mode||this.state.mode,i=e.mapId||e.map&&e.map.id||this.mapManager.currentMap.id;null==e.bearing&&(this.prevBearing=null),this.positionTween&&this.positionTween.stop(),this.state&&(n!==this.state.mode||i!==this.state.targetMap)&&this.cleanup();var r=this.computeNewRadius(e.radius);if(!this.blueDots){var o=[];this.mapManager.mapObjects.forEach((function(r){var a=r.getPositionLatLon(e.coordinates.latitude,e.coordinates.longitude),s=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(arguments.length>3?arguments[3]:void 0).baseColor,a=void 0===o?pg:o,s=new bn,l=new bn,u=qg({baseColor:new hi(a)});u.outer.grey=u.outer.blue,i>=0&&((t=new rr(new Gl(1,1,10,32),u.aura.inner)).position.set(0,0,0),t.rotation.set(Math.PI/2,0,0),t.scale.set(i,1,i),l.add(t));var c=Ag(Math.PI/6,120,30),h=u.bearing[e];h&&(new Nu).load(Xv,(function(e){h.alphaMap=e,h.needsUpdate=!0})),(n=new rr(c,h)).rotation.set(0,0,r),l.add(n);var d=Tg(30,22.5),p=Tg(22.5),f=new rr(d,u.outer[e]),m=new rr(p,u.inner[e]);return s.add(f),s.add(m),l.add(s),[l,s,f,m,n,t].forEach((function(e){e.renderOrder=999,e.layers.set(_f.ALWAYS_ON_TOP)})),{outerObject:l,radiusObject:t,dotObject:s,bearingObject:n}}(r.id!==i&&n===wg?bg:n,0,Lg(e.bearing,t.mapManager.currentMap.getNorth()),{baseColor:e.baseColor});t.prevRadius=0;var l=t.mapView.createThreeJSMarker({object:s.outerObject,mapOrMapId:r,position:a});o.push({handle:l,radius:s.radiusObject,dotObject:s.dotObject,bearing:s.bearingObject})})),this.blueDots=o,this.currentX&&this.updateBlueDotSize()}this.currentPositionLatLon?(this.positionTween=new Ig.default.Tween(this.currentPositionLatLon).to({lat:e.coordinates.latitude,lon:e.coordinates.longitude},2e3).easing(Ig.default.Easing.Cubic.Out).onUpdate((function(e){t.currentPositionLatLon=e,t.blueDots.forEach((function(n){var i=n.handle._mapId,r=t.mapManager.mapObjects.get(i).getPositionLatLon(e.lat,e.lon);n.handle.object.position.set(r.x,r.y,0)})),t.mapView.tryRendering(gf.ALWAYS_ON_TOP)})),this.positionTween.start()):(this.currentPositionLatLon={lat:e.coordinates.latitude,lon:e.coordinates.longitude},this.blueDots.forEach((function(n){var i=n.handle._mapId,r=t.mapManager.mapObjects.get(i).getPositionLatLon(e.coordinates.latitude,e.coordinates.longitude);n.handle.object.position.set(r.x,r.y,0)}))),Math.abs(r-this.prevRadius)>=Number.EPSILON&&(null!=this.radiusTween&&this.radiusTween.stop(),this.radiusTween=new Ig.default.Tween({value:this.prevRadius}).to({value:r},this.radiusTweenOptions.duration).easing(this.radiusTweenOptions.easing).onUpdate((function(e){var n=e.value;t.prevRadius=n,null!=t.blueDots&&t.blueDots.forEach((function(e){if(e.radius){var i=e.handle._mapId,r=t.mapManager.mapObjects.get(i),o=n*r.getMapScale();e.radius.scale.set(o,1,o)}})),t.mapView.tryRendering(gf.ALWAYS_ON_TOP)})).start());var a=e.bearing;null!=e.bearing?(Math.abs(a-this.prevBearing)>=Number.EPSILON||null==this.prevBearing)&&(this.bearingTween=new Ig.default.Tween({value:this.prevBearing||0}).to({value:a},1e3).easing(Ig.default.Easing.Cubic.Out).onUpdate((function(e){var n=e.value;t.prevBearing=n,null!=t.blueDots&&t.blueDots.forEach((function(e){e.bearing&&(e.bearing.visible=!0,e.bearing.rotation.set(0,0,Lg(n,t.mapManager.currentMap.getNorth())))})),t.mapView.tryRendering(gf.ALWAYS_ON_TOP)})).start()):null!=this.blueDots&&this.blueDots.forEach((function(e){e.bearing&&(e.bearing.visible=!1)})),this.state={mode:n,targetMap:i},this.mapView.tryRendering(gf.ALWAYS_ON_TOP)}},{key:"getBlueDotForMap",value:function(e){if(Array.isArray(this.blueDots)){var t=("string"==typeof e&&e.length>0?e:"object"==typeof e?e.id:void 0)||this.mapView.currentMap.id,n=this.blueDots.filter((function(e){return e.handle._mapId===t}));if(n.length>0){var i=new Xt,r=new Xt;return n[0].dotObject.updateMatrixWorld(),n[0].dotObject.getWorldPosition(i),n[0].dotObject.getWorldScale(r),r.divideScalar(2),r.setZ(0),i.sub(r),n[0].dotObject}}}},{key:"cleanup",value:function(){var e=this;this.blueDots&&(this.blueDots.forEach((function(t){t.handle._object.children.forEach((function(e){e.geometry?e.geometry.dispose():e.children.forEach((function(e){e.geometry.dispose()}))})),e.mapView.removeThreeJSMarker(t.handle)})),delete this.blueDots),this.state=null,null!=this.positionTween&&this.positionTween.stop(),null!=this.radiusTween&&this.radiusTween.stop()}}]),n}(Qv),Dg=Rg;O();var Bg,zg=(0,L.c)(Ie()),Fg=!1;!function(e){e[e.EXPIRED=0]="EXPIRED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETED=2]="COMPLETED"}(Bg||(Bg={}));var Ug,jg,Hg,Vg,Gg,Wg,Xg,Yg=function(e){var t=e.mapView,n=e.mapManager,i=e.core,r=e.blueDotManager,o=e.controller,a=e.analytics,s=o.stateMachine,l=Kv({isFollowing:!1,blueDotTooltips:[],zoomCondition:0,setBlueDotPosition:function(){if(r&&o.userPosition&&o.userMap){var e=s.state===Kd.HAS_POSITION||s.state===Kd.HAS_INDOOR_POSITION;r.update({coordinates:o.userPosition.coords,bearing:o.bearing,radius:e&&o.userPosition.coords.accuracy||0,mapId:o.userMap.id})}},showBlueDotBearing:function(){if(r&&o.userPosition&&o.userMap){var e=s.state===Kd.HAS_POSITION||s.state===Kd.HAS_INDOOR_POSITION;r.update({coordinates:o.userPosition.coords,bearing:o.bearing,radius:e&&o.userPosition.coords.accuracy||0,mapId:o.userMap.id})}},addGhostMarkers:function(){r&&o.userPosition&&o.userMap&&r.update({mode:bg,coordinates:o.userPosition.coords,bearing:o.bearing,radius:o.userPosition.coords.accuracy,mapId:o.userMap.id})},addLocationUncertainMarkersAndTooltips:function(){r&&o.userPosition&&o.userMap&&r.update({mode:_g,coordinates:o.userPosition.coords,radius:0,mapId:o.userMap.id})},addBlueDotMarker:function(){r&&o.userPosition&&o.userMap&&r.update({mode:wg,coordinates:o.userPosition.coords,bearing:o.bearing,radius:o.userPosition.coords.accuracy,mapId:o.userMap.id,baseColor:o.enableBlueDotOptions.baseColor})},removeTooltips:function(){l.blueDotTooltips.forEach(t.removeTooltip),l.blueDotTooltips=[]},removeBlueDot:function(){r.cleanup()},centerBlueDot:function(){var e,r,a,s;if(o.userPosition){var u=o.userPosition.coords,c=u.latitude,h=u.longitude;o.userMap!==t.currentMap&&null!=o.userMap&&t.setMap(o.userMap);var d=i.getPositionLatLon(c,h),p=null!==t.currentPath&&o.enableBlueDotOptions.useRotationMode,f=i.controls.zoomFactor||1,m=(null==(r=null==(e=t.options.loadOptions)?void 0:e.zoomOverrides)?void 0:r.blueDotFollowingZoomFactor)||2.5,v=f*m;if(0===l.zoomCondition&&null!=(null==(s=null==(a=t.options.loadOptions)?void 0:a.zoomOverrides)?void 0:s.blueDotFollowingZoomFactor))l.zoomCondition=1,Fg=!0,i.focusOn({points:[d],changeZoom:!0,duration:500,focusZoomFactor:v,callback:function(){l.zoomCondition=2}}),Fg=!1;else if(1!==this.zoomCondition&&p){var y=o.userMap;if(null==y)return;var x=t.currentPath,b=t.Camera.rotation,_={x:d.x+y.width/2,y:-d.y+y.height/2},w=null==x?void 0:x.filter((function(e){return e.map===y.id}));if(null==w?void 0:w.length){var M=n.mapObjects.get(y.id).getMapScale(),E=(0,zg.default)(w,M),q=function(e,t){for(var n,i,r,o=Number.MAX_SAFE_INTEGER,a=0;a<e.length-1;a++){var s=e[a],l=e[a+1],u=Cg(t,s,l);u.distance<=o&&(o=u.distance,i=u.proportion,r=a,n=u.proportion>.5?l:s)}return{nearestNode:n,proportion:i,index:r}}(E,_);b=function(e,t,n){for(var i=[],r=[],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1],l=s.x-a.x,u=s.y-a.y,c=Math.atan2(l,u);i.push(c);var h=Math.sqrt(Math.pow(l,2)+Math.pow(u,2));r.push(h)}for(var d,p=[],f=0;f<i.length;f++){var m=i[f],v=r[f];null==d||Math.abs(d-m)>.2?(d=m,p.push({angle:m,distance:v,nodes:[e[f]]})):(p[p.length-1].distance+=v,p[p.length-1].nodes.push(e[f]))}p[p.length-1].nodes.push(e[e.length-1]);for(var g=n||100;!p.filter((function(e){return e.distance>=g})).length;)g/=2;for(var y=p.find((function(e){return e.nodes.indexOf(t)>-1})),x=p.indexOf(y);x>0&&p[x].distance<g;)x-=1;return p[x].angle}(E,(null==q?void 0:q.proportion)&&q.proportion>.5?E[q.index||1]:E[q.index||0])+Math.PI}var T=i.canvasHeight>i.canvasWidth&&i.canvasHeight>600&&i.canvasWidth>500,S=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.8,o=n*(i?.05:0),a=null!=t?Math.cos(t-Math.PI/2)*o:0,s=null!=t?Math.sin(t-Math.PI/2)*o:0;return{position:{x:e.x-a,y:e.y-s},rotation:t||void 0,zoom:n,tilt:r}}(d,b,m*i.controls.getZoomScaledMin(),T);i.controls.animateCamera(g(g({},S),{},{duration:900})),i.smartCollisionEngine.makeCollidersDirtyThrottled(1e4)}else 1!==this.zoomCondition&&(Fg=!0,t.Camera.focusOn({targets:{points:[d]},cameraOptions:{changeZoom:!1},animationOptions:{duration:1e3}}),Fg=!1)}},endFollowing:function(){l.isFollowing=!1,l.zoomCondition=0}}),u=null,c=!1;return i.on("user-pan-begin",(function(){!u&&c&&(u=setTimeout((function(){l.endFollowing(),clearTimeout(u),u=null}),60))})),i.on("focuson-begin",(function(){Fg||l.endFollowing()})),i.on("user-hands-on",(function(){c=!0})),i.on("user-hands-off",(function(){u&&(clearTimeout(u),u=null,c=!1)})),i.on("user-zoom-begin",(function(){l.endFollowing()})),i.on("user-tilt-begin",(function(){l.endFollowing()})),i.on("user-rotate-begin",(function(){l.endFollowing()})),o.on("userDataChanged",(function(e){var t=e.newValue,n=t.position;switch(t.state){case Kd.HAS_POSITION:l.removeTooltips(),l.addGhostMarkers(),a.trackBlueDotEvent(ap.BLUEDOT_EVENT.FOUND_POSITION),l.setBlueDotPosition(),l.showBlueDotBearing();break;case Kd.HAS_INDOOR_POSITION:l.removeTooltips(),l.addBlueDotMarker(),a.trackBlueDotEvent(ap.BLUEDOT_EVENT.FOUND_FLOOR),l.setBlueDotPosition(),l.showBlueDotBearing();break;case Kd.LOCATION_UNCERTAIN:l.removeTooltips(),l.addLocationUncertainMarkersAndTooltips(),l.setBlueDotPosition(),l.showBlueDotBearing();break;default:l.removeTooltips(),l.removeBlueDot()}var i=!0,r=!1;e.oldValue&&(i=e.oldValue.position&&e.newValue.position&&(n.coords.latitude!==e.oldValue.position.coords.latitude||n.coords.longitude!==e.oldValue.position.coords.longitude),r=e.oldValue.map!==e.newValue.map),l.isFollowing&&(i||r)&&l.centerBlueDot()})),l},Zg=function(e){w(n,e);var t=M(n);function n(e,i,r){var o;b(this,n),o=t.call(this),(0,L.f)(c(o),Wg),(0,L.f)(c(o),Ug,void 0),(0,L.f)(c(o),jg,void 0),(0,L.f)(c(o),Hg,void 0),(0,L.f)(c(o),Vg,void 0),(0,L.f)(c(o),Gg,void 0),(0,L.g)(c(o),Ug,e),(0,L.g)(c(o),jg,i),(0,L.g)(c(o),Gg,function(e,t){var n,i=e.venue.defaultMap;if(t&&t.firstMap&&(i=Nd(t.firstMap)),i)for(var r=0,o=e.maps.length;r<o;++r)if(e.maps[r].id===i){n=e.maps[r].id;break}if(!n){var a,s=e.maps[0],l=(0,C.Z)(e.maps.slice(1));try{for(l.s();!(a=l.n()).done;){var u=a.value;s=Math.abs(u.elevation)===Math.abs(s.elevation)?u.elevation>s.elevation?u:s:Math.abs(u.elevation)<Math.abs(s.elevation)?u:s}}catch(c){l.e(c)}finally{l.f()}n=s}return n}((0,L.e)(c(o),Ug).venue,(0,L.e)(c(o),Ug).options)),(0,L.g)(c(o),Vg,new Dg({mapManager:(0,L.e)(c(o),jg).mapManager,mapView:(0,L.e)(c(o),Ug),core:(0,L.e)(c(o),jg)})),r.setBlueDotManager((0,L.e)(c(o),Vg)),(0,L.g)(c(o),Hg,xg({data:(0,L.e)(c(o),Ug).venue,mapView:(0,L.e)(c(o),Ug),core:(0,L.e)(c(o),jg),manager:(0,L.e)(c(o),Vg)}));var a=Yg({mapView:(0,L.e)(c(o),Ug),core:(0,L.e)(c(o),jg),blueDotManager:(0,L.e)(c(o),Vg),mapManager:(0,L.e)(c(o),jg).mapManager,controller:(0,L.e)(c(o),Hg),data:(0,L.e)(c(o),Ug).venue,analytics:{trackBlueDotEvent:function(){}}});a.on("isFollowingChanged",(function(e){!1===e.newValue&&(0,L.e)(c(o),Ug).state===ep.FOLLOW&&(0,L.e)(c(o),jg).publish(Xb.SET_STATE_SILENT,{state:ep.EXPLORE})})),(0,L.e)(c(o),jg).on(Xb.BLUE_DOT_SET_FOLLOWING,(function(e){a.isFollowing=e})),(0,L.e)(c(o),jg).on(Xb.BLUE_DOT_UPDATE_POSITION,(function(e){var t=e.x,n=e.y;(0,L.e)(c(o),Vg).publish("update-position",{x:t,y:n})}));var s=Fd((0,L.h)(c(o),Wg,Xg).bind(c(o)),300);return(0,L.e)(c(o),jg).on(Xb.PUBLISH_BLUE_DOT,s),(0,L.e)(c(o),jg).on(Xb.SET_BLUE_DOT_SIZE_FROM_ZOOM,(function(e){(0,L.e)(c(o),Vg).setBlueDotSizeFromZoom(e)})),o}return x(n,[{key:"enable",value:function(e){(0,L.e)(this,Hg).enableBlueDot(e)}},{key:"disable",value:function(){(0,L.e)(this,Hg).disableBlueDot()}}]),n}(lp);Ug=new WeakMap,jg=new WeakMap,Hg=new WeakMap,Vg=new WeakMap,Gg=new WeakMap,Wg=new WeakSet,Xg=function(){var e=this;if((0,L.e)(this,Vg).blueDots){var t=(0,L.e)(this,Vg).blueDots.filter((function(t){return t.handle._mapId===(0,L.e)(e,Ug).currentMap.id}))[0].handle.object.position.clone(),n=(0,L.e)(this,jg).mapObjects.get((0,L.e)(this,Gg)||(0,L.e)(this,Ug).venue.venue.defaultMap),i=t.applyMatrix4(n.object.matrix).project((0,L.e)(this,jg).cameraObject),r=(i.x+1)/2*(0,L.e)(this,jg).canvasWidth,o=(1-i.y)/2*(0,L.e)(this,jg).canvasHeight;(0,L.e)(this,Vg).publish("update-position",{x:r,y:o})}};var Jg=Zg;O();var Qg,Kg,$g=function(){function e(t,n){b(this,e),(0,L.f)(this,Qg,void 0),(0,L.f)(this,Kg,void 0),(0,L.g)(this,Kg,n),(0,L.g)(this,Qg,t)}return x(e,[{key:"addInteractivePolygon",value:function(e){var t=Nd(e);(0,L.e)(this,Kg).interactivePolygons[t]=!0}},{key:"addInteractivePolygonsForAllLocations",value:function(e){e||(e={});for(var t=e.excludeTypes||[],n=(e.locations||(0,L.e)(this,Qg).venue.locations.slice()).filter((function(e){return!t.includes(e.type)})),i={},r=0,o=n.length;r<o;++r)for(var a=n[r].polygons,s=0,l=a.length;s<l;++s){var u=a[s];i[u.id]||(i[u.id]=!0,this.addInteractivePolygon(u))}}},{key:"removeInteractivePolygon",value:function(e){var t=Nd(e);delete(0,L.e)(this,Kg).interactivePolygons[t]}},{key:"removeAllInteractivePolygons",value:function(){for(var e in(0,L.e)(this,Kg).interactivePolygons)this.removeInteractivePolygon(e)}}]),e}();Qg=new WeakMap,Kg=new WeakMap;var ey=$g;O();var ty=(0,L.c)(ke()),ny=(0,L.c)(z()),iy=new gh,ry=function(e){var t=(0,ny.default)(e.toString(16));return t.getBrightness()<38?Number.parseInt(t.brighten(20).toString().substring(1),16):Number.parseInt(t.darken(15).toString().substring(1),16)},oy=function(){function e(t,n){var i=this;b(this,e),(0,L.d)(this,"mapView"),(0,L.d)(this,"core"),(0,L.d)(this,"blueDotManager"),(0,L.d)(this,"rendererDomElement"),(0,L.d)(this,"currentHover",null),(0,L.d)(this,"hoverLabel"),(0,L.d)(this,"hoverColor",13421772),(0,L.d)(this,"options",{disableHover:!1}),(0,L.d)(this,"blueDot"),(0,L.d)(this,"setBlueDotManager",(function(e){i.blueDotManager=e})),(0,L.d)(this,"touchCount",0),(0,L.d)(this,"onMouseMove",(function(e){e.preventDefault(),i.calculateMouseCoordinates(e),("touch"!=e.pointerType||null==e.pointerType&&i.hasTouched)&&(i.doHoverEffect(),i.hoverLabel.setPosition(i.cursorPos.x,i.cursorPos.y))})),(0,L.d)(this,"onTouchEnd",(function(e){e.preventDefault(),i.onMouseUp(e.changedTouches[0])})),(0,L.d)(this,"onMouseUp",(function(e){if("grabbing"===i.rendererDomElement.style.cursor&&(i.rendererDomElement.style.cursor="grab"),i.touchCount&&i.decrementTouches(e),e.target.parentNode==i.core.container){var t=Math.sqrt(Math.pow(e.clientX-i.mouseDownStart.clientX,2)+Math.pow(e.clientY-i.mouseDownStart.clientY,2));if(Date.now()<i.mouseDownStart.time+300&&t<=30){i.calculateMouseCoordinates(e);var n=i.detectPolygonsUnderMouse(),r=i.getMouseMapPosition(),o={lat:NaN,lon:NaN};!isNaN(r.x)&&!isNaN(r.y)&&(o=i.mapView.currentMap.createCoordinateByXY(r.x,r.y)),i.core.onMapClicked({latitude:o.lat,longitude:o.lon},n.filter((function(e){return i.core.interactivePolygons[e]})),i.checkMouseIntersectsBlueDot());for(var a=0,s=n.length;a<s;++a){var l=n[a];if(i.core.interactivePolygons[l]&&!i.core.onPolygonClicked(l))return}i.core.onNothingClicked()}else i.touchCount||(i.core.publish(i.core.currentInteractionEvent),i.core.currentInteractionEvent="")}})),(0,L.d)(this,"onMouseDown",(function(e){"pointer"!==i.rendererDomElement.style.cursor&&(i.rendererDomElement.style.cursor="grabbing"),i.mouseDownStart={time:Date.now(),clientX:e.clientX,clientY:e.clientY},i.incrementTouches(e)})),(0,L.d)(this,"onTouchStart",(function(e){i.hasTouched=!0,1==e.touches.length?i.onMouseDown(e.touches[0]):i.mouseDownStart={time:0,clientX:0,clientY:0}})),(0,L.d)(this,"incrementTouches",(function(e){window.PointerEvent&&"touch"==e.pointerType&&(i.touchCount=(i.touchCount||0)+1,1===i.touchCount&&i.core.publish("user-hands-on"))})),(0,L.d)(this,"decrementTouches",(function(e){window.PointerEvent&&"touch"==e.pointerType&&(i.touchCount--,i.touchCount||i.core.publish("user-hands-off"))})),(0,L.d)(this,"clearMouse",(function(){i.mouse.x=1/0,i.mouse.y=1/0})),(0,L.d)(this,"getMousePos",(function(e){var t=i.core.container.getBoundingClientRect();return{x:(e.clientX-t.left)/(t.right-t.left)*i.core.canvasWidth,y:(e.clientY-t.top)/(t.bottom-t.top)*i.core.canvasHeight}})),(0,L.d)(this,"cursorPos",{x:0,y:0}),(0,L.d)(this,"mouse",{x:0,y:0}),(0,L.d)(this,"mouseDownStart",{time:0,clientX:0,clientY:0}),(0,L.d)(this,"hasTouched",!1),(0,L.d)(this,"calculateMouseCoordinates",(function(e){i.cursorPos=i.getMousePos(e),i.mouse.x=i.cursorPos.x/i.core.canvasWidth*2-1,i.mouse.y=-i.cursorPos.y/i.core.canvasHeight*2+1})),(0,L.d)(this,"getMouseRayIntersects",(function(e){return iy.setFromCamera(i.mouse,i.core.cameraObject),Array.isArray(e)?iy.intersectObjects(e,!0):iy.intersectObject(e,!0)})),(0,L.d)(this,"detectPolygonsUnderMouse",(function(){var e=i.getMouseRayIntersects(i.core.scene.children).map((function(e){return e.object.name}));(0,ty.default)(e);for(var t=[],n=0,r=e.length;n<r;++n){var o=e[n];o&&i.core.interactivePolygons[o]&&t.push(o)}return t})),(0,L.d)(this,"getMouseMapPosition",(function(){var e=i.getMouseRayIntersects(i.core.cameraPlane);if(e.length>0){var t=e[e.length-1],n=i.core.mapManager.mapObjects.get(i.mapView.currentMap.id);return{x:t.point.x+n.mapClass.width/2,y:-t.point.y+n.mapClass.height/2}}return{x:NaN,y:NaN}})),(0,L.d)(this,"checkMouseIntersectsBlueDot",(function(){if(!i.blueDotManager)return!1;var e=i.blueDotManager.getBlueDotForMap(i.mapView.currentMap);if(e){var t=new Xt,n=new Xt;e.updateMatrixWorld(),e.getWorldPosition(t),e.getWorldScale(n),n.divideScalar(2),n.setZ(0),t.sub(n);var r=i.core.canvasWidth/2,o=i.core.canvasHeight/2;i.core.cameraObject.updateProjectionMatrix(),i.core.cameraObject.updateMatrixWorld(!0),t.project(i.core.cameraObject);var a={x:t.x*r+r,y:-t.y*o+o},s=Math.pow(i.cursorPos.x-a.x,2),l=Math.pow(i.cursorPos.y-a.y,2);return Math.sqrt(s+l)<=23}return!1})),(0,L.d)(this,"doHoverEffect",(function(){if(!i.options.disableHover){for(var e=i.detectPolygonsUnderMouse(),t=!1,n=0,r=e.length;n<r;++n){var o=e[n];if(i.core.interactivePolygons[o]){if(o!=i.currentHover){i.currentHover&&(i.onPolygonHoverOut(i.currentHover),i.currentHover=null),i.core.highlightedPolygons[o]||(i.currentHover=o,i.onPolygonHoverOver(o));var a=i.core.textLabelsByPolygonId[Nd(o)];a&&a.showHoverLabel?i.hoverLabel.show(a):i.hoverLabel.hide()}"grab"===i.rendererDomElement.style.cursor&&(i.rendererDomElement.style.cursor="pointer"),t=!0;break}}0==t&&(i.currentHover&&(i.onPolygonHoverOut(i.currentHover),i.currentHover=null),"pointer"===i.rendererDomElement.style.cursor&&(i.rendererDomElement.style.cursor="grab"),i.hoverLabel.hide())}})),(0,L.d)(this,"onPolygonHoverOut",(function(e){var t=i.core.polygonMeshesById[e],n=!1;if(t._MIOriginalMaterial){var r=(t._MIOriginalMaterial.length&&t._MIOriginalMaterial[0]||t._MIOriginalMaterial).color.getHex(),o=(t.material.length&&t.material[0]||t.material).color.getHex();(i.hoverColor||ry(r))===o&&(n=!0)}if(t&&n)return i.mapView.clearPolygonColor(e),!1})),(0,L.d)(this,"onPolygonHoverOver",(function(e){var t=Nd(e),n=i.core.polygonMeshesById[t];if(n){var r=i.hoverColor||ry((n.material.length&&n.material[0]||n.material).color.getHex());return i.mapView.setPolygonColor(t,r),!1}})),this.mapView=t,this.core=n;var r=this.core.renderer.domElement();this.core.container.style.touchAction="auto",this.rendererDomElement=r,this.hoverLabel=new ef(this.core.container),this.core.on(Xb.CLEAR_MOUSE,this.clearMouse),this.core.on(Xb.CAMERA_MOVING,(function(){i.currentHover&&(i.onPolygonHoverOut(i.currentHover),i.currentHover=null),i.hoverLabel.hovering&&i.hoverLabel.hide()})),window.PointerEvent?(r.addEventListener("pointerdown",this.onMouseDown,!1),r.addEventListener("pointermove",this.onMouseMove,!1),r.addEventListener("pointerup",this.onMouseUp,!1),r.addEventListener("pointercancel",this.onMouseUp,!1)):(r.addEventListener("mousemove",this.onMouseMove,!1),r.addEventListener("mousedown",this.onMouseDown,!1),r.addEventListener("mouseup",this.onMouseUp,!1),r.addEventListener("mouseleave",this.onMouseMove,!1),r.addEventListener("touchstart",this.onTouchStart,!1),r.addEventListener("touchend",this.onTouchEnd,!1),r.addEventListener("touchcancel",this.onTouchEnd,!1))}return x(e,[{key:"destroy",value:function(){window.PointerEvent?(this.rendererDomElement.removeEventListener("pointerdown",this.onMouseDown,!1),this.rendererDomElement.removeEventListener("pointermove",this.onMouseMove,!1),this.rendererDomElement.removeEventListener("pointerup",this.onMouseUp,!1),this.rendererDomElement.removeEventListener("pointercancel",this.onMouseUp,!1)):(this.rendererDomElement.removeEventListener("mousemove",this.onMouseMove,!1),this.rendererDomElement.removeEventListener("mousedown",this.onMouseDown,!1),this.rendererDomElement.removeEventListener("mouseup",this.onMouseUp,!1),this.rendererDomElement.removeEventListener("mouseleave",this.onMouseMove,!1),this.rendererDomElement.removeEventListener("touchstart",this.onTouchStart,!1),this.rendererDomElement.removeEventListener("touchend",this.onTouchEnd,!1),this.rendererDomElement.removeEventListener("touchcancel",this.onTouchEnd,!1))}}]),e}(),ay=oy;O(),O();var sy,ly,uy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return'<div style="width: '.concat(32*e,"px; height: ").concat(32*e,'px;">').concat(yf.get("journey-departure"),"<div>")},cy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return'<div style="width: '.concat(32*e,"px; height: ").concat(32*e,'px;">').concat(yf.get("journey-destination"),"</div>")},hy=function(e){var t=null==e.direction?e.type:"".concat(e.type,"-").concat(e.direction);return'<div style="width: 40px;\n            height: 40px;\n\t\t\tcursor: pointer;\n            border-radius: 50%;\n\t\t\tbackground: green;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;">\n          <svg\n            height="16"\n            viewBox="0 0 36 36"\n            width="16"\n          >\n            <g fill="'.concat("white",'">\n              ').concat(yf.get(t),"\n            </g>\n          </svg><div>")},dy=function(){function e(t){var n,i,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hy,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;b(this,e),(0,L.f)(this,sy,void 0),(0,L.d)(this,"tooltip"),(0,L.d)(this,"mapId"),(0,L.d)(this,"toMapId"),(0,L.f)(this,ly,void 0),(0,L.d)(this,"handleClick",(function(){(0,L.e)(r,sy).setMap(r.toMapId)})),(0,L.d)(this,"determineDirection",(function(){var e=(0,L.e)(r,ly).mapObjects;return e.get(r.mapId).mapClass.elevation<e.get(r.toMapId).mapClass.elevation?"up":"down"})),this.mapId=t.node.map,this.toMapId=(null==(n=t.action)?void 0:n.type)===Lf.TAKEVORTEX?t.action.toMap.id:t.action.fromMap.id,(0,L.g)(this,sy,a),(0,L.g)(this,ly,s);var l=t.atLocation.type,u=this.determineDirection(),c=o({type:l,direction:u,toMapName:t.action.toMap.name,icon:yf.get(null==u?l:"".concat(l,"-").concat(u)),isEntering:(null==(i=t.action)?void 0:i.type)===Lf.TAKEVORTEX});this.tooltip=a.createTooltip(t.node,{contentHtml:c,text:"",collisionRank:Jd.ALWAYS_VISIBLE,padding:0,defaultAnchorType:"top"}),this.tooltip.contentEl.addEventListener("click",this.handleClick),this.tooltip.updateDimensions()}return x(e,[{key:"destroy",value:function(){var e;null==(e=this.tooltip)||e.containerEl.removeEventListener("click",this.handleClick),(0,L.e)(this,sy).removeTooltip(this.tooltip),this.tooltip=null}}]),e}();sy=new WeakMap,ly=new WeakMap;var py,fy,my,vy,gy,yy,xy,by,_y,wy,My,Ey,qy,Ty,Sy={displayArrowsOnPath:!0,nearRadius:1.8,farRadius:5.4,color:"#ff834c",flattenPath:!0},Py={color:"#f5c7b3",displayArrowsOnPath:!1,flattenPath:!0,nearRadius:1.6,farRadius:4.8,showPulse:!1,animateDrawing:!1},Ay=function(){function e(t){var n,i,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;b(this,e),(0,L.d)(this,"distance",0),(0,L.d)(this,"accessible",!1),(0,L.f)(this,py,{}),(0,L.f)(this,fy,void 0),(0,L.f)(this,my,void 0),(0,L.f)(this,vy,void 0),(0,L.f)(this,gy,void 0),(0,L.f)(this,yy,void 0),(0,L.f)(this,xy,{}),(0,L.f)(this,by,[]),(0,L.f)(this,_y,void 0),(0,L.f)(this,wy,[]),(0,L.d)(this,"setStep",(function(e){e!==(0,L.e)(r,yy)&&(!(0,L.e)(r,gy)||e<0||e>(0,L.e)(r,gy).length||((0,L.e)(r,Ty).call(r),(0,L.e)(r,qy).call(r),(0,L.g)(r,yy,e),(0,L.g)(r,vy,(0,L.e)(r,gy)[e]),(0,L.e)(r,Ey).call(r),(0,L.e)(r,My).call(r)))})),(0,L.f)(this,My,(function(){var e=(0,L.e)(r,vy).path[(0,L.e)(r,vy).path.length-1],t=(0,L.e)(r,vy).path[0];"string"==typeof(0,L.e)(r,xy).polygonHighlightColor&&(t.locations.forEach((function(e){e.polygons.forEach((function(e){(0,L.e)(r,fy).setPolygonColor(e.id,(0,L.e)(r,xy).polygonHighlightColor)}))})),e.locations.forEach((function(e){e.polygons.forEach((function(e){(0,L.e)(r,fy).setPolygonColor(e.id,(0,L.e)(r,xy).polygonHighlightColor)}))})));var n=((0,L.e)(r,gy)||[(0,L.e)(r,vy)]).map((function(e){return e.path[e.path.length-1]}));null==n||n.forEach((function(e){var t=cy((0,L.e)(r,xy).scale);"function"==typeof(0,L.e)(r,xy).destinationMarkerTemplate&&((0,L.e)(r,wy)||(0,L.g)(r,wy,[]),(0,L.e)(r,wy).push((0,L.e)(r,fy).createMarker(e,(0,L.e)(r,xy).destinationMarkerTemplate({icon:t,location:e.locations[0]}),{rank:Jd.ALWAYS_VISIBLE,anchor:tp.TOP})))}));var i=uy((0,L.e)(r,xy).scale);"function"==typeof(0,L.e)(r,xy).departureMarkerTemplate&&(0,L.g)(r,_y,(0,L.e)(r,fy).createMarker(t,(0,L.e)(r,xy).departureMarkerTemplate({icon:i}),{rank:Jd.ALWAYS_VISIBLE,anchor:tp.TOP})),(0,L.e)(r,fy).tryRendering()})),(0,L.f)(this,Ey,(function(){var e;(0,L.e)(r,fy).removeAllPaths(),r.isMultiFloor&&((0,L.e)(r,by).forEach((function(e){return e.destroy()})),(0,L.g)(r,by,[]),(0,L.g)(r,by,(0,L.e)(r,vy).instructions.filter((function(e){var t,n;return((null==(t=e.action)?void 0:t.type)===Lf.TAKEVORTEX||(null==(n=e.action)?void 0:n.type)===Lf.EXITVORTEX)&&e.node.map===(0,L.e)(r,fy).currentMap.id})).map((function(e){return new dy(e,(0,L.e)(r,xy).connectionTemplate,(0,L.e)(r,fy),(0,L.e)(r,my))})).filter((function(e){return e})))),null==(e=(0,L.e)(r,gy))||e.forEach((function(e){e!==(0,L.e)(r,vy)&&(0,L.e)(r,fy).drawPath(e.path.filter((function(e){return e.map===(0,L.e)(r,fy).currentMap.id})),g({},(0,L.e)(r,xy).inactivePathOptions))})),(0,L.e)(r,fy).drawPath((0,L.e)(r,vy).path.filter((function(e){return e.map===(0,L.e)(r,fy).currentMap.id})),(0,L.e)(r,xy).pathOptions),(0,L.e)(r,fy).tryRendering()})),(0,L.f)(this,qy,(function(){if(!1!==(0,L.e)(r,xy).polygonHighlightColor){var e=(0,L.e)(r,vy).path[(0,L.e)(r,vy).path.length-1];(0,L.e)(r,vy).path[0].locations.forEach((function(e){e.polygons.forEach((function(e){(0,L.e)(r,fy).clearPolygonColor(e.id)}))})),e.locations.forEach((function(e){e.polygons.forEach((function(e){(0,L.e)(r,fy).clearPolygonColor(e.id)}))}))}})),(0,L.f)(this,Ty,(function(){(0,L.e)(r,wy).length&&(0,L.e)(r,wy).forEach((function(e){(0,L.e)(r,fy).removeMarker(e)})),(0,L.g)(r,wy,[]),null!=(0,L.e)(r,_y)&&(0,L.e)(r,fy).removeMarker((0,L.e)(r,_y)),(0,L.g)(r,_y,void 0),(0,L.e)(r,by).forEach((function(e){return e.destroy()})),(0,L.g)(r,by,[])})),(0,L.g)(this,xy,g(g({scale:1,polygonHighlightColor:"#7babc8",destinationMarkerTemplate:function(){return cy()},departureMarkerTemplate:function(){return uy()}},o),{},{pathOptions:g(g({},Sy),null==o?void 0:o.pathOptions),inactivePathOptions:g(g({},Py),null==o?void 0:o.inactivePathOptions)})),(null==(n=null==o?void 0:o.pathOptions)?void 0:n.farRadius)||((0,L.e)(this,xy).pathOptions.farRadius=3*(0,L.e)(this,xy).pathOptions.nearRadius),(null==(i=null==o?void 0:o.inactivePathOptions)?void 0:i.farRadius)||((0,L.e)(this,xy).inactivePathOptions.farRadius=3*(0,L.e)(this,xy).inactivePathOptions.nearRadius),(0,L.g)(this,fy,a),Array.isArray(t)?((0,L.g)(this,gy,t),(0,L.g)(this,vy,(0,L.e)(this,gy)[0]),(0,L.g)(this,yy,0),(0,L.e)(this,fy).currentPath=t[0].path):((0,L.g)(this,vy,t),(0,L.e)(this,fy).currentPath=t.path),(0,L.g)(this,my,s),(0,L.e)(this,my).on("set-map",(0,L.e)(this,Ey)),(0,L.e)(this,Ey).call(this),(0,L.e)(this,My).call(this)}return x(e,[{key:"isMultiFloor",get:function(){return this.mapIdsInvolvedInJourney.length>1}},{key:"mapIdsInvolvedInJourney",get:function(){var e={};(0,L.e)(this,vy).path.forEach((function(t){e[t.map]=!0}));var t=Object.keys(e);return(0,L.e)(this,py).mapsInvolvedInJourney=t,t}},{key:"destroy",value:function(){(0,L.e)(this,qy).call(this),(0,L.e)(this,Ty).call(this),(0,L.e)(this,fy).removeAllPaths(),(0,L.e)(this,fy).currentPath=void 0,(0,L.e)(this,my).off("set-map",(0,L.e)(this,Ey)),e.instance=null}}],[{key:"create",value:function(t,n,i,r){return null!=e.instance&&e.instance.destroy(),e.instance=new e(t,n,i,r),e.instance}}]),e}(),Cy=Ay;py=new WeakMap,fy=new WeakMap,my=new WeakMap,vy=new WeakMap,gy=new WeakMap,yy=new WeakMap,xy=new WeakMap,by=new WeakMap,_y=new WeakMap,wy=new WeakMap,My=new WeakMap,Ey=new WeakMap,qy=new WeakMap,Ty=new WeakMap,(0,L.d)(Cy,"instance",null);var Ly,Oy,Iy=function(){function e(t,n){b(this,e),(0,L.f)(this,Ly,void 0),(0,L.f)(this,Oy,void 0),(0,L.g)(this,Ly,t),(0,L.g)(this,Oy,n)}return x(e,[{key:"draw",value:function(e,t){return Cy.create(e,t,(0,L.e)(this,Ly),(0,L.e)(this,Oy).mapManager)}},{key:"setStep",value:function(e){null!=Cy.instance&&Cy.instance.setStep(e)}},{key:"clear",value:function(){null!=Cy.instance&&Cy.instance.destroy()}}]),e}();Ly=new WeakMap,Oy=new WeakMap;var ky=Iy;O();var Ny,Ry,Dy,By,zy,Fy,Uy=function(){function e(t,n){b(this,e),(0,L.f)(this,Dy),(0,L.f)(this,zy),(0,L.f)(this,Ny,void 0),(0,L.f)(this,Ry,void 0),(0,L.g)(this,Ny,t),(0,L.g)(this,Ry,n)}return x(e,[{key:"setPolygonColor",value:function(e,t,n,i){var r=Nd(e);if(void 0===(0,L.e)(this,Ry).polygonMeshesById[r]){var o=Rd(e,(0,L.e)(this,Ny).venue.polygons);return null!=o&&null!=o.map&&null!=(0,L.e)(this,Ry).mapObjects.get(o.map).object?void(0,L.h)(this,Dy,By).call(this,o,t,n,i):void console.error("Cannot set color of polygon "+r+", could be bad polygon or data mismatch.")}(0,L.h)(this,zy,Fy).call(this,e,t,n,i)}},{key:"clearPolygonColor",value:function(e){var t=Nd(e),n=(0,L.e)(this,Ry).polygonMeshesById[t];!n||(n._MIOriginalMaterial&&((n.material.length?n.material:[n.material]).forEach((function(e){return Od(e)})),n.material=n._MIOriginalMaterial,delete n._MIOriginalMaterial),delete(0,L.e)(this,Ry).highlightedPolygons[t],(0,L.e)(this,Ry).textLabelsByPolygonId[t]&&(0,L.e)(this,Ry).textLabelsByPolygonId[t].clearColor(),(0,L.e)(this,Ny).tryRendering())}},{key:"clearAllPolygonColors",value:function(){for(var e=Object.keys((0,L.e)(this,Ry).highlightedPolygons),t=0,n=e.length;t<n;++t){var i=e[t];(0,L.e)(this,Ny).clearPolygonColor((0,L.e)(this,Ry).highlightedPolygons[i])}(0,L.e)(this,Ry).highlightedPolygons={},(0,L.e)(this,Ny).tryRendering(),(0,L.e)(this,Ry).renderer.disposeOfRenderLists()}}]),e}();Ny=new WeakMap,Ry=new WeakMap,Dy=new WeakSet,By=function(e,t,n,i){var r=this;(0,L.e)(this,Ry).mapObjects.get(e.map).load().then((function(){(0,L.e)(r,Ry).mapObjects.get(e.map).elements&&(0,L.e)(r,Ry).mapObjects.get(e.map).loadPolygonNow(e.id),(0,L.h)(r,zy,Fy).call(r,e,t,n,i)}))},zy=new WeakSet,Fy=function(e,t,n,i){var r=Nd(e),o=(0,L.e)(this,Ry).polygonMeshesById[r];if(null!=o){(0,L.e)(this,Ry).highlightedPolygons[r]=r,o._MIOriginalMaterial||(o._MIOriginalMaterial=o.material.length?q(o.material):o.material);var a=(o.material.length?o.material:[o.material]).map((function(e){var n=e.clone();return n.color.set(Vd(t||5022204,5022204)),null!=i?(n.transparent=!0,n.opacity=i):n.transparent=!1,n}));1===a.length?o.material=a[0]:o.material=a,(0,L.e)(this,Ry).textLabelsByPolygonId[r]&&!(n<=0)&&((0,L.e)(this,Ry).textLabelsByPolygonId[r]instanceof Wp?console.warn("Floating Labels do not support dynamic color changes. Ignoring."):(0,L.e)(this,Ry).textLabelsByPolygonId[r].setColor(n||16777215)),(0,L.e)(this,Ny).tryRendering()}else console.error("Cannot set color of polygon "+r+", could be bad polygon or data mismatch.")};var jy=Uy;O(),O();function Hy(e){null!=e&&Od(e.material)}function Vy(e){return e.stencilWrite=!0,e.stencilFunc=519,e.stencilRef=1,e.stencilFuncMask=255,e.stencilFail=Pt,e.stencilZFail=Pt,e.stencilZPass=7681,e}function Gy(e,t){return Math.abs(e-t)<Number.EPSILON}var Wy,Xy,Yy,Zy=function(){function e(t){var n=t.scene,i=t.getPolygonMeshFromId,r=t.tryRendering;b(this,e),this.scene=n,this.getPolygonMeshFromId=i,this.tryRendering=r,this.stencilSheet=null,this.polygonsMarkedAsClosed={}}return x(e,[{key:"onMapChanged",value:function(e){var t=this;e.load().then((function(){t.currentMap=e,Hy(t.stencilSheet);var n=function(e){var t=new Lr(1,1,1,1),n=500,i=500,r=new Xt(0,0,0),o=0;if(null!=e&&null!=e.boundingBox&&null!=e.boundingBox.min&&null!=e.boundingBox.max){var a=new Nn(e.boundingBox.min,e.boundingBox.max),s=a.getSize(new Xt);n=s.x,i=s.y,a.getCenter(r),o=(isNaN(a.max.z)?0:a.max.z)+10}var l=new gr({vertexShader:"varying vec2 vUV;\n\nvoid main() {\n   vUV = uv;\n\n   gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n}",fragmentShader:'precision mediump float;\n\n// The following uniforms are documented in Mappedin.ClosedPolygonManager.js\nuniform vec3 stripe1_color;\nuniform vec3 stripe2_color;\nuniform vec2 surface_dimensions;\nuniform float stripe1_width;\nuniform float stripe1_proportion;\nuniform float stripes_direction; \n\nvarying vec2 vUV;\n\nvec4 stripes(vec2 coord) {\n   vec4 color1 = vec4(stripe1_color, 1.0);\n   vec4 color2 = vec4(stripe2_color, 1.0);\n\n   // Transform the uv to surface coordinates in world space units\n   vec2 coord_absolute = coord * surface_dimensions;\n   \n   // Compute the width of a single texture "tile"\n   // For example, if the first stripe is 10 units and it forms 25% of the tile, we know that the tile itself is 40 units wide\n   float tile_width = stripe1_width / stripe1_proportion;\n\n   // Lerp the x and y coordinates of the component using the "direction" parameter; clever way of "rotating" the stripe without using trig functions, courtesy of https://andreashackel.de/tech-art/stripes-shader-1/\n   float stripe_coord = mix(coord_absolute.x, coord_absolute.y, stripes_direction);\n\n   // Normalize the above "coordinate" to obtain its position within a single texture "tile"\n   float stripe_coord_normalized = mod(stripe_coord, tile_width) / tile_width;\n\n   // Decide which of the two stripes this coordinate belongs to!\n   return mix(color1, color2, step(1. - stripe1_proportion, stripe_coord_normalized));\n}\n\nvoid main() {   \n   gl_FragColor = vec4(stripes(vUV).rgb, 1);\n}\n',uniforms:{stripe1_color:{type:"c",value:new hi(.91372549019,.91372549019,.91372549019)},stripe2_color:{type:"c",value:new hi(.80784313725,.80784313725,.80784313725)},stripe1_width:{type:"f",value:7},stripe1_proportion:{type:"f",value:.3},stripes_direction:{type:"f",value:2/3},surface_dimensions:{type:"v2",value:new Nt(n,i)}}});l.transparent=!0,l.blending=4,l.depthTest=!1,l.stencilWrite=!0,l.stencilFunc=514,l.stencilFuncMask=255,l.stencilRef=1,l.stencilFail=Pt,l.stencilZFail=Pt,l.stencilZPass=Pt;var u=new rr(t,l);return u.position.set(r.x,r.y,o),u.rotation.set(0,0,0),u.scale.set(n,i,1),u}(e);(function(e,t,n){null==t||null==n||(null!=e&&n.remove(e),n.add(t))})(t.stencilSheet,n,t.scene),t.stencilSheet=n,t.tryRendering()}))}},{key:"dispose",value:function(){this.markAllPolygonsAsOpen(),Hy(this.stencilSheet)}},{key:"markPolygonAsClosed",value:function(e){if("string"==typeof e&&null==this.polygonsMarkedAsClosed[e]){var t=this.getPolygonMeshFromId(e);if(null!=t&&null!=t.material){var n=t.geometry;if(console.assert(n instanceof zi),console.assert(null==n.index),!t.material.length){var i={};i.geometryGroups=q(n.groups),n.clearGroups();var r=t.material,o=Vy(t.material.clone());t.material=[r,o],t._MIOriginalMaterial&&(t._MIOriginalMaterial.length||(t._MIOriginalMaterial=[t._MIOriginalMaterial,Vy(t._MIOriginalMaterial.clone())]));var a=n.getAttribute("normal");console.assert(3===a.itemSize),console.assert(a.array.length/3===a.count),console.assert(a.count%3==0);for(var s=new Xt(0,0,1),l=0;l<a.count;l+=3)Gy(new Xt((a.getX(l)+a.getX(l+1)+a.getX(l+2))/3,(a.getY(l)+a.getY(l+1)+a.getY(l+2))/3,(a.getZ(l)+a.getZ(l+1)+a.getZ(l+2))/3).normalize().dot(s),1)?n.addGroup(l,3,1):n.addGroup(l,3,0);this.tryRendering(),this.polygonsMarkedAsClosed[e]=i}}}}},{key:"markPolygonAsOpen",value:function(e){if("string"==typeof e&&null!=this.polygonsMarkedAsClosed[e]){var t=this.polygonsMarkedAsClosed[e],n=this.getPolygonMeshFromId(e),i=n.geometry;i.clearGroups(),t.geometryGroups.forEach((function(e){var t=e.start,n=e.count,r=e.materialIndex;return i.addGroup(t,n,r)})),Od(n.material[1]),n.material=n.material[0],n._MIOriginalMaterial&&n._MIOriginalMaterial.length&&(n._MIOriginalMaterial=n._MIOriginalMaterial[0]),delete this.polygonsMarkedAsClosed[e],this.tryRendering()}}},{key:"markAllPolygonsAsOpen",value:function(){for(var e in this.polygonsMarkedAsClosed)this.markPolygonAsOpen(e)}}]),e}(),Jy=Zy,Qy=function(){function e(t,n){var i=this;b(this,e),(0,L.f)(this,Wy,void 0),(0,L.f)(this,Xy,void 0),(0,L.f)(this,Yy,void 0),(0,L.g)(this,Wy,t),(0,L.g)(this,Xy,n),(0,L.g)(this,Yy,new Jy({scene:(0,L.e)(this,Xy).scene,tryRendering:function(){return(0,L.e)(i,Wy).tryRendering()},getPolygonMeshFromId:function(e){return(0,L.e)(i,Xy).polygonMeshesById[e]}})),(0,L.e)(this,Xy).mapManager.addPersistentSetMapCallback((function(){(0,L.e)(i,Yy).onMapChanged((0,L.e)(i,Xy).mapManager.currentMap)}))}return x(e,[{key:"updateClosedStateForPolygon",value:function(e){var t=this;if(null!=e&&null!=e.polygon){var n,i=Nd(e.polygon);if("string"==typeof i){if(null!=e.closed)n=!!e.closed;else{if(null==e.open)return;n=!e.open}var r=Rd(i,(0,L.e)(this,Wy).venue.polygons).map||(0,L.e)(this,Wy).currentMap;(0,L.e)(this,Xy).mapManager.mapObjects.get(r).addPendingMapLoadedTask("Set closed status of polygon ".concat(i," to ").concat(n),(function(){n?(0,L.e)(t,Yy).markPolygonAsClosed(i):(0,L.e)(t,Yy).markPolygonAsOpen(i)}))}else console.error("Invalid or no polygon provided. Expecting a MappedinPolygon or a string id. Received: ".concat(e.polygon," of type ").concat(typeof e.polygon))}}},{key:"openAllPolygons",value:function(){var e=this;q((0,L.e)(this,Xy).mapManager.mapObjects.values()).reduce((function(t,n){return t.set(n,(0,L.e)(e,Wy).venue.polygons.filter((function(e){return e.map===n.id}))),t}),new Map).forEach((function(t,n){n.addPendingMapLoadedTask("Open all polygons belonging to map ".concat(n.id),(function(){return t.forEach((function(t){return(0,L.e)(e,Yy).markPolygonAsOpen(t.id)}))}))}))}},{key:"destroy",value:function(){(0,L.e)(this,Yy).dispose()}}]),e}();Wy=new WeakMap,Xy=new WeakMap,Yy=new WeakMap;var Ky=Qy;O();var $y,ex,tx,nx=function(){function e(t,n){b(this,e),(0,L.f)(this,$y,void 0),(0,L.f)(this,ex,void 0),(0,L.f)(this,tx,new Set),(0,L.g)(this,$y,t),(0,L.g)(this,ex,n)}return x(e,[{key:"createThreeJSMarker",value:function(e){var t=(0,L.e)(this,$y).currentMap.id;null!=e.mapOrMapId&&(t="string"==typeof e.mapOrMapId?e.mapOrMapId:e.mapOrMapId.id);var n=(0,L.e)(this,ex).mapObjects.get(t).addThreeJSMarker(e);return(0,L.e)(this,tx).add(n),(0,L.e)(this,$y).tryRendering(gf.ANIMATED),n}},{key:"removeThreeJSMarker",value:function(e){if(null==e._mapId)return!1;var t=!1,n=(0,L.e)(this,ex).mapObjects.get(e._mapId);return n&&(t=n.removeThreeJSMarker(e)),(0,L.e)(this,$y).tryRendering(gf.ANIMATED),t}},{key:"removeAllThreeJSMarkers",value:function(){var e=this;(0,L.e)(this,tx).forEach((function(t){e.removeThreeJSMarker(t)}))}}]),e}();$y=new WeakMap,ex=new WeakMap,tx=new WeakMap;var ix=nx;O(),O(),"object"!=typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var rx=(0,L.c)(B());O(),bn.prototype.destroy=function(){for(var e=this.children.length-1;e>=0;e--)this.children[e].destroy();this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.parent&&this.parent.remove(this),this.texture&&(this.texture.dispose(),this.texture=void 0),Array.isArray(this.material)?this.material.forEach((function(e){Od(e)})):void 0!==this.material&&Od(this.material),this.material=void 0},O(),O();var ox=function(e,t,n){this.touch=e,this.camera=t,this.cameraPlane=n,this.viewCoordinate={x:e.x,y:e.y},this.camera.updateMatrixWorld(),this.camera.updateMatrix(),this.snapHolderMatrix=this.camera.matrixWorld.clone(),this.snapCamera=this.camera.clone(),this.snapshotCameraState=function(){this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraPosition=this.camera.position;var e=new Xt(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster=this.raycaster||new gh,this.raycaster.setFromCamera(e,this.snapCamera);var t=this.raycaster.intersectObject(this.cameraPlane,!1);this.worldCoordinate=t&&t[0]&&t[0].point,this.snapshotted=!0},this.updateAnchorState=function(e,t){this.camera=e,this.snapCamera=e.clone(),this.snapHolderMatrix=e.matrixWorld.clone(),this.updateViewCoordinate(t),this.snapshotCameraState()},this.updateViewCoordinate=function(e){this.viewCoordinate={x:e.x,y:e.y}},this.reUnproject=function(){var e=new Xt(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster.setFromCamera(e,this.snapCamera);var t=this.raycaster.intersectObject(this.cameraPlane,!1)[0];if(t)return t.point},this.snapshotCameraState()};function ax(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function sx(e,t){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function lx(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}O();var ux=function(e,t){this.input1=e,this.input2=t,this.lastAngle=ax(e,t),this.lastDistance=sx(e,t),this.first=e,this.second=t,this.update=function(e,t){var n=sx(e,t);this.input1=e,this.input2=t;var i=ax(e,t);this.lastAngle=i,this.lastDistance=n,this.first=lx(this.first,e),this.second=lx(this.second,t)}};O();var cx=(0,L.c)(B()),hx="single_floor",dx="multi_floor",px=Math.PI/2,fx=cx.default.Easing.Quadratic.InOut,mx="top",vx="bottom",gx="down",yx="up",xx=function(){function e(t,n,i,r){b(this,e),(0,L.d)(this,"_focusMapsStart",mx),(0,L.d)(this,"_focusMapsDir",gx),(0,L.d)(this,"_focusMapsLen",3),(0,L.d)(this,"_focusAnimCurve",fx),(0,L.d)(this,"_focusAnimDuration",900),(0,L.d)(this,"rotationAxis",new Xt(1,0,0)),(0,L.d)(this,"mapBoundingBoxes",[]),(0,L.d)(this,"_helperBoundingBoxes",[]),(0,L.d)(this,"mapAxesHelpers",[]),this.mapView=t,this.object=n,this.options=r,this.padding=null==r.padding?t.cachedPadding:r.padding,this.rotation=null==r.rotation?0:r.rotation,this.maps=i,this.debug=r.debug,this.mapSpacing=null==r.mapSpacing?1e3:parseInt(r.mapSpacing,10),this.mapView.setViewState(dx),this.object.children.forEach((function(e){return e.parent.remove(e)})),this.mapTilt=(null==r.mapTilt?30:r.mapTilt)*Math.PI/180,this.mapView.controls.setTilt(px),this.positionMaps(i),this.addMaps(this.maps),this.resize=Fd(this.resize.bind(this),300),this.focusOnMaps=this.focusOnMaps.bind(this),this.debug&&(this.addMapBoundingBoxes(),this.addAxesHelpers())}return x(e,[{key:"viewPortHeight",get:function(){return this.mapView.canvasHeight-this.padding.top-this.padding.bottom}},{key:"viewPortWidth",get:function(){return this.mapView.canvasWidth-this.padding.left-this.padding.right}},{key:"positionMaps",value:function(){var e=this,t=this.maps.map((function(t,n){var i=t.object;i.rotation.z=e.rotation*Math.PI/180;var r=new Nn;return r.setFromObject(i),i.rotation.z=0,r})),n=0;this.maps.forEach((function(i,r){var o=i.object;o.setRotationFromAxisAngle(e.rotationAxis,e.mapTilt);var a=t[r].min.y*Math.sin(e.mapTilt),s=t[r].max.y*Math.sin(e.mapTilt);n-=Math.abs(s),o.position.z=n,n-=Math.abs(a),n-=e.mapSpacing}));var i=Ld(this.maps),o=(i.max.z-i.min.z)/2;this.maps.forEach((function(t,n){var i=t.object;i.position.z+=o,i.rotation.z=e.rotation*Math.PI/180})),this.maps.forEach((function(t,n){if(!0===t.connection){var i=r(t.connectionNodes,2),o=i[0],a=i[1],s=e.mapView.convertTo3DMapPosition(o),l=e.mapView.convertTo3DMapPosition(a),u=t.object,c=e.maps.find((function(e){return e.id===o.map})).object,h=e.maps.find((function(e){return e.id===a.map})).object;c.updateMatrixWorld(),h.updateMatrixWorld(),s.applyMatrix4((new tn).extractRotation(c.matrix)),l.applyMatrix4((new tn).extractRotation(h.matrix)),s.z+=c.position.z,l.z+=h.position.z;var d=l.clone().sub(s),p=d.length();d=d.normalize().multiplyScalar(.5*p);var f=s.clone().add(d);u.rotation.z=0,u.position.set(f.x,f.y,f.z),u.renderOrder=1}}))}},{key:"addMaps",value:function(e){var t=this;e.forEach((function(e){t.object.add(e.object),e.addMarkers&&e.addMarkers()}))}},{key:"removeMaps",value:function(){this.maps.forEach((function(e){e.object.position.set(0,0,0),e.object.rotation.set(0,0,0),e.removeMarkers&&e.removeMarkers(),e.object.parent&&e.object.parent.remove(e.object)}))}},{key:"addMapBoundingBoxes",value:function(){var e=this,t=[16711680,65280,255,16711935,16776960,65535];this.maps.forEach((function(n,i){var r=n.object,o=new Jh((new Nn).setFromObject(r),t[i]);e.object.add(o),e.mapBoundingBoxes.push(o)}))}},{key:"removeMapBoundingBoxes",value:function(){this.mapBoundingBoxes.forEach((function(e,t){e.parent&&e.parent.remove(e)}))}},{key:"removeHelperBoundingBoxes",value:function(){this._helperBoundingBoxes.forEach((function(e,t){e.parent&&e.parent.remove(e)}))}},{key:"addAxesHelpers",value:function(){var e=this,t=new nd(5e3);this.object.add(t),this.maps.forEach((function(t,n){var i=t.object,r=new nd(1e3);i.add(r),e.mapAxesHelpers.push(r)}))}},{key:"removeAxesHelpers",value:function(){this.mapAxesHelpers.forEach((function(e,t){e.parent&&e.parent.remove(e)}))}},{key:"mapTiltDegrees",get:function(){return 180*this.mapTilt/Math.PI},set:function(e){this.mapTilt=e*Math.PI/180,this.positionMaps(),this.debug&&(this.removeMapBoundingBoxes(),this.addMapBoundingBoxes())}},{key:"projections",get:function(){return function(e){var t=e.maps,n=e.width,i=e.height,r=e.camera;return t.map((function(e){for(var t=1/0,o=1/0,a=-1/0,s=-1/0,l=Bd(Dd(e.object)),u=0;u<l.length;u++){var c=l[u],h={x:((c=c.project(r)).x+1)/2*n,y:(1-c.y)/2*i};t=Math.min(h.x,t),o=Math.min(h.y,o),a=Math.max(h.x,a),s=Math.max(h.y,s)}return{min:{x:t,y:o},max:{x:a,y:s}}}))}({maps:this.maps,width:this.mapView.canvasWidth,height:this.mapView.canvasHeight,camera:this.mapView.controls.camera})}},{key:"tiltMaps",value:function(e){var t=this;this.maps.forEach((function(n,i){n.object.setRotationFromAxisAngle(t.rotationAxis,e)}))}},{key:"focusOnMaps",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.start,i=void 0===n?this._focusMapsStart:n,r=t.len,o=void 0===r?this._focusMapsLen:r,a=t.dir,s=void 0===a?this._focusMapsDir:a,l=t.mapIndices,u=t.duration,c=void 0===u?this._focusAnimDuration:u,h=t.curve,d=void 0===h?this._focusAnimCurve:h;return i===mx?s=gx:i===vx&&(s=yx),this._focusMapsStart=i,this._focusMapsLen=o,this._focusMapsDir=s,this._focusAnimDuration=c,this._focusAnimCurve=d,new Promise((function(t){var n=l?e.getMapsByIndices(l):e.getFocusMaps(i,s,o),r=Ld(e.maps,e.mapSpacing),a=r.max.z-r.min.z,u=Ld(n,e.mapSpacing);u.min.setX(r.min.x),u.max.setX(r.max.x),e._focusBox=u,e._scrollWindow=u.max.z-u.min.z;var h=u.max.x-u.min.x,p=u.max.z-u.min.z,f=-a/2+p/2,m=+a/2-p/2,v=u.clone(),g=e.mapView.canvasWidth,y=e.mapView.canvasHeight;if(e.padding.top+e.padding.bottom<y){var x=y/(y-e.padding.top);v.max.z=u.min.z+p*x;var b=p/2*x-p/2;m+=b,f+=b;var _=y/(y-e.padding.bottom);v.min.z=u.max.z-p*_;var w=p/2*_-p/2;m-=w,f-=w}else console.warn("top + bottom padding cannot exceed canvas height, ignoring");if(e.padding.left+e.padding.right<g){var M=g/(g-e.padding.left);v.min.x=u.max.x-h*M;var E=g/(g-e.padding.right);v.max.x=u.min.x+h*E}else console.warn("left + right padding cannot exceed canvas width, ignoring");var q=v.max.x-v.min.x,T=v.max.z-v.min.z,S=v.min.x+q/2,P=v.min.z+T/2,A=e.mapView.controls.camera.fov;if(e.debug){e.removeHelperBoundingBoxes();var C=new Jh(u,16711680);e.object.add(C),e._helperBoundingBoxes.push(C);var L=new Jh(v,16776960);e.object.add(L),e._helperBoundingBoxes.push(L)}e.mapView.controls.minPedestal=f,e.mapView.controls.maxPedestal=m;var O=jd(v,T,A),I=jd(v,q,A*e.mapView.controls.camera.aspect),k=Math.max(I,O);e.mapView.controls.expandZoomLimits(k);var N={zoom:k,rotation:0,position:{x:S,y:0,z:P}},R=e.mapView.controls.animateCamera(N,c,d,(function(){e.tween=R,t(e.tween)}))}))}},{key:"getFocusMaps",value:function(e,t,n){var i=this.maps.slice(0);return n<this.maps.length&&(e===mx?i=i.slice(0,n):e===vx?i=i.slice(-n):"number"==typeof e&&(t===gx?i=i.slice(e,e+n):t===yx&&(i=i.slice(Math.max(e+1-n,0),e+1)))),i}},{key:"getFocusBox",value:function(){var e=Ld(this.maps,this.mapSpacing),t=e.max.z-e.min.z,n=this._focusBox.clone(),i=this._focusBox.max.z-this._focusBox.min.z,r=e.min.z+i/2,o=e.max.z-i/2,a=(this.mapView.controls.getPedestal()-r)/(o-r);return n.min.z=e.min.z+a*(t-i),n.max.z=e.min.z+i+a*(t-i),n}},{key:"getVisibleMaps",value:function(){var e=this.getFocusBox();return this.maps.filter((function(t){return e.containsBox(Dd(t.object))}))}},{key:"getVisibleMapIds",value:function(){return this.getVisibleMaps().map((function(e){return e.id}))}},{key:"getVisibleMapIndices",value:function(){for(var e=this.getFocusBox(),t=[],n=0;n<this.maps.length;n++){var i=this.maps[n];e.containsBox(Dd(i.object))&&t.push(n)}return t}},{key:"getMapsByIndices",value:function(e){return this.maps.filter((function(t,n){return e.includes(n)}))}},{key:"bottomMapVisible",get:function(){var e=this.maps[this.maps.length-1];return this.getVisibleMaps().includes(e)}},{key:"topMapVisible",get:function(){var e=this.maps[0];return this.getVisibleMaps().includes(e)}},{key:"scrollMapsUp",value:function(){var e,t=this.getVisibleMapIndices()[0];if(t>0){var n=t-1;return e=q(new Array(this._focusMapsLen)).map((function(e,t){return n+t})),this.focusOnMaps({mapIndices:e})}return Promise.resolve()}},{key:"scrollMapsDown",value:function(){var e,t=this.getVisibleMapIndices(),n=t[t.length-1];if(n<this.maps.length-1){var i=n+1;return e=q(new Array(this._focusMapsLen)).map((function(e,t){return i-t})).reverse(),this.focusOnMaps({mapIndices:e})}return Promise.resolve()}},{key:"resize",value:function(){this.focusOnMaps()}},{key:"destroy",value:function(){this.removeMaps(),this.debug&&(this.removeMapBoundingBoxes(),this.removeHelperBoundingBoxes()),this.mapView.setViewState(hx),this.mapView.controls.setPosition(0,0),this.mapView.controls.setPedestal(0)}}]),e}(),bx=xx;function _x(e,t,n){null==t&&(t=e.g,n=e.b,e=e.r);var i=0,r=e;t>e&&(i=1,r=t),n>t&&n>e&&(i=2,r=n);var o=e;t<e&&(o=t),n<t&&n<e&&(o=n);var a=0,s=0;return r!==o&&(a=0===i?60/360*(t-n)/(r-o):1===i?60/360*(2+(n-e)/(r-o)):60/360*(4+(e-t)/(r-o)),s=0===r?0:(r-o)/r),[a,s,r]}function wx(e,t,n){var i=360*e%360/60,r=0|i,o=i-r,a=n*(1-t),s=n*(1-t*o),l=n*(1-t*(1-o)),u=0,c=0,h=0;switch(r){case 0:u=n,c=l,h=a;break;case 1:u=s,c=n,h=a;break;case 2:u=a,c=n,h=l;break;case 3:u=a,c=s,h=n;break;case 4:u=l,c=a,h=n;break;case 5:u=n,c=a,h=s}return new hi(u,c,h)}O(),O();var Mx=function(){function e(t){var n=this,i=t.minimum,r=t.maximum,o=t.step,a=t.current,s=t.onValueChanged;b(this,e),this._minimum=i,this._maximum=r,this._step=o,this._onValueChanged=s,this._element=document.createElement("input"),this._element.type="range",this._element.min=this._minimum,this._element.max=this._maximum,null!=this._step&&(this._element.step=this._step),this._element.value=null!=a?a:this._minimum,null!=s&&(this._element.addEventListener("input",(function(e){s(n._element.value)})),s(this._element.value)),Object.assign(this._element.style,{height:"16px"})}return x(e,[{key:"destroy",value:function(){this._element=null,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(e){var t=this;this._element.addEventListener("input",(function(n){return e(t._element.value)}))}},{key:"setValue",value:function(e){this._element.value=e}},{key:"element",get:function(){return this._element}},{key:"value",get:function(){return this._element.value}},{key:"displayedValue",get:function(){return""+this._element.value}},{key:"height",get:function(){return 16}}]),e}(),Ex=function(){function e(t){var n=this,i=t.current,r=t.onValueChanged;b(this,e),this._onValueChanged=r,this._element=document.createElement("div"),this._titleElement=document.createElement("input"),this._titleElement.type="checkbox",this._titleElement.checked=i||!1,Object.assign(this._titleElement.style,{width:"16px",height:"16px",margin:"0px"}),null!=r&&(this._titleElement.addEventListener("click",(function(e){r(n._titleElement.checked)})),r(this._titleElement.checked))}return x(e,[{key:"destroy",value:function(){this._element=null,this._titleElement=null,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(e){var t=this;this._titleElement.addEventListener("click",(function(n){return e(t._titleElement.checked)}))}},{key:"element",get:function(){return this._element}},{key:"titleElement",get:function(){return this._titleElement}},{key:"value",get:function(){return this._titleElement.checked}},{key:"displayedValue",get:function(){return this._titleElement.checked?"true":"false"}},{key:"height",get:function(){return 0}},{key:"titleElementWidth",get:function(){return 16}}]),e}(),qx=function(){function e(t){var n=this,i=t.current,r=t.onValueChanged;b(this,e),this._onValueChanged=r,this._element=document.createElement("div"),this._titleElement=document.createElement("div"),this._color=i||new hi,this._listeners=[],Object.assign(this._element.style,{width:"100%",height:this.height+"px"}),Object.assign(this._titleElement.style,{width:"10px",height:"10px","border-radius":"2px"}),this._colorPickerMain=document.createElement("canvas"),this._colorPickerMain.height=62,Object.assign(this._colorPickerMain.style,{position:"absolute",left:"0px",right:"0px",top:"0px",height:"62px"}),this._element.appendChild(this._colorPickerMain),this._colorPickerBottomSlider=document.createElement("canvas"),this._colorPickerBottomSlider.height=14,Object.assign(this._colorPickerBottomSlider.style,{position:"absolute",left:"0px",right:"0px",top:"66px",height:"14px"}),this._element.appendChild(this._colorPickerBottomSlider),this._requestAnimationFrameHandle=null,this._requestAnimationFrameUpdate=this._requestAnimationFrameUpdate.bind(this),this._pickingMain=!1,this._pickingX=0,this._pickingY=0,this._colorPickerMain.addEventListener("pointerdown",(function(e){n._pickingMain=!0,n._updateMain(e.offsetX,e.offsetY),n._notify(),n._moveListener=function(e){var t=e.clientX-n._colorPickerMain.getBoundingClientRect().x,i=e.clientY-n._colorPickerMain.getBoundingClientRect().y;n._pickingX=Math.min(Math.max(t,0),n._colorPickerMain.clientWidth),n._pickingY=Math.min(Math.max(i,0),n._colorPickerMain.clientHeight),n._requestAnimationFrame()},document.body.addEventListener("pointermove",n._moveListener),n._upListener=function(e){n._pickingMain=!1,n.redraw(),document.body.removeEventListener("pointermove",n._moveListener),document.body.removeEventListener("pointerup",n._upListener),delete n._moveListener,delete n._upListener},document.body.addEventListener("pointerup",n._upListener)})),this._pickingBottomSlider=!1,this._colorPickerBottomSlider.addEventListener("pointerdown",(function(e){n._pickingBottomSlider=!0,n._updateBottomSlider(e.offsetX),n._notify(),n._bottomMoveListener=function(e){var t=e.clientX-n._colorPickerBottomSlider.getBoundingClientRect().x;n._pickingX=Math.min(Math.max(t,0),n._colorPickerMain.clientWidth),n._requestAnimationFrame()},document.body.addEventListener("pointermove",n._bottomMoveListener),n._bottomUpListener=function(e){n._pickingBottomSlider=!1,n.redraw(),document.body.removeEventListener("pointermove",n._bottomMoveListener),document.body.removeEventListener("pointerup",n._bottomUpListener),delete n._bottomMoveListener,delete n._bottomUpListener},document.body.addEventListener("pointerup",n._bottomUpListener)}));var o=0,a=function(e,t){var i=document.createElement("button");return Object.assign(i.style,{position:"absolute",top:n.height-24+"px",left:o+"px",height:"24px",width:"48px",color:"grey"}),i.innerHTML=t,o+=50,i.addEventListener("click",(function(){n._modeButtons[n._mode].style.color="grey",n._mode=e,i.style.color="black",n.redraw()})),n._element.appendChild(i),i};this._modeButtons={},this._modeButtons.hsv=a("hsv","HSV"),this._modeButtons.svh=a("svh","SVH"),this._modeButtons.rgb=a("rgb","RGB"),this._mode="hsv",this._modeButtons.hsv.style.color="black",this._requestAnimationFrame(),this._notify()}return x(e,[{key:"destroy",value:function(){document.body.removeEventListener("pointermove",this._moveListener),document.body.removeEventListener("pointerup",this._upListener),document.body.removeEventListener("pointermove",this._bottomMoveListener),document.body.removeEventListener("pointerup",this._bottomUpListener),this._element=null,this._titleElement=null,this._destroyed=!0,Object.setPrototypeOf(this,null)}},{key:"addValueChangedListener",value:function(e){this._listeners.push(e)}},{key:"setValue",value:function(e){this._color.copy(e),this.redraw(),this._notify()}},{key:"_requestAnimationFrame",value:function(){null==this._requestAnimationFrameHandle&&!this._destroyed&&(this._requestAnimationFrameHandle=requestAnimationFrame(this._requestAnimationFrameUpdate))}},{key:"_requestAnimationFrameUpdate",value:function(){this._pickingMain&&(this._updateMain(this._pickingX,this._pickingY),this._notify()),this._pickingBottomSlider&&(this._updateBottomSlider(this._pickingX),this._notify()),this._requestAnimationFrameHandle=null}},{key:"_notify",value:function(){null!=this._onValueChanged&&this._onValueChanged(this._color);var e,t=(0,C.Z)(this._listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this._color)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateMain",value:function(e,t){var n=this._colorPickerMain.clientWidth;this._pickingX=Math.min(Math.max(e,1),n-1)-1,this._pickingY=Math.min(Math.max(t,1),63)-1;var i=this._pickingX/(n-1),o=this._pickingY/63;if("hsv"===this._mode){var a=r(_x(this._color),3)[2];this._color.set(wx(i,o,a))}else if("svh"===this._mode){var s=r(_x(this._color),2)[0];this._color.set(wx(s,i,1-o))}else this._color.r=i,this._color.g=o;this.redraw()}},{key:"_updateBottomSlider",value:function(e){var t=this._colorPickerBottomSlider.clientWidth;this._pickingX=Math.min(Math.max(e,1),t-1)-1;var n=this._pickingX/(t-1);if("hsv"===this._mode){var i=r(_x(this._color),2),o=i[0],a=i[1];this._color.set(wx(o,a,n))}else if("svh"===this._mode){var s=r(_x(this._color),3),l=s[1],u=s[2];this._color.set(wx(n,l,u))}else this._color.b=n;this.redraw()}},{key:"redraw",value:function(){var e=this._element.clientWidth-2;this._colorPickerMain.width!==e&&(this._colorPickerMain.width=e);for(var t=r(_x(this._color),3),n=t[0],i=t[1],o=t[2],a=this._colorPickerMain.getContext("2d"),s=0;s<62;++s)for(var l=0;l<e;++l){if("hsv"===this._mode){var u=wx(l/(e-1),s/61,o),c=u.r,h=u.g,d=u.b;a.fillStyle="rgb(".concat(255*c,",").concat(255*h,",").concat(255*d,")")}else if("svh"===this._mode){var p=wx(n,l/(e-1),1-s/61),f=p.r,m=p.g,v=p.b;a.fillStyle="rgb(".concat(255*f,",").concat(255*m,",").concat(255*v,")")}else{var g=l/e*255,y=s/62*255,x=255*this._color.b;a.fillStyle="rgb(".concat(g,",").concat(y,",").concat(x,")")}a.fillRect(l,s,1,1)}this._pickingMain&&(a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,this._pickingY,e,1),a.fillRect(this._pickingX,0,1,62)),this._colorPickerBottomSlider.width!==e&&(this._colorPickerBottomSlider.width=e);for(var b=this._colorPickerBottomSlider.getContext("2d"),_=0;_<e;++_){if("hsv"===this._mode){var w=wx(n,i,_/(e-1)),M=w.r,E=w.g,q=w.b;b.fillStyle="rgb(".concat(255*M,",").concat(255*E,",").concat(255*q,")")}else if("svh"===this._mode){var T=wx(_/(e-1),i,o),S=T.r,P=T.g,A=T.b;b.fillStyle="rgb(".concat(255*S,",").concat(255*P,",").concat(255*A,")")}else{var C=255*this._color.r,L=255*this._color.g,O=_/(e-2)*255;b.fillStyle="rgb(".concat(C,",").concat(L,",").concat(O,")")}b.fillRect(_,0,1,14)}this._pickingBottomSlider&&(b.fillStyle="rgba(0,0,0,0.5)",b.fillRect(this._pickingX,0,1,14));var I=255*this._color.r,k=255*this._color.g,N=255*this._color.b,R="1px solid rgb(".concat(.9*I,",").concat(.9*k,",").concat(.9*N,")");Object.assign(this._colorPickerMain.style,{border:R}),Object.assign(this._colorPickerBottomSlider.style,{border:R}),Object.assign(this._titleElement.style,{"background-color":"rgb(".concat(I,",").concat(k,",").concat(N,")"),border:R})}},{key:"element",get:function(){return this._element}},{key:"titleElement",get:function(){return this._titleElement}},{key:"value",get:function(){return this._color}},{key:"displayedValue",get:function(){return"#"+this._color.getHexString().toUpperCase()}},{key:"height",get:function(){return 108}},{key:"titleElementWidth",get:function(){return 12}}]),e}(),Tx=function(){function e(t){var n=t.name;b(this,e),this._name=n,this._element=document.createElement("div"),this._entries=[],this._height=12}return x(e,[{key:"destroy",value:function(){var e,t=(0,C.Z)(this._entries);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._entries=null,this._element=null,Object.setPrototypeOf(this,null)}},{key:"element",get:function(){return this._element}},{key:"height",get:function(){return this._height}},{key:"addControl",value:function(e,t,n){if(-1===this._entries.findIndex((function(t){return t.name===e}))){var i=new Sx({name:e,description:t,control:n});this._entries.push(i),this._element.appendChild(i.element),null!=n.redraw&&n.redraw()}}},{key:"removeControl",value:function(e){var t=this._entries.findIndex((function(t){return t.name===e}));if(-1!==t){var n=r(this._entries.splice(t,1),1)[0];this._element.removeChild(n.element),n.destroy()}}},{key:"_updateLayout",value:function(){this._height=0;var e,t=(0,C.Z)(this._entries);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.element.style.top=this._height+"px",this._height+=n.height+12}}catch(i){t.e(i)}finally{t.f()}Object.assign(this._element.style,{height:this._height+"px"})}}]),e}(),Sx=function(){function e(t){var n=this,i=t.name,r=t.description,o=t.control;b(this,e),this._name=i,this._description=r,this._control=o,this._element=document.createElement("div"),this._element.title=r,Object.assign(this._element.style,{position:"absolute",left:"0px",right:"0px"}),this._element.appendChild(this._control.element),Object.assign(this._control.element.style,{position:"absolute",left:"0px",width:"100%",top:"16px","font-size":"10px"});var a=0;null!=this._control.titleElement&&(this._element.appendChild(this._control.titleElement),Object.assign(this._control.titleElement.style,{position:"absolute",left:"0px",top:"0px","font-size":"10px"}),a=this._control.titleElementWidth+4),this._control.addValueChangedListener((function(e){n._displayedValueElement.innerHTML=Px(n._control.displayedValue)})),this._nameElement=document.createElement("span"),this._nameElement.innerHTML=i,Object.assign(this._nameElement.style,{position:"absolute",left:a+"px",right:"0px",height:"16px",color:"#666666","font-size":"12px","text-align":"left","vertical-align":"middle"}),this._element.appendChild(this._nameElement),this._displayedValueElement=document.createElement("span"),this._displayedValueElement.innerHTML=Px(this._control.displayedValue),Object.assign(this._displayedValueElement.style,{position:"absolute",left:a+"px",right:"0px",height:"16px","font-size":"12px","text-align":"right","vertical-align":"middle"}),this._element.appendChild(this._displayedValueElement)}return x(e,[{key:"destroy",value:function(){this._element=null,this._nameElement=null,this._displayedValueElement=null,this._control.destroy(),Object.setPrototypeOf(this,null)}},{key:"name",get:function(){return this._name}},{key:"element",get:function(){return this._element}},{key:"value",get:function(){return this._control.value}},{key:"height",get:function(){return this._control.height+16}}]),e}();function Px(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var Ax=(0,L.c)(B()),Cx=1e4,Lx="chain",Ox="cancel",Ix=function(e,t,n,i){Object.assign(this,Lt.prototype),this.camera=e,this.canvas=t,this.elevation=e.parent,this.orbit=this.elevation.parent;var r,o=2*Math.PI,a=100;this.zoomSpeed=5,this.rotateSpeed=100,this.enabled=!0,this.enableZoom=!0,this.enablePan=!0,this.enablePedestal=!1,this.maxPedestal=1/0,this.minPedestal=-1/0,this.enableRotate=!0,this.minZoom=375,this.maxZoom=1e4,this.initialMinZoom=375,this.initialMaxZoom=1e4,this.ignoreZoomLimits=!1,this.minExpandedZoom=375,this.maxExpandedZoom=1e5,this.zoomFactor=1,this.panBounds={margin:1.25,min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0},center:{x:0,y:0},radius:200},this.minTilt=0,this.maxTilt=1.2,this.mouseButtons={ORBIT:Ze,ZOOM:Ye,PAN:Xe};var s=this,l=new rr(new Cr(1e6,1e6),new yi({color:0,visible:!1})),u=new gh;n.add(l);var c,h=-1,d=h,p=new Nt,f=[],m={offsetLeft:0,offsetTop:0},v=new Nt,y=new Nt,x=new Nt,b=new Nt,_=new Nt,w=new Nt,M=new Xt,E=new Xt,q=new Nt,T=new Nt,S=new Nt,P=!1,C=new Uc(!0),L=0,O=!0;this.CAMERA_EVENTS={},this.CAMERA_EVENTS.CHANGE_EVENT={type:"change"},this.CAMERA_EVENTS.PAN_START_EVENT={type:"panStart"},this.CAMERA_EVENTS.PAN_END_EVENT={type:"panEnd"},this.CAMERA_EVENTS.PEDESTAL_START_EVENT={type:"pedestalStart"},this.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT={type:"pedestalChange"},this.CAMERA_EVENTS.PEDESTAL_END_EVENT={type:"pedestalEnd"},this.CAMERA_EVENTS.ROTATE_START_EVENT={type:"rotateStart"},this.CAMERA_EVENTS.ROTATE_END_EVENT={type:"rotateEnd"},this.CAMERA_EVENTS.ZOOM_START_EVENT={type:"zoomStart"},this.CAMERA_EVENTS.ZOOM_END_EVENT={type:"zoomEnd"},this.CAMERA_EVENTS.MULTI_START_EVENT={type:"multiStart"},this.CAMERA_EVENTS.MULTI_END_EVENT={type:"multiEnd"},this.INTERACTION_EVENTS={},this.INTERACTION_EVENTS.USER_PAN_EVENT={type:"userPan"},this.INTERACTION_EVENTS.USER_PEDESTAL_EVENT={type:"userPedestal"},this.INTERACTION_EVENTS.USER_ROTATE_EVENT={type:"userRotate"},this.INTERACTION_EVENTS.USER_DOLLY_EVENT={type:"userDolly"},this.INTERACTION_EVENTS.USER_ZOOM_EVENT={type:"userZoom"},this.INTERACTION_EVENTS.USER_TILT_EVENT={type:"userTilt"},this.UPDATE_EVENTS={},this.UPDATE_EVENTS.POSITION_UPDATED_EVENT={type:"positionUpdated"},this.UPDATE_EVENTS.ZOOM_UPDATED_EVENT={type:"zoomUpdated"},this.UPDATE_EVENTS.TILT_UPDATED_EVENT={type:"tiltUpdated"},this.UPDATE_EVENTS.ROTATION_UPDATED_EVENT={type:"rotationUpdated"};var I=this.CAMERA_EVENTS.CHANGE_EVENT,k=this.CAMERA_EVENTS.PAN_START_EVENT,N=this.CAMERA_EVENTS.PEDESTAL_START_EVENT,R=this.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT,D=this.CAMERA_EVENTS.PAN_END_EVENT,B=this.CAMERA_EVENTS.ROTATE_START_EVENT,z=this.CAMERA_EVENTS.ROTATE_END_EVENT,F=this.CAMERA_EVENTS.ZOOM_START_EVENT,U=this.CAMERA_EVENTS.ZOOM_END_EVENT,j=this.CAMERA_EVENTS.MULTI_START_EVENT,H=this.CAMERA_EVENTS.MULTI_END_EVENT,V=this.INTERACTION_EVENTS.USER_PAN_EVENT,G=this.INTERACTION_EVENTS.USER_PEDESTAL_EVENT,W=this.INTERACTION_EVENTS.USER_ROTATE_EVENT,X=this.INTERACTION_EVENTS.USER_DOLLY_EVENT,Y=this.INTERACTION_EVENTS.USER_ZOOM_EVENT,Z=this.INTERACTION_EVENTS.USER_TILT_EVENT,J=this.UPDATE_EVENTS.POSITION_UPDATED_EVENT,Q=this.UPDATE_EVENTS.ZOOM_UPDATED_EVENT,K=this.UPDATE_EVENTS.TILT_UPDATED_EVENT,$=this.UPDATE_EVENTS.ROTATION_UPDATED_EVENT,ee=zd((function(e){s.dispatchEvent(g(g({},R),{},{pedestal:e,scrolledToTop:s.scrolledToTop,scrolledToBottom:s.scrolledToBottom,scrollPercent:s.scrollPercent}))}),100);this.addDebugControls=function(e){e.addDebugControls({CameraControls:[{name:"Stay Inside Bounds",description:"Ensure the camera stays inside its bounds.\n\nCaution: going too far outside-of-bounds may slow renderingsignificantly.",control:new Ex({current:!0,onValueChanged:function(e){O=e}})}]})},this.removeDebugControls=function(e){e.removeDebugControls({CameraControls:["Stay Inside Bounds"]})},this.pan=function(e,t){isNaN(e)||isNaN(t)||(s.setPosition(s.orbit.position.x+e,s.orbit.position.y+t),s.dispatchEvent(J))},this.setPosition=function(e,t){if(!isNaN(e)&&!isNaN(t)){d==h&&s.dispatchEvent(k);var n=e-s.panBounds.center.x,i=t-s.panBounds.center.y,r=Math.sqrt(n*n+i*i);if(O&&r>s.panBounds.radius){var o=Math.atan2(i,n),a={x:Math.cos(o)*s.panBounds.radius+s.panBounds.center.x,y:Math.sin(o)*s.panBounds.radius+s.panBounds.center.y};s.orbit.position.x=a.x,s.orbit.position.y=a.y}else s.orbit.position.x=e,s.orbit.position.y=t;s.dispatchEvent(J),s.dispatchEvent(I),d==h&&s.dispatchEvent(D)}},this.setRotation=function(e){if(!isNaN(e)){d==h&&s.dispatchEvent(B);var t=e%o;t!==s.orbit.rotation.z&&(s.orbit.rotation.z=t,s.dispatchEvent($)),s.dispatchEvent(I),d==h&&s.dispatchEvent(z)}},this.rotate=function(e){if(!isNaN(e)){d==h&&s.dispatchEvent(B);var t=(s.orbit.rotation.z+e)%o;t!==s.orbit.rotation.z&&(s.orbit.rotation.z=t,s.dispatchEvent($)),s.dispatchEvent(I),d==h&&s.dispatchEvent(z)}},this.setTilt=function(e){if(!isNaN(e)){d==h&&s.dispatchEvent(B);var t=O?Math.max(Math.min(e,s.maxTilt),s.minTilt):e;t!==s.elevation.rotation.x&&(s.elevation.rotation.x=t,s.dispatchEvent(K)),s.dispatchEvent(I),d==h&&s.dispatchEvent(z)}},this.tilt=function(e){if(!isNaN(e)){d==h&&s.dispatchEvent(B);var t=O?Math.max(Math.min(e+s.getTilt(),s.maxTilt),s.minTilt):e+s.getTilt();t!==s.elevation.rotation.x&&(s.elevation.rotation.x=t,s.dispatchEvent(K)),s.dispatchEvent(I),d==h&&s.dispatchEvent(z)}},this.setZoom=function(e){if(!isNaN(e)){d==h&&s.dispatchEvent(F);var t=O?Math.min(Math.max(e,s.getZoomScaledMin()),s.getZoomScaledMax()):e;s.camera.position.z=t,s.dispatchEvent(Q),s.camera.near=t/a,s.camera.far=t*a,s.camera.updateProjectionMatrix(),s.dispatchEvent(I),d==h&&s.dispatchEvent(U)}},this.zoom=function(e){if(!isNaN(e)){d==h&&s.dispatchEvent(F);var t=s.getZoom()-e;s.camera.position.z=O?Math.min(Math.max(t,s.minZoom*s.zoomFactor),s.maxZoom*s.zoomFactor):t,s.dispatchEvent(Q),s.dispatchEvent(I),d==h&&s.dispatchEvent(U)}},this.zoomIn=function(e,t,n){var i=this.getZoom();this.animateCamera({zoom:i/1.5},e,t,n)},this.zoomOut=function(e,t,n){var i=this.getZoom();this.animateCamera({zoom:1.5*i},e,t,n)},this.expandZoomLimits=function(e,t){t||(t=1.2),e*t>s.maxZoom&&(s.maxZoom=Math.min(e*t,s.maxExpandedZoom)),e/t<s.minZoom&&(s.minZoom=Math.max(e/t,s.minExpandedZoom))},this.restrictZoomLimits=function(e,t){t||(t=1.2),e*t>s.initialMaxZoom&&e*t<s.maxZoom&&(s.maxZoom=Math.max(s.getZoom(),e*t)),e/t<s.initialMinZoom&&e/t>s.minZoom&&(s.minZoom=Math.min(s.getZoom(),e/t))},this.getPosition=function(){return{x:s.orbit.position.x,y:s.orbit.position.y,z:s.orbit.position.z}},this.getPedestal=function(){return s.orbit.position.z},Object.defineProperty(this,"setPedestal",{enumerable:!1,value:function(e){"number"==typeof e&&!isNaN(e)&&(s.orbit.position.z=e,i.tryRendering())}}),Object.defineProperty(this,"scrollPercent",{get:function(){var e=this.minPedestal,t=this.maxPedestal,n=this.getPedestal();return n=Math.min(n,t),((n=Math.max(n,e))-e)/(t-e)*100}}),Object.defineProperty(this,"scrolledToTop",{get:function(){return 0===this.maxPedestal||Math.ceil(this.getPedestal())>=this.maxPedestal}}),Object.defineProperty(this,"scrolledToBottom",{get:function(){return 0===this.minPedestal||Math.floor(this.getPedestal())<=this.minPedestal}}),this.getRotation=function(){return s.orbit.rotation.z},this.getTilt=function(){return s.elevation.rotation.x},this.getZoom=function(){return s.camera.position.z},this.isCameraMoving=function(){return d!=h},this.getZoomScaledMin=function(){return s.minZoom*s.zoomFactor},this.getZoomScaledMax=function(){var e=s.minZoom*s.zoomFactor;return Math.max(s.maxZoom,1.5*e)};var te=new Set;function ne(e){e.isPlaying?e.stop():e.end(),te.delete(e)}function ie(e){var t={x:e.clientX,y:e.clientY};s.initialShiftPos=t,s.initialPedestal=s.getPedestal(),s.pedestalScaleFactor=Ud(s.camera.fov,s.canvas.clientHeight,s.getZoom()),s.dispatchEvent(N),s.dispatchEvent(G)}function re(e){e.clientX;var t=e.clientY,n=s.initialPedestal+s.pedestalScaleFactor*(t-s.initialShiftPos.y);O&&(n<s.minPedestal?n=Math.max(n,s.minPedestal):n>s.maxPedestal&&(n=Math.min(n,s.maxPedestal))),n!==s.getPedestal()&&(s.setPedestal(n),ee(n))}function oe(e){var t=0;return void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t}function ae(e){var t=oe(e),n=s.getZoom();return!(t<0&&n==s.getZoomScaledMax()||t>0&&n==s.getZoomScaledMin())}function se(e){if(!1!==s.enabled){if(ye(e),e.preventDefault(),3==d&&s.dispatchEvent(U),e.button===s.mouseButtons.ORBIT){if(!1===s.enableRotate)return;(function(e){v.set(e.clientX,e.clientY),s.dispatchEvent(B),s.dispatchEvent(W)})(e),d=0}else if(e.button===s.mouseButtons.ZOOM){if(!1===s.enableZoom)return;(function(e){q.set(e.clientX,e.clientY),s.dispatchEvent(F),s.dispatchEvent(X)})(e),d=1}else e.button===s.mouseButtons.PAN&&(s.enablePan?(function(){var e=ge(p);b.set(e.x,e.y),_.set(s.orbit.position.x,s.orbit.position.y),s.dispatchEvent(k),s.dispatchEvent(V)}(),d=2):s.enablePedestal&&(ie(e),d=8));d!==h&&(s.canvas.addEventListener("mousemove",le,!1),window.addEventListener("mouseup",ue,!1),window.addEventListener("mouseout",ue,!1))}}function le(e){if(!1!==s.enabled)if(e.preventDefault(),ye(e),0===d){if(!1===s.enableRotate)return;!function(e){y.set(e.clientX,e.clientY),x.subVectors(y,v),s.rotate(-x.x/s.rotateSpeed),s.setTilt(s.getTilt()-x.y/s.rotateSpeed),v.copy(y),s.dispatchEvent(I)}(e)}else if(1===d){if(!1===s.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),S.subVectors(T,q),s.setZoom(S.y*s.zoomSpeed),q.copy(T),s.dispatchEvent(I)}(e)}else if(2===d){if(!1===s.enablePan)return;!function(){var e=ge(p);w.set(e.x,e.y),M.subVectors(w,b),s.setPosition(_.x-M.x,_.y-M.y),s.dispatchEvent(I)}()}else 3===d?(P=!0,d=h):8===d&&re(e)}function ue(){if(!1!==s.enabled){switch(document.removeEventListener("mousemove",le,!1),window.removeEventListener("mouseup",ue,!1),window.removeEventListener("mouseout",ue,!1),d){case 2:s.dispatchEvent(s.CAMERA_EVENTS.PAN_END_EVENT);break;case 1:s.dispatchEvent(s.CAMERA_EVENTS.ZOOM_END_EVENT);break;case 0:s.dispatchEvent(s.CAMERA_EVENTS.ROTATE_END_EVENT);break;case 8:s.dispatchEvent(s.CAMERA_EVENTS.PEDESTAL_END_EVENT)}d=h}}this.cancelAnimation=function(){var e=Array.from(te);ne(e[e.length-1])},this.animateCamera=function(e,t,n,r,o){var a=g({mode:Ox},o),l={},u={},c=s.getPosition();if(null!=e.position&&(void 0!==e.position.x&&(l.x=c.x,u.x=e.position.x),void 0!==e.position.y&&(l.y=c.y,u.y=e.position.y),void 0!==e.position.z&&(l.z=c.z,u.z=e.position.z)),void 0!==e.zoom&&(l.zoom=O?Math.min(Math.max(s.getZoom(),s.getZoomScaledMin()),s.getZoomScaledMax()):s.getZoom(),s.viewState!==dx&&O?u.zoom=Math.min(Math.max(e.zoom,s.getZoomScaledMin()),s.getZoomScaledMax()):u.zoom=e.zoom),void 0!==e.rotation){l.rotation=s.getRotation();var h=e.rotation%(2*Math.PI);Math.abs(h-l.rotation)>Math.PI?u.rotation=-(2*Math.PI-h):u.rotation=h}void 0!==e.tilt&&(l.tilt=s.getTilt(),s.viewState!==dx&&O?u.tilt=Math.max(Math.min(e.tilt,s.maxTilt),s.minTilt):u.tilt=e.tilt);var p=new Ax.default.Tween(l).to(u,A.env.TESTING?0:t).onUpdate((function(e){s.setMulti({x:e.x,y:e.y,z:e.z},e.zoom,e.rotation,e.tilt)})).onComplete((function(){r&&r(),ne(p)})).onStart((function(){7!=d&&(d=7,s.dispatchEvent(j)),s.dispatchEvent(I)})),f=Array.from(te),m=f[f.length-1],v=!1;return null!=m&&(a.mode===Lx?(v=!0,m.chain(p)):(ne(m),m=null)),te.add(p),n?p.easing(n):p.easing(Ax.default.Easing.Quadratic.In),!e.doNotAutoStart&&!v&&(p.start(),i.tryRendering()),p._mMapAnimation=!0,p},this.setMulti=function(e,t,n,i){d==h&&s.dispatchEvent(j);var r=!1;if(null!=e&&(void 0!==e.x&&!isNaN(e.x)&&(s.orbit.position.x=e.x,r=!0),void 0!==e.y&&!isNaN(e.y)&&(s.orbit.position.y=e.y,r=!0),void 0!==e.z&&!isNaN(e.z)&&this.setPedestal(e.z)),r&&s.dispatchEvent(J),void 0!==t&&!isNaN(t)){var o=O?Math.min(Math.max(t,s.getZoomScaledMin()),s.getZoomScaledMax()):t;s.camera.position.z=o,s.dispatchEvent(Q),s.viewState===dx?t>Cx&&(s.camera.near=t-Cx,s.camera.far=t+Cx):(s.camera.near=t/a,s.camera.far=t*a),s.camera.updateProjectionMatrix()}if(void 0!==n&&!isNaN(n)&&n!==s.orbit.rotation.z&&(s.orbit.rotation.z=n,s.dispatchEvent($)),void 0!==i&&!isNaN(i)){var l=O?Math.max(Math.min(i,s.maxTilt),s.minTilt):i;l!==s.elevation.rotation.x&&(s.elevation.rotation.x=l,s.dispatchEvent(K))}s.dispatchEvent(I),d==h&&s.dispatchEvent(H)},this.getProjectionScaleFactor=Ud,this.postRender=function(){(2==d||6==d)&&(u.setFromCamera(p,e),(r=u.intersectObject(l,!1)[0])&&(b.set(r.point.x,r.point.y),_.set(s.orbit.position.x,s.orbit.position.y))),3==d&&P&&(P=!1,c=s.getZoom(),E=ge(p),_.set(s.orbit.position.x,s.orbit.position.y)),7==d&&0==Ax.default.getAll().some((function(e){return e._mMapAnimation}))&&(d=h,s.dispatchEvent(H))};var ce=null;function he(e){!1===s.enabled||!1===s.enableZoom||d!==h&&3!==d||(e.preventDefault(),e.stopPropagation(),ye(e),ae(e)&&(L=C.getElapsedTime(),s.dispatchUserZoomEvent()),3!=d&&ae(e)&&(s.canvas.addEventListener("mousemove",le,!1),d=3,c=s.getZoom(),E=ge(p),_.set(s.orbit.position.x,s.orbit.position.y),s.dispatchEvent(F)),null!=ce&&clearTimeout(ce),ce=setTimeout((function(){s.dispatchEvent(U)}),50),function(e){if(!ae(e))return L>0&&s.dispatchEvent(U),L=0,void(d=h);var t=s.getZoom(),n=t-oe(e)*t/1e4*s.zoomSpeed;s.setZoom(n);var i=n/c;M.subVectors(E,_).multiplyScalar(1-i),s.setPosition(_.x+M.x,_.y+M.y),s.dispatchEvent(I)}(e))}function de(e){if(!1!==s.enabled)switch(function(e){var t=s.canvas;m.offsetLeft=t.getBoundingClientRect().left,m.offsetTop=t.getBoundingClientRect().top}(),xe(e),e.touches.length){case 1:s.enablePedestal?(function(e){ie(e.touches[0])}(e),d=9):s.enableRotate&&(function(e){var t=ge(e.x?e:f[0]);b.set(t.x,t.y),_.set(s.orbit.position.x,s.orbit.position.y),s.dispatchEvent(V),s.dispatchEvent(k)}(e),d=6);break;case 2:if(!1===s.enableZoom)return;(function(){s.touchInputs=new ux(f[0],f[1]);var e=f[0].x-f[1].x,t=f[0].y-f[1].y;c=s.getZoom();var n={x:f[0].x-e/2,y:f[0].y-t/2};E=ge(n),s.orbit.updateMatrixWorld(),s.touchAnchor1=new ox(f[0],s.camera,l),s.touchAnchor2=new ox(f[1],s.camera,l),_.set(s.orbit.position.x,s.orbit.position.y),s.dispatchEvent(X),s.dispatchEvent(j)})(),d=5;break;case 3:if(!1===s.enablePan)return;(function(e){v.set(e.touches[1].clientX,e.touches[1].clientY),s.dispatchEvent(Z),s.dispatchEvent(B)})(e),d=4;break;default:d=h}}function pe(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),xe(e),e.touches.length){case 3:if(!1===s.enableRotate||4!==d)return;!function(e){y.set(e.touches[1].clientX,e.touches[1].clientY),x.subVectors(y,v),s.setTilt(s.getTilt()-x.y/s.rotateSpeed),v.copy(y)}(e);break;case 2:if(!1===s.enableZoom||5!==d)return;!function(){s.touchInputs.update(f[0],f[1]);var e=s.touchInputs.first,t=s.touchInputs.second;s.touchAnchor1.viewCoordinate={x:e.x,y:e.y},s.touchAnchor2.viewCoordinate={x:t.x,y:t.y};var n=function(e,t){s.orbit.updateMatrixWorld(),s.camera.updateProjectionMatrix();var n=s.camera.projectionMatrix.clone(),i=e.worldCoordinate,r=t.worldCoordinate,o=e.reUnproject(),a=t.reUnproject();if(!o||!a)return null;var l=e.viewCoordinate,u=t.viewCoordinate,c=r.x-i.x,h=r.y-i.y,d=Math.atan2(h,c),p=a.x-o.x,f=a.y-o.y,m=function(e,t){return(t-e+Math.PI)%(2*Math.PI)+2*Math.PI%(2*Math.PI)-Math.PI}(d,Math.atan2(f,p)),v=new tn;v.makeRotationZ(-m);var g=v.clone();g.multiply(e.snapHolderMatrix);var y=function(e,t,n){return e.elements[4*(t-1)+n-1]},x=y(n,1,1)*y(g,1,1)-l.x*y(n,3,4)*y(g,3,1),b=y(n,1,1)*y(g,1,2)-l.x*y(n,3,4)*y(g,3,2),_=y(n,1,1)*y(g,1,3)-l.x*y(n,3,4)*y(g,3,3),w=i.x*x+i.y*b+i.z*_,M=y(n,2,2)*y(g,2,1)-l.y*y(n,3,4)*y(g,3,1),E=y(n,2,2)*y(g,2,2)-l.y*y(n,3,4)*y(g,3,2),q=y(n,2,2)*y(g,2,3)-l.y*y(n,3,4)*y(g,3,3),T=i.x*M+i.y*E+i.z*q,S=y(n,1,1)*y(g,1,1)-u.x*y(n,3,4)*y(g,3,1),P=y(n,1,1)*y(g,1,2)-u.x*y(n,3,4)*y(g,3,2),A=y(n,1,1)*y(g,1,3)-u.x*y(n,3,4)*y(g,3,3),C=r.x*S+r.y*P+r.z*A,L=y(n,2,2)*y(g,2,1)-u.y*y(n,3,4)*y(g,3,1),O=y(n,2,2)*y(g,2,2)-u.y*y(n,3,4)*y(g,3,2),I=y(n,2,2)*y(g,2,3)-u.y*y(n,3,4)*y(g,3,3),k=r.x*L+r.y*O+r.z*I,N=Math.abs(S-x),R=Math.abs(P-b),D=Math.abs(A-_),B=Math.abs(S-M),z=Math.abs(P-E),F=Math.abs(A-q),U=Math.abs(L-x),j=Math.abs(O-b),H=Math.abs(I-_),V=Math.abs(L-M),G=Math.abs(O-E),W=Math.abs(I-q);Math.min(N+R+D,B+z+F)<Math.min(U+j+H,V+G+W)&&(S=L,P=O,A=I,C=k);var X=M*_-x*q,Y=E*_-b*q,Z=T*_-w*q,J=S*q-M*A,Q=P*q-E*A,K=C*q-T*A,$=(K*Y-Z*Q)/(J*Y-X*Q),ee=(K*X-Z*J)/(Q*X-Y*J),te=E*x-b*M,ne=P*M-E*S,ie=((C*M-T*S)*te-(T*x-w*M)*ne)/((A*M-q*S)*te-(q*x-_*M)*ne),re=g.clone();return re.elements[12]=$,re.elements[13]=ee,re.elements[14]=ie,ie>0?re:null}(s.touchAnchor1,s.touchAnchor2);n&&function(e){s.orbit.updateMatrixWorld();var t=new on;t.setFromRotationMatrix(e,"ZYX");var n=e.elements[14]/Math.cos(t.x),i=t.z,r=new Xt(0,0,1);r.applyEuler(t),r.setLength(n);var o=new Xt;o.setFromMatrixPosition(e),o.sub(r),s.setPosition(o.x,o.y),s.setZoom(n),s.setRotation(i)}(n),s.orbit.updateMatrixWorld(),s.touchAnchor1.updateAnchorState(s.camera,e),s.touchAnchor2.updateAnchorState(s.camera,t)}();break;case 1:s.enablePedestal&&9===d?function(e){re(e.touches[0])}(e):s.enablePan&&6===d&&function(e){var t=ge(e.x?e:f[0]);w.set(t.x,t.y),M.subVectors(w,b),s.setPosition(_.x-M.x,_.y-M.y),s.dispatchEvent(I)}(e);break;default:d=h}}function fe(e){if(!1!==s.enabled){switch(d){case 2:case 6:case 4:s.dispatchEvent(s.CAMERA_EVENTS.PAN_END_EVENT);break;case 1:case 5:s.dispatchEvent(s.CAMERA_EVENTS.ZOOM_END_EVENT);break;case 0:s.dispatchEvent(s.CAMERA_EVENTS.ROTATE_END_EVENT);break;case 8:case 9:s.dispatchEvent(s.CAMERA_EVENTS.PEDESTAL_END_EVENT)}d=h}}function me(e){e.preventDefault()}function ve(e,t){return{x:t.clientX-m.offsetLeft,y:t.clientY-m.offsetTop}}function ge(t){u.setFromCamera(t,e);var n=u.intersectObject(l,!1)[0];return n?n.point:new Xt}function ye(e){var t=function(e,t){return{x:t.offsetX,y:t.offsetY}}(s.canvas,e);return p.x=t.x/s.canvas.width*i.resolutionScale*2-1,p.y=-t.y/s.canvas.height*i.resolutionScale*2+1,p}function xe(e){f=[];for(var t=0,n=e.touches.length;t<n;t++){var r=e.touches[t],o=ve(s.canvas,r);f.push(new Nt(o.x/s.canvas.width*i.resolutionScale*2-1,-o.y/s.canvas.height*i.resolutionScale*2+1))}p=f[0]}this.update=function(){Ax.default.update(),L>0&&3==d&&C.getElapsedTime()-L>.2&&(L=0,d=h,s.dispatchEvent(U),s.canvas.removeEventListener("mousemove",le,!1))};var be=!1;this.dispatchUserZoomDebounced=Fd((function(){be=!1}),250),this.dispatchUserZoomEvent=function(){be||(s.dispatchEvent(Y),be=!0),s.dispatchUserZoomDebounced()},this.dispose=function(){s.canvas.removeEventListener("contextmenu",me,!1),s.canvas.removeEventListener("mousedown",se,!1),s.canvas.removeEventListener("mousewheel",he,!1),s.canvas.removeEventListener("MozMousePixelScroll",he,!1),s.canvas.removeEventListener("touchstart",de,!1),s.canvas.removeEventListener("touchend",fe,!1),s.canvas.removeEventListener("touchmove",pe,!1),s.canvas.removeEventListener("mousemove",le,!1),window.removeEventListener("mouseup",ue,!1),window.removeEventListener("mouseout",ue,!1),n.remove(l)},this.canvas.addEventListener("contextmenu",me,!1),this.canvas.addEventListener("mousedown",se,!1),this.canvas.addEventListener("mousewheel",he,!1),this.canvas.addEventListener("MozMousePixelScroll",he,!1),this.canvas.addEventListener("touchstart",de,!1),this.canvas.addEventListener("touchend",fe,!1),this.canvas.addEventListener("touchmove",pe,!1)};O();var kx="varying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n\n",Nx="varying vec2 vUv;\nuniform sampler2D staticSceneColorTexture;\nuniform sampler2D staticSceneDepthTexture;\nuniform sampler2D animatedSceneColorTexture;\nuniform sampler2D animatedSceneDepthTexture;\nuniform sampler2D alwaysOnTopSceneColorTexture;\n\n// Perform alpha blending between two colors with non-premultiplied\n// alpha, and return their non-premultiplied composite.\n//\n// This corresponds to the OVER porter-duff operation, aka, standard alpha\n// blending as implemented in most image editors.\nvec4 alphaBlend(vec4 background, vec4 foreground) {\n\tvec3 resultColor = (\n\t\tforeground.rgb * foreground.a +\n\t\tbackground.rgb * background.a * (1.0 - foreground.a)\n\t);\n\tfloat resultAlpha = foreground.a + background.a * (1.0 - foreground.a);\n\treturn vec4(resultColor / resultAlpha, resultAlpha);\n}\n\n// Assumes that the foreground (src) color is premultiplied with its alpha.\n// This corresponds to GL_ONE source factor and GL_ONE_MINUS_SRC_ALPHA for destination factor.\nvec4 alphaBlendPremultipliedAlpha(vec4 background, vec4 foreground) {\n\treturn foreground + (background * (1.0 - foreground.a));\n}\n\nvoid main() {\n\tfloat staticDepth = texture2D(staticSceneDepthTexture, vUv).r;\n\tfloat animatedDepth = texture2D(animatedSceneDepthTexture, vUv).r;\n\n\tvec4 staticColor = texture2D(staticSceneColorTexture, vUv).rgba;\n\tvec4 animatedColor = texture2D(animatedSceneColorTexture, vUv).rgba;\n\n\tif (staticDepth < animatedDepth) {\n\t\t// 19/06/10 Terence Dickson\n\t\t// Spoiler alert! This is to help prepare for CE-1352, where alpha\n\t\t// may be partial instead of zero. Not implementing that as part of\n\t\t// this PR, however.\n\t\tanimatedColor.a *= 0.0;\n\t}\n\t\n\tvec4 lowerColor = alphaBlend(staticColor, animatedColor);\n\tvec4 alwaysOnTopColor = texture2D(alwaysOnTopSceneColorTexture, vUv).rgba;\n\n\tgl_FragColor = alphaBlendPremultipliedAlpha(lowerColor, alwaysOnTopColor);\n}\n",Rx=((0,L.c)(Ne()),function(){function e(t){var n=this;b(this,e),t.multiBufferRendering=t.multiBufferRendering||!1,this.contextLost=!1,this.implementation=t.multiBufferRendering?new Bx(t):new Dx(t),this.onWebGLContextCreationError=t.onWebGLContextCreationError,this.onWebGLContextLost=t.onWebGLContextLost,this.onWebGLContextRestored=t.onWebGLContextRestored,this.webGLContextCreationErrorListener=this.domElement().addEventListener("webglcontextcreationerror",(function(e){return n.reportWebGlContextCreationError(e)})),this.webGLContextLostListener=this.domElement().addEventListener("webglcontextlost",(function(e){return n.reportWebGlContextLost(e)})),this.webGLContextRestoredListener=this.domElement().addEventListener("webglcontextrestored",(function(e){return n.reportWebGLContextRestored(e)}));var i=t.backgroundColor;null==i&&(i=new hi(16777215));var r=t.backgroundAlpha;null==r&&(r=1),this.shouldConsiderAlpha=t.alpha||!1,this.antialias=t.antialias||!1,this.setBackgroundColor(i,r)}return x(e,[{key:"destroy",value:function(){this.domElement().removeEventListener("webglcontextcreationerror",this.webGLContextCreationErrorListener),this.domElement().removeEventListener("webglcontextlost",this.webGLContextLostListener),this.domElement().removeEventListener("webglcontextrestored",this.webGLContextRestoredListener),this.implementation.destroy()}},{key:"render",value:function(e,t,n,i){this.implementation.render(e,t,n,i)}},{key:"getMaxAnisotropy",value:function(){return this.implementation.renderer.capabilities.getMaxAnisotropy()}},{key:"getBufferSize",value:function(){return this.implementation.renderer.getSize(new Nt)}},{key:"getContext",value:function(){return this.implementation.renderer.getContext()}},{key:"preloadTexture",value:function(e){this.implementation.renderer.initTexture(e)}},{key:"setBufferSize",value:function(e,t){this.implementation.setBufferSize(e,t)}},{key:"backgroundColor",get:function(){return this.implementation.backgroundColor}},{key:"backgroundAlpha",get:function(){return this.implementation.backgroundAlpha}},{key:"setBackgroundColor",value:function(e,t){this.shouldConsiderAlpha||(t=1),t=(t=void 0!==t?+t:1)>=0&&t<=1?t:1,this.implementation.setBackgroundColor(e,t)}},{key:"setMapboxOutdoorContext",value:function(e){this.implementation.setMapboxOutdoorContext(e)}},{key:"domElement",value:function(){return this.implementation.renderer.domElement}},{key:"isAvailable",value:function(){return null!=this.implementation.renderer&&!this.contextLost}},{key:"disposeOfRenderLists",value:function(){this.implementation.renderer.renderLists.dispose()}},{key:"reportWebGlContextCreationError",value:function(e){this.onWebGLContextCreationError&&this.onWebGLContextCreationError(e)}},{key:"reportWebGlContextLost",value:function(e){e.preventDefault(),this.onWebGLContextLost&&this.onWebGLContextLost(e),this.contextLost=!0}},{key:"reportWebGLContextRestored",value:function(){this.onWebGLContextRestored&&this.onWebGLContextRestored(),this.contextLost=!1}}]),e}()),Dx=function(){function e(t){b(this,e);try{this.renderer=new Ia({alpha:t.alpha||!1,antialias:t.antialias,powerPreference:"high-performance",preserveDrawingBuffer:!0})}catch(n){t.onWebGLRendererError&&t.onWebGLRendererError(n)}this.backgroundColor=new hi,this.backgroundAlpha=1,this.mapboxOutdoorContext=null}return x(e,[{key:"destroy",value:function(){this.renderer.dispose()}},{key:"render",value:function(e,t,n,i){i.layers.enable(_f.STATIC),i.layers.enable(_f.ANIMATED),i.layers.enable(_f.ALWAYS_ON_TOP),this.renderer.autoClear=!1,this.renderer.setClearColor(this.backgroundColor,this.backgroundAlpha),this.renderer.setRenderTarget(t),this.renderer.clear(),this.renderer.render(n,i),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new Nt),camera:i}),this.renderer.state.reset())}},{key:"setBufferSize",value:function(e,t){this.renderer.setSize(e,t,!1)}},{key:"setBackgroundColor",value:function(e,t){this.backgroundColor=e,this.backgroundAlpha=t}},{key:"setMapboxOutdoorContext",value:function(e){this.mapboxOutdoorContext=e}}]),e}(),Bx=function(){function e(t){b(this,e);try{this.renderer=new Ia({alpha:t.alpha||!1,antialias:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0})}catch(n){t.onWebGLRendererError&&t.onWebGLRendererError(n)}this.backgroundColor=new hi,this.backgroundAlpha=1,this.mapboxOutdoorContext=null,this.staticSceneRenderTarget=new jt(this.renderer.width,this.renderer.height),this.staticSceneRenderTarget.texture.format=ft,this.staticSceneRenderTarget.texture.minFilter=nt,this.staticSceneRenderTarget.texture.magFilter=nt,this.staticSceneRenderTarget.texture.generateMipmaps=!1,this.staticSceneRenderTarget.stencilBuffer=!0,this.staticSceneRenderTarget.depthBuffer=!0,this.staticSceneRenderTarget.depthTexture=new Ns,this.staticSceneRenderTarget.depthTexture.type=ut,this.staticSceneRenderTarget.depthTexture.format=vt,this.animatedSceneRenderTarget=new jt(this.renderer.width,this.renderer.height),this.animatedSceneRenderTarget.texture.format=ft,this.animatedSceneRenderTarget.stencilBuffer=!0,this.animatedSceneRenderTarget.texture.minFilter=nt,this.animatedSceneRenderTarget.texture.magFilter=nt,this.animatedSceneRenderTarget.texture.generateMipmaps=!1,this.animatedSceneRenderTarget.stencilBuffer=!0,this.animatedSceneRenderTarget.depthBuffer=!0,this.animatedSceneRenderTarget.depthTexture=new Ns,this.animatedSceneRenderTarget.depthTexture.type=ut,this.animatedSceneRenderTarget.depthTexture.format=vt,this.alwaysOnTopSceneRenderTarget=new jt(this.renderer.width,this.renderer.height),this.alwaysOnTopSceneRenderTarget.texture.format=ft,this.alwaysOnTopSceneRenderTarget.texture.minFilter=nt,this.alwaysOnTopSceneRenderTarget.texture.magFilter=nt,this.alwaysOnTopSceneRenderTarget.texture.generateMipmaps=!1,this.alwaysOnTopSceneRenderTarget.stencilBuffer=!0,this.alwaysOnTopSceneRenderTarget.depthBuffer=!0,this.alwaysOnTopSceneRenderTarget.depthTexture=new Ns,this.alwaysOnTopSceneRenderTarget.depthTexture.type=ut,this.alwaysOnTopSceneRenderTarget.depthTexture.format=vt,this.compositeUniforms={staticSceneColorTexture:{type:"t",value:this.staticSceneRenderTarget.texture},staticSceneDepthTexture:{type:"t",value:this.staticSceneRenderTarget.depthTexture},animatedSceneColorTexture:{type:"t",value:this.animatedSceneRenderTarget.texture},animatedSceneDepthTexture:{type:"t",value:this.animatedSceneRenderTarget.depthTexture},alwaysOnTopSceneColorTexture:{type:"t",value:this.alwaysOnTopSceneRenderTarget.texture}},this.compositeCamera=new dc(-1,1,1,-1,0,1),this.compositeMaterial=new gr({uniforms:this.compositeUniforms,vertexShader:kx,fragmentShader:Nx}),this.compositeFullscreenQuad=new rr(new Lr(2,2),this.compositeMaterial),this.compositeScene=new _n,this.compositeScene.add(this.compositeFullscreenQuad)}return x(e,[{key:"destroy",value:function(){this.staticSceneRenderTarget.dispose(),this.animatedSceneRenderTarget.dispose(),this.alwaysOnTopSceneRenderTarget.dispose(),this.renderer.dispose()}},{key:"renderComposite",value:function(e){this.renderer.setRenderTarget(e),this.renderer.clear(),this.renderer.getContext().depthMask(!1),this.renderer.render(this.compositeScene,this.compositeCamera),this.renderer.getContext().depthMask(!0)}},{key:"renderToAnimatedBuffer",value:function(e,t){t.layers.set(_f.ANIMATED),this.renderer.setClearColor(new hi,0),this.renderer.setRenderTarget(this.animatedSceneRenderTarget),this.renderer.clear(),this.renderer.render(e,t)}},{key:"renderAnimated",value:function(e,t,n){this.renderToAnimatedBuffer(t,n),this.renderComposite(e)}},{key:"renderToAlwaysOnTopBuffer",value:function(e,t){t.layers.set(_f.ALWAYS_ON_TOP),this.renderer.setClearColor(new hi,0),this.renderer.setRenderTarget(this.alwaysOnTopSceneRenderTarget),this.renderer.clear(),this.renderer.render(e,t)}},{key:"renderAlwaysOnTop",value:function(e,t,n){this.renderToAlwaysOnTopBuffer(t,n),this.renderComposite(e)}},{key:"renderAll",value:function(e,t,n){n.layers.set(_f.STATIC),this.renderer.autoClear=!1,this.renderer.setClearColor(this.backgroundColor,this.backgroundAlpha),this.renderer.setRenderTarget(this.staticSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,n),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new Nt),camera:n,renderTarget:this.staticSceneRenderTarget}),this.renderer.state.reset()),this.renderToAnimatedBuffer(t,n),this.renderToAlwaysOnTopBuffer(t,n),this.renderComposite(e)}},{key:"render",value:function(e,t,n,i){e===gf.ANIMATED?this.renderAnimated(t,n,i):e===gf.ALWAYS_ON_TOP?this.renderAlwaysOnTop(t,n,i):e===gf.ALL?this.renderAll(t,n,i):console.error("Renderer.render called with invalid renderTask")}},{key:"setBufferSize",value:function(e,t){this.renderer.setSize(e,t,!1),this.staticSceneRenderTarget.setSize(e,t),this.animatedSceneRenderTarget.setSize(e,t),this.alwaysOnTopSceneRenderTarget.setSize(e,t)}},{key:"setBackgroundColor",value:function(e,t){this.backgroundColor=e,this.backgroundAlpha=t}},{key:"setMapboxOutdoorContext",value:function(e){this.mapboxOutdoorContext=e}}]),e}();O();var zx=5,Fx=4,Ux=3,jx=2,Hx=1,Vx=0,Gx=5,Wx=4,Xx=3,Yx=2,Zx=1,Jx=0,Qx=-1,Kx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this._callback=t.callback,this._frameCount=null!=t.frameCount?t.frameCount:1,this._ordering=null!=t.ordering?t.ordering:0,this._supersededBy=null!=t.supersededBy?new Set(t.supersededBy):new Set,this.name=t.name,this.userdata=t.userdata,this._remainingFrameCount=this._frameCount,this._lastFrameTime=0}return x(e,[{key:"getLastFrameTime",value:function(){return this._lastFrameTime}}]),e}(),$x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b(this,e),null!=t.group&&null!=t.priority)throw new Error("cannot specify task priority individually within group");if(null!=t.group&&null!=t.postponeOnAdd)throw new Error("cannot specify task postpone individually within group");this._callback=t.callback,this._group=null!=t.group?t.group:null,this._priority=null!=t.priority?t.priority:0,this._postponed=null!=t.postponeOnAdd&&t.postponeOnAdd,this.name=t.name,this.userdata=t.userdata,this._complete=!1,this._scheduled=!1,this._cancelled=!1,this._lastFrameTime=0}return x(e,[{key:"isComplete",value:function(){return this._complete}},{key:"getLastFrameTime",value:function(){return this._lastFrameTime}}]),e}(),eb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this._onComplete=null!=t.onComplete?t.onComplete:function(){},this._priority=null!=t.priority?t.priority:0,this._postponed=null!=t.postponeOnAdd&&t.postponeOnAdd,this.name=t.name,this.userdata=t.userdata,this._tasks=new Set,this._scheduledTasks=new Set,this._scheduled=!1,this._cancelled=!1}return x(e,[{key:"isComplete",value:function(){return 0===this._scheduledTasks.size}},{key:"getTasks",value:function(){return Array.from(this._tasks.values())}},{key:"clear",value:function(){this._tasks.clear(),this._scheduledTasks.clear()}},{key:"_popTask",value:function(){var e,t=(0,C.Z)(this._scheduledTasks);try{for(t.s();!(e=t.n()).done;){var n=e.value;return this._scheduledTasks.delete(n),n}}catch(i){t.e(i)}finally{t.f()}}}]),e}(),tb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this._maxMillisecondsPerFrame=null!=t.maxMillisecondsPerFrame?t.maxMillisecondsPerFrame:32,this._time=null}return x(e,[{key:"beginFrame",value:function(){this._time=performance.now()+this._maxMillisecondsPerFrame}},{key:"hasTimeRemaining",value:function(){return performance.now()<=this._time}}]),e}(),nb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this._timer=null!=t.timer?t.timer:new tb,this._performance=null!=t.performance&&t.performance,this._scheduledUpdatesByOrdering=new ib,this._scheduledTasksByPriority=new ib,this._postponedTasks=new Set,this._requestAnimationFrameHandle=null,this._updatesToRunThisFrame=[],this._lastFrameTime=0,this._updatesRunLastFrame=new Set,this.update=this.update.bind(this)}return x(e,[{key:"clear",value:function(){var e,t=(0,C.Z)(this._scheduledTasksByPriority.values());try{for(t.s();!(e=t.n()).done;){e.value._cancelled=!0}}catch(r){t.e(r)}finally{t.f()}var n,i=(0,C.Z)(this._postponedTasks.values());try{for(i.s();!(n=i.n()).done;){n.value._cancelled=!0}}catch(r){i.e(r)}finally{i.f()}this._scheduledUpdatesByOrdering=new ib,this._scheduledTasksByPriority=new ib,this._postponedTasks=new Set,this._lastFrameTime=0,this._updatesRunLastFrame.clear()}},{key:"destroy",value:function(){this.clear()}},{key:"requestAnimationFrame",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null==this._requestAnimationFrameHandle&&(this._requestAnimationFrameHandle=requestAnimationFrame(this.update))}))},{key:"update",value:function(e){var t;this._timer.beginFrame(),this._performance&&(t=performance.now());for(var n=!1,i=this._scheduledUpdatesByOrdering.keys(),r=i.length-1;r>=0;--r){var o,a=i[r],s=(0,C.Z)(this._scheduledUpdatesByOrdering.get(a).values());try{for(s.s();!(o=s.n()).done;){var l=o.value;this._updatesToRunThisFrame.push(l),n&&console.log("update scheduled to run this frame",l.name)}}catch(M){s.e(M)}finally{s.f()}}var u,c=(0,C.Z)(this._updatesToRunThisFrame);try{for(c.s();!(u=c.n()).done;){var h=u.value;--h._remainingFrameCount,h._remainingFrameCount<=0&&this._scheduledUpdatesByOrdering.delete(h._ordering,h),h._superseded=!1;var d,p=(0,C.Z)(this._updatesToRunThisFrame);try{for(p.s();!(d=p.n()).done;){var f=d.value;h._supersededBy.has(f)&&(h._superseded=!0,n&&console.log("update superseded",h.name,f.name))}}catch(M){p.e(M)}finally{p.f()}}}catch(M){c.e(M)}finally{c.f()}for(var m=0;m<this._updatesToRunThisFrame.length;++m)this._updatesToRunThisFrame[m]._superseded&&(this._updatesToRunThisFrame.splice(m,1),--m);var v,g=(0,C.Z)(this._updatesToRunThisFrame);try{for(g.s();!(v=g.n()).done;){var y=v.value,x=void 0;this._performance&&(x=performance.now()),y._callback(e),this._performance&&(y._lastFrameTime=performance.now()-x),n&&console.log("update completed",y.name)}}catch(M){g.e(M)}finally{g.f()}this._updatesRunLastFrame.clear();var b,_=(0,C.Z)(this._updatesToRunThisFrame);try{for(_.s();!(b=_.n()).done;){var w=b.value;this._updatesRunLastFrame.add(w)}}catch(M){_.e(M)}finally{_.f()}if(this._updatesToRunThisFrame.splice(0,this._updatesToRunThisFrame.length),this._scheduledTasksByPriority.size>0)do{this._executeOneTask(e)}while(this._timer.hasTimeRemaining()&&this._scheduledTasksByPriority.size>0);this._performance&&(this._lastFrameTime=performance.now()-t),this._requestAnimationFrameHandle=null,(this._scheduledUpdatesByOrdering.size>0||this._scheduledTasksByPriority.size>0)&&this.requestAnimationFrame()}},{key:"flushTasks",value:function(){for(;this._scheduledTasksByPriority.size>0;)this._executeOneTask(performance.now())}},{key:"getLastFrameTime",value:function(){return this._lastFrameTime}},{key:"getUpdatesRunLastFrame",value:function(){return this._updatesRunLastFrame}},{key:"_executeOneTask",value:function(e){var t,n=this._scheduledTasksByPriority.popFromMaxKey(),i=null;console.assert(void 0!==n),Object.getPrototypeOf(n)===eb.prototype&&(n=(i=n)._popTask()),console.assert(void 0!==n),console.assert(Object.getPrototypeOf(n)===$x.prototype),this._performance&&(t=performance.now()),n._callback(e),n._complete=!0,this._performance&&(n._lastFrameTime=performance.now()-t),null!=i&&(i.isComplete()?(i.clear(),i._onComplete()):this._scheduledTasksByPriority.insert(i._priority,i))}},{key:"scheduleUpdate",value:function(e){e._remainingFrameCount=e._frameCount,this._scheduledUpdatesByOrdering.insert(e._ordering,e),this.requestAnimationFrame()}},{key:"scheduleTask",value:function(e){if(Object.getPrototypeOf(e)===eb)throw new Error("frame task groups are automatically scheduled when a task is added to them and cannot be manually scheduled: ",e.name);if(e._scheduled)throw new Error("cannot schedule already scheduled task: ",e.name);if(e._cancelled)throw new Error("cannot schedule cancelled task: ",e.name);var t=e;null!=e._group&&(e._group._tasks.add(e),e._group._scheduledTasks.add(e),t=e._group),t._postponed?this._postponedTasks.add(t):this._scheduledTasksByPriority.insert(t._priority,t),e._scheduled=!0,t._scheduled=!0,this.requestAnimationFrame()}},{key:"cancelUpdate",value:function(e){this._scheduledUpdatesByOrdering.delete(e._ordering,e)}},{key:"cancelTask",value:function(e){if(!e._scheduled)throw new Error("cannot cancel task that has not been scheduled: "+e.name);if(e._cancelled)throw new Error("cannot cancel task that has already been cancelled: "+e.name);if(null!=e._group){var t=e._group.isComplete();e._group._tasks.delete(e),e._group._scheduledTasks.delete(e),e._group.isComplete()&&(this._scheduledTasksByPriority.delete(e._group._priority,e._group),t||e._group._onComplete())}else this._scheduledTasksByPriority.delete(e._priority,e),this._postponedTasks.delete(e);Object.getPrototypeOf(e)===$x.prototype?e._cancelled=!0:e.clear()}},{key:"postponeTask",value:function(e){if(null!=e._group)throw new Error("cannot postpone individual tasks in group: "+e.name);if(e._cancelled)throw new Error("cannot postpone cancelled task: "+e.name);if(!e._postponed){if(Object.getPrototypeOf(e)===$x.prototype){if(e._complete)return;if(!e._scheduled)throw new Error("cannot postpone task that has not been scheduled: "+e.name)}this._scheduledTasksByPriority.delete(e._priority,e),(Object.getPrototypeOf(e)===$x.prototype||!e.isComplete())&&this._postponedTasks.add(e),e._postponed=!0}}},{key:"resumeTask",value:function(e){if(null!=e._group)throw new Error("cannot resume individual tasks in groups");if(e._cancelled)throw new Error("cannot resume cancelled task");if(e._postponed){if(Object.getPrototypeOf(e)===$x.prototype){if(e._complete)return;if(!e._scheduled)throw new Error("cannot resume unscheduled task")}this._postponedTasks.delete(e),(Object.getPrototypeOf(e)===$x.prototype||!e.isComplete())&&this._scheduledTasksByPriority.insert(e._priority,e),e._postponed=!1,this.requestAnimationFrame()}}},{key:"setTaskPriority",value:function(e,t){if(Object.getPrototypeOf(e)===$x.prototype&&!e._scheduled)throw new Error("task must be scheduled to be reprioritized");this._scheduledTasksByPriority.has(e._priority,e)&&(this._scheduledTasksByPriority.delete(e._priority,e),this._scheduledTasksByPriority.insert(t,e)),e._priority=t}}]),e}(),ib=function(){function e(){b(this,e),this._map=new Map,this._size=0,this._sortedKeys=[]}return x(e,[{key:"has",value:function(e,t){return null!=this._map.get(e)&&this._map.get(e).has(t)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"insert",value:function(e,t){if(console.assert("number"==typeof e&&Number.isFinite(e)),null==this._map.get(e)){this._map.set(e,new Set);for(var n=0;n<=this._sortedKeys.length;++n)if(n===this._sortedKeys.length||e<this._sortedKeys[n]){this._sortedKeys.splice(n,0,e);break}}this._map.get(e).has(t)||(this._map.get(e).add(t),++this._size)}},{key:"delete",value:function(e,t){null!=this._map.get(e)&&this._map.get(e).has(t)&&(this._map.get(e).delete(t),--this._size,0===this._map.get(e).size&&(this._map.delete(e),this._sortedKeys.splice(this._sortedKeys.indexOf(e),1)))}},{key:"pop",value:function(e){if(null!=this._map.get(e)){var t,n,i=(0,C.Z)(this._map.get(e).values());try{for(i.s();!(n=i.n()).done;){t=n.value,this._map.get(e).delete(t),--this._size;break}}catch(r){i.e(r)}finally{i.f()}return 0===this._map.get(e).size&&(this._map.delete(e),this._sortedKeys.splice(this._sortedKeys.indexOf(e),1)),t}}},{key:"popFromMaxKey",value:function(){if(this._sortedKeys.length>0)return this.pop(this._sortedKeys[this._sortedKeys.length-1])}},{key:"values",value:function(){var e,t=this,n=this._map.keys(),i=null,r=(e={},(0,m.Z)(e,Symbol.iterator,(function(){return r})),(0,m.Z)(e,"next",(function(){if(null==i){var e=n.next();if(e.done)return e;i=t._map.get(e.value).values()}for(var r=i.next();r.done;){var o=n.next();if(o.done)return o;r=(i=t._map.get(o.value).values()).next()}return r})),e);return r}},{key:"keys",value:function(){return this._sortedKeys}},{key:"size",get:function(){var e,t=0,n=(0,C.Z)(this._map.values());try{for(n.s();!(e=n.n()).done;){t+=e.value.size}}catch(i){n.e(i)}finally{n.f()}return console.assert(t===this._size),t}}]),e}();O(),O(),O(),O();var rb=2*Math.PI,ob=Math.PI/2,ab=1.5*Math.PI,sb=function(e){var t=e.image,n=e.rotation||0,i=t.position.clone(),r=t.rotation.z,o=n;this.flipIfNeeded=function(e){var i=(n-e+rb)%rb;(i>ob&&i<ab||i<-ob&&i>-ab)&&function(){var e=t.geometry;e.boundingBox||e.computeBoundingBox(),n=(n+Math.PI)%rb,t.rotation.z=t.rotation.z+Math.PI,t.translateX(-2*(e.boundingBox.min.x+(e.boundingBox.max.x-e.boundingBox.min.x)/2)),t.translateY(-2*(e.boundingBox.min.y+(e.boundingBox.max.y-e.boundingBox.min.y)/2))}()},this.reset=function(){t.position.x=i.x,t.position.y=i.y,t.rotation.z=r,n=o}};O(),O();var lb=(0,L.c)(Re());O();var ub=(0,L.c)(De());function cb(e){this.name="JSClipperError",this.message=e,this.stack=(new Error).stack}cb.prototype=Error.prototype,ub.default.Error=function(e){throw new cb(e)};var hb=ub.default;O();var db={glyphs:(P={0:{ha:765,x_min:66,x_max:700,o:"m 700 497 q 683 282 700 377 q 627 121 665 187 q 528 21 589 56 q 382 -14 468 -14 q 242 21 302 -14 q 144 121 183 56 q 86 282 105 187 q 66 497 66 377 q 84 712 66 617 q 139 872 101 807 q 236 972 176 938 q 382 1007 296 1007 q 522 973 463 1007 q 621 873 582 939 q 680 713 661 808 q 700 497 700 618 m 192 497 q 202 319 192 395 q 235 193 212 243 q 293 117 257 142 q 382 92 330 92 q 471 117 434 92 q 531 192 507 142 q 565 318 554 242 q 575 497 575 395 q 565 675 575 599 q 531 801 554 751 q 471 876 507 851 q 382 901 434 901 q 293 876 330 901 q 235 801 257 851 q 202 675 212 751 q 192 497 192 599 z "},1:{ha:765,x_min:121,x_max:482,o:"m 482 0 l 363 0 l 363 619 q 363 682 363 648 q 365 748 363 715 q 367 811 366 781 q 368 864 368 841 q 348 843 357 852 q 330 826 339 834 q 311 809 321 818 q 286 787 300 800 l 186 705 l 121 789 l 380 991 l 482 991 l 482 0 z "},2:{ha:765,x_min:65,x_max:684,o:"m 684 0 l 65 0 l 65 106 l 302 364 q 393 465 353 419 q 461 553 433 510 q 505 641 490 597 q 519 736 519 684 q 508 806 519 776 q 475 858 496 837 q 425 890 454 880 q 359 901 395 901 q 243 875 295 901 q 144 808 191 849 l 75 889 q 134 935 102 913 q 201 972 165 956 q 277 997 237 987 q 361 1006 317 1006 q 478 987 426 1006 q 568 935 531 969 q 624 851 604 901 q 644 741 644 802 q 626 631 644 683 q 577 528 608 578 q 502 427 545 477 q 407 321 458 376 l 216 118 l 216 113 l 684 113 l 684 0 z "},3:{ha:765,x_min:56,x_max:682,o:"m 652 760 q 636 669 652 710 q 592 599 621 629 q 525 550 564 569 q 437 522 486 530 l 437 518 q 620 442 557 503 q 682 282 682 380 q 660 163 682 217 q 593 69 638 109 q 480 8 549 30 q 318 -14 412 -14 q 179 -2 244 -14 q 56 40 113 9 l 56 155 q 183 107 115 124 q 315 90 252 90 q 423 104 378 90 q 498 142 469 117 q 542 204 528 168 q 555 286 555 241 q 537 365 555 332 q 486 419 519 398 q 405 451 453 441 q 297 461 357 461 l 207 461 l 207 564 l 297 564 q 395 577 352 564 q 466 616 437 591 q 510 675 495 641 q 525 751 525 710 q 513 814 525 787 q 478 862 500 842 q 425 891 456 881 q 355 901 393 901 q 228 879 283 901 q 122 819 172 856 l 60 904 q 117 943 85 925 q 186 976 149 962 q 266 998 223 989 q 355 1006 308 1006 q 484 987 429 1006 q 576 936 539 969 q 633 858 614 903 q 652 760 652 813 z "},4:{ha:765,x_min:16,x_max:737,o:"m 737 222 l 593 222 l 593 0 l 473 0 l 473 222 l 16 222 l 16 330 l 465 997 l 593 997 l 593 335 l 737 335 l 737 222 m 473 335 l 473 576 q 474 656 473 614 q 477 738 475 698 q 480 812 478 777 q 482 869 481 846 l 476 869 q 464 839 471 856 q 449 806 457 823 q 431 774 440 789 q 415 747 422 758 l 136 335 l 473 335 z "},5:{ha:765,x_min:89,x_max:688,o:"m 370 608 q 495 590 437 608 q 596 534 553 571 q 663 444 639 498 q 688 318 688 389 q 665 179 688 241 q 596 75 642 117 q 484 9 551 32 q 330 -14 417 -14 q 262 -10 296 -14 q 198 0 229 -7 q 139 16 167 6 q 89 40 111 26 l 89 157 q 141 129 111 141 q 205 109 172 117 q 272 96 238 100 q 334 92 305 92 q 429 104 387 92 q 500 143 471 117 q 545 210 530 170 q 561 304 561 250 q 501 453 561 401 q 328 504 441 504 q 288 502 309 504 q 245 498 267 500 q 204 492 224 495 q 171 486 185 489 l 110 525 l 147 991 l 615 991 l 615 879 l 254 879 l 228 595 q 285 604 250 599 q 370 608 321 608 z "},6:{ha:765,x_min:77,x_max:701,o:"m 77 424 q 84 566 77 495 q 109 701 91 636 q 158 821 127 766 q 237 918 189 877 q 353 982 286 959 q 510 1006 420 1006 q 538 1005 523 1006 q 570 1003 554 1004 q 601 999 586 1001 q 627 993 615 996 l 627 888 q 573 900 603 896 q 514 904 543 904 q 407 889 453 904 q 326 848 360 875 q 270 785 292 822 q 233 704 247 749 q 212 610 218 660 q 203 505 205 559 l 211 505 q 244 551 224 530 q 289 588 263 572 q 347 612 315 603 q 419 621 379 621 q 536 601 484 621 q 625 542 588 581 q 681 447 661 503 q 701 319 701 391 q 680 180 701 242 q 620 76 659 119 q 525 9 581 33 q 400 -14 469 -14 q 273 13 332 -14 q 170 94 214 39 q 102 230 127 148 q 77 424 77 312 m 399 90 q 473 104 439 90 q 531 146 507 118 q 569 217 555 174 q 582 319 582 260 q 571 405 582 367 q 537 469 559 442 q 481 509 515 495 q 403 524 448 524 q 320 508 357 524 q 256 466 282 492 q 215 408 229 441 q 200 343 200 376 q 213 253 200 298 q 250 172 225 208 q 312 113 275 136 q 399 90 349 90 z "},7:{ha:765,x_min:61,x_max:699,o:"m 191 0 l 572 879 l 61 879 l 61 991 l 699 991 l 699 893 l 322 0 l 191 0 z "},8:{ha:765,x_min:72,x_max:694,o:"m 383 1007 q 491 992 440 1007 q 579 947 541 977 q 640 873 618 918 q 663 768 663 828 q 649 686 663 723 q 612 620 635 650 q 555 567 588 591 q 485 525 523 544 q 562 478 524 504 q 629 420 600 452 q 676 348 659 388 q 694 258 694 308 q 672 145 694 196 q 608 60 649 95 q 510 5 567 24 q 383 -14 452 -14 q 251 5 309 -14 q 153 57 193 23 q 93 141 113 92 q 72 253 72 191 q 87 345 72 304 q 128 418 102 385 q 189 475 154 450 q 264 519 224 500 q 201 565 231 541 q 151 621 172 590 q 117 688 130 651 q 104 770 104 725 q 127 873 104 829 q 189 947 150 918 q 278 992 227 977 q 383 1007 328 1007 m 193 252 q 204 185 193 216 q 238 134 215 155 q 296 101 261 113 q 380 89 332 89 q 464 101 428 89 q 525 135 500 113 q 562 188 549 157 q 574 257 574 219 q 561 321 574 292 q 523 374 547 349 q 463 420 498 398 q 386 463 429 441 l 366 472 q 237 379 280 431 q 193 252 193 326 m 382 904 q 268 868 310 904 q 225 764 225 832 q 237 697 225 725 q 270 648 249 669 q 320 609 291 626 q 385 575 350 591 q 446 608 417 590 q 496 648 475 625 q 530 699 517 670 q 542 764 542 727 q 499 868 542 832 q 382 904 456 904 z "},9:{ha:765,x_min:72,x_max:697,o:"m 697 568 q 690 426 697 497 q 665 291 683 355 q 616 171 647 227 q 536 74 585 115 q 421 10 488 33 q 264 -14 354 -14 q 235 -13 251 -14 q 204 -11 220 -12 q 174 -7 189 -9 q 147 -1 159 -5 l 147 104 q 201 92 171 96 q 260 87 231 87 q 410 119 351 87 q 504 206 469 151 q 553 333 538 260 q 571 486 568 406 l 562 486 q 530 441 549 462 q 485 404 511 420 q 427 380 459 389 q 354 371 394 371 q 237 391 290 371 q 149 450 185 411 q 92 544 112 488 q 72 672 72 600 q 93 811 72 749 q 154 917 115 873 q 249 983 193 960 q 374 1006 304 1006 q 501 979 442 1006 q 604 899 560 953 q 672 762 647 844 q 697 568 697 680 m 375 901 q 301 888 334 901 q 243 846 267 874 q 205 774 218 817 q 192 672 192 731 q 203 587 192 625 q 237 523 214 549 q 293 482 259 496 q 371 468 326 468 q 454 484 417 468 q 518 525 492 500 q 559 583 545 551 q 574 648 574 616 q 561 739 574 694 q 524 820 549 784 q 462 879 499 857 q 375 901 425 901 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"!":{ha:374,x_min:100,x_max:272,o:"m 228 281 l 146 281 l 111 991 l 262 991 l 228 281 m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},'"':{ha:558,x_min:90,x_max:468,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 m 468 991 l 440 633 l 363 633 l 335 991 l 468 991 z "},"#":{ha:897,x_min:35,x_max:863,o:"m 667 606 l 624 383 l 814 383 l 814 290 l 606 290 l 550 0 l 450 0 l 507 290 l 310 290 l 254 0 l 157 0 l 210 290 l 35 290 l 35 383 l 228 383 l 272 606 l 86 606 l 86 699 l 289 699 l 345 991 l 444 991 l 389 699 l 587 699 l 644 991 l 742 991 l 685 699 l 863 699 l 863 606 l 667 606 m 328 383 l 525 383 l 568 606 l 371 606 l 328 383 z "},$:{ha:765,x_min:83,x_max:668,o:"m 668 302 q 651 216 668 255 q 603 149 634 178 q 526 102 571 121 q 424 75 481 83 l 424 -81 l 330 -81 l 330 69 q 262 72 296 69 q 195 81 227 75 q 134 96 162 87 q 83 117 105 105 l 83 233 q 135 211 106 222 q 197 191 165 200 q 264 177 230 182 q 330 171 298 171 l 330 465 q 225 508 270 486 q 152 559 181 530 q 109 625 123 588 q 94 713 94 663 q 111 796 94 758 q 158 862 127 833 q 233 908 189 890 q 330 932 277 926 l 330 1054 l 424 1054 l 424 935 q 549 917 492 931 q 652 882 606 903 l 607 783 q 522 814 569 800 q 424 832 474 828 l 424 546 q 529 503 484 525 q 606 452 575 480 q 652 388 637 424 q 668 302 668 351 m 549 302 q 542 343 549 325 q 520 377 535 362 q 482 406 506 393 q 424 431 458 418 l 424 178 q 518 220 487 187 q 549 302 549 254 m 214 711 q 219 668 214 687 q 239 632 225 648 q 275 604 252 616 q 330 579 297 591 l 330 829 q 242 788 270 819 q 214 711 214 758 z "},"%":{ha:1146,x_min:69,x_max:1076,o:"m 170 696 q 194 528 170 584 q 272 472 218 472 q 378 696 378 472 q 272 918 378 918 q 194 863 218 918 q 170 696 170 808 m 478 696 q 466 564 478 623 q 429 466 454 506 q 365 405 404 426 q 272 383 326 383 q 184 405 222 383 q 121 466 146 426 q 82 564 95 506 q 69 696 69 623 q 81 827 69 769 q 118 924 93 884 q 181 985 142 964 q 272 1006 219 1006 q 361 985 323 1006 q 426 924 399 964 q 465 827 452 884 q 478 696 478 769 m 768 298 q 792 131 768 186 q 871 75 817 75 q 977 298 977 75 q 871 521 977 521 q 792 466 817 521 q 768 298 768 410 m 1076 298 q 1064 167 1076 225 q 1027 69 1053 109 q 963 8 1002 29 q 871 -14 924 -14 q 783 8 821 -14 q 719 69 745 29 q 681 167 694 109 q 668 298 668 225 q 680 429 668 372 q 716 527 692 487 q 780 587 741 566 q 871 608 818 608 q 960 587 922 608 q 1024 527 998 566 q 1063 429 1050 487 q 1076 298 1076 372 m 903 991 l 353 0 l 245 0 l 796 991 l 903 991 z "},"&":{ha:975,x_min:74,x_max:953,o:"m 286 790 q 292 745 286 767 q 308 701 297 723 q 337 656 319 679 q 379 608 355 633 q 448 653 419 632 q 496 696 477 674 q 525 741 515 718 q 534 793 534 765 q 526 838 534 817 q 502 873 517 859 q 463 897 486 888 q 412 905 441 905 q 320 875 354 905 q 286 790 286 845 m 378 96 q 450 103 417 96 q 512 125 484 111 q 565 157 541 138 q 611 196 589 175 l 349 472 q 286 428 313 450 q 240 382 259 407 q 212 329 222 358 q 203 262 203 300 q 215 195 203 226 q 249 142 227 164 q 304 108 271 120 q 378 96 336 96 m 74 258 q 87 353 74 311 q 127 428 101 394 q 191 491 153 462 q 277 549 229 520 q 235 599 256 573 q 200 655 215 625 q 175 718 184 684 q 165 790 165 751 q 182 881 165 841 q 231 950 199 922 q 310 992 263 978 q 416 1007 357 1007 q 517 992 473 1007 q 592 950 562 978 q 640 881 623 922 q 656 790 656 841 q 639 710 656 747 q 593 641 622 673 q 528 583 565 610 q 450 532 491 556 l 689 279 q 722 319 707 299 q 748 363 736 340 q 769 412 760 386 q 785 471 778 439 l 909 471 q 885 388 899 426 q 853 317 871 351 q 813 255 836 284 q 765 199 791 227 l 953 0 l 800 0 l 686 117 q 621 62 653 86 q 551 21 588 38 q 473 -4 515 5 q 378 -14 431 -14 q 250 4 307 -14 q 154 57 193 22 q 95 143 115 92 q 74 258 74 193 z "},"'":{ha:314,x_min:90,x_max:224,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 z "},"(":{ha:418,x_min:56,x_max:376,o:"m 56 380 q 68 548 56 465 q 105 708 80 630 q 169 857 130 785 q 260 991 207 928 l 376 991 q 232 704 281 861 q 183 382 183 547 q 196 221 183 301 q 232 64 208 141 q 292 -84 256 -12 q 375 -220 328 -156 l 260 -220 q 169 -89 207 -159 q 105 57 130 -19 q 68 215 80 134 q 56 380 56 296 z "},")":{ha:418,x_min:41,x_max:363,o:"m 363 380 q 351 215 363 296 q 313 57 338 134 q 249 -89 288 -19 q 158 -220 211 -159 l 43 -220 q 125 -84 90 -156 q 186 64 161 -12 q 222 221 210 141 q 235 382 235 301 q 186 704 235 547 q 41 991 137 861 l 158 991 q 249 857 211 928 q 313 708 288 785 q 351 548 338 630 q 363 380 363 465 z "},"*":{ha:765,x_min:56,x_max:708,o:"m 450 1055 l 421 789 l 690 864 l 708 733 l 452 714 l 618 493 l 497 428 l 378 671 l 271 428 l 146 493 l 310 714 l 56 733 l 75 864 l 340 789 l 311 1055 l 450 1055 z "},"+":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 z "},",":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"-":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},".":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},"/":{ha:518,x_min:14,x_max:504,o:"m 504 991 l 135 0 l 14 0 l 383 991 l 504 991 z "},":":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},";":{ha:372,x_min:43,x_max:272,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},"<":{ha:765,x_min:69,x_max:696,o:"m 696 161 l 69 449 l 69 518 l 696 844 l 696 736 l 197 489 l 696 271 l 696 161 z "},"=":{ha:765,x_min:69,x_max:696,o:"m 69 578 l 69 679 l 696 679 l 696 578 l 69 578 m 69 300 l 69 401 l 696 401 l 696 300 l 69 300 z "},">":{ha:765,x_min:69,x_max:696,o:"m 69 271 l 568 489 l 69 736 l 69 844 l 696 518 l 696 449 l 69 161 l 69 271 z "},"?":{ha:591,x_min:25,x_max:546,o:"m 191 281 l 191 306 q 196 376 191 345 q 214 434 201 407 q 250 487 227 461 q 306 542 272 513 q 361 592 338 570 q 399 638 385 615 q 421 689 414 662 q 428 751 428 715 q 418 811 428 784 q 388 857 408 838 q 340 887 369 876 q 273 897 311 897 q 166 880 217 897 q 68 839 115 862 l 25 937 q 144 986 80 966 q 273 1006 208 1006 q 387 988 336 1006 q 473 939 437 971 q 527 859 508 906 q 546 753 546 812 q 537 672 546 707 q 509 606 528 636 q 464 547 491 575 q 400 486 437 518 q 342 433 365 456 q 307 389 320 410 q 290 345 294 368 q 285 293 285 323 l 285 281 l 191 281 m 158 75 q 165 119 158 101 q 183 148 172 137 q 210 164 195 159 q 244 170 226 170 q 278 164 262 170 q 305 148 294 159 q 323 119 317 137 q 330 75 330 101 q 323 32 330 50 q 305 3 317 14 q 278 -14 294 -9 q 244 -20 262 -20 q 210 -14 226 -20 q 183 3 195 -9 q 165 32 172 14 q 158 75 158 50 z "},"@":{ha:1203,x_min:74,x_max:1129,o:"m 1129 496 q 1123 411 1129 454 q 1104 331 1116 369 q 1072 259 1091 292 q 1027 202 1053 227 q 968 164 1001 178 q 896 150 935 150 q 841 160 865 150 q 798 187 816 170 q 769 226 781 204 q 754 272 758 248 l 751 272 q 721 224 739 247 q 679 185 703 202 q 624 159 654 169 q 558 150 594 150 q 466 169 506 150 q 397 222 425 188 q 355 304 370 256 q 340 411 340 353 q 360 536 340 479 q 418 635 380 593 q 509 699 456 676 q 629 722 563 722 q 690 720 660 722 q 749 712 721 717 q 800 702 777 707 q 839 690 823 696 l 823 408 q 822 384 823 393 q 822 370 822 375 q 822 361 822 364 q 822 357 822 359 q 829 298 822 321 q 848 261 836 275 q 874 242 859 248 q 904 237 888 237 q 959 258 935 237 q 999 314 983 279 q 1023 397 1015 349 q 1031 497 1031 444 q 1002 668 1031 593 q 921 795 972 743 q 799 873 869 846 q 644 900 728 900 q 442 862 530 900 q 295 757 355 825 q 205 597 236 690 q 175 395 175 505 q 202 213 175 292 q 280 79 229 134 q 409 -3 332 25 q 586 -31 486 -31 q 668 -26 627 -31 q 746 -13 708 -21 q 817 6 783 -5 q 880 28 851 16 l 880 -68 q 749 -109 822 -94 q 587 -123 675 -123 q 371 -89 466 -123 q 209 12 275 -54 q 109 173 143 78 q 74 390 74 269 q 114 628 74 517 q 228 819 154 738 q 408 945 302 899 q 644 991 513 991 q 839 957 750 991 q 992 859 928 923 q 1093 703 1057 795 q 1129 496 1129 611 m 449 408 q 483 278 449 318 q 575 237 517 237 q 639 253 612 237 q 682 296 665 268 q 708 363 699 324 q 720 449 717 402 l 729 621 q 684 630 710 626 q 629 635 658 635 q 545 615 579 635 q 489 564 511 595 q 458 491 468 532 q 449 408 449 450 z "},A:{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 z "},B:{ha:863,x_min:135,x_max:786,o:"m 135 991 l 406 991 q 558 978 492 991 q 669 936 625 965 q 736 858 713 906 q 758 741 758 810 q 745 662 758 699 q 707 597 732 625 q 645 551 682 570 q 561 526 608 532 l 561 519 q 649 496 608 511 q 720 454 690 481 q 768 387 751 427 q 786 288 786 346 q 764 166 786 220 q 700 76 742 113 q 599 20 659 39 q 464 0 539 0 l 135 0 l 135 991 m 261 571 l 427 571 q 522 581 484 571 q 585 611 561 591 q 619 662 608 631 q 629 732 629 692 q 577 848 629 813 q 412 884 525 884 l 261 884 l 261 571 m 261 465 l 261 107 l 441 107 q 542 121 501 107 q 607 159 582 134 q 642 217 631 183 q 653 293 653 252 q 642 363 653 331 q 605 417 631 395 q 538 453 580 440 q 433 465 496 465 l 261 465 z "},C:{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 z "},D:{ha:950,x_min:135,x_max:865,o:"m 865 505 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},E:{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 z "},F:{ha:682,x_min:135,x_max:650,o:"m 261 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 530 l 624 530 l 624 419 l 261 419 l 261 0 z "},G:{ha:958,x_min:85,x_max:859,o:"m 530 524 l 859 524 l 859 37 q 783 16 821 25 q 705 0 745 6 q 621 -10 665 -7 q 526 -14 577 -14 q 338 22 420 -14 q 199 124 256 58 q 114 284 143 190 q 85 497 85 379 q 117 708 85 614 q 211 868 149 802 q 363 970 273 935 q 570 1006 454 1006 q 714 991 645 1006 q 843 947 783 976 l 794 838 q 742 859 770 849 q 684 877 713 869 q 622 890 654 885 q 559 895 591 895 q 413 867 477 895 q 306 788 349 840 q 241 663 263 736 q 218 496 218 589 q 237 334 218 408 q 296 208 256 261 q 401 126 337 155 q 557 97 466 97 q 611 99 587 97 q 657 103 636 100 q 697 110 678 106 q 733 117 715 113 l 733 412 l 530 412 l 530 524 z "},H:{ha:974,x_min:135,x_max:839,o:"m 839 0 l 713 0 l 713 463 l 261 463 l 261 0 l 135 0 l 135 991 l 261 991 l 261 574 l 713 574 l 713 991 l 839 991 l 839 0 z "},I:{ha:471,x_min:56,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 z "},J:{ha:376,x_min:-125,x_max:252,o:"m -20 -264 q -80 -259 -54 -264 q -125 -248 -106 -255 l -125 -139 q -75 -149 -102 -145 q -18 -153 -49 -153 q 32 -146 7 -153 q 78 -123 58 -140 q 112 -76 99 -106 q 125 0 125 -46 l 125 991 l 252 991 l 252 14 q 232 -110 252 -58 q 176 -196 212 -162 q 91 -247 140 -231 q -20 -264 41 -264 z "},K:{ha:804,x_min:135,x_max:804,o:"m 804 0 l 661 0 l 355 473 l 261 396 l 261 0 l 135 0 l 135 991 l 261 991 l 261 496 l 343 610 l 650 991 l 791 991 l 439 559 l 804 0 z "},L:{ha:682,x_min:135,x_max:650,o:"m 135 0 l 135 991 l 261 991 l 261 113 l 650 113 l 650 0 l 135 0 z "},M:{ha:1208,x_min:135,x_max:1074,o:"m 545 0 l 244 868 l 239 868 q 245 768 243 818 q 250 679 248 726 q 252 593 252 631 l 252 0 l 135 0 l 135 991 l 322 991 l 602 183 l 606 183 l 886 991 l 1074 991 l 1074 0 l 947 0 l 947 602 q 949 682 947 637 q 952 769 950 728 q 957 867 955 817 l 951 867 l 648 0 l 545 0 z "},N:{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 z "},O:{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},P:{ha:800,x_min:135,x_max:729,o:"m 729 701 q 710 583 729 640 q 649 482 692 526 q 536 412 606 438 q 363 386 466 386 l 261 386 l 261 0 l 135 0 l 135 991 l 380 991 q 537 972 471 991 q 646 916 603 953 q 709 825 688 879 q 729 701 729 770 m 261 493 l 349 493 q 459 504 412 493 q 537 539 506 515 q 583 601 568 563 q 599 694 599 640 q 543 837 599 791 q 370 884 488 884 l 261 884 l 261 493 z "},Q:{ha:1029,x_min:85,x_max:945,o:"m 945 497 q 928 332 945 408 q 879 194 911 255 q 799 87 847 132 q 688 17 751 43 q 763 -95 717 -47 q 871 -184 810 -144 l 789 -281 q 660 -164 719 -231 q 567 -11 602 -97 q 542 -13 555 -12 q 515 -14 528 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},R:{ha:819,x_min:135,x_max:803,o:"m 261 410 l 261 0 l 135 0 l 135 991 l 376 991 q 643 922 557 991 q 729 710 729 852 q 712 607 729 651 q 668 531 696 563 q 606 479 641 500 q 533 444 570 458 l 803 0 l 654 0 l 416 410 l 261 410 m 261 517 l 372 517 q 476 529 433 517 q 546 564 519 541 q 586 622 574 587 q 599 704 599 657 q 585 787 599 753 q 543 842 571 821 q 472 874 515 864 q 370 884 429 884 l 261 884 l 261 517 z "},S:{ha:721,x_min:71,x_max:657,o:"m 657 265 q 634 148 657 199 q 567 60 610 96 q 461 5 524 24 q 321 -14 399 -14 q 180 -2 245 -14 q 71 33 115 10 l 71 154 q 123 133 94 143 q 185 114 153 122 q 252 101 218 106 q 321 96 287 96 q 481 136 429 96 q 533 253 533 177 q 523 317 533 290 q 489 367 513 344 q 422 411 464 389 q 318 457 381 432 q 213 509 258 481 q 140 572 169 537 q 97 652 111 608 q 83 754 83 697 q 105 861 83 814 q 166 940 127 907 q 260 989 205 972 q 380 1006 315 1006 q 526 990 461 1006 q 640 951 590 975 l 595 846 q 495 880 551 865 q 379 895 439 895 q 251 856 296 895 q 205 753 205 818 q 216 686 205 714 q 250 635 226 658 q 312 592 273 612 q 408 550 351 572 q 516 500 470 526 q 594 441 563 474 q 641 366 625 409 q 657 265 657 323 z "},T:{ha:721,x_min:14,x_max:707,o:"m 424 0 l 297 0 l 297 880 l 14 880 l 14 991 l 707 991 l 707 880 l 424 880 l 424 0 z "},U:{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 z "},V:{ha:789,x_min:0,x_max:789,o:"m 654 991 l 789 991 l 457 0 l 330 0 l 0 991 l 134 991 l 334 363 q 368 244 353 301 q 393 136 382 186 q 419 244 404 186 q 456 367 435 301 l 654 991 z "},W:{ha:1227,x_min:14,x_max:1214,o:"m 549 991 l 682 991 l 838 411 q 858 335 848 373 q 876 261 867 297 q 891 194 884 226 q 901 136 897 162 q 908 193 904 162 q 918 257 912 223 q 929 325 923 290 q 943 393 936 360 l 1079 991 l 1214 991 l 965 0 l 838 0 l 665 636 q 647 707 656 671 q 631 776 638 744 q 615 848 623 813 q 600 777 608 814 q 585 707 593 745 q 567 632 576 669 l 403 0 l 275 0 l 14 991 l 147 991 l 298 389 q 313 324 307 357 q 326 257 320 290 q 336 193 332 224 q 345 136 341 162 q 353 195 348 161 q 365 264 358 228 q 379 339 372 301 q 396 410 387 376 l 549 991 z "},X:{ha:760,x_min:0,x_max:760,o:"m 760 0 l 616 0 l 376 431 l 127 0 l 0 0 l 307 518 l 21 991 l 155 991 l 380 612 l 607 991 l 736 991 l 450 522 l 760 0 z "},Y:{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 z "},Z:{ha:749,x_min:56,x_max:693,o:"m 693 0 l 56 0 l 56 98 l 538 879 l 69 879 l 69 991 l 679 991 l 679 893 l 197 113 l 693 113 l 693 0 z "},"[":{ha:421,x_min:111,x_max:386,o:"m 386 -220 l 111 -220 l 111 991 l 386 991 l 386 890 l 235 890 l 235 -118 l 386 -118 l 386 -220 z "},"\\":{ha:518,x_min:16,x_max:505,o:"m 136 991 l 505 0 l 385 0 l 16 991 l 136 991 z "},"]":{ha:421,x_min:35,x_max:310,o:"m 35 -118 l 186 -118 l 186 890 l 35 890 l 35 991 l 310 991 l 310 -220 l 35 -220 l 35 -118 z "},"^":{ha:739,x_min:28,x_max:711,o:"m 28 372 l 339 999 l 408 999 l 711 372 l 602 372 l 374 871 l 137 372 l 28 372 z "},_:{ha:571,x_min:-3,x_max:574,o:"m 574 -220 l -3 -220 l -3 -125 l 574 -125 l 574 -220 z "},"`":{ha:802,x_min:267,x_max:533,o:"m 533 842 l 452 842 q 400 889 428 861 q 346 947 372 917 q 299 1004 320 977 q 267 1050 277 1031 l 267 1064 l 415 1064 q 440 1014 426 1041 q 471 959 455 986 q 503 905 486 931 q 533 860 519 880 l 533 842 z "},a:{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 z "},b:{ha:814,x_min:118,x_max:737,o:"m 454 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 l 208 0 l 118 0 l 118 1055 l 241 1055 l 241 800 q 241 750 241 777 q 239 700 240 723 q 236 647 237 673 l 241 647 q 277 691 257 671 q 322 726 296 711 q 381 750 349 741 q 454 758 414 758 m 431 656 q 340 638 376 656 q 282 586 304 621 q 251 498 260 551 q 241 374 241 445 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},c:{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 z "},d:{ha:814,x_min:77,x_max:696,o:"m 578 100 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 491 726 465 741 q 537 691 517 711 q 572 650 557 671 l 581 650 q 576 694 578 673 q 574 730 575 711 q 572 760 572 749 l 572 1055 l 696 1055 l 696 0 l 596 0 l 578 100 m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 z "},e:{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 z "},f:{ha:457,x_min:20,x_max:510,o:"m 441 652 l 275 652 l 275 0 l 151 0 l 151 652 l 20 652 l 20 703 l 151 749 l 151 814 q 166 934 151 886 q 211 1010 182 982 q 281 1051 239 1039 q 376 1063 323 1063 q 450 1055 416 1063 q 510 1038 484 1047 l 478 942 q 432 955 457 949 q 380 961 408 961 q 334 955 353 961 q 301 932 314 948 q 282 887 288 916 q 275 815 275 859 l 275 745 l 441 745 l 441 652 z "},g:{ha:720,x_min:25,x_max:692,o:"m 692 745 l 692 668 l 558 650 q 590 589 577 626 q 603 505 603 552 q 587 410 603 454 q 539 334 571 366 q 459 284 507 302 q 349 267 412 267 q 319 267 334 267 q 294 269 304 267 q 272 254 283 262 q 251 235 260 245 q 236 210 242 224 q 231 180 231 197 q 239 151 231 162 q 261 134 247 140 q 294 125 275 127 q 334 123 313 123 l 453 123 q 559 107 516 123 q 630 64 603 92 q 670 0 658 37 q 682 -78 682 -37 q 660 -185 682 -138 q 593 -266 638 -233 q 478 -316 547 -298 q 314 -334 408 -334 q 187 -319 241 -334 q 97 -278 133 -305 q 43 -213 61 -251 q 25 -126 25 -174 q 38 -55 25 -85 q 74 -1 52 -24 q 126 35 96 21 q 187 57 155 50 q 140 98 159 70 q 122 161 122 125 q 144 233 122 203 q 212 292 165 263 q 159 325 183 304 q 118 374 135 347 q 93 434 102 401 q 83 501 83 467 q 100 609 83 562 q 151 690 117 656 q 233 741 184 723 q 349 758 283 758 q 400 754 374 758 q 446 745 427 751 l 692 745 m 142 -122 q 151 -169 142 -147 q 179 -206 159 -191 q 232 -231 199 -222 q 314 -240 265 -240 q 503 -201 440 -240 q 566 -89 566 -162 q 557 -38 566 -58 q 531 -7 549 -18 q 481 8 512 4 q 407 12 451 12 l 288 12 q 238 7 264 12 q 191 -14 212 1 q 156 -55 170 -28 q 142 -122 142 -81 m 204 505 q 241 389 204 427 q 345 351 277 351 q 447 389 412 351 q 482 507 482 427 q 447 630 482 591 q 343 669 411 669 q 240 629 276 669 q 204 505 204 588 z "},h:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 1055 l 241 1055 l 241 742 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},i:{ha:359,x_min:109,x_max:253,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},j:{ha:359,x_min:-46,x_max:253,o:"m 45 -334 q -9 -329 12 -334 q -46 -317 -31 -324 l -46 -216 q -10 -227 -28 -223 q 32 -231 8 -231 q 66 -225 50 -231 q 93 -207 81 -220 q 112 -172 105 -194 q 118 -115 118 -150 l 118 745 l 241 745 l 241 -107 q 230 -201 241 -159 q 194 -272 218 -243 q 133 -318 170 -302 q 45 -334 96 -334 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},k:{ha:689,x_min:118,x_max:684,o:"m 232 385 l 323 500 l 522 745 l 665 745 l 393 422 l 684 0 l 542 0 l 314 342 l 240 286 l 240 0 l 118 0 l 118 1055 l 240 1055 l 240 571 l 229 385 l 232 385 z "},l:{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 1055 l 241 1055 l 241 0 z "},m:{ha:1244,x_min:118,x_max:1133,o:"m 1010 0 l 1010 479 q 976 612 1010 568 q 871 656 942 656 q 787 640 821 656 q 730 593 752 624 q 698 516 708 562 q 688 411 688 471 l 688 0 l 564 0 l 564 479 q 530 612 564 568 q 425 656 496 656 q 338 638 373 656 q 281 586 302 621 q 251 501 260 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 281 695 259 673 q 331 730 304 716 q 388 751 357 745 q 449 758 418 758 q 584 728 530 758 q 664 635 638 699 l 669 635 q 712 690 687 667 q 766 728 736 713 q 828 751 795 743 q 895 758 861 758 q 1073 693 1013 758 q 1133 486 1133 629 l 1133 0 l 1010 0 z "},n:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},o:{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 z "},p:{ha:814,x_min:118,x_max:737,o:"m 454 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 745 l 218 745 l 236 644 l 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},q:{ha:814,x_min:77,x_max:696,o:"m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 m 359 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 490 725 465 740 q 536 689 516 709 q 572 644 557 668 l 578 644 l 596 745 l 696 745 l 696 -334 l 572 -334 l 572 -16 q 574 17 572 -3 q 576 55 575 37 q 581 100 578 77 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 z "},r:{ha:554,x_min:118,x_max:526,o:"m 440 758 q 484 756 460 758 q 526 751 509 755 l 510 637 q 471 643 491 641 q 433 646 451 646 q 355 628 391 646 q 295 579 320 611 q 255 502 269 547 q 241 401 241 456 l 241 0 l 118 0 l 118 745 l 218 745 l 233 608 l 239 608 q 275 665 256 637 q 318 712 294 692 q 372 746 342 733 q 440 758 402 758 z "},s:{ha:627,x_min:61,x_max:564,o:"m 564 204 q 544 109 564 150 q 487 41 524 68 q 398 0 450 14 q 281 -14 346 -14 q 154 -2 207 -14 q 61 33 101 10 l 61 146 q 108 124 82 135 q 162 106 134 114 q 221 93 191 98 q 281 87 251 87 q 356 95 325 87 q 406 116 387 102 q 434 150 425 130 q 443 195 443 170 q 436 233 443 216 q 411 266 429 250 q 362 300 393 283 q 282 338 331 317 q 194 379 233 359 q 128 425 155 399 q 86 483 101 450 q 72 561 72 515 q 91 645 72 608 q 143 707 109 682 q 224 745 177 732 q 330 758 272 758 q 451 744 396 758 q 554 707 505 730 l 511 607 q 421 641 467 627 q 326 656 374 656 q 224 633 257 656 q 191 568 191 610 q 198 527 191 545 q 225 494 206 509 q 276 462 244 478 q 355 427 308 446 q 443 386 404 406 q 508 340 481 366 q 549 282 535 315 q 564 204 564 250 z "},t:{ha:471,x_min:22,x_max:444,o:"m 343 87 q 371 89 355 87 q 400 92 386 90 q 426 97 414 94 q 444 102 438 100 l 444 8 q 422 0 435 4 q 392 -7 408 -4 q 358 -12 376 -10 q 323 -14 340 -14 q 245 -3 281 -14 q 183 35 210 8 q 142 106 157 61 q 127 220 127 151 l 127 652 l 22 652 l 22 707 l 127 760 l 180 916 l 252 916 l 252 745 l 439 745 l 439 652 l 252 652 l 252 220 q 273 121 252 154 q 343 87 294 87 z "},u:{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 z "},v:{ha:665,x_min:0,x_max:665,o:"m 254 0 l 0 745 l 127 745 l 262 330 q 280 273 270 308 q 300 201 290 237 q 319 132 311 164 q 330 82 328 99 l 335 82 q 347 132 338 99 q 365 201 355 164 q 385 273 375 237 q 403 330 395 308 l 538 745 l 665 745 l 411 0 l 254 0 z "},w:{ha:1036,x_min:14,x_max:1022,o:"m 684 0 l 570 418 q 563 445 567 430 q 555 477 559 460 q 546 512 551 494 q 538 547 542 530 q 518 628 528 586 l 514 628 q 496 546 505 585 q 480 476 488 512 q 464 415 471 440 l 347 0 l 204 0 l 14 745 l 143 745 l 232 349 q 245 282 239 318 q 258 212 252 247 q 269 146 264 177 q 277 96 274 115 l 281 96 q 290 143 284 113 q 303 205 296 172 q 317 270 310 238 q 332 325 325 302 l 453 745 l 586 745 l 703 325 q 716 271 709 302 q 732 207 724 239 q 745 145 739 175 q 754 96 751 115 l 758 96 q 765 143 760 113 q 775 208 769 172 q 788 280 781 243 q 803 349 795 317 l 896 745 l 1022 745 l 829 0 l 684 0 z "},x:{ha:694,x_min:24,x_max:669,o:"m 277 382 l 37 745 l 178 745 l 347 467 l 517 745 l 657 745 l 416 382 l 669 0 l 529 0 l 347 296 l 164 0 l 24 0 l 277 382 z "},y:{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 z "},z:{ha:612,x_min:56,x_max:557,o:"m 557 0 l 56 0 l 56 85 l 419 652 l 78 652 l 78 745 l 545 745 l 545 646 l 189 93 l 557 93 l 557 0 z "},"{":{ha:492,x_min:41,x_max:457,o:"m 339 -11 q 347 -64 339 -43 q 371 -97 355 -85 q 408 -113 386 -109 q 457 -118 430 -117 l 457 -220 q 360 -208 405 -219 q 284 -173 316 -197 q 233 -111 252 -149 q 215 -21 215 -74 l 215 205 q 171 304 215 275 q 41 334 126 334 l 41 439 q 171 468 126 439 q 215 567 215 497 l 215 793 q 233 883 215 846 q 284 944 252 920 q 360 980 316 968 q 457 991 405 991 l 457 890 q 408 885 430 890 q 371 869 386 881 q 347 837 355 857 q 339 783 339 816 l 339 558 q 299 445 339 487 q 180 390 258 404 l 180 382 q 299 327 258 368 q 339 214 339 286 l 339 -11 z "},"|":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 -334 l 332 -334 l 332 1055 z "},"}":{ha:492,x_min:35,x_max:450,o:"m 153 214 q 193 327 153 286 q 311 382 233 368 l 311 390 q 193 445 233 404 q 153 558 153 487 l 153 783 q 144 837 153 816 q 121 869 136 857 q 84 885 106 881 q 35 890 62 890 l 35 991 q 131 980 87 991 q 208 944 176 968 q 258 883 240 920 q 277 793 277 846 l 277 567 q 288 507 277 532 q 321 468 299 483 q 376 446 343 452 q 450 439 408 439 l 450 334 q 321 304 366 334 q 277 205 277 275 l 277 -21 q 258 -111 277 -74 q 208 -173 240 -149 q 131 -208 176 -197 q 35 -220 87 -219 l 35 -118 q 84 -113 62 -117 q 121 -97 106 -109 q 144 -64 136 -85 q 153 -11 153 -43 l 153 214 z "},"~":{ha:765,x_min:69,x_max:696,o:"m 359 441 q 316 460 334 452 q 282 472 297 467 q 253 478 267 476 q 224 479 239 479 q 184 473 205 479 q 144 455 164 467 q 105 429 124 444 q 69 397 86 414 l 69 507 q 237 581 137 581 q 274 579 257 581 q 310 573 291 577 q 351 560 328 568 q 406 538 374 551 q 449 519 431 527 q 484 508 468 512 q 513 502 500 503 q 542 500 527 500 q 581 506 561 500 q 622 524 602 513 q 661 550 642 535 q 696 582 680 565 l 696 472 q 528 399 629 399 q 491 400 508 399 q 455 407 474 402 q 414 419 437 411 q 359 441 391 428 z "}},(0,m.Z)(P," ",{ha:361,x_min:0,x_max:0,o:""}),(0,m.Z)(P,"\xa1",{ha:374,x_min:100,x_max:272,o:"m 144 458 l 227 458 l 261 -253 l 110 -253 l 144 458 m 272 664 q 266 620 272 638 q 247 591 259 602 q 220 575 235 580 q 186 570 204 570 q 153 575 168 570 q 125 591 137 580 q 106 620 113 602 q 100 664 100 638 q 106 707 100 689 q 125 736 113 724 q 153 753 137 747 q 186 758 168 758 q 220 753 204 758 q 247 736 235 747 q 266 707 259 724 q 272 664 272 689 z "}),(0,m.Z)(P,"\xa2",{ha:765,x_min:127,x_max:647,o:"m 635 163 q 564 134 601 144 q 475 122 526 123 l 475 -14 l 382 -14 l 382 126 q 276 160 323 135 q 196 231 229 186 q 145 343 163 276 q 127 504 127 411 q 145 668 127 600 q 196 783 163 737 q 276 855 229 829 q 382 889 323 880 l 382 1006 l 475 1006 l 475 895 q 570 881 524 892 q 647 854 616 870 l 611 750 q 576 763 595 757 q 537 775 557 770 q 497 783 517 780 q 460 786 477 786 q 304 718 353 786 q 256 505 256 649 q 305 297 256 363 q 454 231 354 231 q 554 243 509 231 q 635 272 598 256 l 635 163 z "}),(0,m.Z)(P,"\xa3",{ha:765,x_min:46,x_max:718,o:"m 452 1004 q 583 989 524 1004 q 686 950 642 974 l 642 852 q 556 887 604 872 q 457 901 508 901 q 397 892 425 901 q 349 863 369 883 q 317 811 328 843 q 306 734 306 779 l 306 534 l 561 534 l 561 441 l 306 441 l 306 298 q 298 226 306 256 q 277 174 290 196 q 247 138 264 153 q 211 113 229 123 l 718 113 l 718 0 l 46 0 l 46 104 q 101 126 76 112 q 143 163 125 140 q 172 219 161 186 q 182 297 182 252 l 182 441 l 47 441 l 47 534 l 182 534 l 182 754 q 202 860 182 813 q 257 938 222 906 q 342 987 293 970 q 452 1004 392 1004 z "}),(0,m.Z)(P,"\xa4",{ha:765,x_min:83,x_max:681,o:"m 126 490 q 138 567 126 530 q 171 635 150 603 l 83 722 l 150 789 l 236 701 q 304 735 268 723 q 382 747 341 747 q 459 735 422 747 q 526 701 495 723 l 614 789 l 681 724 l 593 636 q 626 568 614 605 q 639 490 639 531 q 627 412 639 450 q 593 345 615 375 l 679 258 l 614 193 l 526 279 q 459 247 495 258 q 382 235 422 235 q 304 247 341 235 q 236 281 267 259 l 150 195 l 85 260 l 171 346 q 138 413 150 376 q 126 490 126 450 m 220 490 q 232 427 220 456 q 267 375 245 397 q 318 340 289 353 q 382 328 348 328 q 447 340 416 328 q 499 375 477 353 q 534 427 522 397 q 547 490 547 456 q 534 555 547 525 q 499 608 522 585 q 447 643 477 630 q 382 656 416 656 q 318 643 348 656 q 267 608 289 630 q 232 555 245 585 q 220 490 220 525 z "}),(0,m.Z)(P,"\xa5",{ha:765,x_min:20,x_max:746,o:"m 382 490 l 616 991 l 746 991 l 485 471 l 647 471 l 647 378 l 443 378 l 443 271 l 647 271 l 647 178 l 443 178 l 443 0 l 322 0 l 322 178 l 118 178 l 118 271 l 322 271 l 322 378 l 118 378 l 118 471 l 277 471 l 20 991 l 150 991 l 382 490 z "}),(0,m.Z)(P,"\xa6",{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 526 l 332 526 l 332 1055 m 332 196 l 433 196 l 433 -334 l 332 -334 l 332 196 z "}),(0,m.Z)(P,"\xa7",{ha:675,x_min:82,x_max:585,o:"m 93 549 q 102 611 93 583 q 126 661 111 640 q 161 698 141 683 q 201 724 180 713 q 122 788 151 749 q 93 884 93 827 q 112 958 93 925 q 164 1015 130 991 q 245 1050 198 1038 q 351 1063 293 1063 q 470 1049 417 1063 q 572 1014 524 1036 l 534 920 q 443 952 490 939 q 347 965 395 965 q 245 945 280 965 q 211 886 211 925 q 219 852 211 868 q 247 822 227 837 q 298 791 266 807 q 378 755 330 775 q 465 714 427 736 q 530 666 503 692 q 570 607 556 640 q 585 532 585 574 q 576 468 585 496 q 554 416 568 439 q 523 376 541 393 q 486 349 505 359 q 559 286 533 323 q 585 196 585 249 q 565 110 585 148 q 508 46 545 73 q 419 7 471 20 q 301 -7 366 -7 q 175 4 228 -7 q 82 37 122 16 l 82 144 q 129 124 103 134 q 183 106 155 114 q 242 94 212 98 q 301 89 272 89 q 379 97 348 89 q 430 118 411 105 q 456 149 448 132 q 464 184 464 166 q 458 219 464 204 q 435 250 452 235 q 386 282 418 265 q 302 319 354 298 q 214 361 253 340 q 148 409 175 382 q 107 469 121 435 q 93 549 93 503 m 197 564 q 207 517 197 538 q 238 476 216 496 q 293 438 259 456 q 376 399 328 419 l 400 389 q 428 410 414 397 q 453 437 441 422 q 471 472 464 453 q 478 514 478 491 q 469 562 478 540 q 438 603 460 583 q 380 643 416 623 q 288 682 343 662 q 255 666 271 677 q 226 641 239 656 q 205 606 213 625 q 197 564 197 586 z "}),(0,m.Z)(P,"\xa8",{ha:802,x_min:208,x_max:593,o:"m 208 946 q 227 999 208 983 q 273 1015 246 1015 q 319 999 300 1015 q 339 946 339 982 q 319 893 339 910 q 273 876 300 876 q 227 893 246 876 q 208 946 208 910 m 463 946 q 481 999 463 983 q 528 1015 500 1015 q 552 1011 541 1015 q 573 999 564 1007 q 587 977 582 990 q 593 946 593 964 q 573 893 593 910 q 528 876 553 876 q 481 893 500 876 q 463 946 463 910 z "}),(0,m.Z)(P,"\xa9",{ha:1156,x_min:68,x_max:1088,o:"m 604 714 q 531 699 563 714 q 477 656 499 684 q 445 587 456 628 q 433 496 433 547 q 443 402 433 443 q 474 334 453 361 q 527 291 494 306 q 604 277 559 277 q 638 279 620 277 q 676 286 656 281 q 714 295 695 290 q 750 307 733 301 l 750 218 q 717 205 734 211 q 683 194 701 199 q 644 187 665 189 q 600 184 624 184 q 479 207 531 184 q 394 271 428 229 q 342 370 359 312 q 325 497 325 427 q 343 622 325 566 q 397 720 361 679 q 485 783 433 760 q 604 806 536 806 q 692 794 647 806 q 777 764 736 783 l 734 677 q 666 705 699 695 q 604 714 633 714 m 68 496 q 86 631 68 566 q 137 753 104 696 q 217 857 170 810 q 320 936 264 903 q 442 987 377 969 q 578 1006 507 1006 q 713 987 648 1006 q 835 936 779 969 q 939 857 892 903 q 1018 753 985 810 q 1069 631 1051 696 q 1088 496 1088 566 q 1069 360 1088 425 q 1018 238 1051 295 q 939 135 985 182 q 835 56 892 89 q 713 4 779 22 q 578 -14 648 -14 q 442 4 507 -14 q 320 56 377 22 q 217 135 264 89 q 137 238 170 182 q 86 360 104 295 q 68 496 68 425 m 142 496 q 176 326 142 406 q 270 188 210 247 q 408 94 329 128 q 578 60 488 60 q 747 94 668 60 q 886 188 827 128 q 980 326 945 247 q 1014 496 1014 406 q 980 665 1014 586 q 886 804 945 745 q 747 898 827 863 q 578 932 668 932 q 408 898 488 932 q 270 804 329 863 q 176 665 210 745 q 142 496 142 586 z "}),(0,m.Z)(P,"\xaa",{ha:460,x_min:46,x_max:392,o:"m 330 541 l 311 596 q 286 569 299 581 q 257 549 273 557 q 222 536 241 541 q 179 532 203 532 q 125 541 150 532 q 83 567 101 549 q 56 610 66 584 q 46 671 46 636 q 94 777 46 740 q 239 817 142 813 l 306 819 l 306 840 q 285 908 306 889 q 227 928 264 928 q 163 918 194 928 q 104 893 133 908 l 72 961 q 146 991 106 979 q 227 1003 186 1003 q 352 967 311 1003 q 392 848 392 931 l 392 541 l 330 541 m 256 753 q 198 745 221 751 q 161 728 175 739 q 141 704 147 718 q 135 669 135 689 q 152 620 135 635 q 197 604 169 604 q 240 611 220 604 q 274 633 260 618 q 297 670 289 648 q 306 722 306 692 l 306 755 l 256 753 z "}),(0,m.Z)(P,"\xab",{ha:676,x_min:56,x_max:621,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 m 332 375 l 542 656 l 621 603 l 460 367 l 621 131 l 542 78 l 332 357 l 332 375 z "}),(0,m.Z)(P,"\xac",{ha:765,x_min:69,x_max:696,o:"m 696 541 l 696 178 l 595 178 l 595 439 l 69 439 l 69 541 l 696 541 z "}),(0,m.Z)(P,"\xad",{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "}),(0,m.Z)(P,"\xae",{ha:1092,x_min:61,x_max:1023,o:"m 61 494 q 124 749 61 631 q 300 933 188 866 q 543 1001 412 1001 q 785 933 673 1001 q 960 749 897 866 q 1023 494 1023 631 q 962 244 1023 361 q 789 57 901 127 q 543 -14 677 -14 q 297 56 409 -14 q 123 243 184 126 q 61 494 61 359 m 139 494 q 193 278 139 378 q 341 123 248 179 q 543 66 434 66 q 745 124 652 66 q 892 279 839 181 q 945 494 945 378 q 892 708 945 610 q 745 863 839 806 q 543 920 652 920 q 340 864 434 920 q 193 709 247 808 q 139 494 139 610 m 443 444 l 443 214 l 347 214 l 347 790 l 534 790 q 695 746 638 790 q 753 616 753 701 q 666 489 753 533 q 749 351 749 455 l 749 309 q 761 225 749 251 l 761 214 l 663 214 q 653 301 653 239 q 651 376 653 364 q 562 444 640 441 l 443 444 m 443 530 l 549 530 q 627 554 597 532 q 657 613 657 576 q 631 683 657 663 q 536 704 604 704 l 443 704 l 443 530 z "}),(0,m.Z)(P,"\xaf",{ha:694,x_min:-4,x_max:699,o:"m 699 1055 l -4 1055 l -4 1150 l 699 1150 l 699 1055 z "}),(0,m.Z)(P,"\xb0",{ha:595,x_min:83,x_max:511,o:"m 83 791 q 100 874 83 836 q 146 943 117 913 q 214 989 175 972 q 297 1006 253 1006 q 380 989 341 1006 q 448 943 419 972 q 494 874 477 913 q 511 791 511 836 q 494 709 511 747 q 448 641 477 670 q 380 596 419 612 q 297 579 341 579 q 214 596 253 579 q 146 641 175 612 q 100 709 117 670 q 83 791 83 747 m 167 791 q 177 742 167 765 q 205 701 187 718 q 246 673 222 683 q 297 663 270 663 q 348 673 324 663 q 390 701 372 683 q 418 742 408 718 q 428 791 428 765 q 418 843 428 819 q 390 885 408 867 q 348 913 372 903 q 297 924 324 924 q 246 913 270 924 q 205 885 222 903 q 177 843 187 867 q 167 791 167 819 z "}),(0,m.Z)(P,"\xb1",{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 m 69 0 l 69 102 l 696 102 l 696 0 l 69 0 z "}),(0,m.Z)(P,"\xb2",{ha:460,x_min:33,x_max:421,o:"m 421 397 l 33 397 l 33 473 l 175 628 q 238 699 214 670 q 276 750 262 728 q 295 793 290 773 q 300 836 300 813 q 277 902 300 880 q 218 924 255 924 q 152 907 184 924 q 90 864 121 890 l 37 928 q 119 982 74 960 q 220 1004 164 1004 q 293 993 260 1004 q 349 961 326 982 q 385 908 372 939 q 397 839 397 878 q 388 776 397 805 q 359 718 378 747 q 314 658 341 689 q 253 590 288 627 l 153 484 l 421 484 l 421 397 z "}),(0,m.Z)(P,"\xb3",{ha:460,x_min:21,x_max:418,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 z "}),(0,m.Z)(P,"\xb4",{ha:802,x_min:267,x_max:533,o:"m 267 860 q 297 905 281 880 q 329 959 313 931 q 359 1014 345 986 q 385 1064 374 1041 l 533 1064 l 533 1050 q 501 1004 522 1031 q 453 947 479 977 q 400 889 427 917 q 349 842 372 861 l 267 842 l 267 860 z "}),(0,m.Z)(P,"\xb5",{ha:825,x_min:118,x_max:707,o:"m 241 265 q 277 133 241 177 q 389 89 313 89 q 481 106 444 89 q 542 158 519 124 q 574 243 564 193 q 583 358 583 293 l 583 745 l 707 745 l 707 0 l 607 0 l 589 100 l 582 100 q 500 15 549 43 q 382 -14 452 -14 q 297 2 333 -14 q 237 46 261 18 q 239 -7 238 20 q 241 -59 241 -31 q 241 -117 241 -88 l 241 -334 l 118 -334 l 118 745 l 241 745 l 241 265 z "}),(0,m.Z)(P,"\xb6",{ha:909,x_min:77,x_max:764,o:"m 764 -176 l 682 -176 l 682 947 l 542 947 l 542 -176 l 460 -176 l 460 379 q 361 367 418 367 q 244 384 296 367 q 154 441 191 401 q 97 547 117 481 q 77 707 77 612 q 99 873 77 806 q 161 981 121 940 q 258 1038 201 1021 q 382 1055 314 1055 l 764 1055 l 764 -176 z "}),(0,m.Z)(P,"\xb7",{ha:372,x_min:100,x_max:272,o:"m 100 490 q 106 534 100 516 q 125 563 113 552 q 152 579 136 574 q 186 585 168 585 q 219 579 203 585 q 247 563 235 574 q 265 534 258 552 q 272 490 272 516 q 265 448 272 465 q 247 418 258 430 q 219 401 235 407 q 186 396 203 396 q 152 401 168 396 q 125 418 136 407 q 106 448 113 430 q 100 490 100 465 z "}),(0,m.Z)(P,"\xb8",{ha:285,x_min:24,x_max:277,o:"m 277 -195 q 229 -297 277 -260 q 79 -334 181 -334 q 49 -332 64 -334 q 24 -328 34 -330 l 24 -254 q 51 -257 34 -256 q 78 -258 67 -258 q 153 -244 126 -258 q 180 -196 180 -229 q 172 -168 180 -180 q 147 -147 163 -156 q 110 -132 132 -138 q 64 -119 89 -125 l 125 0 l 207 0 l 168 -78 q 211 -92 191 -83 q 245 -115 231 -101 q 268 -149 260 -129 q 277 -195 277 -168 z "}),(0,m.Z)(P,"\xb9",{ha:460,x_min:43,x_max:300,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 z "}),(0,m.Z)(P,"\xba",{ha:486,x_min:45,x_max:441,o:"m 441 768 q 428 668 441 712 q 388 594 414 624 q 325 548 361 564 q 241 532 288 532 q 163 548 199 532 q 100 594 127 564 q 59 668 74 624 q 45 768 45 712 q 59 868 45 825 q 98 942 73 912 q 161 987 124 972 q 244 1003 198 1003 q 322 987 286 1003 q 385 942 359 972 q 427 868 412 912 q 441 768 441 825 m 134 768 q 159 647 134 688 q 243 606 184 606 q 326 647 300 606 q 351 768 351 688 q 326 889 351 850 q 243 928 300 928 q 159 889 184 928 q 134 768 134 850 z "}),(0,m.Z)(P,"\xbb",{ha:676,x_min:57,x_max:623,o:"m 623 357 l 412 78 l 334 131 l 494 367 l 334 603 l 412 656 l 623 375 l 623 357 m 346 357 l 136 78 l 57 131 l 218 367 l 57 603 l 136 656 l 346 375 l 346 357 z "}),(0,m.Z)(P,"\xbc",{ha:1023,x_min:43,x_max:962,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 m 815 991 l 265 0 l 159 0 l 709 991 l 815 991 m 962 131 l 878 131 l 878 1 l 781 1 l 781 131 l 526 131 l 526 206 l 782 599 l 878 599 l 878 217 l 962 217 l 962 131 m 781 217 l 781 349 q 782 411 781 378 q 785 478 783 445 q 774 458 781 471 q 760 431 768 446 q 745 404 753 417 q 730 380 736 390 l 625 217 l 781 217 z "}),(0,m.Z)(P,"\xbd",{ha:1023,x_min:30,x_max:977,o:"m 195 991 l 287 991 l 287 397 l 189 397 l 189 747 q 189 785 189 764 q 190 825 189 805 q 192 865 191 846 q 194 899 193 884 q 172 873 184 887 q 144 848 159 860 l 80 799 l 30 864 l 195 991 m 801 991 l 251 0 l 144 0 l 694 991 l 801 991 m 977 1 l 589 1 l 589 77 l 730 231 q 793 302 769 273 q 831 354 818 331 q 850 396 845 376 q 855 439 855 416 q 833 505 855 484 q 774 527 810 527 q 708 510 739 527 q 646 467 676 493 l 593 531 q 674 586 629 564 q 775 608 720 608 q 849 596 816 608 q 905 564 882 585 q 940 512 928 543 q 953 442 953 481 q 943 379 953 408 q 915 321 933 350 q 870 261 897 292 q 808 193 843 231 l 708 87 l 977 87 l 977 1 z "}),(0,m.Z)(P,"\xbe",{ha:1023,x_min:21,x_max:1008,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 m 879 991 l 329 0 l 222 0 l 772 991 l 879 991 m 1008 131 l 923 131 l 923 1 l 826 1 l 826 131 l 572 131 l 572 206 l 827 599 l 923 599 l 923 217 l 1008 217 l 1008 131 m 826 217 l 826 349 q 827 411 826 378 q 830 478 828 445 q 820 458 827 471 q 806 431 813 446 q 790 404 798 417 q 776 380 782 390 l 671 217 l 826 217 z "}),(0,m.Z)(P,"\xbf",{ha:591,x_min:46,x_max:567,o:"m 401 458 l 401 433 q 396 363 401 394 q 377 305 391 332 q 342 252 364 277 q 286 197 320 226 q 231 147 254 170 q 193 101 208 124 q 171 51 178 77 q 164 -12 164 24 q 174 -72 164 -45 q 204 -118 184 -98 q 252 -148 223 -137 q 318 -158 281 -158 q 426 -141 375 -158 q 524 -100 477 -123 l 567 -199 q 448 -247 511 -227 q 318 -267 384 -267 q 204 -249 255 -267 q 119 -199 154 -232 q 65 -120 84 -167 q 46 -14 46 -73 q 55 68 46 33 q 82 134 64 103 q 128 193 100 164 q 192 253 155 221 q 250 306 227 283 q 285 350 272 329 q 302 394 298 371 q 307 446 307 416 l 307 458 l 401 458 m 433 664 q 427 620 433 638 q 409 591 420 602 q 381 575 397 580 q 347 570 366 570 q 314 575 330 570 q 287 591 298 580 q 268 620 275 602 q 261 664 261 638 q 268 707 261 689 q 287 736 275 724 q 314 753 298 747 q 347 758 330 758 q 381 753 366 758 q 409 736 397 747 q 427 707 420 724 q 433 664 433 689 z "}),(0,m.Z)(P,"\xc0",{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 488 1071 l 406 1071 q 355 1118 382 1090 q 301 1176 327 1146 q 253 1233 275 1206 q 221 1279 232 1261 l 221 1293 l 370 1293 q 395 1243 380 1270 q 425 1188 410 1215 q 457 1135 441 1160 q 488 1089 473 1109 l 488 1071 z "}),(0,m.Z)(P,"\xc1",{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 362 1089 q 393 1135 377 1109 q 425 1188 409 1160 q 455 1243 441 1215 q 480 1293 469 1270 l 629 1293 l 629 1279 q 596 1233 618 1261 q 549 1176 575 1206 q 495 1118 523 1146 q 444 1071 468 1090 l 362 1071 l 362 1089 z "}),(0,m.Z)(P,"\xc2",{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 646 1071 l 564 1071 q 493 1127 530 1094 q 421 1197 456 1160 q 349 1127 385 1160 q 278 1071 313 1094 l 196 1071 l 196 1089 q 237 1135 214 1109 q 282 1188 260 1160 q 325 1243 305 1215 q 356 1293 345 1270 l 486 1293 q 517 1243 497 1270 q 560 1188 537 1215 q 606 1135 583 1160 q 646 1089 629 1109 l 646 1071 z "}),(0,m.Z)(P,"\xc3",{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 524 1072 q 470 1084 496 1072 q 417 1111 443 1096 q 368 1137 391 1125 q 322 1149 344 1149 q 275 1131 292 1149 q 250 1071 259 1113 l 179 1071 q 194 1145 182 1112 q 223 1201 205 1178 q 266 1237 241 1225 q 322 1250 291 1250 q 378 1238 351 1250 q 431 1212 406 1226 q 480 1186 457 1198 q 524 1174 504 1174 q 570 1192 554 1174 q 595 1251 585 1209 l 667 1251 q 652 1178 663 1211 q 623 1121 641 1145 q 580 1085 605 1098 q 524 1072 555 1072 z "}),(0,m.Z)(P,"\xc4",{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 231 1175 q 250 1228 231 1212 q 296 1244 269 1244 q 342 1228 322 1244 q 361 1175 361 1211 q 342 1122 361 1139 q 296 1105 322 1105 q 250 1122 269 1105 q 231 1175 231 1139 m 485 1175 q 504 1228 485 1212 q 550 1244 523 1244 q 575 1240 563 1244 q 595 1228 587 1236 q 610 1206 604 1219 q 615 1175 615 1194 q 595 1122 615 1139 q 550 1105 576 1105 q 504 1122 523 1105 q 485 1175 485 1139 z "}),(0,m.Z)(P,"\xc5",{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 575 1074 q 563 1011 575 1039 q 531 965 551 984 q 481 936 510 946 q 420 926 453 926 q 358 936 386 926 q 310 965 330 946 q 279 1011 290 984 q 269 1072 269 1038 q 279 1134 269 1107 q 310 1179 290 1160 q 358 1208 330 1198 q 420 1218 386 1218 q 481 1208 452 1218 q 530 1180 509 1198 q 563 1134 551 1161 q 575 1074 575 1107 m 496 1072 q 474 1128 496 1108 q 420 1149 453 1149 q 365 1128 386 1149 q 343 1072 343 1108 q 362 1016 343 1036 q 420 996 382 996 q 474 1016 453 996 q 496 1072 496 1036 z "}),(0,m.Z)(P,"\xc6",{ha:1183,x_min:-1,x_max:1100,o:"m 1100 0 l 585 0 l 585 307 l 262 307 l 125 0 l -1 0 l 443 991 l 1100 991 l 1100 880 l 711 880 l 711 574 l 1074 574 l 1074 464 l 711 464 l 711 111 l 1100 111 l 1100 0 m 311 419 l 585 419 l 585 880 l 511 880 l 311 419 z "}),(0,m.Z)(P,"\xc7",{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 m 621 -195 q 573 -297 621 -260 q 424 -334 526 -334 q 394 -332 409 -334 q 368 -328 378 -330 l 368 -254 q 395 -257 378 -256 q 422 -258 412 -258 q 498 -244 471 -258 q 525 -196 525 -229 q 516 -168 525 -180 q 492 -147 507 -156 q 455 -132 476 -138 q 408 -119 433 -125 l 469 0 l 551 0 l 513 -78 q 555 -92 536 -83 q 590 -115 575 -101 q 613 -149 604 -129 q 621 -195 621 -168 z "}),(0,m.Z)(P,"\xc8",{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 484 1071 l 402 1071 q 351 1118 378 1090 q 297 1176 323 1146 q 249 1233 271 1206 q 217 1279 228 1261 l 217 1293 l 366 1293 q 391 1243 376 1270 q 421 1188 406 1215 q 453 1135 437 1160 q 484 1089 469 1109 l 484 1071 z "}),(0,m.Z)(P,"\xc9",{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 309 1089 q 340 1135 324 1109 q 372 1188 356 1160 q 402 1243 388 1215 q 427 1293 416 1270 l 576 1293 l 576 1279 q 544 1233 565 1261 q 496 1176 522 1206 q 443 1118 470 1146 q 391 1071 415 1090 l 309 1071 l 309 1089 z "}),(0,m.Z)(P,"\xca",{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 615 1071 l 533 1071 q 462 1127 498 1094 q 390 1197 425 1160 q 317 1127 353 1160 q 247 1071 281 1094 l 165 1071 l 165 1089 q 205 1135 182 1109 q 251 1188 229 1160 q 294 1243 274 1215 q 325 1293 314 1270 l 455 1293 q 486 1243 466 1270 q 529 1188 506 1215 q 575 1135 551 1160 q 615 1089 598 1109 l 615 1071 z "}),(0,m.Z)(P,"\xcb",{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 201 1175 q 220 1228 201 1212 q 266 1244 239 1244 q 312 1228 292 1244 q 332 1175 332 1211 q 312 1122 332 1139 q 266 1105 292 1105 q 220 1122 239 1105 q 201 1175 201 1139 m 455 1175 q 474 1228 455 1212 q 520 1244 493 1244 q 545 1240 533 1244 q 566 1228 557 1236 q 580 1206 574 1219 q 585 1175 585 1194 q 566 1122 585 1139 q 520 1105 546 1105 q 474 1122 493 1105 q 455 1175 455 1139 z "}),(0,m.Z)(P,"\xcc",{ha:471,x_min:42,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 309 1071 l 227 1071 q 176 1118 203 1090 q 122 1176 148 1146 q 74 1233 96 1206 q 42 1279 53 1261 l 42 1293 l 191 1293 q 216 1243 201 1270 q 246 1188 231 1215 q 278 1135 262 1160 q 309 1089 294 1109 l 309 1071 z "}),(0,m.Z)(P,"\xcd",{ha:471,x_min:56,x_max:441,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 174 1089 q 205 1135 189 1109 q 237 1188 221 1160 q 267 1243 253 1215 q 292 1293 281 1270 l 441 1293 l 441 1279 q 409 1233 430 1261 q 361 1176 387 1206 q 308 1118 335 1146 q 256 1071 280 1090 l 174 1071 l 174 1089 z "}),(0,m.Z)(P,"\xce",{ha:471,x_min:12,x_max:462,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 462 1071 l 380 1071 q 309 1127 345 1094 q 237 1197 272 1160 q 164 1127 200 1160 q 94 1071 128 1094 l 12 1071 l 12 1089 q 52 1135 29 1109 q 98 1188 75 1160 q 141 1243 121 1215 q 172 1293 161 1270 l 302 1293 q 333 1243 313 1270 q 375 1188 353 1215 q 421 1135 398 1160 q 462 1089 445 1109 l 462 1071 z "}),(0,m.Z)(P,"\xcf",{ha:471,x_min:43,x_max:428,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 43 1175 q 62 1228 43 1212 q 109 1244 81 1244 q 155 1228 135 1244 q 174 1175 174 1211 q 155 1122 174 1139 q 109 1105 135 1105 q 62 1122 81 1105 q 43 1175 43 1139 m 298 1175 q 317 1228 298 1212 q 363 1244 336 1244 q 388 1240 376 1244 q 408 1228 399 1236 q 422 1206 417 1219 q 428 1175 428 1194 q 408 1122 428 1139 q 363 1105 389 1105 q 317 1122 336 1105 q 298 1175 298 1139 z "}),(0,m.Z)(P,"\xd0",{ha:950,x_min:32,x_max:865,o:"m 32 546 l 135 546 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 436 l 32 436 l 32 546 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 546 l 489 546 l 489 436 l 261 436 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "}),(0,m.Z)(P,"\xd1",{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 m 614 1072 q 560 1084 587 1072 q 507 1111 533 1096 q 458 1137 481 1125 q 412 1149 434 1149 q 366 1131 382 1149 q 340 1071 349 1113 l 269 1071 q 284 1145 273 1112 q 313 1201 295 1178 q 356 1237 331 1225 q 412 1250 381 1250 q 468 1238 441 1250 q 522 1212 496 1226 q 571 1186 547 1198 q 614 1174 594 1174 q 660 1192 644 1174 q 686 1251 675 1209 l 757 1251 q 742 1178 753 1211 q 713 1121 731 1145 q 670 1085 695 1098 q 614 1072 645 1072 z "}),(0,m.Z)(P,"\xd2",{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 590 1071 l 509 1071 q 457 1118 485 1090 q 403 1176 429 1146 q 356 1233 377 1206 q 323 1279 334 1261 l 323 1293 l 472 1293 q 497 1243 483 1270 q 528 1188 512 1215 q 559 1135 543 1160 q 590 1089 576 1109 l 590 1071 z "}),(0,m.Z)(P,"\xd3",{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 441 1089 q 472 1135 456 1109 q 504 1188 488 1160 q 534 1243 520 1215 q 559 1293 549 1270 l 708 1293 l 708 1279 q 676 1233 697 1261 q 628 1176 654 1206 q 575 1118 602 1146 q 524 1071 547 1090 l 441 1071 l 441 1089 z "}),(0,m.Z)(P,"\xd4",{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 743 1071 l 661 1071 q 590 1127 627 1094 q 518 1197 553 1160 q 446 1127 481 1160 q 375 1071 410 1094 l 293 1071 l 293 1089 q 334 1135 311 1109 q 379 1188 357 1160 q 422 1243 402 1215 q 453 1293 442 1270 l 583 1293 q 614 1243 594 1270 q 657 1188 634 1215 q 703 1135 680 1160 q 743 1089 726 1109 l 743 1071 z "}),(0,m.Z)(P,"\xd5",{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 604 1072 q 550 1084 577 1072 q 498 1111 524 1096 q 448 1137 472 1125 q 403 1149 425 1149 q 356 1131 372 1149 q 330 1071 340 1113 l 260 1071 q 274 1145 263 1112 q 303 1201 286 1178 q 347 1237 321 1225 q 403 1250 372 1250 q 459 1238 431 1250 q 512 1212 486 1226 q 561 1186 538 1198 q 604 1174 585 1174 q 650 1192 635 1174 q 676 1251 666 1209 l 747 1251 q 733 1178 744 1211 q 704 1121 722 1145 q 661 1085 686 1098 q 604 1072 635 1072 z "}),(0,m.Z)(P,"\xd6",{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 323 1175 q 342 1228 323 1212 q 389 1244 361 1244 q 435 1228 415 1244 q 454 1175 454 1211 q 435 1122 454 1139 q 389 1105 415 1105 q 342 1122 361 1105 q 323 1175 323 1139 m 578 1175 q 597 1228 578 1212 q 643 1244 616 1244 q 668 1240 656 1244 q 688 1228 680 1236 q 703 1206 697 1219 q 708 1175 708 1194 q 688 1122 708 1139 q 643 1105 669 1105 q 597 1122 616 1105 q 578 1175 578 1139 z "}),(0,m.Z)(P,"\xd7",{ha:765,x_min:96,x_max:671,o:"m 311 490 l 96 707 l 167 778 l 382 562 l 600 778 l 671 708 l 453 490 l 669 273 l 600 204 l 382 419 l 167 205 l 97 275 l 311 490 z "}),(0,m.Z)(P,"\xd8",{ha:1031,x_min:85,x_max:945,o:"m 882 986 l 819 885 q 913 720 881 818 q 945 497 945 621 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 297 35 387 -14 l 244 -52 l 151 1 l 212 100 q 116 269 146 168 q 85 498 85 370 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 635 993 581 1007 q 734 953 690 979 l 789 1039 l 882 986 m 218 497 q 234 337 218 408 q 282 214 250 267 l 675 854 q 604 885 642 874 q 517 896 565 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 811 497 q 751 774 811 671 l 359 136 q 430 107 391 117 q 515 97 469 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 z "}),(0,m.Z)(P,"\xd9",{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 574 1071 l 493 1071 q 441 1118 469 1090 q 388 1176 414 1146 q 340 1233 361 1206 q 308 1279 319 1261 l 308 1293 l 456 1293 q 482 1243 467 1270 q 512 1188 496 1215 q 544 1135 528 1160 q 574 1089 560 1109 l 574 1071 z "}),(0,m.Z)(P,"\xda",{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 400 1089 q 431 1135 415 1109 q 463 1188 447 1160 q 493 1243 479 1215 q 518 1293 507 1270 l 667 1293 l 667 1279 q 634 1233 656 1261 q 587 1176 613 1206 q 533 1118 561 1146 q 482 1071 506 1090 l 400 1071 l 400 1089 z "}),(0,m.Z)(P,"\xdb",{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 707 1071 l 625 1071 q 554 1127 591 1094 q 482 1197 517 1160 q 410 1127 446 1160 q 339 1071 374 1094 l 257 1071 l 257 1089 q 298 1135 275 1109 q 343 1188 321 1160 q 386 1243 366 1215 q 417 1293 406 1270 l 547 1293 q 578 1243 558 1270 q 621 1188 598 1215 q 667 1135 644 1160 q 707 1089 690 1109 l 707 1071 z "}),(0,m.Z)(P,"\xdc",{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 293 1175 q 312 1228 293 1212 q 358 1244 331 1244 q 404 1228 385 1244 q 424 1175 424 1211 q 404 1122 424 1139 q 358 1105 385 1105 q 312 1122 331 1105 q 293 1175 293 1139 m 547 1175 q 566 1228 547 1212 q 612 1244 585 1244 q 637 1240 625 1244 q 658 1228 649 1236 q 672 1206 667 1219 q 677 1175 677 1194 q 658 1122 677 1139 q 612 1105 638 1105 q 566 1122 585 1105 q 547 1175 547 1139 z "}),(0,m.Z)(P,"\xdd",{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 m 300 1089 q 331 1135 315 1109 q 362 1188 347 1160 q 393 1243 378 1215 q 418 1293 407 1270 l 566 1293 l 566 1279 q 534 1233 555 1261 q 487 1176 513 1206 q 433 1118 460 1146 q 382 1071 406 1090 l 300 1071 l 300 1089 z "}),(0,m.Z)(P,"\xde",{ha:800,x_min:135,x_max:729,o:"m 729 530 q 710 412 729 469 q 649 311 692 355 q 536 241 606 267 q 363 215 466 215 l 261 215 l 261 0 l 135 0 l 135 991 l 261 991 l 261 821 l 380 821 q 537 801 471 821 q 646 745 603 782 q 709 654 688 708 q 729 530 729 600 m 261 322 l 349 322 q 459 333 412 322 q 537 368 506 344 q 583 430 568 392 q 599 524 599 469 q 543 667 599 621 q 370 713 488 713 l 261 713 l 261 322 z "}),(0,m.Z)(P,"\xdf",{ha:836,x_min:118,x_max:774,o:"m 685 854 q 670 786 685 816 q 634 731 656 755 q 588 686 613 706 q 541 647 562 665 q 505 610 519 628 q 490 571 490 591 q 495 546 490 557 q 513 521 500 534 q 550 491 526 508 q 612 449 574 475 q 680 399 650 424 q 731 347 710 375 q 763 287 751 319 q 774 212 774 254 q 755 111 774 153 q 702 40 736 68 q 620 0 667 13 q 514 -14 572 -14 q 401 -2 448 -14 q 318 33 354 10 l 318 146 q 358 124 336 135 q 404 106 380 114 q 454 93 429 98 q 505 87 480 87 q 571 96 543 87 q 616 120 598 104 q 642 157 633 135 q 650 205 650 178 q 644 250 650 230 q 624 289 638 270 q 585 328 609 308 q 522 371 560 347 q 451 421 479 398 q 404 467 422 444 q 378 513 386 490 q 371 566 371 537 q 385 629 371 602 q 420 677 399 656 q 465 717 441 699 q 511 755 490 735 q 546 797 532 774 q 559 850 559 820 q 548 899 559 878 q 517 934 537 920 q 468 955 496 948 q 406 961 440 961 q 342 955 372 961 q 290 932 313 948 q 255 887 268 916 q 241 815 241 859 l 241 0 l 118 0 l 118 814 q 139 932 118 884 q 199 1009 161 980 q 290 1050 237 1038 q 406 1063 343 1063 q 519 1050 468 1063 q 608 1011 571 1037 q 665 946 644 985 q 685 854 685 907 z "}),(0,m.Z)(P,"\xe0",{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "}),(0,m.Z)(P,"\xe1",{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 302 860 q 333 905 317 880 q 365 959 349 931 q 395 1014 381 986 q 420 1064 410 1041 l 569 1064 l 569 1050 q 537 1004 558 1031 q 489 947 515 977 q 436 889 463 917 q 385 842 408 861 l 302 842 l 302 860 z "}),(0,m.Z)(P,"\xe2",{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 605 842 l 523 842 q 452 898 488 865 q 380 968 415 930 q 307 898 343 930 q 237 842 271 865 l 155 842 l 155 860 q 195 905 172 880 q 241 959 218 931 q 284 1014 264 986 q 315 1064 304 1041 l 445 1064 q 476 1014 456 1041 q 518 959 496 986 q 565 905 541 931 q 605 860 588 880 l 605 842 z "}),(0,m.Z)(P,"\xe3",{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 474 843 q 420 855 447 843 q 368 881 393 867 q 318 908 342 896 q 273 920 294 920 q 226 902 242 920 q 200 842 210 884 l 130 842 q 144 916 133 882 q 173 972 155 949 q 216 1008 191 996 q 273 1021 241 1021 q 329 1009 301 1021 q 382 983 356 997 q 431 957 408 968 q 474 945 454 945 q 520 962 505 945 q 546 1022 536 980 l 617 1022 q 603 948 614 981 q 573 892 591 916 q 530 856 555 869 q 474 843 505 843 z "}),(0,m.Z)(P,"\xe4",{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 185 946 q 204 999 185 983 q 250 1015 223 1015 q 296 999 277 1015 q 316 946 316 982 q 296 893 316 910 q 250 876 277 876 q 204 893 223 876 q 185 946 185 910 m 439 946 q 458 999 439 983 q 505 1015 477 1015 q 529 1011 517 1015 q 550 999 541 1007 q 564 977 559 990 q 570 946 570 964 q 550 893 570 910 q 505 876 530 876 q 458 893 477 876 q 439 946 439 910 z "}),(0,m.Z)(P,"\xe5",{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 531 989 q 519 927 531 954 q 487 880 507 899 q 437 851 466 861 q 376 842 409 842 q 314 851 342 842 q 266 880 286 861 q 235 926 246 899 q 224 987 224 953 q 235 1049 224 1022 q 266 1095 246 1076 q 314 1123 286 1114 q 376 1133 342 1133 q 437 1123 408 1133 q 486 1095 465 1114 q 519 1049 507 1076 q 531 989 531 1023 m 452 987 q 430 1044 452 1023 q 376 1064 409 1064 q 320 1044 342 1064 q 299 987 299 1023 q 318 931 299 951 q 376 911 338 911 q 430 931 409 911 q 452 987 452 951 z "}),(0,m.Z)(P,"\xe6",{ha:1157,x_min:64,x_max:1088,o:"m 64 208 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 503 729 447 758 q 589 637 559 701 q 680 727 623 695 q 806 758 736 758 q 924 734 871 758 q 1013 666 976 710 q 1068 561 1049 623 q 1088 425 1088 500 l 1088 349 l 632 349 q 685 156 635 218 q 835 94 735 94 q 897 98 868 94 q 952 107 926 101 q 1004 124 979 114 q 1054 146 1029 134 l 1054 36 q 1002 14 1027 23 q 950 -2 977 4 q 894 -11 923 -8 q 832 -14 865 -14 q 670 25 739 -14 q 559 142 602 64 q 511 76 536 105 q 453 27 485 47 q 381 -3 420 7 q 292 -14 342 -14 q 202 0 243 -14 q 130 40 160 13 q 81 110 99 68 q 64 208 64 151 m 192 207 q 225 115 192 144 q 311 86 258 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 m 803 656 q 685 603 728 656 q 635 449 642 550 l 954 449 q 945 533 954 495 q 918 599 937 572 q 871 641 899 626 q 803 656 842 656 z "}),(0,m.Z)(P,"\xe7",{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 m 495 -195 q 447 -297 495 -260 q 298 -334 399 -334 q 268 -332 283 -334 q 242 -328 252 -330 l 242 -254 q 269 -257 252 -256 q 296 -258 286 -258 q 372 -244 345 -258 q 399 -196 399 -229 q 390 -168 399 -180 q 366 -147 381 -156 q 329 -132 350 -138 q 282 -119 307 -125 l 343 0 l 425 0 l 387 -78 q 429 -92 410 -83 q 464 -115 449 -101 q 487 -149 478 -129 q 495 -195 495 -168 z "}),(0,m.Z)(P,"\xe8",{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "}),(0,m.Z)(P,"\xe9",{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 322 860 q 353 905 337 880 q 385 959 369 931 q 415 1014 401 986 q 440 1064 429 1041 l 589 1064 l 589 1050 q 556 1004 578 1031 q 509 947 535 977 q 455 889 483 917 q 404 842 428 861 l 322 842 l 322 860 z "}),(0,m.Z)(P,"\xea",{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 602 842 l 520 842 q 449 898 486 865 q 377 968 412 930 q 304 898 340 930 q 234 842 269 865 l 152 842 l 152 860 q 193 905 170 880 q 238 959 216 931 q 281 1014 261 986 q 312 1064 301 1041 l 442 1064 q 473 1014 453 1041 q 516 959 493 986 q 562 905 538 931 q 602 860 585 880 l 602 842 z "}),(0,m.Z)(P,"\xeb",{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 182 946 q 201 999 182 983 q 248 1015 220 1015 q 294 999 274 1015 q 313 946 313 982 q 294 893 313 910 q 248 876 274 876 q 201 893 220 876 q 182 946 182 910 m 437 946 q 456 999 437 983 q 502 1015 475 1015 q 527 1011 515 1015 q 547 999 538 1007 q 562 977 556 990 q 567 946 567 964 q 547 893 567 910 q 502 876 528 876 q 456 893 475 876 q 437 946 437 910 z "}),(0,m.Z)(P,"\xec",{ha:359,x_min:-23,x_max:243,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 243 842 l 162 842 q 111 889 138 861 q 57 947 83 917 q 9 1004 31 977 q -23 1050 -12 1031 l -23 1064 l 125 1064 q 151 1014 136 1041 q 181 959 165 986 q 213 905 197 931 q 243 860 229 880 l 243 842 z "}),(0,m.Z)(P,"\xed",{ha:359,x_min:118,x_max:392,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 125 860 q 156 905 140 880 q 188 959 172 931 q 218 1014 204 986 q 243 1064 233 1041 l 392 1064 l 392 1050 q 360 1004 381 1031 q 312 947 338 977 q 259 889 286 917 q 208 842 231 861 l 125 842 l 125 860 z "}),(0,m.Z)(P,"\xee",{ha:359,x_min:-45,x_max:405,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 405 842 l 323 842 q 252 898 288 865 q 180 968 215 930 q 107 898 143 930 q 37 842 71 865 l -45 842 l -45 860 q -5 905 -28 880 q 41 959 18 931 q 84 1014 64 986 q 115 1064 104 1041 l 245 1064 q 276 1014 256 1041 q 318 959 296 986 q 365 905 341 931 q 405 860 388 880 l 405 842 z "}),(0,m.Z)(P,"\xef",{ha:359,x_min:-12,x_max:372,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m -12 946 q 7 999 -12 983 q 53 1015 26 1015 q 99 999 79 1015 q 119 946 119 982 q 99 893 119 910 q 53 876 79 876 q 7 893 26 876 q -12 946 -12 910 m 242 946 q 261 999 242 983 q 307 1015 280 1015 q 332 1011 320 1015 q 353 999 344 1007 q 367 977 361 990 q 372 946 372 964 q 353 893 372 910 q 307 876 333 876 q 261 893 280 876 q 242 946 242 910 z "}),(0,m.Z)(P,"\xf0",{ha:802,x_min:75,x_max:725,o:"m 725 389 q 702 218 725 292 q 637 92 680 143 q 534 13 595 40 q 399 -14 474 -14 q 269 9 328 -14 q 166 74 210 31 q 99 180 123 117 q 75 323 75 243 q 97 467 75 404 q 158 572 118 529 q 255 636 198 614 q 383 659 312 659 q 505 638 452 659 q 586 578 557 618 l 591 581 q 530 726 570 661 q 428 846 489 791 l 254 742 l 204 819 l 351 908 q 295 946 324 927 q 235 982 267 964 l 282 1065 q 368 1019 326 1044 q 449 965 409 995 l 603 1059 l 653 982 l 521 903 q 604 806 566 859 q 668 689 642 753 q 710 551 695 626 q 725 389 725 476 m 597 357 q 586 431 597 395 q 551 495 574 467 q 490 540 527 523 q 401 557 452 557 q 312 541 349 557 q 252 496 275 526 q 217 421 228 466 q 205 319 205 377 q 217 225 205 268 q 252 153 228 183 q 313 105 276 122 q 401 89 350 89 q 552 156 506 89 q 597 357 597 224 z "}),(0,m.Z)(P,"\xf1",{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 m 515 843 q 461 855 488 843 q 408 881 434 867 q 359 908 382 896 q 313 920 335 920 q 267 902 283 920 q 241 842 250 884 l 170 842 q 185 916 174 882 q 214 972 196 949 q 257 1008 232 996 q 313 1021 282 1021 q 369 1009 342 1021 q 422 983 397 997 q 472 957 448 968 q 515 945 495 945 q 561 962 545 945 q 587 1022 576 980 l 658 1022 q 643 948 654 981 q 614 892 632 916 q 571 856 596 869 q 515 843 546 843 z "}),(0,m.Z)(P,"\xf2",{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 506 842 l 425 842 q 373 889 401 861 q 319 947 345 917 q 272 1004 293 977 q 239 1050 250 1031 l 239 1064 l 388 1064 q 413 1014 399 1041 q 444 959 428 986 q 475 905 459 931 q 506 860 492 880 l 506 842 z "}),(0,m.Z)(P,"\xf3",{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 321 860 q 352 905 336 880 q 384 959 368 931 q 414 1014 399 986 q 439 1064 428 1041 l 587 1064 l 587 1050 q 555 1004 576 1031 q 508 947 534 977 q 454 889 481 917 q 403 842 427 861 l 321 842 l 321 860 z "}),(0,m.Z)(P,"\xf4",{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 622 842 l 540 842 q 469 898 505 865 q 397 968 432 930 q 324 898 360 930 q 254 842 288 865 l 172 842 l 172 860 q 212 905 189 880 q 258 959 235 931 q 301 1014 281 986 q 332 1064 321 1041 l 462 1064 q 493 1014 473 1041 q 535 959 513 986 q 582 905 558 931 q 622 860 605 880 l 622 842 z "}),(0,m.Z)(P,"\xf5",{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 499 843 q 445 855 472 843 q 393 881 418 867 q 343 908 367 896 q 298 920 319 920 q 251 902 267 920 q 225 842 235 884 l 155 842 q 169 916 158 882 q 198 972 180 949 q 241 1008 216 996 q 298 1021 267 1021 q 354 1009 326 1021 q 407 983 381 997 q 456 957 433 968 q 499 945 479 945 q 545 962 530 945 q 571 1022 561 980 l 642 1022 q 628 948 639 981 q 598 892 616 916 q 555 856 581 869 q 499 843 530 843 z "}),(0,m.Z)(P,"\xf6",{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 203 946 q 222 999 203 983 q 269 1015 241 1015 q 315 999 295 1015 q 334 946 334 982 q 315 893 334 910 q 269 876 295 876 q 222 893 241 876 q 203 946 203 910 m 458 946 q 477 999 458 983 q 523 1015 496 1015 q 548 1011 536 1015 q 568 999 559 1007 q 583 977 577 990 q 588 946 588 964 q 568 893 588 910 q 523 876 549 876 q 477 893 496 876 q 458 946 458 910 z "}),(0,m.Z)(P,"\xf7",{ha:765,x_min:69,x_max:696,o:"m 69 439 l 69 541 l 696 541 l 696 439 l 69 439 m 304 253 q 311 293 304 277 q 327 319 317 309 q 352 333 338 329 q 382 338 366 338 q 412 333 397 338 q 437 319 426 329 q 454 293 448 309 q 460 253 460 277 q 454 215 460 231 q 437 188 448 199 q 412 173 426 178 q 382 168 397 168 q 352 173 366 168 q 327 188 338 178 q 311 215 317 199 q 304 253 304 231 m 304 726 q 311 766 304 750 q 327 792 317 782 q 352 807 338 802 q 382 811 366 811 q 412 807 397 811 q 437 792 426 802 q 454 766 448 782 q 460 726 460 750 q 454 688 460 704 q 437 662 448 672 q 412 646 426 651 q 382 642 397 642 q 352 646 366 642 q 327 662 338 651 q 311 688 317 672 q 304 726 304 704 z "}),(0,m.Z)(P,"\xf8",{ha:802,x_min:78,x_max:726,o:"m 726 374 q 704 209 726 281 q 638 87 681 136 q 536 12 596 38 q 400 -14 475 -14 q 249 22 315 -14 l 203 -52 l 114 -1 l 168 87 q 102 209 125 136 q 78 374 78 281 q 101 537 78 466 q 165 658 123 609 q 268 733 208 707 q 404 758 329 758 q 485 748 447 758 q 557 720 524 739 l 603 793 l 692 743 l 637 656 q 703 535 680 606 q 726 374 726 465 m 205 374 q 212 272 205 317 q 233 193 218 228 l 503 632 q 457 650 483 644 q 401 656 432 656 q 251 586 297 656 q 205 374 205 515 m 599 374 q 572 549 599 481 l 302 111 q 348 94 323 100 q 403 89 372 89 q 553 160 507 89 q 599 374 599 232 z "}),(0,m.Z)(P,"\xf9",{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 470 842 l 389 842 q 337 889 365 861 q 283 947 309 917 q 236 1004 257 977 q 203 1050 214 1031 l 203 1064 l 352 1064 q 377 1014 363 1041 q 408 959 392 986 q 439 905 423 931 q 470 860 456 880 l 470 842 z "}),(0,m.Z)(P,"\xfa",{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 332 860 q 362 905 347 880 q 394 959 378 931 q 425 1014 410 986 q 450 1064 439 1041 l 598 1064 l 598 1050 q 566 1004 587 1031 q 518 947 545 977 q 465 889 492 917 q 414 842 437 861 l 332 842 l 332 860 z "}),(0,m.Z)(P,"\xfb",{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 631 842 l 549 842 q 477 898 514 865 q 406 968 441 930 q 333 898 369 930 q 262 842 297 865 l 180 842 l 180 860 q 221 905 198 880 q 267 959 244 931 q 310 1014 290 986 q 340 1064 330 1041 l 471 1064 q 502 1014 481 1041 q 544 959 522 986 q 590 905 567 931 q 631 860 614 880 l 631 842 z "}),(0,m.Z)(P,"\xfc",{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 210 946 q 229 999 210 983 q 275 1015 248 1015 q 321 999 301 1015 q 340 946 340 982 q 321 893 340 910 q 275 876 301 876 q 229 893 248 876 q 210 946 210 910 m 464 946 q 483 999 464 983 q 529 1015 502 1015 q 554 1011 542 1015 q 574 999 566 1007 q 589 977 583 990 q 594 946 594 964 q 574 893 594 910 q 529 876 555 876 q 483 893 502 876 q 464 946 464 910 z "}),(0,m.Z)(P,"\xfd",{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 276 860 q 307 905 291 880 q 339 959 323 931 q 369 1014 355 986 q 394 1064 383 1041 l 543 1064 l 543 1050 q 510 1004 532 1031 q 463 947 489 977 q 409 889 437 917 q 358 842 382 861 l 276 842 l 276 860 z "}),(0,m.Z)(P,"\xfe",{ha:814,x_min:118,x_max:737,o:"m 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 1055 l 241 1055 l 241 745 l 236 644 l 241 644 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "}),(0,m.Z)(P,"\xff",{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 155 946 q 174 999 155 983 q 220 1015 193 1015 q 266 999 246 1015 q 286 946 286 982 q 266 893 286 910 q 220 876 246 876 q 174 893 193 876 q 155 946 155 910 m 409 946 q 428 999 409 983 q 474 1015 447 1015 q 499 1011 487 1015 q 519 999 511 1007 q 534 977 528 990 q 539 946 539 964 q 519 893 539 910 q 474 876 500 876 q 428 893 447 876 q 409 946 409 910 z "}),(0,m.Z)(P,"\u0131",{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 z "}),(0,m.Z)(P,"\u02c6",{ha:802,x_min:175,x_max:625,o:"m 625 842 l 543 842 q 472 898 509 865 q 400 968 435 930 q 328 898 363 930 q 257 842 292 865 l 175 842 l 175 860 q 216 905 193 880 q 261 959 239 931 q 304 1014 284 986 q 335 1064 324 1041 l 465 1064 q 496 1014 476 1041 q 539 959 516 986 q 585 905 562 931 q 625 860 608 880 l 625 842 z "}),(0,m.Z)(P,"\u02da",{ha:802,x_min:248,x_max:554,o:"m 554 989 q 542 927 554 954 q 510 880 530 899 q 460 851 489 861 q 399 842 432 842 q 337 851 365 842 q 289 880 309 861 q 258 926 269 899 q 248 987 248 953 q 258 1049 248 1022 q 289 1095 269 1076 q 337 1123 309 1114 q 399 1133 365 1133 q 460 1123 431 1133 q 509 1095 488 1114 q 542 1049 530 1076 q 554 989 554 1023 m 475 987 q 453 1044 475 1023 q 399 1064 432 1064 q 343 1044 365 1064 q 322 987 322 1023 q 341 931 322 951 q 399 911 361 911 q 453 931 432 911 q 475 987 475 951 z "}),(0,m.Z)(P,"\u02dc",{ha:802,x_min:175,x_max:663,o:"m 519 843 q 466 855 492 843 q 413 881 439 867 q 363 908 387 896 q 318 920 340 920 q 271 902 288 920 q 245 842 255 884 l 175 842 q 190 916 178 882 q 219 972 201 949 q 262 1008 237 996 q 318 1021 287 1021 q 374 1009 347 1021 q 427 983 401 997 q 476 957 453 968 q 519 945 500 945 q 566 962 550 945 q 591 1022 581 980 l 663 1022 q 648 948 659 981 q 619 892 637 916 q 576 856 601 869 q 519 843 551 843 z "}),(0,m.Z)(P,"\u2013",{ha:694,x_min:56,x_max:639,o:"m 56 315 l 56 429 l 639 429 l 639 315 l 56 315 z "}),(0,m.Z)(P,"\u2014",{ha:1389,x_min:56,x_max:1333,o:"m 56 315 l 56 429 l 1333 429 l 1333 315 l 56 315 z "}),(0,m.Z)(P,"\u2018",{ha:243,x_min:16,x_max:228,o:"m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "}),(0,m.Z)(P,"\u2019",{ha:243,x_min:16,x_max:228,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 z "}),(0,m.Z)(P,"\u201a",{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "}),(0,m.Z)(P,"\u201c",{ha:504,x_min:16,x_max:489,o:"m 286 652 l 277 667 q 299 745 286 703 q 328 828 313 786 q 361 912 344 870 q 396 991 379 954 l 489 991 q 469 905 479 950 q 450 816 459 861 q 434 730 441 772 q 421 652 427 688 l 286 652 m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "}),(0,m.Z)(P,"\u201d",{ha:504,x_min:16,x_max:489,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 m 479 991 l 489 977 q 466 898 479 939 q 437 815 453 857 q 404 731 421 772 q 370 652 387 690 l 277 652 q 296 737 286 692 q 315 827 306 782 q 332 913 324 871 q 345 991 339 956 l 479 991 z "}),(0,m.Z)(P,"\u201e",{ha:608,x_min:43,x_max:517,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 507 161 l 517 146 q 494 68 507 109 q 465 -16 481 26 q 432 -99 449 -58 q 397 -179 414 -141 l 304 -179 q 324 -93 314 -138 q 343 -4 334 -48 q 359 83 352 41 q 372 161 367 125 l 507 161 z "}),(0,m.Z)(P,"\u2022",{ha:522,x_min:102,x_max:421,o:"m 102 507 q 114 589 102 555 q 148 645 126 623 q 198 675 169 666 q 261 685 227 685 q 323 675 294 685 q 374 645 353 666 q 409 589 396 623 q 421 507 421 555 q 409 426 421 460 q 374 371 396 392 q 323 339 353 349 q 261 329 294 329 q 198 339 227 329 q 148 371 169 349 q 114 426 126 392 q 102 507 102 460 z "}),(0,m.Z)(P,"\u2039",{ha:400,x_min:56,x_max:345,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 z "}),(0,m.Z)(P,"\u203a",{ha:400,x_min:56,x_max:345,o:"m 345 357 l 135 78 l 56 131 l 216 367 l 56 603 l 135 656 l 345 375 l 345 357 z "}),(0,m.Z)(P,"\u2044",{ha:180,x_min:-239,x_max:418,o:"m 418 991 l -132 0 l -239 0 l 311 991 l 418 991 z "}),P),familyName:"Droid Sans",ascender:1293,descender:-334,underlinePosition:-154,underlineThickness:102,boundingBox:{yMin:-492,xMin:-352,yMax:1907,xMax:1966},resolution:1e3,original_font_information:{format:0,copyright:"Digitized data copyright \xa9 2007, Google Corporation.",fontFamily:"Droid Sans",fontSubfamily:"Regular",uniqueID:"Ascender - Droid Sans",fullName:"Droid Sans",version:"Version 1.00 build 113",postScriptName:"DroidSans",trademark:"Droid is a trademark of Google and may be registered in certain jurisdictions.",manufacturer:"Ascender Corporation",description:"Droid Sans is a humanist sans serif typeface designed for user interfaces and electronic communication.",manufacturerURL:"http://www.ascendercorp.com/",designerURL:"http://www.ascendercorp.com/typedesigners.html",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://\xaewww.apache.org/licenses/LICENSE-2.0",compatibleFullName:"Droid Sans"},cssFontWeight:"normal",cssFontStyle:"normal"},pb=function(){function e(){b(this,e),this.fonts={},this.getFont=this.getFont.bind(this)}return x(e,[{key:"getFont",value:function(e){if(this.fonts[e])return this.fonts[e];if(!e)return Promise.resolve(vb);switch(e){case"arrival":return this.fonts[e]=n.e(860).then(n.bind(n,860)).then((function(e){return mb(e)})),this.fonts[e];case"chalet-parisnineteensixty":return this.fonts[e]=n.e(518).then(n.bind(n,518)).then((function(e){return mb(e)})),this.fonts[e];case"helvetica neue":return this.fonts[e]=n.e(969).then(n.bind(n,969)).then((function(e){return mb(e)})),this.fonts[e];case"helvetiker":return this.fonts[e]=n.e(356).then(n.bind(n,356)).then((function(e){return mb(e)})),this.fonts[e];case"lato":return this.fonts[e]=n.e(299).then(n.bind(n,299)).then((function(e){return mb(e)})),this.fonts[e];case"myriad pro":return this.fonts[e]=n.e(719).then(n.bind(n,719)).then((function(e){return mb(e)})),this.fonts[e];case"proxima nova medium":return this.fonts[e]=n.e(662).then(n.bind(n,662)).then((function(e){return mb(e)})),this.fonts[e];case"simon circular book":return this.fonts[e]=n.e(644).then(n.bind(n,644)).then((function(e){return mb(e)})),this.fonts[e];default:return Promise.resolve(vb)}}}]),e}(),fb=new pb,mb=function(e){var t={},n={};Object.keys(db.glyphs).forEach((function(e){n[e]=db.glyphs[e]})),Object.keys(e.glyphs).forEach((function(t){n[t]=e.glyphs[t]})),Object.keys(db).forEach((function(e){t[e]=db[e]})),t.glyphs=n;var i=new Lc(t);i._mSupportedCharacters=Object.keys(t.glyphs).join("");var r=i._mSupportedCharacters.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return i._mInvalidCharacters=new RegExp("[^"+r+"]","g"),i},vb=mb(db);O();var gb="x",yb="y",xb="z";var bb=function(e){w(n,e);var t=M(n);function n(e,i,r,o){var a;b(this,n),a=t.call(this),(0,L.d)(c(a),"polygon"),(0,L.d)(c(a),"mapClass"),(0,L.d)(c(a),"container"),(0,L.d)(c(a),"visible"),a.polygon=e,a.mapClass=i,a.container=r,a.assetManager=o;var s=!1!==e.geometry.visible,l=e.image&&e.image.visible&&(e.image.url||e.image.original),u=e.label&&e.label.visible&&e.label.text;return(s||l||u)&&n._setPolygonDefaults(e),a.visible=s,a.imageVisible=l,a.labelVisible=u,a.load.bind(c(a)),a}return x(n,[{key:"getBoundingBox",value:function(){if(this.boundingBox)return this.boundingBox;var e=1/0,t=1/0,n=-1/0,i=-1/0,r=-this.mapClass.width/2,o=this.mapClass.height/2;return this.polygon.vertexes.forEach((function(a){a.x+r>n&&(n=a.x+r),a.x+r<e&&(e=a.x+r),-a.y+o>i&&(i=-a.y+o),-a.y+o<t&&(t=-a.y+o)})),this.boundingBox={min:{x:e,y:t},max:{x:n,y:i}},this.boundingBox}},{key:"load",value:function(){var e=this,t=this;return this.visible||this.imageVisible||this.labelVisible?new Promise((function(i,r){var o=t.polygon,a=t.mapClass;if(e.visible){var s=o.vertexes,l=Math.max(a.width,a.height)/1e3;(e.imageVisible||o.geometry.offset)&&(s=n._clip(s,0),s=n._clip(s,o.geometry.offset),o.vertexes=s);var u,c=n._makeFromCoords(rc,s,a);o.holes&&(c.holes=o.holes.map((function(e){return n._makeFromCoords(ic,e,a)}))),u=o.geometry.bevel?{bevelEnabled:!0,depth:o.geometry.scale.z*l,bevelThickness:o.geometry.bevel.thickness*o.geometry.scale.z*l,bevelSize:o.geometry.bevel.size*l,bevelSegments:o.geometry.bevel.segments||1}:{bevelEnabled:!1,depth:o.geometry.scale.z*l};var h,d=o.textures&&o.textures.length&&o.textures.filter((function(e){return e.image&&Object.keys(e.image).length})).length,p=n._normalizeColor(o.material.color),f=o.material.opacity||1,m=new Cl(c,u);if(d){var v,y,x=o.textures.find((function(e){return"front"===e.name})),b=o.textures.find((function(e){return"side"===e.name})),_=b&&b.useFrontFaceImage,w=x&&x.image&&(x.image.url||x.image.original),M=b&&b.image&&(b.image.url||b.image.original);(function(e,t,n){e.computeBoundingBox();var i=e.boundingBox,r=Math.max(n.width,n.height)/1e3,o=Math.max(n.width*r,n.height*r),a={min:new Xt(0,0,0),max:new Xt(1,1,1).multiplyScalar(o)},s={};t.forEach((function(e){s[e.name]=e}));var l,u,c=e.getAttribute("position"),h=e.getAttribute("normal"),d=e.getAttribute("uv");console.assert(c.count==h.count),console.assert(c.count==d.count),e.index?(console.assert(e.index.count%3==0),l=e.index.count/3,u=function(t,n){return e.index.getX(3*t+n)}):(console.assert(c.count%3==0),l=c.count/3,u=function(e,t){return 3*e+t});for(var p=s.side||{},f=s.front||{},m=null!=p.repeat?p.repeat.u:1,v=null!=p.repeat?p.repeat.v:1,g=null!=p.offset?p.offset.u:1,y=null!=p.offset?p.offset.v:1,x=null!=p.rotation?p.rotation:0,b=p.useLocalScaling||!1,_=null!=f.repeat?f.repeat.u:1,w=null!=f.repeat?f.repeat.v:1,M=null!=f.offset?f.offset.u:1,E=null!=f.offset?f.offset.v:1,q=null!=f.rotation?f.rotation:0,T=f.useLocalScaling||!1,S=0;S<l;++S){var P,A,C,L,O,I,k,N,R=h.getX(u(S,0))+h.getX(u(S,1))+h.getX(u(S,2)),D=h.getY(u(S,0))+h.getY(u(S,1))+h.getY(u(S,2)),B=h.getZ(u(S,0))+h.getZ(u(S,1))+h.getZ(u(S,2)),z=Math.abs(R),F=Math.abs(D),U=Math.abs(B);z<=F&&z<=U?(P=gb,A=F<=U?yb:xb):F<=z&&F<=U?(P=yb,A=z<=U?gb:xb):(P=xb,A=z<=F?gb:yb),P===xb&&(P=A,A=xb),A===xb||P===xb?(C=m,L=v,O=g,I=y,k=x,N=b?i:a):(C=_,L=w,O=M,I=E,k=q,N=T?i:a);for(var j=N.min,H=N.max,V=Math.abs(H[P]-j[P]),G=Math.abs(H[A]-j[A]),W=k*Math.PI/180||0,X=Math.cos(W),Y=Math.sin(W),Z=0;Z<3;Z++){var J,Q,K=c.getX(u(S,Z)),$=c.getY(u(S,Z)),ee=c.getZ(u(S,Z));J=P===gb?C*(K-j[P])/V+O:P===yb?C*($-j[P])/V+O:C*(ee-j[P])/V+O,Q=A===gb?L*(K-j[A])/G+I:A===yb?L*($-j[A])/G+I:L*(ee-j[A])/G+I;var te=(J-=.5)*X-(Q-=.5)*Y+.5,ne=J*Y+Q*X+.5;d.setX(u(S,Z),te),d.setY(u(S,Z),ne)}}e.uvsNeedUpdate=!0})(m,o.textures,a),w&&e.assetManager.loadImage(w).then((function(e){e.mapping=Qe,e.wrapS=$e,e.wrapT=$e,e.anisotropy=16})),!_&&M?e.assetManager.loadImage(M).then((function(e){e.mapping=Qe,e.wrapS=$e,e.wrapT=$e,e.anisotropy=16})):y=v;var E={color:p,transparent:!0,opacity:f,side:f<1?2:0};h=y===v?new ou(g(g({},E),{},{map:v})):[new ou(g(g({},E),{},{map:v})),new ou(g(g({},E),{},{map:y}))]}else h=n._getMaterial(o.material.color,f);var q=new rr(m,h);q.name=o.id,Array.isArray(q.material)||(q.material.needsUpdate=!0),q.translateZ(o.geometry.position.z*l),t.container.add(q),t.mesh=q}e.imageVisible&&e._addImage(o,a,(function(){})),e.labelVisible&&e._addLabel(o,a,(function(){}))})):Promise.resolve()}},{key:"_addLabel",value:function(e,t,i){var r=this;if(e.label.text){var o=Math.max(t.width,t.height)/1e3,a=n.getWeightedCenter(e.vertexes),s=e.label.position,l=e.label.rotation.z,u=e.label.text.split("\n");fb.getFont(e.label.fontFamily).then((function(c){var h={font:c,size:e.label.fontSize*o,height:n.overlayHeight,bevelEnabled:!1,curveSegments:4},d=0,p=u.reverse().map((function(e,t){return e.length>u[d].length&&(d=t),new Il(e,h)})),f=new rr(p[d]),m=(new Nn).setFromObject(f).getSize(new Xt).x,v=n._getMaterial(e.label.color),g=0,y=new hr;u.forEach((function(e,t){var n,i=new rr(p[t],v),r=(new Nn).setFromObject(i).getSize(new Xt);n="left"===h.align?0:"right"===h.align?m-r.x:(m-r.x)/2,i.position.set(n,g,0),i.updateMatrix(),y.merge(i.geometry,i.matrix),g+=1.25*h.size}));var x=new rr(y,v);y.computeBoundingBox();var b=y.boundingBox,_=b.max.x-b.min.x,w=b.max.y-b.min.y,M=e.geometry.position.z+e.geometry.scale.z;x.translateX(a.x-t.width/2+s.x-_/2),x.translateY(-a.y+t.height/2+s.y-w/2),x.rotation.set(0,0,l*Math.PI/180),x.translateZ((n.overlayHeight+M)*o),r.container.add(x),i()}))}}},{key:"_addImage",value:function(e,t,i){var r=this;this.hasImage=!0;var o=this.getBoundingBox(),a=e.image.url||e.image.original;a instanceof Blob&&(a=URL.createObjectURL(a)),this.assetManager.loadImage(a).then((function(s){var l=new ou({transparent:!0,depthWrite:!1,side:2,map:s}),u=new rr(new Cr(1,1),l),c=Math.max(t.width,t.height)/1e3,h=s.image.width,d=s.image.height;URL.revokeObjectURL(a);var p,f={x:e.image.viewBox.width,y:e.image.viewBox.height};p=!1===e.image.useLocalScaling?c:Math.min(o.max.x-o.min.x,o.max.y-o.min.y)/Math.max(f.x,f.y),e.image.fitToBounds?u.scale.set(o.max.x-o.min.x,o.max.y-o.min.y,1):e.image.scale&&u.scale.set(e.image.scale.x*p*e.image.viewBox.width,e.image.scale.y*p*e.image.viewBox.height,1),u.translateZ(n.overlayHeight*c),s.repeat=new Nt(e.image.viewBox.width/h,e.image.viewBox.height/d),s.offset=new Nt(0,(s.image.height-e.image.viewBox.height)/s.image.height),s.anisotropy=16,u.renderOrder=1,u.name=e.id+"_image",r.container.add(u),r.imageMesh=u;var m,v=e.vertexes;m=e.image.fitToBounds?n.getBoundingCentre(v):n.getWeightedCenter(v);var g=e.image.fitToBounds?0:e.image.position.x,y=e.image.fitToBounds?0:e.image.position.y,x=e.geometry.position.z+e.geometry.scale.z;e.image.position&&(u.translateX(m.x-t.width/2+g),u.translateY(-m.y+t.height/2+y),u.translateZ((x+e.image.position.z)*c)),e.image.rotation&&u.rotation.set(e.image.rotation.x*Math.PI/180,e.image.rotation.y*Math.PI/180,e.image.rotation.z*Math.PI/180),r.publish("texture-loaded",s),i()}))}}],[{key:"getDefaultMaterial",value:function(){return n.defaultMaterial||(n.defaultMaterial=new ou({color:0})),n.defaultMaterial}},{key:"getWeightedCenter",value:function(e){var t=e.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});return t.x/=e.length,t.y/=e.length,t}},{key:"getBoundingCentre",value:function(e){var t=1/0,n=1/0,i=-1/0,r=-1/0;return e.forEach((function(e){e.x>i&&(i=e.x),e.x<t&&(t=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y)})),{x:(t+i)/2,y:(n+r)/2}}},{key:"_makeFromCoords",value:function(e,t,n){var i=new e;return i.moveTo(t[0].x-n.width/2,-t[0].y+n.height/2),t.slice(1).forEach((function(e){return i.lineTo(e.x-n.width/2,-e.y+n.height/2)})),i.lineTo(t[0].x-n.width/2,-t[0].y+n.height/2),i}},{key:"_setPolygonDefaults",value:function(e){var t={visible:!0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:5},bevel:{size:0,thickness:0,segments:1},offset:0};return e.layer||(e.layer="Polygon"),e.geometry=(0,lb.default)(e.geometry,t),e.geometry.bevel=(0,lb.default)(e.geometry.bevel,t.bevel),e.image&&(e.image.position=(0,lb.default)(e.image.position,t.position),e.image.rotation=(0,lb.default)(e.image.rotation,t.rotation),e.image.scale=(0,lb.default)(e.image.scale,t.scale)),e.label&&(e.label.position=(0,lb.default)(e.label.position,t.position),e.label.rotation=(0,lb.default)(e.label.rotation,t.rotation),e.label.scale=(0,lb.default)(e.label.scale,t.scale),e.label.color=e.label.color||"#000000",e.label.fontSize=e.label.fontSize||20),e}},{key:"_normalizeColor",value:function(e){var t=e.replace(/#/,"");return 3===t.length&&(t="".concat(t[0]).concat(t[0]).concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2])),parseInt(t,16)}},{key:"_getMaterial",value:function(e,t){var i,r=n._normalizeColor(e),o=t<1?r+"_"+t:r;if(n.materials[o])i=n.materials[o];else{var a={color:r,side:t<1?2:0};t<1&&(a.transparent=!0,a.opacity=t),n.materials[o]=new ou(a),i=n.materials[o]}return i}},{key:"_clip",value:function(e,t){t/=2;for(var i=n.scale,r=e.map((function(e){return{X:e.x*i,Y:e.y*i}})),o=8;0!==o;o--){var a=new hb.ClipperOffset;a.AddPath(r,hb.JoinType.jtMiter,hb.EndType.etClosedPolygon);var s=new hb.Paths;try{if(a.Execute(s,t*i),s.length)return s[0].map((function(e){return{x:e.X/i,y:e.Y/i}}));t/=2}catch(e){t/=2}}return r}}]),n}(Qv);bb.materials={},bb.defaultExtrudeSettings={depth:10,bevelEnabled:!1},bb.scale=100,bb.overlayHeight=.15;var _b=bb;O();var wb,Mb=function(){function e(){b(this,e),(0,L.d)(this,"textureLoader",new Nu)}return x(e,[{key:"loadMapPolygons",value:function(){var e=a(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch(t.scene.polygons);case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadImage",value:function(){var e=a(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var r=n.textureLoader.load(t,(function(){e(r)}),(function(){}),i)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Eb=function(){function e(){b(this,e),(0,L.d)(this,"defaultExtrudeSettings",{amount:10,bevelEnabled:!1}),(0,L.d)(this,"materials",{}),(0,L.d)(this,"scale",100),(0,L.d)(this,"assetManager",new Mb),(0,L.d)(this,"overlayHeight",.15)}return x(e,[{key:"setAssetManager",value:function(e){this.assetManager=e}},{key:"load",value:function(e,t){var n=this;if("string"==typeof e)return this.assetManager.loadMapPolygons(t).then((function(e){return null==e||0===e.length?Promise.reject("No polygons found for venue"):n._build(e,t)})).catch((function(e){return Promise.reject(e)}));try{return this._build(e,t)}catch(e){return Promise.reject(e)}}},{key:"_build",value:function(e,t){var n=this;console.time("JSONSceneLoader"),this.container=new Aa;var i=new Set,r={};t.layers.forEach((function(e){!1!==e.visible&&i.add(e.id)})),e.forEach((function(e){var o=e.layer||"Polygon";if(i.has(o)){var a=new _b(e,t,n.container,n.assetManager);r[e.id]=a}}));var o=this.container;return console.timeEnd("JSONSceneLoader"),Promise.resolve({container:o,elements:r})}}]),e}(),qb=new Eb,Tb=new bn,Sb={Floor:1,Wall:2,"Outer Wall":2.2,Anchors:4,Anchor:4,"Anchor Store":4,Polygon:5,Kiosks:6,"Inner Wall":7,"Non Public":7.5},Pb=function(e){if(Sb[e.layer])return Sb[e.layer];var t=e.geometry.scale,n=e.geometry.position;return 100+(t?t.z:1)+(n?n.z:0)},Ab=function(e){w(n,e);var t=M(n);function n(e,i,r,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return b(this,n),a=t.call(this),(0,L.d)(c(a),"_flippableImagedById",{}),(0,L.d)(c(a),"_started",!1),(0,L.d)(c(a),"_loaderPromise",null),(0,L.d)(c(a),"_promiseResolve",null),(0,L.d)(c(a),"objectsDictionary",{}),(0,L.d)(c(a),"north",null),(0,L.d)(c(a),"mapScale",null),(0,L.d)(c(a),"object",new bn),(0,L.d)(c(a),"labels",new Set),(0,L.d)(c(a),"tooltips",new Set),(0,L.d)(c(a),"markers",new Set),(0,L.d)(c(a),"textObjects",[]),(0,L.d)(c(a),"labelBatchCreator",null),(0,L.d)(c(a),"imagesToFlip",[]),(0,L.d)(c(a),"seenByCamera",!1),(0,L.d)(c(a),"threeJSMarkers",new Map),a.mapView=o,a.mapClass=e,a.polygonMeshesById=i,a._showCount=r,a.loadMethod="json",a.loadAsync=s.async,a._taskScheduler=s.taskScheduler,a.id=a.mapClass.id,a._highPriorityTasks=new eb({name:"_highPriorityTasks",onComplete:a._checkIfLoaded.bind(c(a)),priority:!a.visible&&a.loadAsync?Yx:Gx,postponeOnAdd:!a.visible&&!a.loadAsync}),a._lowPriorityTasks=new eb({name:"_lowPriorityTasks",onComplete:a._checkIfLoaded.bind(c(a)),priority:!a.visible&&a.loadAsync?Zx:Wx,postponeOnAdd:!a.visible&&!a.loadAsync}),a._markerTasks=new eb({name:"_markerTasks",priority:!a.visible&&a.loadAsync?Jx:Xx,postponeOnAdd:!a.visible}),a._mapLoadedTasks=new eb({name:"_mapLoadedTasks",priority:Qx,postponeOnAdd:!a.isReady()}),a._visibilityLatch=null,a._objLoadedComplete=!1,a._loaderPromise=new Promise((function(e,t){a._promiseResolve=e,wb=t})),a._objLoaded=a._objLoaded.bind(c(a)),a.enableImageFlipping=a.enableImageFlipping.bind(c(a)),a.destroy=a.destroy.bind(c(a)),a}return x(n,[{key:"_objLoaded",value:function(e){var t=this;if(e.elements){this.elements=e.elements;var n=Object.values(this.elements);n.sort((function(e,t){return null==e.sortScore&&(e.sortScore=Pb(e.polygon)),null==t.sortScore&&(t.sortScore=Pb(t.polygon)),t.sortScore-e.sortScore}));for(var i=new Xt(1/0,1/0,0),r=new Xt(-1/0,-1/0,0),o=function(){var e=s[a],n=e.getBoundingBox();i.min(n.min),r.max(n.max),t.loadAsync?t._addPendingHighPriorityTask("addPolygon",(function(){return t._addElementToScene(e)})):t._addElementToScene(e)},a=0,s=n;a<s.length;a++)o();this.boundingBox={min:i,max:r},e=e.container}for(var l=e.children,u=0,c=l.length;u<c;++u){var h=l[u];this.objectsDictionary[h.name]=h,this.polygonMeshesById[h.name]=h}return this.object=e,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,this.publish("pinsNeedUpdating",!0),this._objLoadedComplete=!0,this._onRootObjectCreated(),this._checkIfLoaded(),this._promiseResolve(this)}},{key:"loadPolygonNow",value:function(e){if(this.elements){var t=this.elements[e];t&&this._addElementToScene(t)}}},{key:"_addElementToScene",value:function(e){var t=this;if(!this.objectsDictionary[e.polygon.id]){if(e.load.bind(e),e.load(),e.hasImage&&e.on("texture-loaded",(function(e){t.publish("texture-loaded",e)})),e.mesh){var n=e.mesh;this.objectsDictionary[n.name]=n,this.polygonMeshesById[n.name]=n}if(e.imageMesh){var i=e.imageMesh;this.objectsDictionary[i.name]=i,this.polygonMeshesById[i.name]=i}if(e.polygon.image){var r=null!=e.polygon.image.rotation?e.polygon.image.rotation.z:0;this.mapView._imageFlippingEnabled&&this.enableImageFlipping(e.polygon.id,r*(Math.PI/180))}}}},{key:"load",value:function(){if(!this._started){this._started=!0;try{var e=this.mapClass.scene.polygons;if("json"!==this.loadMethod&&void 0!==this.loadMethod||!e)throw new Error("Error parsing JSON scene");var t=e||false;this.loadMethodUsed="JSON - "+(e?"published":"live"),qb.load(t,this.mapClass).then(this._objLoaded)}catch(op){wb("ERROR: No 3D files for map "+(this.mapClass.name||this.mapClass.shortName||this.mapClass.id||this.mapClass))}}return this._loaderPromise}},{key:"_dispose",value:function(e){for(var t=e,n=t.children.length-1;n>=0;n--)this._dispose(t.children[n]);t.destroy(),delete this.objectsDictionary[t.name],delete this.polygonMeshesById[t.name]}},{key:"destroy",value:function(){this.removeLabels(),this._removeThreeJSMarkers(),this.disableAllImageFlipping(),this._dispose(this.object)}},{key:"add",value:function(e){var t=this;Tb.add(e),this.load().then((function(){1===Tb.children.filter((function(t){return t.uuid===e.uuid})).length&&t.object.add(e)}))}},{key:"getPositionLatLon",value:function(e,t){var n=this.mapClass.georeference[0],i=new Cd(n.target.x,n.target.y),r=new Cd(e,t),o=i.distanceTo(r),a=(i.finalBearingTo(r)+0)*Math.PI/180,s=o*this.getMapScale(this.mapClass),l=a+this.getNorth(this.mapClass),u=Math.sin(l)*s,c=Math.cos(l)*s;return this.mapView.convertTo3DMapPosition({x:n.control.x+u,y:n.control.y-c,map:this.mapClass.id})}},{key:"getMapScale",value:function(){return null==this.mapScale&&(this.mapScale=function(e){if(e.scale||e.x_scale)return 1/(e.scale||e.x_scale);var t;try{var n=e.georeference[0],i=e.georeference[2],r=new LatLon(n.target.x,n.target.y),o=new LatLon(i.target.x,i.target.y),a=r.distanceTo(o),s=n.control.x-i.control.x,l=n.control.y-i.control.y;t=Math.sqrt(s*s+l*l)/a}catch(n){t=1,console.warn(n),console.warn("Couldn't georeference "+(e.name||e.shortName||e.id)+". Probably not enough geocoordinates.")}return t}(this.mapClass)),this.mapScale}},{key:"getNorth",value:function(){return null==this.north&&(this.north=function(e){var t;try{var n=e.georeference[0],i=e.georeference[2],r=new Cd(n.target.x,n.target.y),o=new Cd(i.target.x,i.target.y);t=-((r.finalBearingTo(o)+0)*Math.PI/180-Math.atan2(i.control.y-n.control.y,i.control.x-n.control.x)-Math.PI/2)}catch(n){t=0,console.warn(n),console.warn("Couldn't georeference "+(e.name||e.shortName||e.id)+". Probably not enough geocoordinates.")}return t}(this.mapClass)),this.north}},{key:"enableImageFlipping",value:function(e,t){if(t=t||0,!this._flippableImagedById[e]&&this.object&&Object.keys(this.object).length>0){var n=this.object.getObjectByName(e+"_image");if(n){var i=new sb({image:n,rotation:t});this.imagesToFlip.push(i),this.publish("flippablesNeedUpdating"),this.publish("render"),this._flippableImagedById[e]=!0}}}},{key:"disableAllImageFlipping",value:function(){for(var e=0,t=this.imagesToFlip.length;e<t;e++)this.imagesToFlip[e].reset();this.imagesToFlip=[],this._flippableImagedById={}}},{key:"visible",get:function(){return null!=this.object.parent}},{key:"isReady",value:function(){return(this.loadAsync?this._highPriorityTasks.isComplete():this.isFullyLoaded())&&this._objLoadedComplete}},{key:"isFullyLoaded",value:function(){return this._highPriorityTasks.isComplete()&&this._lowPriorityTasks.isComplete()}},{key:"onVisible",value:function(){!0!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,Gx),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,Wx),this._taskScheduler.resumeTask(this._markerTasks)):(this._taskScheduler.resumeTask(this._highPriorityTasks),this._taskScheduler.resumeTask(this._lowPriorityTasks),this._taskScheduler.resumeTask(this._markerTasks)),this._visibilityLatch=!0)}},{key:"onInvisible",value:function(){!1!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,Yx),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,Zx),this._taskScheduler.postponeTask(this._markerTasks)):(this._taskScheduler.postponeTask(this._highPriorityTasks),this._taskScheduler.postponeTask(this._lowPriorityTasks),this._taskScheduler.postponeTask(this._markerTasks)),this._visibilityLatch=!1)}},{key:"addPendingMarkerTask",value:function(e,t){this._taskScheduler.scheduleTask(new $x({name:"addMarker",group:this._markerTasks,callback:t,userdata:{marker:e}}))}},{key:"addPendingLowPriorityTask",value:function(e,t){this._taskScheduler.scheduleTask(new $x({name:e,group:this._lowPriorityTasks,callback:t}))}},{key:"addPendingMapLoadedTask",value:function(e,t){this._taskScheduler.scheduleTask(new $x({name:e,group:this._mapLoadedTasks,callback:t})),this._checkIfLoaded()}},{key:"_addPendingHighPriorityTask",value:function(e,t){this._taskScheduler.scheduleTask(new $x({name:e,group:this._highPriorityTasks,callback:t}))}},{key:"addThreeJSMarker",value:function(e){var t=this;if(!(e.object instanceof bn))throw new Error("threeJSMarker `object` must be an instance of `Object3D`");var n=new Cb({mapId:this.id,object:e.object}),i={object:e.object};return e.object.layers.set(_f.ANIMATED),null!=e.position&&e.object.position.copy(e.position),null!=e.rotation&&e.object.rotation.copy(e.rotation),null!=e.scale&&e.object.scale.copy(e.scale),this.threeJSMarkers.set(n,i),this._objLoadedComplete?this.object.add(i.object):this.load().then((function(){n._deleted||t.object.add(i.object)})),n}},{key:"removeThreeJSMarker",value:function(e){var t=this.threeJSMarkers.get(e);return null!=t&&(e._deleted=!0,this.threeJSMarkers.delete(e),this._objLoadedComplete&&this.object.remove(t.object),e._destroy(),!0)}},{key:"_removeThreeJSMarkers",value:function(){if(this._objLoadedComplete){var e,t=(0,C.Z)(this.threeJSMarkers.entries());try{for(t.s();!(e=t.n()).done;){var n=r(e.value,2),i=n[0],o=n[1];this.object.remove(o.object),i._destroy()}}catch(a){t.e(a)}finally{t.f()}}this.threeJSMarkers.clear()}},{key:"removeLabels",value:function(){if(this.labels.forEach((function(e){e.disable(),e.removeSelf()})),this.labels=new Set,Array.isArray(this.textObjects)){for(var e=0,t=this.textObjects.length;e<t;++e){var n=this.textObjects[e];n.removeSelf(!0),n=void 0}this.textObjects=[]}}},{key:"_checkIfLoaded",value:function(){var e=this;this.isReady()&&this._taskScheduler.scheduleTask(new $x({name:"onMapLoaded",callback:function(){e._taskScheduler.resumeTask(e._mapLoadedTasks),e.mapLoaded&&typeof e.mapLoaded==typeof Function&&(e.mapLoaded(),e.mapLoaded=null)}}))}},{key:"_onRootObjectCreated",value:function(){for(var e in this.threeJSMarkers.values())this.object.add(e.object)}},{key:"_popinChildObjects",value:function(){var e=this;this.loadAsync||this.object.traverse((function(t){0==t.children.length&&"Mesh"==t.type&&t.material.map&&(t.visible=!1,e._addPendingHighPriorityTask("addPolygon",(function(){t.visible=!0,e._showCount>=1&&(e._showCount=0,e.publish("render:now")),e._showCount++})))}))}}]),n}(Qv),Cb=function(){function e(t){var n=t.mapId,i=t.object;b(this,e),this._mapId=n,this._object=i}return x(e,[{key:"object",get:function(){return this._object}},{key:"_destroy",value:function(){this._mapId=null,this._object=null}}]),e}(),Lb=Ab;function Ob(e){return e.sort((function(e,t){return t.mapClass.elevation-e.mapClass.elevation}))}var Ib=function(e,t){var n=e.min,i=e.max,r=e.margin;r||(r=1);var o=t.boundingBox;o||(o=(new Nn).setFromObject(t.object),t.boundingBox=o);var a={min:{},max:{},margin:r};a.min.x=Math.min(n.x,o.min.x*r),a.max.x=Math.max(i.x,o.max.x*r),a.min.y=Math.min(n.y,o.min.y*r),a.max.y=Math.max(i.y,o.max.y*r);var s=(a.max.x+a.min.x)/2,l=(a.max.y+a.min.y)/2,u=Math.sqrt(Math.pow(a.max.x-s,2)+Math.pow(a.max.y-l,2));if(a.radius=u,"function"==typeof e.getCenter){var c=new Xt;a.center=e.getCenter(c)}else a.center=e.center;return a.margin=r,a},kb=function(e){w(n,e);var t=M(n);function n(e,i,r,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return b(this,n),a=t.call(this),(0,L.d)(c(a),"mapObjects",new Map),(0,L.d)(c(a),"currentMap"),(0,L.d)(c(a),"object",new bn),(0,L.d)(c(a),"_showCount",0),(0,L.d)(c(a),"_mapObjectsSortedByElevationDirty",!1),(0,L.d)(c(a),"expanded",!1),a.polygonMeshesById=e,a.mapView=r,a.renderer=i,a.loadOptions=s,a.addMap=a.addMap.bind(c(a)),a.setMap=a.setMap.bind(c(a)),a.removeMap=a.removeMap.bind(c(a)),a.removeAllMaps=a.removeAllMaps.bind(c(a)),a.loadMaps=a.loadMaps.bind(c(a)),a.expandMaps=a.expandMaps.bind(c(a)),a.contractMaps=a.contractMaps.bind(c(a)),a.expandPanBounds=a.expandPanBounds.bind(c(a)),a.loadOptions.taskScheduler=o,a}return x(n,[{key:"expandPanBounds",value:function(e){this.mapView.controls.panBounds=Ib(e,this.currentMap)}},{key:"addMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._mapObjectsSortedByElevationDirty=!0;var i=new Lb(e,this.polygonMeshesById,this._showCount,this.mapView,this.loadOptions);return i.on("flippablesNeedUpdating",(function(e){return t.publish("flippablesNeedUpdating",e)})),i.on("render",(function(e){return t.publish("render",e)})),i.on("updateMarkerPosition",(function(e){return t.publish("updateMarkerPosition",e)})),this.mapObjects.set(e.id,i),null==this.currentMap?(this.setMap(e),i.load().then(n)):Promise.resolve().then(n)}},{key:"addPersistentSetMapCallback",value:function(e){this.persistentSetMapCallbacks=Array.isArray(this.persistentSetMapCallbacks)&&this.persistentSetMapCallbacks||[],this.persistentSetMapCallbacks.push(e)}},{key:"setMap",value:function(e,t){var n,i=this;this.setMapCallbacks||(this.setMapCallbacks=[]);var o=Nd(e);return(n=this.setMapCallbacks).push.apply(n,q(this.persistentSetMapCallbacks||[])),t&&this.setMapCallbacks.push(t),new Promise((function(e,t){if(i.mapObjects.has(o)){if(null!=i.currentMap){var n=i.currentMap,a=n.labels,s=n.tooltips,l=n.markers;[].concat(q(a),q(s),q(l)).forEach((function(e){e.disable()})),i.object.remove(i.currentMap.object)}i.currentMap=i.mapObjects.get(o),i.currentMap.addPendingMapLoadedTask("resolveSetMap",(function(){e(),i.setMapCallbacks.forEach((function(e){return e()})),i.setMapCallbacks=[]}));var u=i.currentMap.mapClass.id,c=i.loadOptions&&i.loadOptions.zoomOverrides&&i.loadOptions.zoomOverrides.zoomMultiplier||7.9;i.mapView.controls.zoomFactor=i.mapView.getMapScale()/c,i.currentMap.load().then((function(e){var t;if(!i.currentMap||i.currentMap.mapClass.id===e.mapClass.id){e.seenByCamera||(e.seenByCamera=!0,e._popinChildObjects());var n=Ib(i.mapView.controls.panBounds,i.currentMap);i.mapView.controls.panBounds=n;var o=i.mapView.getZoomLevelForCurrentMap();i.mapView.controls.expandZoomLimits(o),i.object.add(i.currentMap.object),i.mapView.imageFlippingEnabled&&(null==(t=i.mapView.imageFlippingCache[i.currentMap.id])||t.forEach((function(t){var n=r(t,2),i=n[0],o=n[1];e.enableImageFlipping(i,o)}))),i.currentMap.textObjects.forEach((function(e){"function"==typeof e.show&&e.show()}));var a=i.currentMap,s=a.labels,l=a.tooltips,u=a.markers;[].concat(q(s),q(l),q(u)).forEach((function(e){e.enable()})),i.publish("flippablesNeedUpdating",!0),i.publish("render"),i.publish("set-map"),"function"==typeof i.mapView.onMapChanged&&i.mapView.onMapChanged(e.mapClass.id)}})).catch((function(e){console.error("Error loading map ",u,e)}))}else{var h={error:"Map does not exist"};console.error(h.error),i.setMapCallbacks.forEach((function(e){return e(h)})),i.setMapCallbacks=[],t(h)}}))}},{key:"mapObjectsSortedByElevation",get:function(){return!this._mapObjectsSortedByElevationDirty&&Array.isArray(this._mapObjectsSortedByElevation)||(this._mapObjectsSortedByElevation=Array.from(this.mapObjects.values()).sort((function(e,t){return t.mapClass.elevation-e.mapClass.elevation})),this._mapObjectsSortedByElevationDirty=!1),this._mapObjectsSortedByElevation}},{key:"loadMaps",value:function(e,t){for(var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=Nd(t),s=0;s<e.length;s++){var l=e[s],u=new Lb(l,this.polygonMeshesById,this._showCount,this.mapView,this.loadOptions);u.on("flippablesNeedUpdating",(function(e){return n.publish("flippablesNeedUpdating",e)})),u.on("render",(function(e){return n.publish("render",e)})),u.on("updateMarkerPosition",(function(e){return n.publish("updateMarkerPosition",e)})),u.on("texture-loaded",(function(e){return n.publish("texture-loaded",e)})),this.mapObjects.set(l.id,u),l.id===a&&(u.load().then((function(){n.mapView.resetCamera(),r()})).catch(o),this.setMap(l,i))}}},{key:"removeMap",value:function(e){this._mapObjectsSortedByElevationDirty=!0;var t=Nd(e);if(this.mapObjects.has(t)){var n=this.mapObjects.get(t);this.currentMap===n&&(this.currentMap=null),n.off("flippablesNeedUpdating"),n.off("render"),n.destroy(),this.mapObjects.delete(t)}this.renderer.renderLists.dispose()}},{key:"removeAllMaps",value:function(){this._mapObjectsSortedByElevationDirty=!0;var e,t=(0,C.Z)(this.mapObjects.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.destroy(),n=null}}catch(i){t.e(i)}finally{t.f()}this.mapObjects.clear()}},{key:"visibleMaps",get:function(){return this.mapObjectsSortedByElevation.filter((function(e){return e.visible}))}},{key:"getCompoundBoundingBoxPoints",value:function(e){this.mapView.controls.orbit.updateMatrixWorld();var t=this.mapView.controls.camera.matrixWorld,n=this.mapView.controls.camera.matrixWorldInverse,i=new Xt(1/0,1/0,1/0),r=new Xt(-1/0,-1/0,-1/0);e.forEach((function(e){e.applyMatrix4(n),Bd(Dd(e)).forEach((function(e){i.min(e),r.max(e)})),e.applyMatrix4(t)}));var o=Bd({min:i,max:r});return o.forEach((function(e){return e.applyMatrix4(t)})),o}},{key:"expandMaps",value:function(e,t){var n=this,i=g({focus:!1,debug:!1,rotation:0,duration:600},t);if(this.expanded)return Promise.resolve({maps:this.renderedMaps,projections:this.projections});if(!Array.isArray(e))return Promise.reject("Maps to expand are not an array");var r,o=e.map((function(e){var i="string"!=typeof e&&null!=e.id?e.id:e;if("string"!=typeof e&&!0===e.connection&&Array.isArray(e.maps)){var o=e.maps.map((function(e){var t="string"!=typeof e?e.id:e;return n.mapObjects.has(t)||(console.error("Expand maps: > Map ".concat(t," does not exist")),r="Expand maps: > Map ".concat(t," does not exist")),n.mapObjects.get(t)}));o=Ob(o);var a=new Cr(1,1,1);return!0===t.debug&&(a=new Cr(500,500,10)),{connection:!0,object:new rr(a,new yi({color:11184810})),connectionNodes:e.connectionNodes,mapClass:{elevation:o[0].mapClass.elevation},maps:o}}if(n.mapObjects.has(i))return n.mapObjects.get(i);console.error("Expand maps: > Map ".concat(i," does not exist")),r="Expand maps: Map ".concat(i," does not exist")}));if(null!=r)return Promise.reject(r);var a=(o=Ob(o)).map((function(e){return e.connection&&Array.isArray(e.maps)?Promise.all(e.maps.map((function(e){return e.load()}))):e.load()}));return Promise.all(a).then((function(){return n.expanded=!0,n.multiFloorView=new bx(n.mapView,n.object,o,i),n.multiFloorView.focusOnMaps(i)})).then((function(){return n.renderedMaps=o,n.projections=n.multiFloorView.projections,Promise.resolve({maps:o,projections:n.projections})}))}},{key:"contractMaps",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{focus:!1,debug:!1,duration:300};if(!this.expanded)return Promise.resolve();this.expanded=!1,this.multiFloorView.destroy(),this.object.add(this.currentMap.object),this.publish("render");var n=Ib(this.mapView.controls.panBounds,this);this.mapView.controls.panBounds=n;var i=this.mapView.getZoomLevelForObject(this.object);return this.mapView.controls.expandZoomLimits(i),new Promise((function(n){t.focus?e.mapView.focusOn({boundingBox:Dd(e.object),padding:e.mapView.cachedPadding,debug:t.debug,duration:t.duration,focusZoomFactor:1,callback:n,tilt:.3}):n()}))}},{key:"mapsFullyLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=q(this.mapObjects.values()).map((function(e){return e.connection&&Array.isArray(e.maps)?Promise.all(e.maps.map((function(e){return e._loaderPromise}))):e._loaderPromise}));return Promise.all(t).then(e)}},{key:"scrollMapsUp",value:function(){return this.multiFloorView?this.multiFloorView.scrollMapsUp():(console.warn("scrollMapsUp() not supported unless multifloor is active"),Promise.reject())}},{key:"scrollMapsDown",value:function(){return this.multiFloorView?this.multiFloorView.scrollMapsDown():(console.warn("scrollMapsDown() not supported unless multifloor is active"),Promise.reject())}},{key:"tiltMaps",value:function(e){this.multiFloorView&&(this.multiFloorView.mapTiltDegrees=e)}},{key:"resize",value:function(){null!=this.multiFloorView&&this.multiFloorView.resize()}},{key:"destroy",value:function(){this.removeAllMaps(),this.object.destroy()}}]),n}(Qv),Nb=kb;O();var Rb=2/(Math.sqrt(5)+1)*360/6,Db=function(){function e(){b(this,e),this._element=document.createElement("div"),this._titleElement=document.createElement("select"),this._minimizeElement=document.createElement("button"),this._performancePanelElement=document.createElement("div"),this._performanceEntries=new Map,this._sortedPerformanceEntryNames=[];var t=document.createElement("option");t.value="Performance",t.innerHTML="Performance",t.selected="selected",this._titleElement.appendChild(t),this._titleElement.addEventListener("change",this._onCategoryChanged.bind(this)),this._overviewGraph=new zb({width:320,height:128,seriesList:[]}),this._controlPanels=new Map,this._sortedControlPanelNames=[],this._minimized=!1,this._element.appendChild(this._titleElement),this._element.appendChild(this._minimizeElement),this._element.appendChild(this._performancePanelElement),this._performancePanelElement.appendChild(this._overviewGraph.element),this._layout(),this._minimizeElement.addEventListener("click",this._onMinimizeClicked.bind(this)),null==window.MappedinDebug&&(window.MappedinDebug={}),window.MappedinDebug.DebugUI=this}return x(e,[{key:"destroy",value:function(){var e,t=(0,C.Z)(this._performanceEntries.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(r){t.e(r)}finally{t.f()}var n,i=(0,C.Z)(this._controlPanels.values());try{for(i.s();!(n=i.n()).done;){n.value.destroy()}}catch(r){i.e(r)}finally{i.f()}this._controlPanels=null,this._performanceEntries=null,this._element=null,this._titleElement=null,this._minimizeElement=null,this._performancePanelElement=null,this._overviewGraph=null,Object.setPrototypeOf(this,null)}},{key:"element",get:function(){return this._element}},{key:"reportFramePerformance",value:function(e){var t=!1;for(var n in e){if(!this._performanceEntries.has(n)){var i=new Bb({name:n});this._performanceEntries.set(n,i),this._performancePanelElement.appendChild(i.element),this._sortedPerformanceEntryNames.push(n),this._sortedPerformanceEntryNames.sort(),t=!0}this._performanceEntries.get(n).report(e[n])}var r,o=(0,C.Z)(this._performanceEntries.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value;null==e[a]&&this._performanceEntries.get(a).report(0)}}catch(u){o.e(u)}finally{o.f()}t&&this._updateLayout();var s,l=(0,C.Z)(this._performanceEntries.values());try{for(l.s();!(s=l.n()).done;){if(s.value.series.changed()){this._overviewGraph.redraw();break}}}catch(u){l.e(u)}finally{l.f()}}},{key:"addDebugControls",value:function(e){for(var t in e){var n,i=(0,C.Z)(e[t]);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r.name,a=r.description,s=r.control;this._addDebugControl(t,o,a,s)}}catch(l){i.e(l)}finally{i.f()}this._controlPanels.get(t)._updateLayout()}this._updateLayout()}},{key:"addDebugControl",value:function(e,t,n,i){this._addDebugControl(e,t,n,i),this._updateLayout(),this._controlPanels.get(e)._updateLayout()}},{key:"removeDebugControls",value:function(e){for(var t in e){var n,i=(0,C.Z)(e[t]);try{for(i.s();!(n=i.n()).done;){var r=n.value;this._removeDebugControl(t,r)}}catch(o){i.e(o)}finally{i.f()}this._controlPanels.get(t)._updateLayout()}this._updateLayout()}},{key:"removeDebugControl",value:function(e,t){this._removeDebugControl(e,t),this._updateLayout(),this._controlPanels.get(e)._updateLayout()}},{key:"_addDebugControl",value:function(e,t,n,i){if(!this._controlPanels.has(e)){var r=new Tx({name:e});this._controlPanels.set(e,r),this._element.appendChild(r.element);var o=document.createElement("option");o.value=e,o.innerHTML=e;for(var a=this._titleElement.children,s=1;s<a.length&&!(a[s].value>e);++s);s===a.length?this._titleElement.appendChild(o):this._titleElement.insertBefore(o,a[s]),Object.assign(r.element.style,{display:"hidden",position:"absolute",left:"8px",right:"8px",top:"36px"})}this._controlPanels.get(e).addControl(t,n,i)}},{key:"_removeDebugControl",value:function(e,t){this._controlPanels.get(e).removeControl(t)}},{key:"_layout",value:function(){Object.assign(this._element.style,{display:"block",position:"absolute",right:"8px",top:"8px",width:"336px","font-family":"sans-serif",background:"rgba(255, 255, 255, 0.9)",outline:"1px solid white"}),Object.assign(this._titleElement.style,{display:"block",position:"absolute",left:"8px",top:"8px","font-size":"14px"}),Object.assign(this._minimizeElement.style,{display:"block",position:"absolute",right:"8px",top:"8px",width:"30px",height:"20px"}),Object.assign(this._performancePanelElement.style,{display:"block",position:"absolute",left:"8px",right:"8px",top:"36px"}),Object.assign(this._overviewGraph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:"128px",border:"1px solid white",outline:"1px solid #bbb"}),this._updateLayout()}},{key:"_updateLayout",value:function(){var e,t=this,n=null,i=(0,C.Z)(this._titleElement.children);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.selected&&(n=r);var o=r.selected&&!this._minimized;"Performance"===r.value?this._performancePanelElement.style.display=o?"block":"none":this._controlPanels.get(r.value).element.style.display=o?"block":"none"}}catch(u){i.e(u)}finally{i.f()}this._minimized?this._element.style.height="36px":"Performance"===n.value?this._element.style.height=28+80*this._performanceEntries.size+128+8+16+"px":this._element.style.height=28+this._controlPanels.get(n.value).height+8+"px";for(var a=0;a<this._sortedPerformanceEntryNames.length;++a){var s=this._sortedPerformanceEntryNames[a],l=this._performanceEntries.get(s);l.setHue(a*Rb),l.element.style.top=80*a+"px"}this._overviewGraph.setSeriesList(this._sortedPerformanceEntryNames.map((function(e){return t._performanceEntries.get(e).series}))),this._overviewGraph.element.style.top=80*this._performanceEntries.size+8+"px",this._minimizeElement.innerHTML=this._minimized?"\u21d5":"\u21d7"}},{key:"_onMinimizeClicked",value:function(){this._minimized=!this._minimized,this._updateLayout()}},{key:"_onCategoryChanged",value:function(){this._updateLayout()}}]),e}(),Bb=function(){function e(t){var n=t.name,i=t.hue;b(this,e),this._name=n,this.series=new Fb({hue:i}),this._graph=new zb({width:320,height:52,seriesList:[this.series]}),this._element=document.createElement("div"),this._nameElement=document.createElement("div"),this._hueElement=document.createElement("div"),this._lastFrameTimeElement=document.createElement("div"),this._element.appendChild(this._graph.element),this._element.appendChild(this._nameElement),this._element.appendChild(this._hueElement),this._element.appendChild(this._lastFrameTimeElement),this._layout()}return x(e,[{key:"destroy",value:function(){this._element.removeChild(this._graph.element),this._element.removeChild(this._nameElement),this._element.removeChild(this._hueElement),this._element.removeChild(this._lastFrameTimeElement),this._graph.destroy(),this._element=null,this._nameElement=null,this._hueElement=null,this._lastFrameTimeElement=null}},{key:"_layout",value:function(){Object.assign(this._element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:"72px"}),Object.assign(this._hueElement.style,{display:"block",position:"absolute",left:"-1px",top:"1px",width:"12px",height:"12px","background-color":Ub(this.series.hue,.3,.9),border:"1px solid "+Ub(this.series.hue,.9,.9),"border-radius":"2px"}),Object.assign(this._nameElement.style,{display:"block",position:"absolute",left:"18px",right:"0px",top:"0px",height:"16px","font-size":"12px","text-align":"left","vertical-align":"middle"}),Object.assign(this._lastFrameTimeElement.style,{display:"block",position:"absolute",left:"0px",right:"0px",top:"0px",height:"16px","font-size":"12px","text-align":"right","vertical-align":"middle"}),Object.assign(this._graph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",bottom:"0px","text-align":"right",border:"1px solid white",outline:"1px solid "+Ub(this.series.hue,.2,1)}),this._nameElement.innerHTML=this._name}},{key:"element",get:function(){return this._element}},{key:"report",value:function(e){if(this.series.report(e),this.series.changed()){if(this.series.length>=1){for(var t=0,n=0;n<this.series.length;++n)t+=this.series.at(n);var i=this.series.maximumValue();this._lastFrameTimeElement.innerHTML="\u222b "+(t/this.series.length).toFixed(2)+"ms, \u2912 "+i.toFixed(2)+" ms"}this._graph.redraw()}}},{key:"setHue",value:function(e){this.series.hue=e,this._graph.setSeriesList([this.series]),this._layout()}}]),e}(),zb=function(){function e(t){var n=t.seriesList,i=t.width,r=t.height;b(this,e),this._gradients=new Map,this._canvas=document.createElement("canvas"),this._layout(i,r),this._context=this._canvas.getContext("2d"),this.setSeriesList(n)}return x(e,[{key:"destroy",value:function(){this._gradients=null,this._canvas=null,this._context=null,Object.setPrototypeOf(this,null)}},{key:"_layout",value:function(e,t){Object.assign(this._canvas.style,{display:"block",position:"absolute",left:"0px",right:"0px",width:e+"px",height:t+"px"}),this._canvas.width=e*window.devicePixelRatio,this._canvas.height=t*window.devicePixelRatio}},{key:"element",get:function(){return this._canvas}},{key:"redraw",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);var e,t=0,n=(0,C.Z)(this._seriesList);try{for(n.s();!(e=n.n()).done;){var i=e.value;t=Math.max(t,i.maximumValue())}}catch(d){n.e(d)}finally{n.f()}var r,o=(0,C.Z)(this._seriesList);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.length>=1){this._context.beginPath();var s=1-(a.length-1)/(a.windowSize-1),l=1-a.at(0)/t;this._context.moveTo(s*this._canvas.width,l*this._canvas.height);for(var u=1;u<a.length;++u){var c=1-(a.length-1-u)/(a.windowSize-1),h=1-a.at(u)/t;this._context.lineTo(c*this._canvas.width,h*this._canvas.height)}this._context.strokeStyle=this._gradients.get(a),this._context.lineWidth=window.devicePixelRatio,this._context.stroke()}}}catch(d){o.e(d)}finally{o.f()}}},{key:"setSeriesList",value:function(e){this._seriesList=e;var t,n=(0,C.Z)(this._seriesList);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=this._context.createLinearGradient(0,0,0,this._canvas.height);r.addColorStop(0,Ub(i.hue,1,1)),r.addColorStop(1,Ub(i.hue,.5,.5)),this._gradients.set(i,r)}}catch(o){n.e(o)}finally{n.f()}}}]),e}(),Fb=function(){function e(t){var n=t.windowSize,i=void 0===n?60:n,r=t.totalAccumulationCount,o=void 0===r?5:r,a=t.hue,s=void 0===a?0:a;b(this,e),this.windowSize=i,this.hue=s,this._totalAccumulationCount=o,this._ringBuffer=new Array(this.windowSize).fill(0),this._ringBufferLength=0,this._ringBufferPointer=0,this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0}return x(e,[{key:"destroy",value:function(){}},{key:"report",value:function(e){this._accumulatorValue+=e,++this._accumulatorCount,this._changed=!1,this._accumulatorCount===this._totalAccumulationCount&&(this._push(this._accumulatorValue/this._totalAccumulationCount),this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0)}},{key:"at",value:function(e){if(!Number.isFinite(e)||e>=this._ringBufferLength||e<0)throw new Error("invalid index: "+e+" (length: "+this.length+")");var t=(this._ringBufferPointer+e-this._ringBufferLength+this.windowSize)%this.windowSize;return this._ringBuffer[t]}},{key:"_push",value:function(e){this._ringBuffer[this._ringBufferPointer]=e,++this._ringBufferLength,this._ringBufferLength>this.windowSize&&(this._ringBufferLength=this.windowSize),++this._ringBufferPointer,this._ringBufferPointer>=this.windowSize&&(this._ringBufferPointer=0)}},{key:"maximumValue",value:function(){for(var e=0,t=0;t<this._ringBufferLength;++t)e=Math.max(e,this.at(t));return e}},{key:"changed",value:function(){return this._changed}},{key:"length",get:function(){return this._ringBufferLength}}]),e}();function Ub(e,t,n,i){var r=e%360/60,o=0|r,a=r-o,s=n*(1-t),l=n*(1-t*a),u=n*(1-t*(1-a)),c=0,h=0,d=0;switch(o){case 0:c=n,h=u,d=s;break;case 1:c=l,h=n,d=s;break;case 2:c=s,h=n,d=u;break;case 3:c=s,h=l,d=n;break;case 4:c=u,h=s,d=n;break;case 5:c=n,h=s,d=l}return"#"+jb(c)+jb(h)+jb(d)}function jb(e){var t=(255*e|0).toString(16);return 1===t.length&&(t="0"+t),t}var Hb={},Vb={};Vb.CameraControls=Ix,Hb.CompositeVertexShader=kx,Hb.CompositeFragmentShader=Nx;var Gb,Wb=function(e){w(n,e);var t=M(n);function n(e,i){var r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;b(this,n),r=t.call(this),(0,L.f)(c(r),Gb,void 0),(0,L.d)(c(r),"imageFlippingCache",{}),(0,L.d)(c(r),"imageFlippingEnabled",!1),r.MapView=s,r.type="MapView3D",r.container=e,r.venue=i,window.MappedinDebug||(window.MappedinDebug={});var l=!1,u=a.backgroundColor||16777215,h=a.backgroundAlpha||1;r.colors={defaultHover2D:13421772,select:5022204,text:0,path:16745292,pathPulse:16777215,textSelect:16777215};var d="boolean"==typeof a.antialias?a.antialias:window.devicePixelRatio<=1;a.disableZoomOnMapSizeChange&&(l=!0),null!=a.loadOptions&&(r.loadOptions=a.loadOptions),r.smartCollisionEngine=Cp();var p=new nb({performance:!0}),f=new lf,m=new Rx({multiBufferRendering:"boolean"==typeof a.multiBufferRendering&&a.multiBufferRendering,alpha:!0,antialias:d,onWebGLContextCreationError:a.onWebGLContextCreationError,onWebGLContextLost:a.onWebGLContextLost,onWebGLContextRestored:function(){a.onWebGLContextRestored&&a.onWebGLContextRestored(),f.onWebGLContextRestored(),r.tryRendering()},onWebGLRendererError:a.onWebGLRendererError,backgroundColor:u,backgroundAlpha:h});r.renderer=m,r.highlightedPolygons={},r.scene=new _n,r.resolutionScale=window.devicePixelRatio;var v=new xr(40,r.container.clientWidth/r.container.clientHeight,50,1e5);r.cameraObject=v;var g=new bn;g.add(v);var y=new bn;y.add(g),r.scene.add(y),v.updateProjectionMatrix(),v.updateMatrixWorld(!0);var x=function(){m.render(gf.ALL,null,r.scene,v)};r.focusZoomFactor=1.1;var _=!1;function w(){_=!0,q=!0}function M(){_=!1,q=!0}var E=[],q=!0,T={};r.polygonMeshesById=T,r.textLabelsByPolygonId={},r.labelOrientationDelay=650;var S={};r.interactivePolygons=S;var P=new Nb(T,m.implementation.renderer,c(r),p,r.loadOptions);r.mapManager=P,r.mapManager=P,r.scene.add(P.object);var O=P.mapObjects;r.mapObjects=O,Object.defineProperty(c(r),"currentMap",{get:function(){return P.currentMap?P.currentMap.id:P.mapObjects.size>0?Array.from(O)[0].id:(console.error("No maps loaded."),null)}}),r.setMap=P.setMap,r.expandMaps=P.expandMaps.bind(P),r.tiltMaps=P.tiltMaps.bind(P),r.contractMaps=P.contractMaps.bind(P),Object.defineProperty(c(r),"mapsExpanded",{get:function(){return P.expanded}}),r.showEntireMap=function(e){e||(e={});var t,n=O.get(r.currentMap);return e.interactiveOnly?t=Object.keys(S):(t=n.object.children.map((function(e){return e.name})),!t.length&&n.elements&&(t=Object.keys(n.elements))),e.polygons=t,r.focusOn(e)},r.resetPanBounds=function(){var e=O.get(r.currentMap);r.controls.panBounds.min=r.controls.getPosition(),r.controls.panBounds.max=r.controls.getPosition();var t=e.boundingBox;t||(t=(new Nn).setFromObject(e.object),O.get(r.currentMap).boundingBox=t),P.expandPanBounds(t)},r.addMap=P.addMap,r.removeMap=P.removeMap,r.removeAllMaps=P.removeAllMaps;var I=m.domElement();r.currentInteractionEvent="";var k,N=function(){r.smartCollisionEngine.resize(r.container),P.resize(),r.canvasWidth=I.clientWidth,r.canvasHeight=I.clientHeight,r.tryRendering()};r.focusOnPolygon=function(e,t,n,i){return r.focusOn({polygons:[e],changeZoom:t,duration:n,curve:i})},r.focusOnPath=function(e,t,n,i,o){return r.focusOn({nodes:e,polygons:t,changeZoom:n,duration:i,curve:o})},r.focusOn=function(e){if(null!=e){var t,n=void 0===e.changeZoom||e.changeZoom;t=void 0!==e.duration?e.duration:"true"===A.env.TESTING?0:200;var o=void 0!==e.focusZoomFactor?e.focusZoomFactor:r.focusZoomFactor,a=e.curve,s=void 0!==e.horizontalFovFactor?e.horizontalFovFactor:1,l=void 0!==e.verticalFovFactor?e.verticalFovFactor:1,u=e.callback,c=void 0!==e.minZoom?e.minZoom:r.controls.minZoom,h=e.updateZoomLimits||!0,d=!1,p=[];if(e.nodes)for(var f=e.nodes,m=0,v=f.length;m<v;m++){var g=f[m];"string"==typeof g&&(g=Rd(g,i.nodes)),(null==g.map||g.map==r.currentMap)&&(p.push(r.convertTo3DMapPosition(g)),d=!0)}if(e.debug){k&&k.destroy(),k=new bn,r.scene.add(k);var y=new dr(100,100,100),x=new yi({color:65280})}if(e.points&&(e.points.forEach((function(e){return p.push(e)})),d=!0),e.boundingBox){var b=e.boundingBox,_=b.min,w=b.max;[new Xt(_.x,_.y,_.z),new Xt(_.x,w.y,_.z),new Xt(w.x,_.y,_.z),new Xt(w.x,w.y,_.z),new Xt(_.x,_.y,w.z),new Xt(_.x,w.y,w.z),new Xt(w.x,_.y,w.z),new Xt(w.x,w.y,w.z)].forEach((function(t){if(e.debug){var n=new rr(y,x);n.position.set(t.x,t.y,t.z),k.add(n)}p.push(t)})),d=!0}if(e.polygons){var M=e.polygons,E=O.get(r.currentMap),q=0;for(m=0,v=M.length;m<v;m++){var T=Nd(M[m]),S=E.objectsDictionary[T];if(S)if(q++,S.geometry.attributes){for(var P=S.geometry.attributes.position,C=0,L=P.count;C<L;C++){var I=new Xt;I.set(P.getX(C),P.getY(C),P.getZ(C)),p.push(I)}d=!0}else{for(var N=0,D=S.geometry.vertices.length;N<D;N++)p.push(S.geometry.vertices[N].clone());d=!0}else{var B=E.elements;if(B){var z=B[T];if(z){q++;var F=z.getBoundingBox();p.push(new Xt(F.min.x,F.min.y,0)),p.push(new Xt(F.min.x,F.max.y,0)),p.push(new Xt(F.max.x,F.min.y,0)),p.push(new Xt(F.max.x,F.max.y,0)),d=!0}}}}1===q&&(o=r.loadOptions&&r.loadOptions.zoomOverrides&&r.loadOptions.zoomOverrides.focusZoomFactorPolygon||o)}if(d){r.tryRendering();var U=e.padding||r.cachedPadding||{top:0,bottom:0,left:0,right:0},j=R(p,s,l,U,!0),H=r.getZoomLevelForCurrentMap(),V=j.zoom;h&&(r.controls.restrictZoomLimits(H),r.controls.expandZoomLimits(V*o));var G={position:j.position,tilt:e.tilt,rotation:e.rotation};return n&&(G.zoom=Math.max(j.zoom*o,c)),r.publish("focuson-begin"),r.controls.animateCamera(G,t,a,u)}return r.publish("focuson-begin"),r.controls.animateCamera({},t,a,u)}},r.CAMERA_FRAME_PADDING_SIDES=["top","bottom","left","right"],r.CAMERA_FRAME_PADDING_UNITS={PIXELS:"pixels",PORTIONS:"portions"};var R=function(e,t,n,i,o){(!n||isNaN(n))&&(n=1),(!t||isNaN(t))&&(t=1);var a={position:r.controls.getPosition(),zoom:r.controls.minZoom};if(null==e||0==e.length)return a;i||(i={top:0,bottom:0,left:0,right:0,type:r.CAMERA_FRAME_PADDING_UNITS.PIXELS});var s,l=(0,C.Z)(r.CAMERA_FRAME_PADDING_SIDES);try{for(l.s();!(s=l.n()).done;){var u=s.value;"number"!=typeof i[u]&&(i[u]=0)}}catch(ee){l.e(ee)}finally{l.f()}if(i.type||(i.type=r.CAMERA_FRAME_PADDING_UNITS.PIXELS),i.type===r.CAMERA_FRAME_PADDING_UNITS.PORTIONS&&(i={top:i.top*se,bottom:i.bottom*se,left:i.left*ae,right:i.right*ae,type:r.CAMERA_FRAME_PADDING_UNITS.PIXELS}),i.left+i.right>=ae||i.top+i.bottom>=se)return a;y.updateMatrixWorld();var c=v.matrixWorldInverse,h=v.fov*(Math.PI/180)/2,d=h*n,p=Math.atan(Math.tan(h)*(ae/se))*t;if(1==e.length){var f=e[0].clone();f.applyMatrix4(c);var m=r.controls.minZoom*Math.tan(p)*2,g=r.controls.minZoom*Math.tan(d)*2,x=new Xt(-((i.left-i.right)/2/ae)*m,(i.top-i.bottom)/2/se*g,0);return f.add(x),f.applyMatrix4(v.matrixWorld),a.position.x=f.x,a.position.y=f.y,a}for(var b,_=new Xt(1/0,1/0,1/0),w=new Xt(-1/0,-1/0,-1/0),M=0,E=e.length;M<E;M++)(b=e[M]).applyMatrix4(c),_.min(b),w.max(b);var q=w.x-_.x,T=w.y-_.y,S=ae-i.left-i.right,P=se-i.top-i.bottom,A=(w.x+_.x)/2,L=(w.y+_.y)/2,O=q/S,I=T/P,k=r.controls.getZoomScaledMin(),N=r.controls.getZoomScaledMax(),R=k*Math.tan(p)*2,D=N*Math.tan(p)*2,B=R/ae,z=D/ae,F=Math.max(O,I);o||(F=Math.min(Math.max(F,B),z));var U=S*F,j=P*F,H=A-U/2-i.left*F,V=L-j/2-i.bottom*F,G=(H+(A+U/2+i.right*F))/2,W=(V+(L+j/2+i.top*F))/2,X=Math.abs(G-H),Y=Math.abs(W-V),Z=X/Math.tan(p),J=Y/Math.tan(d),Q=new Xt;Q.set(G,W,w.z+Math.max(Z,J)),Q.applyMatrix4(v.matrixWorld);var K=new Xt;K.set(G,W,w.z),K.applyMatrix4(v.matrixWorld),K.sub(Q);var $=Q.z/K.z;return a.position.x=Q.x-K.x*$,a.position.y=Q.y-K.y*$,K.set(a.position.x,a.position.y,0),Q.sub(K),a.zoom=Q.length(),a};r.setPadding=function(e){r.cachedPadding=e||{top:0,bottom:0,left:0,right:0}},r.getZoomLevelForPolygon=function(e){var t=Nd(e),n=[],i=O.get(r.currentMap).objectsDictionary[t];if(i){for(var o=i.geometry.attributes?i.geometry.attributes.position:[],a=0,s=o.count;a<s;a++){var l=new Xt;l.set(o.getX(a),o.getY(a),o.getZ(a)),n.push(l)}return R(n,1,1,r.cachedPadding,!0).zoom}return r.controls.getZoom()},r.getZoomLevelForCurrentMap=function(){var e=O.get(r.currentMap).object;if(e){var t=O.get(r.currentMap).boundingBox;t||(t=(new Nn).setFromObject(e),O.get(r.currentMap).boundingBox=t);var n=[t.min.clone(),t.max.clone()];return R(n,1,1,r.cachedPadding,!0).zoom}return r.controls.getZoom()},r.getZoomLevelForObject=function(e){var t;t||(t=(new Nn).setFromObject(e));var n=[t.min.clone(),t.max.clone()];return R(n,1,1,0,!0).zoom},r.resetCamera=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={x:0,y:0};if(!e){var n=O.get(r.currentMap).boundingBox;n&&(t={x:(n.max.x-n.min.x)/2+n.min.x,y:(n.max.y-n.min.y)/2+n.min.y})}var i=r.getZoomLevelForCurrentMap();r.controls.expandZoomLimits(i),r.controls.setMulti(t,i,0,.6)},r.getPositionLatLon=function(e,t,n){n=null==n?r.currentMap:Nd(n);var i=O.get(n);if(null==i)throw new Error("Invalid map: "+n);return i.getPositionLatLon(e,t)};var D=function(e,t){e.style.transform="rotate("+(t+e._mRotationOffset)+"rad)"};r.lockNorth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;E.push(e),e._mRotationOffset=t,D(e,r.getNorth()+r.controls.getRotation())},r.unlockNorth=function(e){delete e._mRotationOffset,E=E.filter((function(t){return t!=e}))};var B=function(){},z=function(){};function F(e){return Math.trunc(100*e)/100}r.convertTo3DMapPosition=function(e){var t=O.get(e.map||r.currentMap).mapClass;return new Xt(e.x-t.width/2,-e.y+t.height/2,1)},r.getPositionPolygon=function(e){var t=Nd(e),n=e;null==e.map&&(n=function(e){return Rd(e,i.polygons)}(t));var r=O.get(n.map).objectsDictionary[t];if(r){r.geometry.computeBoundingBox();var o=r.geometry.boundingBox;return new Xt(o.min.x+(o.max.x-o.min.x)/2,o.min.y+(o.max.y-o.min.y)/2,o.max.z)}return null},r.getPositionNode=function(e){var t=e;return"string"==typeof t&&(t=Rd(e,i.nodes)),r.convertTo3DMapPosition(t)},r.hideAllLabels=function(){P.mapObjectsSortedByElevation.forEach((function(e){e.textObjects.forEach((function(e){return e.hide()})),e.colliders.forEach((function(e){e.disable()}))}))},r.smartCollisionEngine.init(e,(function(e){var t=e.position,n=e.mapId;v.updateProjectionMatrix(),v.updateMatrixWorld(!0);var i=O.get(n);if(null==i)return[0,0];var r=t.clone().applyMatrix4(i.object.matrix).project(v),o=(r.x+1)/2*ae-0,a=(1-r.y)/2*se-0;return{x:F(o),y:F(a)}})),r.setBackgroundColor=function(e,t){m.setBackgroundColor(e,t)};var U=new Nt;r.resolution=U;var j=function(e,t){m.setBufferSize(e,t),v.aspect=e/t,v.updateProjectionMatrix(),v.updateMatrixWorld(!0),U.x=e,U.y=t};r.setSize=function(e,t){ae=I.clientWidth,se=I.clientHeight;var n=Math.floor(e*r.resolutionScale),i=Math.floor(t*r.resolutionScale);if(!l){var o=I.width!==n?I.width/n:I.height/i;r.controls.setZoom(o*r.controls.getZoom())}j(n,i)};var H=function(){var e=ae=I.clientWidth,t=se=I.clientHeight,n=Math.floor(e*r.resolutionScale),i=Math.floor(t*r.resolutionScale);if(I.width!==n||I.height!==i){var o=I.width!==n?I.width/n:I.height/i;r.controls.setZoom(o*r.controls.getZoom()),j(n,i)}},V=new Kx({name:"updateMapVisibility",ordering:zx,callback:function(){var e,t=(0,C.Z)(P.mapObjectsSortedByElevation);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.visible?n.onVisible():n.onInvisible()}}catch(i){t.e(i)}finally{t.f()}}}),G=new Kx({name:"updateTweens",ordering:zx,callback:function(){return rx.default.update()}}),W=new Nt;r.cameraParameters=W;var X=new Kx({name:"camera",ordering:Fx,callback:function(){r.controls.update(),W.x=r.controls.getZoom(),W.y=r.controls.getTilt(),r.controls.isCameraMoving()&&r.publish(Xb.CAMERA_MOVING,W),r.publish(Xb.SET_BLUE_DOT_SIZE_FROM_ZOOM,W.x)}}),Y=new Kx({name:"rotateObjects",ordering:Ux,callback:function(){for(var e=r.getNorth()+r.controls.getRotation(),t=0,n=E.length;t<n;++t)D(E[t],e);ne(),ie(),q=!1}}),Z=new Kx({name:"renderAll",ordering:jx,callback:function(){null!=r.currentMap&&(!m.isAvailable()||(r.shouldMeasureCanvas&&H(),m.render(gf.ALL,null,r.scene,v),r.controls.postRender&&r.controls.postRender()))}});r.getMapScale=function(){return O.get(r.currentMap).getMapScale()},r.getNorth=function(){return O.get(r.currentMap).getNorth()};var J=new Kx({name:"renderAnimated",ordering:jx,supersededBy:[Z],callback:function(){null!=r.currentMap&&(!m.isAvailable()||(r.shouldMeasureCanvas&&H(),m.render(gf.ANIMATED,null,r.scene,v),r.controls.postRender&&r.controls.postRender()))}}),Q=new Kx({name:"renderAlwaysOnTop",ordering:jx,supersededBy:[Z],callback:function(){null!=r.currentMap&&(!m.isAvailable()||(r.shouldMeasureCanvas&&H(),m.render(gf.ALWAYS_ON_TOP,null,r.scene,v),r.controls.postRender&&r.controls.postRender()))}}),K=new Kx({name:"updateBlueDotPosition",ordering:Hx,callback:function(){r.publish(Xb.PUBLISH_BLUE_DOT)}}),$=new Kx({name:"updateColliders",ordering:Hx,frameCount:32,callback:function(){r.smartCollisionEngine.updatePosition()}}),ee=new Kx({name:"updateSmartCollisionEngine",ordering:Hx,frameCount:15,callback:function(){r.smartCollisionEngine.updateVisibility()}}),te=new Kx({name:"updateDebugUI",ordering:Vx,frameCount:1,callback:function(){var e,t={},n=(0,C.Z)(p.getUpdatesRunLastFrame().values());try{for(n.s();!(e=n.n()).done;){var i=e.value;t[i.name]=i.getLastFrameTime()}}catch(o){n.e(o)}finally{n.f()}r._debugUI.reportFramePerformance(t)}});r.tryRendering=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gf.ALL;if(null!=m)if(null!=r._debugUI&&p.scheduleUpdate(te),e===gf.ALL)p.scheduleUpdate(G),p.scheduleUpdate(V),p.scheduleUpdate(X),p.scheduleUpdate(Y),p.scheduleUpdate(Z),p.scheduleUpdate(K),p.scheduleUpdate($),p.scheduleUpdate(ee);else if(e===gf.ANIMATED)p.scheduleUpdate(G),p.scheduleUpdate(J);else if(e===gf.ALWAYS_ON_TOP)p.scheduleUpdate(G),p.scheduleUpdate(Q);else{if(e!==gf.TWEEN)throw new Error("invalid render task passed to tryRendering");p.scheduleUpdate(G)}};var ne=function(){var e=y.rotation.z;(_||q)&&P.visibleMaps.forEach((function(t){var n=e-t.object.rotation.z;t.imagesToFlip.forEach((function(e){return e.flipIfNeeded(n)}))}))},ie=function(){var e=y.rotation.z;(_||q)&&P.visibleMaps.forEach((function(t){var n=e-t.object.rotation.z;t.imagesToFlip.forEach((function(e){return e.flipIfNeeded(n)}))}))},re=function(e){e.addDebugControls({MapView3D:[{name:"Background Color",description:"The color of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new qx({current:new hi(16777215),onValueChanged:function(e){m.setBackgroundColor(e,m.backgroundAlpha),r.tryRendering()}})},{name:"Background Opacity",description:"The opacity of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new Mx({minimum:0,maximum:1,step:.01,current:m.backgroundAlpha,onValueChanged:function(e){m.setBackgroundColor(m.backgroundColor,e),r.tryRendering()}})}]})};r.showDebugUI=function(){null==r._debugUI&&(r._debugUI=new Db,e.appendChild(r._debugUI.element),re(r._debugUI),r.controls.addDebugControls(r._debugUI),r.tryRendering())},r.hideDebugUI=function(){null!=r._debugUI&&(e.removeChild(r._debugUI.element),r._debugUI.removeDebugControls({MapView3D:["Background Color","Background Opacity"]}),r.controls.removeDebugControls(r._debugUI),r._debugUI.destroy(),r._debugUI=null)};var oe=new rr(new Cr(1e6,1e6),new yi({color:0,visible:!1}));r.cameraPlane=oe,r.scene.add(oe),r.determineNewLabelSize=function(){var e=r.controls.getZoom(),t=r.controls.getZoomScaledMin(),n=(e-t)/(r.controls.getZoomScaledMax()-t);r.currentScale=n},e.appendChild(I),e.style.touchAction="auto",window.addEventListener("resize",N,!1),"function"==typeof ResizeObserver&&((0,L.g)(c(r),Gb,new ResizeObserver(N)),null==(o=(0,L.e)(c(r),Gb))||o.observe(e)),e.style.overflow="hidden",I.style.width="100%",I.style.height="100%",I.style.cursor="grab",r.canvasWidth=I.clientWidth,r.canvasHeight=I.clientHeight;var ae=r.canvasWidth,se=r.canvasHeight;r.shouldMeasureCanvas=!0,r.setBackgroundColor(u,h),j(Math.floor(ae*r.resolutionScale),Math.floor(se*r.resolutionScale)),x();var le=new fc(16777215,.3);le.position.set(-150,-150,350),r.scene.add(le);var ue=new ac(16777215,16777215,.77);r.scene.add(ue),r.controls=new Vb.CameraControls(v,I,r.scene,c(r)),r.controls.enableZoom=!0,r.INTERACTION_EVENTS=r.controls.INTERACTION_EVENTS;var ce=function(){return r.tryRendering()};r.controls.addEventListener(r.controls.CAMERA_EVENTS.CHANGE_EVENT.type,r.determineNewLabelSize),r.controls.addEventListener(r.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,r.smartCollisionEngine.makeCollidersDirty),r.controls.addEventListener(r.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,r.smartCollisionEngine.makeCollidersDirty),r.controls.addEventListener(r.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,r.smartCollisionEngine.makeCollidersDirty),r.controls.addEventListener(r.controls.CAMERA_EVENTS.CHANGE_EVENT.type,ce),r.controls.addEventListener(r.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,(function(){r.publish("user-zoom-begin")})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,(function(){r.publish("user-rotate-begin"),w()})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,(function(){r.publish("user-multi-begin"),r.publish(Xb.CLEAR_MOUSE),w()})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.PAN_START_EVENT.type,(function(){r.publish("user-pan-begin"),r.publish(Xb.CLEAR_MOUSE)})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,(function(){r.publish("user-zoom"),r.publish("user-zoom-begin")})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,(function(){r.publish("user-rotate"),M()})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,(function(){r.publish("user-multi-end"),M()})),r.controls.addEventListener(r.controls.CAMERA_EVENTS.PAN_END_EVENT.type,z),r.controls.addEventListener(r.controls.INTERACTION_EVENTS.USER_PAN_EVENT.type,(function(){r.currentInteractionEvent="user-pan"})),r.controls.addEventListener(r.controls.INTERACTION_EVENTS.USER_ROTATE_EVENT.type,(function(){r.currentInteractionEvent="user-rotate"})),r.controls.addEventListener(r.controls.INTERACTION_EVENTS.USER_DOLLY_EVENT.type,(function(){r.currentInteractionEvent="user-zoom"})),r.controls.addEventListener(r.controls.INTERACTION_EVENTS.USER_TILT_EVENT.type,(function(){r.currentInteractionEvent="user-tilt"})),r.controls.addEventListener(r.controls.INTERACTION_EVENTS.USER_ZOOM_EVENT.type,(function(){r.publish("user-zoom"),r.currentInteractionEvent="user-zoom"}));var he,de=i.maps,pe=i.venue.defaultMap;if(a&&a.firstMap&&(pe=Nd(a.firstMap)),pe)for(var fe=0,me=de.length;fe<me;++fe)if(de[fe].id===pe){he=de[fe].id;break}if(!he){var ve,ge=i.maps[0],ye=(0,C.Z)(i.maps.slice(1));try{for(ye.s();!(ve=ye.n()).done;){var xe=ve.value;ge=Math.abs(xe.elevation)===Math.abs(ge.elevation)?xe.elevation>ge.elevation?xe:ge:Math.abs(xe.elevation)<Math.abs(ge.elevation)?xe:ge}}catch(be){ye.e(be)}finally{ye.f()}he=ge}return P.on("set-map",r.smartCollisionEngine.makeCollidersDirty),P.on("render",ce),P.on("render:now",x),P.on("flippablesNeedUpdating",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];q=e})),P.on("texture-loaded",(function(e){r.tryRendering(),m.preloadTexture(e)})),P.loadMaps(de,he,a.onFirstMapLoaded,a.onDataLoaded,(function(){})),"function"==typeof a.onMapsFullyLoaded&&P.mapsFullyLoaded(a.onMapsFullyLoaded),r.setPadding(),r.destroy=function(){r.controls.dispose(),P.off("set-map"),P.off("render"),P.off("render:now"),P.off("flippablesNeedUpdating"),window.removeEventListener("resize",N,!1),(0,L.e)(c(r),Gb)&&(0,L.e)(c(r),Gb).disconnect(),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.CHANGE_EVENT.type,r.determineNewLabelSize),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.CHANGE_EVENT.type,ce),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,B),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,B),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,w),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,B),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,r.publish(Xb.CLEAR_MOUSE)),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,w),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.PAN_START_EVENT.type,B),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.PAN_START_EVENT.type,r.publish(Xb.CLEAR_MOUSE)),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,z),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,z),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,M),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,z),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,M),r.controls.removeEventListener(r.controls.CAMERA_EVENTS.PAN_END_EVENT.type,z),P.destroy(),r.scene.destroy(),S={},f.dispose(),p.destroy(),m.destroy(),e.removeChild(I),null!=r._debugUI&&r.hideDebugUI(),m=void 0},r}return x(n)}(lp);Gb=new WeakMap;var Xb,Yb=Wb;!function(e){e[e.CAMERA_MOVING=0]="CAMERA_MOVING",e[e.SET_BLUE_DOT_SIZE_FROM_ZOOM=1]="SET_BLUE_DOT_SIZE_FROM_ZOOM",e[e.PUBLISH_BLUE_DOT=2]="PUBLISH_BLUE_DOT",e[e.SET_STATE_SILENT=3]="SET_STATE_SILENT",e[e.BLUE_DOT_UPDATE_POSITION=4]="BLUE_DOT_UPDATE_POSITION",e[e.BLUE_DOT_SET_FOLLOWING=5]="BLUE_DOT_SET_FOLLOWING",e[e.CLEAR_MOUSE=6]="CLEAR_MOUSE"}(Xb||(Xb={}));var Zb,Jb,Qb,Kb,$b,e_,t_,n_,i_,r_,o_,a_,s_=function(e){w(n,e);var t=M(n);function n(e,i,r){var o;return b(this,n),o=t.call(this),(0,L.f)(c(o),Zb,ep.EXPLORE),(0,L.d)(c(o),"currentPath"),(0,L.f)(c(o),Jb,void 0),(0,L.f)(c(o),Qb,void 0),(0,L.f)(c(o),Kb,void 0),(0,L.f)(c(o),$b,void 0),(0,L.f)(c(o),e_,void 0),(0,L.f)(c(o),t_,void 0),(0,L.f)(c(o),n_,void 0),(0,L.f)(c(o),i_,void 0),(0,L.f)(c(o),r_,void 0),(0,L.f)(c(o),o_,void 0),(0,L.d)(c(o),"BlueDot"),(0,L.d)(c(o),"Journey"),(0,L.d)(c(o),"Camera"),(0,L.f)(c(o),a_,void 0),(0,L.d)(c(o),"options",{}),o.options=r||{},(0,L.g)(c(o),a_,new Yb(e,i,r,c(o))),(0,L.e)(c(o),a_).onMapClicked=function(e,t,n){o.publish(np.CLICK,{position:e,polygons:null!=i._polygonsById?t.map((function(e){return i._polygonsById[e]})).filter((function(e){return null!=e})):[],nearBlueDot:n})},(0,L.e)(c(o),a_).onPolygonClicked=function(e){o.publish(np.POLYGON_CLICKED,i.polygons.find((function(t){return t.id===e})))},(0,L.e)(c(o),a_).onNothingClicked=function(){o.publish(np.NOTHING_CLICKED)},(0,L.e)(c(o),a_).onMapChanged=function(){o.publish(np.MAP_CHANGED,o.currentMap)},o.Journey=new ky(c(o),(0,L.e)(c(o),a_)),o.Camera=new yp((0,L.e)(c(o),a_)),(0,L.g)(c(o),Qb,new mf(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),Kb,new Ef(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),$b,new Nv(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),o_,new ix(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),e_,new jv(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),t_,new Wv(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),r_,new Ky(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),n_,new ey(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),i_,new jy(c(o),(0,L.e)(c(o),a_))),(0,L.g)(c(o),Jb,new ay(c(o),(0,L.e)(c(o),a_))),o.BlueDot=new Jg(c(o),(0,L.e)(c(o),a_),(0,L.e)(c(o),Jb)),(0,L.e)(c(o),a_).on(3,(function(e){var t=e.state;(0,L.g)(c(o),Zb,t),o.publish(np.STATE_CHANGE,t)})),o}return x(n,[{key:"labelAllLocations",value:function(e){return(0,L.e)(this,Qb).labelAllLocations(e)}},{key:"labelPolygon",value:function(e,t){return(0,L.e)(this,Qb).labelPolygon(e,t)}},{key:"getNearestNodeByScreenCoordinates",value:function(e,t,n){var i="string"==typeof n?n:(null==n?void 0:n.id)||this.currentMap.id,r=(0,L.e)(this,a_).mapManager.mapObjects.get(i);if(null==r)throw new Error("getNodeByScreenCoordinates failed: map not found");(0,L.e)(this,a_).cameraObject.updateMatrixWorld(!0),(0,L.e)(this,a_).cameraObject.updateMatrix();var o=new Xt(e/(0,L.e)(this,a_).canvasWidth*2-1,-t/(0,L.e)(this,a_).canvasHeight*2+1,0);iy.setFromCamera(o,(0,L.e)(this,a_).cameraObject.clone());var a=iy.intersectObject((0,L.e)(this,a_).cameraPlane,!1)[0].point.applyMatrix4(r.object.matrix);return Mm(this.venue.nodes.filter((function(e){return e.map===i})),{x:a.x+r.mapClass.width/2,y:-a.y+r.mapClass.height/2})}},{key:"createThreeJSMarker",value:function(e){return(0,L.e)(this,o_).createThreeJSMarker(e)}},{key:"removeThreeJSMarker",value:function(e){return(0,L.e)(this,o_).removeThreeJSMarker(e)}},{key:"removeAllThreeJSMarkers",value:function(){return(0,L.e)(this,o_).removeAllThreeJSMarkers()}},{key:"setState",value:function(e){if(e!==(0,L.e)(this,Zb)){if(e===ep.EXPLORE)(0,L.e)(this,a_).publish(5,!1),(0,L.g)(this,Zb,e);else{if(e!==ep.FOLLOW)throw new Error("Unsupported State");(0,L.e)(this,a_).publish(5,!0),(0,L.g)(this,Zb,e)}this.publish(np.STATE_CHANGE,(0,L.e)(this,Zb))}}},{key:"state",get:function(){return(0,L.e)(this,Zb)}},{key:"venue",get:function(){return(0,L.e)(this,a_).venue}},{key:"container",get:function(){return(0,L.e)(this,a_).container}},{key:"currentMap",get:function(){var e=this;return(0,L.e)(this,a_).venue.maps.find((function(t){return(0,L.e)(e,a_).currentMap===t.id}))}},{key:"removeAllInteractivePolygons",value:function(){(0,L.e)(this,n_).removeAllInteractivePolygons()}},{key:"setMap",value:function(e){return(0,L.e)(this,a_).setMap(e)}},{key:"setPolygonColor",value:function(e,t,n,i){(0,L.e)(this,i_).setPolygonColor(e,t,n,i)}},{key:"clearPolygonColor",value:function(e){(0,L.e)(this,i_).clearPolygonColor(e)}},{key:"clearAllPolygonColors",value:function(){(0,L.e)(this,i_).clearAllPolygonColors()}},{key:"addInteractivePolygon",value:function(e){(0,L.e)(this,n_).addInteractivePolygon(e)}},{key:"addInteractivePolygonsForAllLocations",value:function(e){(0,L.e)(this,n_).addInteractivePolygonsForAllLocations(e)}},{key:"removeInteractivePolygon",value:function(e){(0,L.e)(this,n_).removeInteractivePolygon(e)}},{key:"createMarker",value:function(e,t,n){return(0,L.e)(this,$b).createMarker(e,t,n)}},{key:"removeMarker",value:function(e){(0,L.e)(this,$b).removeMarker(e)}},{key:"removeAllMarkers",value:function(){(0,L.e)(this,$b).removeAllMarkers()}},{key:"removeAllTooltips",value:function(){(0,L.e)(this,e_).removeAllTooltips()}},{key:"updateClosedStateForPolygon",value:function(e){(0,L.e)(this,r_).updateClosedStateForPolygon(e)}},{key:"openAllPolygons",value:function(){(0,L.e)(this,r_).openAllPolygons()}},{key:"removeAllLabels",value:function(){(0,L.e)(this,Qb).removeAllLabels()}},{key:"createTooltip",value:function(e,t){return(0,L.e)(this,e_).createTooltip(e,t)}},{key:"removeTooltip",value:function(e){(0,L.e)(this,e_).removeTooltip(e)}},{key:"enableImageFlippingForAllLocations",value:function(e){(0,L.e)(this,t_).enableImageFlippingForAllLocations(e)}},{key:"enableImageFlippingForPolygon",value:function(e){(0,L.e)(this,t_).enableImageFlippingForPolygon(e)}},{key:"disableImageFlippingForAllPolygons",value:function(){(0,L.e)(this,t_).disableImageFlippingForAllPolygons()}},{key:"drawPath",value:function(e,t){return(0,L.e)(this,Kb).drawPath(e,t)}},{key:"removePath",value:function(e){return(0,L.e)(this,Kb).removePath(e)}},{key:"removeAllPaths",value:function(){(0,L.e)(this,Kb).removeAllPaths()}},{key:"setBackgroundColor",value:function(e,t){(0,L.e)(this,a_).setBackgroundColor(e,t)}},{key:"setHoverColor",value:function(e){(0,L.e)(this,Jb).hoverColor=e}},{key:"tryRendering",value:function(e){(0,L.e)(this,a_).tryRendering(e)}},{key:"getPrimaryLocationForPolygon",value:function(e){return Gd(e,this.venue)}},{key:"destroy",value:function(){(0,L.e)(this,Qb).removeAllLabels(),(0,L.e)(this,$b).removeAllMarkers(),(0,L.e)(this,n_).removeAllInteractivePolygons(),(0,L.e)(this,o_).removeAllThreeJSMarkers(),(0,L.e)(this,e_).removeAllTooltips(),(0,L.e)(this,Kb).removeAllPaths(),(0,L.e)(this,a_).smartCollisionEngine.destroy(),(0,L.e)(this,r_).destroy(),(0,L.e)(this,a_).destroy()}}]),n}(lp);function l_(e,t,n){return new Promise((function(i,r){try{var o=new s_(e,t,g(g({},n),{},{onFirstMapLoaded:function(){i(o)}}))}catch(e){r(e)}}))}Zb=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,Kb=new WeakMap,$b=new WeakMap,e_=new WeakMap,t_=new WeakMap,n_=new WeakMap,i_=new WeakMap,r_=new WeakMap,o_=new WeakMap,a_=new WeakMap;qb.setAssetManager.bind(qb);var u_={venue:"mappedin-demo-mall",clientId:"5eab30aa91b055001a68e996",clientSecret:"RJyRXKcryCMy4erZqqCbuB1NbR66QTGNXVE0x3Pg6oCIlUR1"},c_=n(184),h_=function(t){var n=t.close,i=r((0,e.useState)([]),2),o=i[0],s=i[1],u=r((0,e.useState)([]),2),c=u[0],h=u[1],d=r((0,e.useState)(!0),2),p=d[0],f=d[1],m=(0,e.useRef)(),v=(0,e.useRef)(),g=(0,e.useRef)(),y=(0,e.useRef)(),x=(0,e.useRef)(),b=(0,e.useRef)();return(0,e.useEffect)((function(){a(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qv(u_);case 2:return t=e.sent,v.current=t,e.next=6,l_(m.current,v.current);case 6:n=e.sent,g.current=n,n.addInteractivePolygonsForAllLocations(),n.labelAllLocations({flatLabels:!0}),f(!1),s(t.maps.sort((function(e,t){return t.elevation-e.elevation})).map((function(e){return{id:e.id,name:e.name}}))),h(t.locations.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})).filter((function(e){return 0!==e.polygons.length})).map((function(e){return{id:e.id,name:e.name}}))),y.current.value=n.currentMap.id;case 14:case"end":return e.stop()}}),e)})))()}),[]),(0,c_.jsx)("div",{ref:m,children:p?(0,c_.jsx)("h1",{style:{textAlign:"center"},children:"Loading map..."}):(0,c_.jsxs)(c_.Fragment,{children:[(0,c_.jsx)("button",{onClick:n,style:{position:"fixed",left:0,top:0,padding:"5px"},children:"Close Map"}),(0,c_.jsx)("select",{ref:y,onChange:function(e){var t=e.target.value;g.current.setMap(t),g.current.labelAllLocations()},children:o.map((function(e){return(0,c_.jsx)("option",{value:e.id,children:e.name},e.id)}))}),(0,c_.jsx)("select",{ref:x,children:c.map((function(e){return(0,c_.jsx)("option",{value:e.id,children:e.name},e.id)}))}),(0,c_.jsx)("select",{ref:b,children:c.map((function(e){return(0,c_.jsx)("option",{value:e.id,children:e.name},e.id)}))}),(0,c_.jsx)("button",{onClick:function(){if(x.current.value&&b.current.value){var e=v.current.locations.find((function(e){return e.id===x.current.value})),t=v.current.locations.find((function(e){return e.id===b.current.value})),n=e.directionsTo(t);console.log("directions",n),g.current.Journey.draw(n)}else alert("Select Origin and Destiny")},children:"GO"})]})})},d_=function(t){var n=r((0,e.useState)(!0),2),i=n[0],o=n[1];return(0,c_.jsx)(c_.Fragment,{children:i?(0,c_.jsx)("button",{onClick:function(){o(!1)},children:"Show Map"}):(0,c_.jsx)(h_,{close:function(){o(!0)}})})};var p_=function(){return(0,c_.jsx)("div",{className:"App",children:(0,c_.jsx)(d_,{})})},f_=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),o(e),a(e)}))};t.render((0,c_.jsx)(e.StrictMode,{children:(0,c_.jsx)(p_,{})}),document.getElementById("root")),f_()}()}();
//# sourceMappingURL=main.e2aa0b5e.js.map